var TP=Object.defineProperty;var wP=(t,e,n)=>e in t?TP(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var Le=(t,e,n)=>(wP(t,typeof e!="symbol"?e+"":e,n),n);function CP(t,e){for(var n=0;n<e.length;n++){const r=e[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in t)){const o=Object.getOwnPropertyDescriptor(r,i);o&&Object.defineProperty(t,i,o.get?o:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const o of i)if(o.type==="childList")for(const s of o.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&r(s)}).observe(document,{childList:!0,subtree:!0});function n(i){const o={};return i.integrity&&(o.integrity=i.integrity),i.referrerPolicy&&(o.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?o.credentials="include":i.crossOrigin==="anonymous"?o.credentials="omit":o.credentials="same-origin",o}function r(i){if(i.ep)return;i.ep=!0;const o=n(i);fetch(i.href,o)}})();function Wu(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var O_={exports:{}},Gu={},M_={exports:{}},Se={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hl=Symbol.for("react.element"),PP=Symbol.for("react.portal"),RP=Symbol.for("react.fragment"),IP=Symbol.for("react.strict_mode"),AP=Symbol.for("react.profiler"),kP=Symbol.for("react.provider"),bP=Symbol.for("react.context"),xP=Symbol.for("react.forward_ref"),DP=Symbol.for("react.suspense"),NP=Symbol.for("react.memo"),OP=Symbol.for("react.lazy"),oy=Symbol.iterator;function MP(t){return t===null||typeof t!="object"?null:(t=oy&&t[oy]||t["@@iterator"],typeof t=="function"?t:null)}var j_={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},L_=Object.assign,F_={};function vs(t,e,n){this.props=t,this.context=e,this.refs=F_,this.updater=n||j_}vs.prototype.isReactComponent={};vs.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};vs.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function V_(){}V_.prototype=vs.prototype;function Up(t,e,n){this.props=t,this.context=e,this.refs=F_,this.updater=n||j_}var $p=Up.prototype=new V_;$p.constructor=Up;L_($p,vs.prototype);$p.isPureReactComponent=!0;var sy=Array.isArray,U_=Object.prototype.hasOwnProperty,Bp={current:null},$_={key:!0,ref:!0,__self:!0,__source:!0};function B_(t,e,n){var r,i={},o=null,s=null;if(e!=null)for(r in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(o=""+e.key),e)U_.call(e,r)&&!$_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:hl,type:t,key:o,ref:s,props:i,_owner:Bp.current}}function jP(t,e){return{$$typeof:hl,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function zp(t){return typeof t=="object"&&t!==null&&t.$$typeof===hl}function LP(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ay=/\/+/g;function Gd(t,e){return typeof t=="object"&&t!==null&&t.key!=null?LP(""+t.key):e.toString(36)}function Sc(t,e,n,r,i){var o=typeof t;(o==="undefined"||o==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(o){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case hl:case PP:s=!0}}if(s)return s=t,i=i(s),t=r===""?"."+Gd(s,0):r,sy(i)?(n="",t!=null&&(n=t.replace(ay,"$&/")+"/"),Sc(i,e,n,"",function(c){return c})):i!=null&&(zp(i)&&(i=jP(i,n+(!i.key||s&&s.key===i.key?"":(""+i.key).replace(ay,"$&/")+"/")+t)),e.push(i)),1;if(s=0,r=r===""?".":r+":",sy(t))for(var l=0;l<t.length;l++){o=t[l];var a=r+Gd(o,l);s+=Sc(o,e,n,a,i)}else if(a=MP(t),typeof a=="function")for(t=a.call(t),l=0;!(o=t.next()).done;)o=o.value,a=r+Gd(o,l++),s+=Sc(o,e,n,a,i);else if(o==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function zl(t,e,n){if(t==null)return t;var r=[],i=0;return Sc(t,r,"","",function(o){return e.call(n,o,i++)}),r}function FP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var cn={current:null},Tc={transition:null},VP={ReactCurrentDispatcher:cn,ReactCurrentBatchConfig:Tc,ReactCurrentOwner:Bp};Se.Children={map:zl,forEach:function(t,e,n){zl(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zl(t,function(){e++}),e},toArray:function(t){return zl(t,function(e){return e})||[]},only:function(t){if(!zp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};Se.Component=vs;Se.Fragment=RP;Se.Profiler=AP;Se.PureComponent=Up;Se.StrictMode=IP;Se.Suspense=DP;Se.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=VP;Se.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=L_({},t.props),i=t.key,o=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(o=e.ref,s=Bp.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)U_.call(e,a)&&!$_.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:hl,type:t.type,key:i,ref:o,props:r,_owner:s}};Se.createContext=function(t){return t={$$typeof:bP,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kP,_context:t},t.Consumer=t};Se.createElement=B_;Se.createFactory=function(t){var e=B_.bind(null,t);return e.type=t,e};Se.createRef=function(){return{current:null}};Se.forwardRef=function(t){return{$$typeof:xP,render:t}};Se.isValidElement=zp;Se.lazy=function(t){return{$$typeof:OP,_payload:{_status:-1,_result:t},_init:FP}};Se.memo=function(t,e){return{$$typeof:NP,type:t,compare:e===void 0?null:e}};Se.startTransition=function(t){var e=Tc.transition;Tc.transition={};try{t()}finally{Tc.transition=e}};Se.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};Se.useCallback=function(t,e){return cn.current.useCallback(t,e)};Se.useContext=function(t){return cn.current.useContext(t)};Se.useDebugValue=function(){};Se.useDeferredValue=function(t){return cn.current.useDeferredValue(t)};Se.useEffect=function(t,e){return cn.current.useEffect(t,e)};Se.useId=function(){return cn.current.useId()};Se.useImperativeHandle=function(t,e,n){return cn.current.useImperativeHandle(t,e,n)};Se.useInsertionEffect=function(t,e){return cn.current.useInsertionEffect(t,e)};Se.useLayoutEffect=function(t,e){return cn.current.useLayoutEffect(t,e)};Se.useMemo=function(t,e){return cn.current.useMemo(t,e)};Se.useReducer=function(t,e,n){return cn.current.useReducer(t,e,n)};Se.useRef=function(t){return cn.current.useRef(t)};Se.useState=function(t){return cn.current.useState(t)};Se.useSyncExternalStore=function(t,e,n){return cn.current.useSyncExternalStore(t,e,n)};Se.useTransition=function(){return cn.current.useTransition()};Se.version="18.2.0";M_.exports=Se;var k=M_.exports;const UP=Wu(k),$P=CP({__proto__:null,default:UP},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BP=k,zP=Symbol.for("react.element"),qP=Symbol.for("react.fragment"),HP=Object.prototype.hasOwnProperty,WP=BP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,GP={key:!0,ref:!0,__self:!0,__source:!0};function z_(t,e,n){var r,i={},o=null,s=null;n!==void 0&&(o=""+n),e.key!==void 0&&(o=""+e.key),e.ref!==void 0&&(s=e.ref);for(r in e)HP.call(e,r)&&!GP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:zP,type:t,key:o,ref:s,props:i,_owner:WP.current}}Gu.Fragment=qP;Gu.jsx=z_;Gu.jsxs=z_;O_.exports=Gu;var h=O_.exports,Kh={},q_={exports:{}},Pn={},H_={exports:{}},W_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,F){var $=O.length;O.push(F);e:for(;0<$;){var de=$-1>>>1,fe=O[de];if(0<i(fe,F))O[de]=F,O[$]=fe,$=de;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var F=O[0],$=O.pop();if($!==F){O[0]=$;e:for(var de=0,fe=O.length,ye=fe>>>1;de<ye;){var ae=2*(de+1)-1,Ue=O[ae],Me=ae+1,je=O[Me];if(0>i(Ue,$))Me<fe&&0>i(je,Ue)?(O[de]=je,O[Me]=$,de=Me):(O[de]=Ue,O[ae]=$,de=ae);else if(Me<fe&&0>i(je,$))O[de]=je,O[Me]=$,de=Me;else break e}}return F}function i(O,F){var $=O.sortIndex-F.sortIndex;return $!==0?$:O.id-F.id}if(typeof performance=="object"&&typeof performance.now=="function"){var o=performance;t.unstable_now=function(){return o.now()}}else{var s=Date,l=s.now();t.unstable_now=function(){return s.now()-l}}var a=[],c=[],u=1,d=null,f=3,g=!1,p=!1,E=!1,T=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,m=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function S(O){for(var F=n(c);F!==null;){if(F.callback===null)r(c);else if(F.startTime<=O)r(c),F.sortIndex=F.expirationTime,e(a,F);else break;F=n(c)}}function _(O){if(E=!1,S(O),!p)if(n(a)!==null)p=!0,ve(C);else{var F=n(c);F!==null&&be(_,F.startTime-O)}}function C(O,F){p=!1,E&&(E=!1,v(y),y=-1),g=!0;var $=f;try{for(S(F),d=n(a);d!==null&&(!(d.expirationTime>F)||O&&!Y());){var de=d.callback;if(typeof de=="function"){d.callback=null,f=d.priorityLevel;var fe=de(d.expirationTime<=F);F=t.unstable_now(),typeof fe=="function"?d.callback=fe:d===n(a)&&r(a),S(F)}else r(a);d=n(a)}if(d!==null)var ye=!0;else{var ae=n(c);ae!==null&&be(_,ae.startTime-F),ye=!1}return ye}finally{d=null,f=$,g=!1}}var R=!1,b=null,y=-1,I=5,w=-1;function Y(){return!(t.unstable_now()-w<I)}function q(){if(b!==null){var O=t.unstable_now();w=O;var F=!0;try{F=b(!0,O)}finally{F?me():(R=!1,b=null)}}else R=!1}var me;if(typeof m=="function")me=function(){m(q)};else if(typeof MessageChannel<"u"){var ge=new MessageChannel,Z=ge.port2;ge.port1.onmessage=q,me=function(){Z.postMessage(null)}}else me=function(){T(q,0)};function ve(O){b=O,R||(R=!0,me())}function be(O,F){y=T(function(){O(t.unstable_now())},F)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||g||(p=!0,ve(C))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var F=3;break;default:F=f}var $=f;f=F;try{return O()}finally{f=$}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,F){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var $=f;f=O;try{return F()}finally{f=$}},t.unstable_scheduleCallback=function(O,F,$){var de=t.unstable_now();switch(typeof $=="object"&&$!==null?($=$.delay,$=typeof $=="number"&&0<$?de+$:de):$=de,O){case 1:var fe=-1;break;case 2:fe=250;break;case 5:fe=1073741823;break;case 4:fe=1e4;break;default:fe=5e3}return fe=$+fe,O={id:u++,callback:F,priorityLevel:O,startTime:$,expirationTime:fe,sortIndex:-1},$>de?(O.sortIndex=$,e(c,O),n(a)===null&&O===n(c)&&(E?(v(y),y=-1):E=!0,be(_,$-de))):(O.sortIndex=fe,e(a,O),p||g||(p=!0,ve(C))),O},t.unstable_shouldYield=Y,t.unstable_wrapCallback=function(O){var F=f;return function(){var $=f;f=F;try{return O.apply(this,arguments)}finally{f=$}}}})(W_);H_.exports=W_;var KP=H_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var G_=k,wn=KP;function L(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var K_=new Set,Ia={};function uo(t,e){Zo(t,e),Zo(t+"Capture",e)}function Zo(t,e){for(Ia[t]=e,t=0;t<e.length;t++)K_.add(e[t])}var jr=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Jh=Object.prototype.hasOwnProperty,JP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,ly={},cy={};function QP(t){return Jh.call(cy,t)?!0:Jh.call(ly,t)?!1:JP.test(t)?cy[t]=!0:(ly[t]=!0,!1)}function YP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function XP(t,e,n,r){if(e===null||typeof e>"u"||YP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function un(t,e,n,r,i,o,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=o,this.removeEmptyString=s}var Lt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){Lt[t]=new un(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];Lt[e]=new un(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){Lt[t]=new un(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){Lt[t]=new un(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){Lt[t]=new un(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){Lt[t]=new un(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){Lt[t]=new un(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){Lt[t]=new un(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){Lt[t]=new un(t,5,!1,t.toLowerCase(),null,!1,!1)});var qp=/[\-:]([a-z])/g;function Hp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(qp,Hp);Lt[e]=new un(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(qp,Hp);Lt[e]=new un(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(qp,Hp);Lt[e]=new un(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){Lt[t]=new un(t,1,!1,t.toLowerCase(),null,!1,!1)});Lt.xlinkHref=new un("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){Lt[t]=new un(t,1,!1,t.toLowerCase(),null,!0,!0)});function Wp(t,e,n,r){var i=Lt.hasOwnProperty(e)?Lt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(XP(e,n,i,r)&&(n=null),r||i===null?QP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var Hr=G_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,ql=Symbol.for("react.element"),Co=Symbol.for("react.portal"),Po=Symbol.for("react.fragment"),Gp=Symbol.for("react.strict_mode"),Qh=Symbol.for("react.profiler"),J_=Symbol.for("react.provider"),Q_=Symbol.for("react.context"),Kp=Symbol.for("react.forward_ref"),Yh=Symbol.for("react.suspense"),Xh=Symbol.for("react.suspense_list"),Jp=Symbol.for("react.memo"),ti=Symbol.for("react.lazy"),Y_=Symbol.for("react.offscreen"),uy=Symbol.iterator;function Ns(t){return t===null||typeof t!="object"?null:(t=uy&&t[uy]||t["@@iterator"],typeof t=="function"?t:null)}var rt=Object.assign,Kd;function Qs(t){if(Kd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Kd=e&&e[1]||""}return`
`+Kd+t}var Jd=!1;function Qd(t,e){if(!t||Jd)return"";Jd=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),o=r.stack.split(`
`),s=i.length-1,l=o.length-1;1<=s&&0<=l&&i[s]!==o[l];)l--;for(;1<=s&&0<=l;s--,l--)if(i[s]!==o[l]){if(s!==1||l!==1)do if(s--,l--,0>l||i[s]!==o[l]){var a=`
`+i[s].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=s&&0<=l);break}}}finally{Jd=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Qs(t):""}function ZP(t){switch(t.tag){case 5:return Qs(t.type);case 16:return Qs("Lazy");case 13:return Qs("Suspense");case 19:return Qs("SuspenseList");case 0:case 2:case 15:return t=Qd(t.type,!1),t;case 11:return t=Qd(t.type.render,!1),t;case 1:return t=Qd(t.type,!0),t;default:return""}}function Zh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Po:return"Fragment";case Co:return"Portal";case Qh:return"Profiler";case Gp:return"StrictMode";case Yh:return"Suspense";case Xh:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Q_:return(t.displayName||"Context")+".Consumer";case J_:return(t._context.displayName||"Context")+".Provider";case Kp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Jp:return e=t.displayName||null,e!==null?e:Zh(t.type)||"Memo";case ti:e=t._payload,t=t._init;try{return Zh(t(e))}catch{}}return null}function eR(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zh(e);case 8:return e===Gp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Ci(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function X_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function tR(t){var e=X_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,o=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(s){r=""+s,o.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(s){r=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Hl(t){t._valueTracker||(t._valueTracker=tR(t))}function Z_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=X_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function Kc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ef(t,e){var n=e.checked;return rt({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function dy(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=Ci(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function e1(t,e){e=e.checked,e!=null&&Wp(t,"checked",e,!1)}function tf(t,e){e1(t,e);var n=Ci(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?nf(t,e.type,n):e.hasOwnProperty("defaultValue")&&nf(t,e.type,Ci(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function hy(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function nf(t,e,n){(e!=="number"||Kc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var Ys=Array.isArray;function Uo(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+Ci(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function rf(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(L(91));return rt({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function fy(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(L(92));if(Ys(n)){if(1<n.length)throw Error(L(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Ci(n)}}function t1(t,e){var n=Ci(e.value),r=Ci(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function py(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function n1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function of(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?n1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Wl,r1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Wl=Wl||document.createElement("div"),Wl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Wl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Aa(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ca={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},nR=["Webkit","ms","Moz","O"];Object.keys(ca).forEach(function(t){nR.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ca[e]=ca[t]})});function i1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ca.hasOwnProperty(t)&&ca[t]?(""+e).trim():e+"px"}function o1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=i1(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var rR=rt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function sf(t,e){if(e){if(rR[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(L(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(L(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(L(61))}if(e.style!=null&&typeof e.style!="object")throw Error(L(62))}}function af(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var lf=null;function Qp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var cf=null,$o=null,Bo=null;function my(t){if(t=ml(t)){if(typeof cf!="function")throw Error(L(280));var e=t.stateNode;e&&(e=Xu(e),cf(t.stateNode,t.type,e))}}function s1(t){$o?Bo?Bo.push(t):Bo=[t]:$o=t}function a1(){if($o){var t=$o,e=Bo;if(Bo=$o=null,my(t),e)for(t=0;t<e.length;t++)my(e[t])}}function l1(t,e){return t(e)}function c1(){}var Yd=!1;function u1(t,e,n){if(Yd)return t(e,n);Yd=!0;try{return l1(t,e,n)}finally{Yd=!1,($o!==null||Bo!==null)&&(c1(),a1())}}function ka(t,e){var n=t.stateNode;if(n===null)return null;var r=Xu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(L(231,e,typeof n));return n}var uf=!1;if(jr)try{var Os={};Object.defineProperty(Os,"passive",{get:function(){uf=!0}}),window.addEventListener("test",Os,Os),window.removeEventListener("test",Os,Os)}catch{uf=!1}function iR(t,e,n,r,i,o,s,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var ua=!1,Jc=null,Qc=!1,df=null,oR={onError:function(t){ua=!0,Jc=t}};function sR(t,e,n,r,i,o,s,l,a){ua=!1,Jc=null,iR.apply(oR,arguments)}function aR(t,e,n,r,i,o,s,l,a){if(sR.apply(this,arguments),ua){if(ua){var c=Jc;ua=!1,Jc=null}else throw Error(L(198));Qc||(Qc=!0,df=c)}}function ho(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function d1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function gy(t){if(ho(t)!==t)throw Error(L(188))}function lR(t){var e=t.alternate;if(!e){if(e=ho(t),e===null)throw Error(L(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var o=i.alternate;if(o===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===o.child){for(o=i.child;o;){if(o===n)return gy(i),t;if(o===r)return gy(i),e;o=o.sibling}throw Error(L(188))}if(n.return!==r.return)n=i,r=o;else{for(var s=!1,l=i.child;l;){if(l===n){s=!0,n=i,r=o;break}if(l===r){s=!0,r=i,n=o;break}l=l.sibling}if(!s){for(l=o.child;l;){if(l===n){s=!0,n=o,r=i;break}if(l===r){s=!0,r=o,n=i;break}l=l.sibling}if(!s)throw Error(L(189))}}if(n.alternate!==r)throw Error(L(190))}if(n.tag!==3)throw Error(L(188));return n.stateNode.current===n?t:e}function h1(t){return t=lR(t),t!==null?f1(t):null}function f1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=f1(t);if(e!==null)return e;t=t.sibling}return null}var p1=wn.unstable_scheduleCallback,yy=wn.unstable_cancelCallback,cR=wn.unstable_shouldYield,uR=wn.unstable_requestPaint,ft=wn.unstable_now,dR=wn.unstable_getCurrentPriorityLevel,Yp=wn.unstable_ImmediatePriority,m1=wn.unstable_UserBlockingPriority,Yc=wn.unstable_NormalPriority,hR=wn.unstable_LowPriority,g1=wn.unstable_IdlePriority,Ku=null,pr=null;function fR(t){if(pr&&typeof pr.onCommitFiberRoot=="function")try{pr.onCommitFiberRoot(Ku,t,void 0,(t.current.flags&128)===128)}catch{}}var Jn=Math.clz32?Math.clz32:gR,pR=Math.log,mR=Math.LN2;function gR(t){return t>>>=0,t===0?32:31-(pR(t)/mR|0)|0}var Gl=64,Kl=4194304;function Xs(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Xc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,o=t.pingedLanes,s=n&268435455;if(s!==0){var l=s&~i;l!==0?r=Xs(l):(o&=s,o!==0&&(r=Xs(o)))}else s=n&~i,s!==0?r=Xs(s):o!==0&&(r=Xs(o));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,o=e&-e,i>=o||i===16&&(o&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Jn(e),i=1<<n,r|=t[n],e&=~i;return r}function yR(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function vR(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,o=t.pendingLanes;0<o;){var s=31-Jn(o),l=1<<s,a=i[s];a===-1?(!(l&n)||l&r)&&(i[s]=yR(l,e)):a<=e&&(t.expiredLanes|=l),o&=~l}}function hf(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function y1(){var t=Gl;return Gl<<=1,!(Gl&4194240)&&(Gl=64),t}function Xd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function fl(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Jn(e),t[e]=n}function _R(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Jn(n),o=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~o}}function Xp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Jn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var Fe=0;function v1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var _1,Zp,E1,S1,T1,ff=!1,Jl=[],hi=null,fi=null,pi=null,ba=new Map,xa=new Map,ri=[],ER="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function vy(t,e){switch(t){case"focusin":case"focusout":hi=null;break;case"dragenter":case"dragleave":fi=null;break;case"mouseover":case"mouseout":pi=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":xa.delete(e.pointerId)}}function Ms(t,e,n,r,i,o){return t===null||t.nativeEvent!==o?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:o,targetContainers:[i]},e!==null&&(e=ml(e),e!==null&&Zp(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function SR(t,e,n,r,i){switch(e){case"focusin":return hi=Ms(hi,t,e,n,r,i),!0;case"dragenter":return fi=Ms(fi,t,e,n,r,i),!0;case"mouseover":return pi=Ms(pi,t,e,n,r,i),!0;case"pointerover":var o=i.pointerId;return ba.set(o,Ms(ba.get(o)||null,t,e,n,r,i)),!0;case"gotpointercapture":return o=i.pointerId,xa.set(o,Ms(xa.get(o)||null,t,e,n,r,i)),!0}return!1}function w1(t){var e=Ui(t.target);if(e!==null){var n=ho(e);if(n!==null){if(e=n.tag,e===13){if(e=d1(n),e!==null){t.blockedOn=e,T1(t.priority,function(){E1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function wc(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=pf(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);lf=r,n.target.dispatchEvent(r),lf=null}else return e=ml(n),e!==null&&Zp(e),t.blockedOn=n,!1;e.shift()}return!0}function _y(t,e,n){wc(t)&&n.delete(e)}function TR(){ff=!1,hi!==null&&wc(hi)&&(hi=null),fi!==null&&wc(fi)&&(fi=null),pi!==null&&wc(pi)&&(pi=null),ba.forEach(_y),xa.forEach(_y)}function js(t,e){t.blockedOn===e&&(t.blockedOn=null,ff||(ff=!0,wn.unstable_scheduleCallback(wn.unstable_NormalPriority,TR)))}function Da(t){function e(i){return js(i,t)}if(0<Jl.length){js(Jl[0],t);for(var n=1;n<Jl.length;n++){var r=Jl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(hi!==null&&js(hi,t),fi!==null&&js(fi,t),pi!==null&&js(pi,t),ba.forEach(e),xa.forEach(e),n=0;n<ri.length;n++)r=ri[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<ri.length&&(n=ri[0],n.blockedOn===null);)w1(n),n.blockedOn===null&&ri.shift()}var zo=Hr.ReactCurrentBatchConfig,Zc=!0;function wR(t,e,n,r){var i=Fe,o=zo.transition;zo.transition=null;try{Fe=1,em(t,e,n,r)}finally{Fe=i,zo.transition=o}}function CR(t,e,n,r){var i=Fe,o=zo.transition;zo.transition=null;try{Fe=4,em(t,e,n,r)}finally{Fe=i,zo.transition=o}}function em(t,e,n,r){if(Zc){var i=pf(t,e,n,r);if(i===null)lh(t,e,r,eu,n),vy(t,r);else if(SR(i,t,e,n,r))r.stopPropagation();else if(vy(t,r),e&4&&-1<ER.indexOf(t)){for(;i!==null;){var o=ml(i);if(o!==null&&_1(o),o=pf(t,e,n,r),o===null&&lh(t,e,r,eu,n),o===i)break;i=o}i!==null&&r.stopPropagation()}else lh(t,e,r,null,n)}}var eu=null;function pf(t,e,n,r){if(eu=null,t=Qp(r),t=Ui(t),t!==null)if(e=ho(t),e===null)t=null;else if(n=e.tag,n===13){if(t=d1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return eu=t,null}function C1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(dR()){case Yp:return 1;case m1:return 4;case Yc:case hR:return 16;case g1:return 536870912;default:return 16}default:return 16}}var ci=null,tm=null,Cc=null;function P1(){if(Cc)return Cc;var t,e=tm,n=e.length,r,i="value"in ci?ci.value:ci.textContent,o=i.length;for(t=0;t<n&&e[t]===i[t];t++);var s=n-t;for(r=1;r<=s&&e[n-r]===i[o-r];r++);return Cc=i.slice(t,1<r?1-r:void 0)}function Pc(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ql(){return!0}function Ey(){return!1}function Rn(t){function e(n,r,i,o,s){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=o,this.target=s,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(o):o[l]);return this.isDefaultPrevented=(o.defaultPrevented!=null?o.defaultPrevented:o.returnValue===!1)?Ql:Ey,this.isPropagationStopped=Ey,this}return rt(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ql)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ql)},persist:function(){},isPersistent:Ql}),e}var _s={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},nm=Rn(_s),pl=rt({},_s,{view:0,detail:0}),PR=Rn(pl),Zd,eh,Ls,Ju=rt({},pl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:rm,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ls&&(Ls&&t.type==="mousemove"?(Zd=t.screenX-Ls.screenX,eh=t.screenY-Ls.screenY):eh=Zd=0,Ls=t),Zd)},movementY:function(t){return"movementY"in t?t.movementY:eh}}),Sy=Rn(Ju),RR=rt({},Ju,{dataTransfer:0}),IR=Rn(RR),AR=rt({},pl,{relatedTarget:0}),th=Rn(AR),kR=rt({},_s,{animationName:0,elapsedTime:0,pseudoElement:0}),bR=Rn(kR),xR=rt({},_s,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),DR=Rn(xR),NR=rt({},_s,{data:0}),Ty=Rn(NR),OR={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},MR={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},jR={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function LR(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=jR[t])?!!e[t]:!1}function rm(){return LR}var FR=rt({},pl,{key:function(t){if(t.key){var e=OR[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Pc(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?MR[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:rm,charCode:function(t){return t.type==="keypress"?Pc(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Pc(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),VR=Rn(FR),UR=rt({},Ju,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wy=Rn(UR),$R=rt({},pl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:rm}),BR=Rn($R),zR=rt({},_s,{propertyName:0,elapsedTime:0,pseudoElement:0}),qR=Rn(zR),HR=rt({},Ju,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),WR=Rn(HR),GR=[9,13,27,32],im=jr&&"CompositionEvent"in window,da=null;jr&&"documentMode"in document&&(da=document.documentMode);var KR=jr&&"TextEvent"in window&&!da,R1=jr&&(!im||da&&8<da&&11>=da),Cy=String.fromCharCode(32),Py=!1;function I1(t,e){switch(t){case"keyup":return GR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function A1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Ro=!1;function JR(t,e){switch(t){case"compositionend":return A1(e);case"keypress":return e.which!==32?null:(Py=!0,Cy);case"textInput":return t=e.data,t===Cy&&Py?null:t;default:return null}}function QR(t,e){if(Ro)return t==="compositionend"||!im&&I1(t,e)?(t=P1(),Cc=tm=ci=null,Ro=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return R1&&e.locale!=="ko"?null:e.data;default:return null}}var YR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ry(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!YR[t.type]:e==="textarea"}function k1(t,e,n,r){s1(r),e=tu(e,"onChange"),0<e.length&&(n=new nm("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var ha=null,Na=null;function XR(t){U1(t,0)}function Qu(t){var e=ko(t);if(Z_(e))return t}function ZR(t,e){if(t==="change")return e}var b1=!1;if(jr){var nh;if(jr){var rh="oninput"in document;if(!rh){var Iy=document.createElement("div");Iy.setAttribute("oninput","return;"),rh=typeof Iy.oninput=="function"}nh=rh}else nh=!1;b1=nh&&(!document.documentMode||9<document.documentMode)}function Ay(){ha&&(ha.detachEvent("onpropertychange",x1),Na=ha=null)}function x1(t){if(t.propertyName==="value"&&Qu(Na)){var e=[];k1(e,Na,t,Qp(t)),u1(XR,e)}}function eI(t,e,n){t==="focusin"?(Ay(),ha=e,Na=n,ha.attachEvent("onpropertychange",x1)):t==="focusout"&&Ay()}function tI(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Qu(Na)}function nI(t,e){if(t==="click")return Qu(e)}function rI(t,e){if(t==="input"||t==="change")return Qu(e)}function iI(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Yn=typeof Object.is=="function"?Object.is:iI;function Oa(t,e){if(Yn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!Jh.call(e,i)||!Yn(t[i],e[i]))return!1}return!0}function ky(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function by(t,e){var n=ky(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=ky(n)}}function D1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?D1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function N1(){for(var t=window,e=Kc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=Kc(t.document)}return e}function om(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function oI(t){var e=N1(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&D1(n.ownerDocument.documentElement,n)){if(r!==null&&om(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,o=Math.min(r.start,i);r=r.end===void 0?o:Math.min(r.end,i),!t.extend&&o>r&&(i=r,r=o,o=i),i=by(n,o);var s=by(n,r);i&&s&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),o>r?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var sI=jr&&"documentMode"in document&&11>=document.documentMode,Io=null,mf=null,fa=null,gf=!1;function xy(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;gf||Io==null||Io!==Kc(r)||(r=Io,"selectionStart"in r&&om(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),fa&&Oa(fa,r)||(fa=r,r=tu(mf,"onSelect"),0<r.length&&(e=new nm("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Io)))}function Yl(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Ao={animationend:Yl("Animation","AnimationEnd"),animationiteration:Yl("Animation","AnimationIteration"),animationstart:Yl("Animation","AnimationStart"),transitionend:Yl("Transition","TransitionEnd")},ih={},O1={};jr&&(O1=document.createElement("div").style,"AnimationEvent"in window||(delete Ao.animationend.animation,delete Ao.animationiteration.animation,delete Ao.animationstart.animation),"TransitionEvent"in window||delete Ao.transitionend.transition);function Yu(t){if(ih[t])return ih[t];if(!Ao[t])return t;var e=Ao[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in O1)return ih[t]=e[n];return t}var M1=Yu("animationend"),j1=Yu("animationiteration"),L1=Yu("animationstart"),F1=Yu("transitionend"),V1=new Map,Dy="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function ki(t,e){V1.set(t,e),uo(e,[t])}for(var oh=0;oh<Dy.length;oh++){var sh=Dy[oh],aI=sh.toLowerCase(),lI=sh[0].toUpperCase()+sh.slice(1);ki(aI,"on"+lI)}ki(M1,"onAnimationEnd");ki(j1,"onAnimationIteration");ki(L1,"onAnimationStart");ki("dblclick","onDoubleClick");ki("focusin","onFocus");ki("focusout","onBlur");ki(F1,"onTransitionEnd");Zo("onMouseEnter",["mouseout","mouseover"]);Zo("onMouseLeave",["mouseout","mouseover"]);Zo("onPointerEnter",["pointerout","pointerover"]);Zo("onPointerLeave",["pointerout","pointerover"]);uo("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));uo("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));uo("onBeforeInput",["compositionend","keypress","textInput","paste"]);uo("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));uo("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Zs="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cI=new Set("cancel close invalid load scroll toggle".split(" ").concat(Zs));function Ny(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,aR(r,e,void 0,t),t.currentTarget=null}function U1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var o=void 0;if(e)for(var s=r.length-1;0<=s;s--){var l=r[s],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==o&&i.isPropagationStopped())break e;Ny(i,l,c),o=a}else for(s=0;s<r.length;s++){if(l=r[s],a=l.instance,c=l.currentTarget,l=l.listener,a!==o&&i.isPropagationStopped())break e;Ny(i,l,c),o=a}}}if(Qc)throw t=df,Qc=!1,df=null,t}function Ge(t,e){var n=e[Sf];n===void 0&&(n=e[Sf]=new Set);var r=t+"__bubble";n.has(r)||($1(e,t,2,!1),n.add(r))}function ah(t,e,n){var r=0;e&&(r|=4),$1(n,t,r,e)}var Xl="_reactListening"+Math.random().toString(36).slice(2);function Ma(t){if(!t[Xl]){t[Xl]=!0,K_.forEach(function(n){n!=="selectionchange"&&(cI.has(n)||ah(n,!1,t),ah(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Xl]||(e[Xl]=!0,ah("selectionchange",!1,e))}}function $1(t,e,n,r){switch(C1(e)){case 1:var i=wR;break;case 4:i=CR;break;default:i=em}n=i.bind(null,e,n,t),i=void 0,!uf||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function lh(t,e,n,r,i){var o=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var s=r.tag;if(s===3||s===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(s===4)for(s=r.return;s!==null;){var a=s.tag;if((a===3||a===4)&&(a=s.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;s=s.return}for(;l!==null;){if(s=Ui(l),s===null)return;if(a=s.tag,a===5||a===6){r=o=s;continue e}l=l.parentNode}}r=r.return}u1(function(){var c=o,u=Qp(n),d=[];e:{var f=V1.get(t);if(f!==void 0){var g=nm,p=t;switch(t){case"keypress":if(Pc(n)===0)break e;case"keydown":case"keyup":g=VR;break;case"focusin":p="focus",g=th;break;case"focusout":p="blur",g=th;break;case"beforeblur":case"afterblur":g=th;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":g=Sy;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":g=IR;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":g=BR;break;case M1:case j1:case L1:g=bR;break;case F1:g=qR;break;case"scroll":g=PR;break;case"wheel":g=WR;break;case"copy":case"cut":case"paste":g=DR;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":g=wy}var E=(e&4)!==0,T=!E&&t==="scroll",v=E?f!==null?f+"Capture":null:f;E=[];for(var m=c,S;m!==null;){S=m;var _=S.stateNode;if(S.tag===5&&_!==null&&(S=_,v!==null&&(_=ka(m,v),_!=null&&E.push(ja(m,_,S)))),T)break;m=m.return}0<E.length&&(f=new g(f,p,null,n,u),d.push({event:f,listeners:E}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",g=t==="mouseout"||t==="pointerout",f&&n!==lf&&(p=n.relatedTarget||n.fromElement)&&(Ui(p)||p[Lr]))break e;if((g||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,g?(p=n.relatedTarget||n.toElement,g=c,p=p?Ui(p):null,p!==null&&(T=ho(p),p!==T||p.tag!==5&&p.tag!==6)&&(p=null)):(g=null,p=c),g!==p)){if(E=Sy,_="onMouseLeave",v="onMouseEnter",m="mouse",(t==="pointerout"||t==="pointerover")&&(E=wy,_="onPointerLeave",v="onPointerEnter",m="pointer"),T=g==null?f:ko(g),S=p==null?f:ko(p),f=new E(_,m+"leave",g,n,u),f.target=T,f.relatedTarget=S,_=null,Ui(u)===c&&(E=new E(v,m+"enter",p,n,u),E.target=S,E.relatedTarget=T,_=E),T=_,g&&p)t:{for(E=g,v=p,m=0,S=E;S;S=vo(S))m++;for(S=0,_=v;_;_=vo(_))S++;for(;0<m-S;)E=vo(E),m--;for(;0<S-m;)v=vo(v),S--;for(;m--;){if(E===v||v!==null&&E===v.alternate)break t;E=vo(E),v=vo(v)}E=null}else E=null;g!==null&&Oy(d,f,g,E,!1),p!==null&&T!==null&&Oy(d,T,p,E,!0)}}e:{if(f=c?ko(c):window,g=f.nodeName&&f.nodeName.toLowerCase(),g==="select"||g==="input"&&f.type==="file")var C=ZR;else if(Ry(f))if(b1)C=rI;else{C=tI;var R=eI}else(g=f.nodeName)&&g.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(C=nI);if(C&&(C=C(t,c))){k1(d,C,n,u);break e}R&&R(t,f,c),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&nf(f,"number",f.value)}switch(R=c?ko(c):window,t){case"focusin":(Ry(R)||R.contentEditable==="true")&&(Io=R,mf=c,fa=null);break;case"focusout":fa=mf=Io=null;break;case"mousedown":gf=!0;break;case"contextmenu":case"mouseup":case"dragend":gf=!1,xy(d,n,u);break;case"selectionchange":if(sI)break;case"keydown":case"keyup":xy(d,n,u)}var b;if(im)e:{switch(t){case"compositionstart":var y="onCompositionStart";break e;case"compositionend":y="onCompositionEnd";break e;case"compositionupdate":y="onCompositionUpdate";break e}y=void 0}else Ro?I1(t,n)&&(y="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(y="onCompositionStart");y&&(R1&&n.locale!=="ko"&&(Ro||y!=="onCompositionStart"?y==="onCompositionEnd"&&Ro&&(b=P1()):(ci=u,tm="value"in ci?ci.value:ci.textContent,Ro=!0)),R=tu(c,y),0<R.length&&(y=new Ty(y,t,null,n,u),d.push({event:y,listeners:R}),b?y.data=b:(b=A1(n),b!==null&&(y.data=b)))),(b=KR?JR(t,n):QR(t,n))&&(c=tu(c,"onBeforeInput"),0<c.length&&(u=new Ty("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=b))}U1(d,e)})}function ja(t,e,n){return{instance:t,listener:e,currentTarget:n}}function tu(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,o=i.stateNode;i.tag===5&&o!==null&&(i=o,o=ka(t,n),o!=null&&r.unshift(ja(t,o,i)),o=ka(t,e),o!=null&&r.push(ja(t,o,i))),t=t.return}return r}function vo(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Oy(t,e,n,r,i){for(var o=e._reactName,s=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=ka(n,o),a!=null&&s.unshift(ja(n,a,l))):i||(a=ka(n,o),a!=null&&s.push(ja(n,a,l)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var uI=/\r\n?/g,dI=/\u0000|\uFFFD/g;function My(t){return(typeof t=="string"?t:""+t).replace(uI,`
`).replace(dI,"")}function Zl(t,e,n){if(e=My(e),My(t)!==e&&n)throw Error(L(425))}function nu(){}var yf=null,vf=null;function _f(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Ef=typeof setTimeout=="function"?setTimeout:void 0,hI=typeof clearTimeout=="function"?clearTimeout:void 0,jy=typeof Promise=="function"?Promise:void 0,fI=typeof queueMicrotask=="function"?queueMicrotask:typeof jy<"u"?function(t){return jy.resolve(null).then(t).catch(pI)}:Ef;function pI(t){setTimeout(function(){throw t})}function ch(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Da(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Da(e)}function mi(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ly(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Es=Math.random().toString(36).slice(2),cr="__reactFiber$"+Es,La="__reactProps$"+Es,Lr="__reactContainer$"+Es,Sf="__reactEvents$"+Es,mI="__reactListeners$"+Es,gI="__reactHandles$"+Es;function Ui(t){var e=t[cr];if(e)return e;for(var n=t.parentNode;n;){if(e=n[Lr]||n[cr]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ly(t);t!==null;){if(n=t[cr])return n;t=Ly(t)}return e}t=n,n=t.parentNode}return null}function ml(t){return t=t[cr]||t[Lr],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function ko(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(L(33))}function Xu(t){return t[La]||null}var Tf=[],bo=-1;function bi(t){return{current:t}}function Je(t){0>bo||(t.current=Tf[bo],Tf[bo]=null,bo--)}function He(t,e){bo++,Tf[bo]=t.current,t.current=e}var Pi={},Xt=bi(Pi),gn=bi(!1),Xi=Pi;function es(t,e){var n=t.type.contextTypes;if(!n)return Pi;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},o;for(o in n)i[o]=e[o];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function yn(t){return t=t.childContextTypes,t!=null}function ru(){Je(gn),Je(Xt)}function Fy(t,e,n){if(Xt.current!==Pi)throw Error(L(168));He(Xt,e),He(gn,n)}function B1(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(L(108,eR(t)||"Unknown",i));return rt({},n,r)}function iu(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Pi,Xi=Xt.current,He(Xt,t),He(gn,gn.current),!0}function Vy(t,e,n){var r=t.stateNode;if(!r)throw Error(L(169));n?(t=B1(t,e,Xi),r.__reactInternalMemoizedMergedChildContext=t,Je(gn),Je(Xt),He(Xt,t)):Je(gn),He(gn,n)}var Pr=null,Zu=!1,uh=!1;function z1(t){Pr===null?Pr=[t]:Pr.push(t)}function yI(t){Zu=!0,z1(t)}function xi(){if(!uh&&Pr!==null){uh=!0;var t=0,e=Fe;try{var n=Pr;for(Fe=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Pr=null,Zu=!1}catch(i){throw Pr!==null&&(Pr=Pr.slice(t+1)),p1(Yp,xi),i}finally{Fe=e,uh=!1}}return null}var xo=[],Do=0,ou=null,su=0,kn=[],bn=0,Zi=null,Rr=1,Ir="";function Li(t,e){xo[Do++]=su,xo[Do++]=ou,ou=t,su=e}function q1(t,e,n){kn[bn++]=Rr,kn[bn++]=Ir,kn[bn++]=Zi,Zi=t;var r=Rr;t=Ir;var i=32-Jn(r)-1;r&=~(1<<i),n+=1;var o=32-Jn(e)+i;if(30<o){var s=i-i%5;o=(r&(1<<s)-1).toString(32),r>>=s,i-=s,Rr=1<<32-Jn(e)+i|n<<i|r,Ir=o+t}else Rr=1<<o|n<<i|r,Ir=t}function sm(t){t.return!==null&&(Li(t,1),q1(t,1,0))}function am(t){for(;t===ou;)ou=xo[--Do],xo[Do]=null,su=xo[--Do],xo[Do]=null;for(;t===Zi;)Zi=kn[--bn],kn[bn]=null,Ir=kn[--bn],kn[bn]=null,Rr=kn[--bn],kn[bn]=null}var Tn=null,Sn=null,Ze=!1,Wn=null;function H1(t,e){var n=Nn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Uy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Tn=t,Sn=mi(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Tn=t,Sn=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Zi!==null?{id:Rr,overflow:Ir}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Nn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Tn=t,Sn=null,!0):!1;default:return!1}}function wf(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cf(t){if(Ze){var e=Sn;if(e){var n=e;if(!Uy(t,e)){if(wf(t))throw Error(L(418));e=mi(n.nextSibling);var r=Tn;e&&Uy(t,e)?H1(r,n):(t.flags=t.flags&-4097|2,Ze=!1,Tn=t)}}else{if(wf(t))throw Error(L(418));t.flags=t.flags&-4097|2,Ze=!1,Tn=t}}}function $y(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Tn=t}function ec(t){if(t!==Tn)return!1;if(!Ze)return $y(t),Ze=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!_f(t.type,t.memoizedProps)),e&&(e=Sn)){if(wf(t))throw W1(),Error(L(418));for(;e;)H1(t,e),e=mi(e.nextSibling)}if($y(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(L(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Sn=mi(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Sn=null}}else Sn=Tn?mi(t.stateNode.nextSibling):null;return!0}function W1(){for(var t=Sn;t;)t=mi(t.nextSibling)}function ts(){Sn=Tn=null,Ze=!1}function lm(t){Wn===null?Wn=[t]:Wn.push(t)}var vI=Hr.ReactCurrentBatchConfig;function zn(t,e){if(t&&t.defaultProps){e=rt({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var au=bi(null),lu=null,No=null,cm=null;function um(){cm=No=lu=null}function dm(t){var e=au.current;Je(au),t._currentValue=e}function Pf(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function qo(t,e){lu=t,cm=No=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(mn=!0),t.firstContext=null)}function Ln(t){var e=t._currentValue;if(cm!==t)if(t={context:t,memoizedValue:e,next:null},No===null){if(lu===null)throw Error(L(308));No=t,lu.dependencies={lanes:0,firstContext:t}}else No=No.next=t;return e}var $i=null;function hm(t){$i===null?$i=[t]:$i.push(t)}function G1(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,hm(e)):(n.next=i.next,i.next=n),e.interleaved=n,Fr(t,r)}function Fr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var ni=!1;function fm(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function K1(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Dr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function gi(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,ke&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,Fr(t,n)}return i=r.interleaved,i===null?(e.next=e,hm(r)):(e.next=i.next,i.next=e),r.interleaved=e,Fr(t,n)}function Rc(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xp(t,n)}}function By(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,o=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};o===null?i=o=s:o=o.next=s,n=n.next}while(n!==null);o===null?i=o=e:o=o.next=e}else i=o=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:o,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function cu(t,e,n,r){var i=t.updateQueue;ni=!1;var o=i.firstBaseUpdate,s=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,s===null?o=c:s.next=c,s=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==s&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(o!==null){var d=i.baseState;s=0,u=c=a=null,l=o;do{var f=l.lane,g=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:g,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,E=l;switch(f=e,g=n,E.tag){case 1:if(p=E.payload,typeof p=="function"){d=p.call(g,d,f);break e}d=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=E.payload,f=typeof p=="function"?p.call(g,d,f):p,f==null)break e;d=rt({},d,f);break e;case 2:ni=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else g={eventTime:g,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=g,a=d):u=u.next=g,s|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do s|=i.lane,i=i.next;while(i!==e)}else o===null&&(i.shared.lanes=0);to|=s,t.lanes=s,t.memoizedState=d}}function zy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(L(191,i));i.call(r)}}}var J1=new G_.Component().refs;function Rf(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:rt({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ed={isMounted:function(t){return(t=t._reactInternals)?ho(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=an(),i=vi(t),o=Dr(r,i);o.payload=e,n!=null&&(o.callback=n),e=gi(t,o,i),e!==null&&(Qn(e,t,i,r),Rc(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=an(),i=vi(t),o=Dr(r,i);o.tag=1,o.payload=e,n!=null&&(o.callback=n),e=gi(t,o,i),e!==null&&(Qn(e,t,i,r),Rc(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=an(),r=vi(t),i=Dr(n,r);i.tag=2,e!=null&&(i.callback=e),e=gi(t,i,r),e!==null&&(Qn(e,t,r,n),Rc(e,t,r))}};function qy(t,e,n,r,i,o,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,o,s):e.prototype&&e.prototype.isPureReactComponent?!Oa(n,r)||!Oa(i,o):!0}function Q1(t,e,n){var r=!1,i=Pi,o=e.contextType;return typeof o=="object"&&o!==null?o=Ln(o):(i=yn(e)?Xi:Xt.current,r=e.contextTypes,o=(r=r!=null)?es(t,i):Pi),e=new e(n,o),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ed,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=o),e}function Hy(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&ed.enqueueReplaceState(e,e.state,null)}function If(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=J1,fm(t);var o=e.contextType;typeof o=="object"&&o!==null?i.context=Ln(o):(o=yn(e)?Xi:Xt.current,i.context=es(t,o)),i.state=t.memoizedState,o=e.getDerivedStateFromProps,typeof o=="function"&&(Rf(t,e,o,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&ed.enqueueReplaceState(i,i.state,null),cu(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Fs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(L(309));var r=n.stateNode}if(!r)throw Error(L(147,t));var i=r,o=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===o?e.ref:(e=function(s){var l=i.refs;l===J1&&(l=i.refs={}),s===null?delete l[o]:l[o]=s},e._stringRef=o,e)}if(typeof t!="string")throw Error(L(284));if(!n._owner)throw Error(L(290,t))}return t}function tc(t,e){throw t=Object.prototype.toString.call(e),Error(L(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Wy(t){var e=t._init;return e(t._payload)}function Y1(t){function e(v,m){if(t){var S=v.deletions;S===null?(v.deletions=[m],v.flags|=16):S.push(m)}}function n(v,m){if(!t)return null;for(;m!==null;)e(v,m),m=m.sibling;return null}function r(v,m){for(v=new Map;m!==null;)m.key!==null?v.set(m.key,m):v.set(m.index,m),m=m.sibling;return v}function i(v,m){return v=_i(v,m),v.index=0,v.sibling=null,v}function o(v,m,S){return v.index=S,t?(S=v.alternate,S!==null?(S=S.index,S<m?(v.flags|=2,m):S):(v.flags|=2,m)):(v.flags|=1048576,m)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function l(v,m,S,_){return m===null||m.tag!==6?(m=yh(S,v.mode,_),m.return=v,m):(m=i(m,S),m.return=v,m)}function a(v,m,S,_){var C=S.type;return C===Po?u(v,m,S.props.children,_,S.key):m!==null&&(m.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ti&&Wy(C)===m.type)?(_=i(m,S.props),_.ref=Fs(v,m,S),_.return=v,_):(_=Dc(S.type,S.key,S.props,null,v.mode,_),_.ref=Fs(v,m,S),_.return=v,_)}function c(v,m,S,_){return m===null||m.tag!==4||m.stateNode.containerInfo!==S.containerInfo||m.stateNode.implementation!==S.implementation?(m=vh(S,v.mode,_),m.return=v,m):(m=i(m,S.children||[]),m.return=v,m)}function u(v,m,S,_,C){return m===null||m.tag!==7?(m=Ki(S,v.mode,_,C),m.return=v,m):(m=i(m,S),m.return=v,m)}function d(v,m,S){if(typeof m=="string"&&m!==""||typeof m=="number")return m=yh(""+m,v.mode,S),m.return=v,m;if(typeof m=="object"&&m!==null){switch(m.$$typeof){case ql:return S=Dc(m.type,m.key,m.props,null,v.mode,S),S.ref=Fs(v,null,m),S.return=v,S;case Co:return m=vh(m,v.mode,S),m.return=v,m;case ti:var _=m._init;return d(v,_(m._payload),S)}if(Ys(m)||Ns(m))return m=Ki(m,v.mode,S,null),m.return=v,m;tc(v,m)}return null}function f(v,m,S,_){var C=m!==null?m.key:null;if(typeof S=="string"&&S!==""||typeof S=="number")return C!==null?null:l(v,m,""+S,_);if(typeof S=="object"&&S!==null){switch(S.$$typeof){case ql:return S.key===C?a(v,m,S,_):null;case Co:return S.key===C?c(v,m,S,_):null;case ti:return C=S._init,f(v,m,C(S._payload),_)}if(Ys(S)||Ns(S))return C!==null?null:u(v,m,S,_,null);tc(v,S)}return null}function g(v,m,S,_,C){if(typeof _=="string"&&_!==""||typeof _=="number")return v=v.get(S)||null,l(m,v,""+_,C);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case ql:return v=v.get(_.key===null?S:_.key)||null,a(m,v,_,C);case Co:return v=v.get(_.key===null?S:_.key)||null,c(m,v,_,C);case ti:var R=_._init;return g(v,m,S,R(_._payload),C)}if(Ys(_)||Ns(_))return v=v.get(S)||null,u(m,v,_,C,null);tc(m,_)}return null}function p(v,m,S,_){for(var C=null,R=null,b=m,y=m=0,I=null;b!==null&&y<S.length;y++){b.index>y?(I=b,b=null):I=b.sibling;var w=f(v,b,S[y],_);if(w===null){b===null&&(b=I);break}t&&b&&w.alternate===null&&e(v,b),m=o(w,m,y),R===null?C=w:R.sibling=w,R=w,b=I}if(y===S.length)return n(v,b),Ze&&Li(v,y),C;if(b===null){for(;y<S.length;y++)b=d(v,S[y],_),b!==null&&(m=o(b,m,y),R===null?C=b:R.sibling=b,R=b);return Ze&&Li(v,y),C}for(b=r(v,b);y<S.length;y++)I=g(b,v,y,S[y],_),I!==null&&(t&&I.alternate!==null&&b.delete(I.key===null?y:I.key),m=o(I,m,y),R===null?C=I:R.sibling=I,R=I);return t&&b.forEach(function(Y){return e(v,Y)}),Ze&&Li(v,y),C}function E(v,m,S,_){var C=Ns(S);if(typeof C!="function")throw Error(L(150));if(S=C.call(S),S==null)throw Error(L(151));for(var R=C=null,b=m,y=m=0,I=null,w=S.next();b!==null&&!w.done;y++,w=S.next()){b.index>y?(I=b,b=null):I=b.sibling;var Y=f(v,b,w.value,_);if(Y===null){b===null&&(b=I);break}t&&b&&Y.alternate===null&&e(v,b),m=o(Y,m,y),R===null?C=Y:R.sibling=Y,R=Y,b=I}if(w.done)return n(v,b),Ze&&Li(v,y),C;if(b===null){for(;!w.done;y++,w=S.next())w=d(v,w.value,_),w!==null&&(m=o(w,m,y),R===null?C=w:R.sibling=w,R=w);return Ze&&Li(v,y),C}for(b=r(v,b);!w.done;y++,w=S.next())w=g(b,v,y,w.value,_),w!==null&&(t&&w.alternate!==null&&b.delete(w.key===null?y:w.key),m=o(w,m,y),R===null?C=w:R.sibling=w,R=w);return t&&b.forEach(function(q){return e(v,q)}),Ze&&Li(v,y),C}function T(v,m,S,_){if(typeof S=="object"&&S!==null&&S.type===Po&&S.key===null&&(S=S.props.children),typeof S=="object"&&S!==null){switch(S.$$typeof){case ql:e:{for(var C=S.key,R=m;R!==null;){if(R.key===C){if(C=S.type,C===Po){if(R.tag===7){n(v,R.sibling),m=i(R,S.props.children),m.return=v,v=m;break e}}else if(R.elementType===C||typeof C=="object"&&C!==null&&C.$$typeof===ti&&Wy(C)===R.type){n(v,R.sibling),m=i(R,S.props),m.ref=Fs(v,R,S),m.return=v,v=m;break e}n(v,R);break}else e(v,R);R=R.sibling}S.type===Po?(m=Ki(S.props.children,v.mode,_,S.key),m.return=v,v=m):(_=Dc(S.type,S.key,S.props,null,v.mode,_),_.ref=Fs(v,m,S),_.return=v,v=_)}return s(v);case Co:e:{for(R=S.key;m!==null;){if(m.key===R)if(m.tag===4&&m.stateNode.containerInfo===S.containerInfo&&m.stateNode.implementation===S.implementation){n(v,m.sibling),m=i(m,S.children||[]),m.return=v,v=m;break e}else{n(v,m);break}else e(v,m);m=m.sibling}m=vh(S,v.mode,_),m.return=v,v=m}return s(v);case ti:return R=S._init,T(v,m,R(S._payload),_)}if(Ys(S))return p(v,m,S,_);if(Ns(S))return E(v,m,S,_);tc(v,S)}return typeof S=="string"&&S!==""||typeof S=="number"?(S=""+S,m!==null&&m.tag===6?(n(v,m.sibling),m=i(m,S),m.return=v,v=m):(n(v,m),m=yh(S,v.mode,_),m.return=v,v=m),s(v)):n(v,m)}return T}var ns=Y1(!0),X1=Y1(!1),gl={},mr=bi(gl),Fa=bi(gl),Va=bi(gl);function Bi(t){if(t===gl)throw Error(L(174));return t}function pm(t,e){switch(He(Va,e),He(Fa,t),He(mr,gl),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:of(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=of(e,t)}Je(mr),He(mr,e)}function rs(){Je(mr),Je(Fa),Je(Va)}function Z1(t){Bi(Va.current);var e=Bi(mr.current),n=of(e,t.type);e!==n&&(He(Fa,t),He(mr,n))}function mm(t){Fa.current===t&&(Je(mr),Je(Fa))}var tt=bi(0);function uu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var dh=[];function gm(){for(var t=0;t<dh.length;t++)dh[t]._workInProgressVersionPrimary=null;dh.length=0}var Ic=Hr.ReactCurrentDispatcher,hh=Hr.ReactCurrentBatchConfig,eo=0,nt=null,St=null,It=null,du=!1,pa=!1,Ua=0,_I=0;function $t(){throw Error(L(321))}function ym(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Yn(t[n],e[n]))return!1;return!0}function vm(t,e,n,r,i,o){if(eo=o,nt=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Ic.current=t===null||t.memoizedState===null?wI:CI,t=n(r,i),pa){o=0;do{if(pa=!1,Ua=0,25<=o)throw Error(L(301));o+=1,It=St=null,e.updateQueue=null,Ic.current=PI,t=n(r,i)}while(pa)}if(Ic.current=hu,e=St!==null&&St.next!==null,eo=0,It=St=nt=null,du=!1,e)throw Error(L(300));return t}function _m(){var t=Ua!==0;return Ua=0,t}function ar(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?nt.memoizedState=It=t:It=It.next=t,It}function Fn(){if(St===null){var t=nt.alternate;t=t!==null?t.memoizedState:null}else t=St.next;var e=It===null?nt.memoizedState:It.next;if(e!==null)It=e,St=t;else{if(t===null)throw Error(L(310));St=t,t={memoizedState:St.memoizedState,baseState:St.baseState,baseQueue:St.baseQueue,queue:St.queue,next:null},It===null?nt.memoizedState=It=t:It=It.next=t}return It}function $a(t,e){return typeof e=="function"?e(t):e}function fh(t){var e=Fn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=St,i=r.baseQueue,o=n.pending;if(o!==null){if(i!==null){var s=i.next;i.next=o.next,o.next=s}r.baseQueue=i=o,n.pending=null}if(i!==null){o=i.next,r=r.baseState;var l=s=null,a=null,c=o;do{var u=c.lane;if((eo&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,s=r):a=a.next=d,nt.lanes|=u,to|=u}c=c.next}while(c!==null&&c!==o);a===null?s=r:a.next=l,Yn(r,e.memoizedState)||(mn=!0),e.memoizedState=r,e.baseState=s,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do o=i.lane,nt.lanes|=o,to|=o,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function ph(t){var e=Fn(),n=e.queue;if(n===null)throw Error(L(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,o=e.memoizedState;if(i!==null){n.pending=null;var s=i=i.next;do o=t(o,s.action),s=s.next;while(s!==i);Yn(o,e.memoizedState)||(mn=!0),e.memoizedState=o,e.baseQueue===null&&(e.baseState=o),n.lastRenderedState=o}return[o,r]}function eE(){}function tE(t,e){var n=nt,r=Fn(),i=e(),o=!Yn(r.memoizedState,i);if(o&&(r.memoizedState=i,mn=!0),r=r.queue,Em(iE.bind(null,n,r,t),[t]),r.getSnapshot!==e||o||It!==null&&It.memoizedState.tag&1){if(n.flags|=2048,Ba(9,rE.bind(null,n,r,i,e),void 0,null),At===null)throw Error(L(349));eo&30||nE(n,e,i)}return i}function nE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function rE(t,e,n,r){e.value=n,e.getSnapshot=r,oE(e)&&sE(t)}function iE(t,e,n){return n(function(){oE(e)&&sE(t)})}function oE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Yn(t,n)}catch{return!0}}function sE(t){var e=Fr(t,1);e!==null&&Qn(e,t,1,-1)}function Gy(t){var e=ar();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:$a,lastRenderedState:t},e.queue=t,t=t.dispatch=TI.bind(null,nt,t),[e.memoizedState,t]}function Ba(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=nt.updateQueue,e===null?(e={lastEffect:null,stores:null},nt.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function aE(){return Fn().memoizedState}function Ac(t,e,n,r){var i=ar();nt.flags|=t,i.memoizedState=Ba(1|e,n,void 0,r===void 0?null:r)}function td(t,e,n,r){var i=Fn();r=r===void 0?null:r;var o=void 0;if(St!==null){var s=St.memoizedState;if(o=s.destroy,r!==null&&ym(r,s.deps)){i.memoizedState=Ba(e,n,o,r);return}}nt.flags|=t,i.memoizedState=Ba(1|e,n,o,r)}function Ky(t,e){return Ac(8390656,8,t,e)}function Em(t,e){return td(2048,8,t,e)}function lE(t,e){return td(4,2,t,e)}function cE(t,e){return td(4,4,t,e)}function uE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function dE(t,e,n){return n=n!=null?n.concat([t]):null,td(4,4,uE.bind(null,e,t),n)}function Sm(){}function hE(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ym(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function fE(t,e){var n=Fn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&ym(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function pE(t,e,n){return eo&21?(Yn(n,e)||(n=y1(),nt.lanes|=n,to|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,mn=!0),t.memoizedState=n)}function EI(t,e){var n=Fe;Fe=n!==0&&4>n?n:4,t(!0);var r=hh.transition;hh.transition={};try{t(!1),e()}finally{Fe=n,hh.transition=r}}function mE(){return Fn().memoizedState}function SI(t,e,n){var r=vi(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gE(t))yE(e,n);else if(n=G1(t,e,n,r),n!==null){var i=an();Qn(n,t,r,i),vE(n,e,r)}}function TI(t,e,n){var r=vi(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gE(t))yE(e,i);else{var o=t.alternate;if(t.lanes===0&&(o===null||o.lanes===0)&&(o=e.lastRenderedReducer,o!==null))try{var s=e.lastRenderedState,l=o(s,n);if(i.hasEagerState=!0,i.eagerState=l,Yn(l,s)){var a=e.interleaved;a===null?(i.next=i,hm(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=G1(t,e,i,r),n!==null&&(i=an(),Qn(n,t,r,i),vE(n,e,r))}}function gE(t){var e=t.alternate;return t===nt||e!==null&&e===nt}function yE(t,e){pa=du=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function vE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,Xp(t,n)}}var hu={readContext:Ln,useCallback:$t,useContext:$t,useEffect:$t,useImperativeHandle:$t,useInsertionEffect:$t,useLayoutEffect:$t,useMemo:$t,useReducer:$t,useRef:$t,useState:$t,useDebugValue:$t,useDeferredValue:$t,useTransition:$t,useMutableSource:$t,useSyncExternalStore:$t,useId:$t,unstable_isNewReconciler:!1},wI={readContext:Ln,useCallback:function(t,e){return ar().memoizedState=[t,e===void 0?null:e],t},useContext:Ln,useEffect:Ky,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Ac(4194308,4,uE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Ac(4194308,4,t,e)},useInsertionEffect:function(t,e){return Ac(4,2,t,e)},useMemo:function(t,e){var n=ar();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=ar();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=SI.bind(null,nt,t),[r.memoizedState,t]},useRef:function(t){var e=ar();return t={current:t},e.memoizedState=t},useState:Gy,useDebugValue:Sm,useDeferredValue:function(t){return ar().memoizedState=t},useTransition:function(){var t=Gy(!1),e=t[0];return t=EI.bind(null,t[1]),ar().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=nt,i=ar();if(Ze){if(n===void 0)throw Error(L(407));n=n()}else{if(n=e(),At===null)throw Error(L(349));eo&30||nE(r,e,n)}i.memoizedState=n;var o={value:n,getSnapshot:e};return i.queue=o,Ky(iE.bind(null,r,o,t),[t]),r.flags|=2048,Ba(9,rE.bind(null,r,o,n,e),void 0,null),n},useId:function(){var t=ar(),e=At.identifierPrefix;if(Ze){var n=Ir,r=Rr;n=(r&~(1<<32-Jn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Ua++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=_I++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},CI={readContext:Ln,useCallback:hE,useContext:Ln,useEffect:Em,useImperativeHandle:dE,useInsertionEffect:lE,useLayoutEffect:cE,useMemo:fE,useReducer:fh,useRef:aE,useState:function(){return fh($a)},useDebugValue:Sm,useDeferredValue:function(t){var e=Fn();return pE(e,St.memoizedState,t)},useTransition:function(){var t=fh($a)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:eE,useSyncExternalStore:tE,useId:mE,unstable_isNewReconciler:!1},PI={readContext:Ln,useCallback:hE,useContext:Ln,useEffect:Em,useImperativeHandle:dE,useInsertionEffect:lE,useLayoutEffect:cE,useMemo:fE,useReducer:ph,useRef:aE,useState:function(){return ph($a)},useDebugValue:Sm,useDeferredValue:function(t){var e=Fn();return St===null?e.memoizedState=t:pE(e,St.memoizedState,t)},useTransition:function(){var t=ph($a)[0],e=Fn().memoizedState;return[t,e]},useMutableSource:eE,useSyncExternalStore:tE,useId:mE,unstable_isNewReconciler:!1};function is(t,e){try{var n="",r=e;do n+=ZP(r),r=r.return;while(r);var i=n}catch(o){i=`
Error generating stack: `+o.message+`
`+o.stack}return{value:t,source:e,stack:i,digest:null}}function mh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Af(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var RI=typeof WeakMap=="function"?WeakMap:Map;function _E(t,e,n){n=Dr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){pu||(pu=!0,Ff=r),Af(t,e)},n}function EE(t,e,n){n=Dr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Af(t,e)}}var o=t.stateNode;return o!==null&&typeof o.componentDidCatch=="function"&&(n.callback=function(){Af(t,e),typeof r!="function"&&(yi===null?yi=new Set([this]):yi.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function Jy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new RI;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=UI.bind(null,t,e,n),e.then(t,t))}function Qy(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yy(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Dr(-1,1),e.tag=2,gi(n,e,1))),n.lanes|=1),t)}var II=Hr.ReactCurrentOwner,mn=!1;function on(t,e,n,r){e.child=t===null?X1(e,null,n,r):ns(e,t.child,n,r)}function Xy(t,e,n,r,i){n=n.render;var o=e.ref;return qo(e,i),r=vm(t,e,n,r,o,i),n=_m(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vr(t,e,i)):(Ze&&n&&sm(e),e.flags|=1,on(t,e,r,i),e.child)}function Zy(t,e,n,r,i){if(t===null){var o=n.type;return typeof o=="function"&&!km(o)&&o.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=o,SE(t,e,o,r,i)):(t=Dc(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(o=t.child,!(t.lanes&i)){var s=o.memoizedProps;if(n=n.compare,n=n!==null?n:Oa,n(s,r)&&t.ref===e.ref)return Vr(t,e,i)}return e.flags|=1,t=_i(o,r),t.ref=e.ref,t.return=e,e.child=t}function SE(t,e,n,r,i){if(t!==null){var o=t.memoizedProps;if(Oa(o,r)&&t.ref===e.ref)if(mn=!1,e.pendingProps=r=o,(t.lanes&i)!==0)t.flags&131072&&(mn=!0);else return e.lanes=t.lanes,Vr(t,e,i)}return kf(t,e,n,r,i)}function TE(t,e,n){var r=e.pendingProps,i=r.children,o=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},He(Mo,En),En|=n;else{if(!(n&1073741824))return t=o!==null?o.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,He(Mo,En),En|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=o!==null?o.baseLanes:n,He(Mo,En),En|=r}else o!==null?(r=o.baseLanes|n,e.memoizedState=null):r=n,He(Mo,En),En|=r;return on(t,e,i,n),e.child}function wE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kf(t,e,n,r,i){var o=yn(n)?Xi:Xt.current;return o=es(e,o),qo(e,i),n=vm(t,e,n,r,o,i),r=_m(),t!==null&&!mn?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,Vr(t,e,i)):(Ze&&r&&sm(e),e.flags|=1,on(t,e,n,i),e.child)}function ev(t,e,n,r,i){if(yn(n)){var o=!0;iu(e)}else o=!1;if(qo(e,i),e.stateNode===null)kc(t,e),Q1(e,n,r),If(e,n,r,i),r=!0;else if(t===null){var s=e.stateNode,l=e.memoizedProps;s.props=l;var a=s.context,c=n.contextType;typeof c=="object"&&c!==null?c=Ln(c):(c=yn(n)?Xi:Xt.current,c=es(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof s.getSnapshotBeforeUpdate=="function";d||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==r||a!==c)&&Hy(e,s,r,c),ni=!1;var f=e.memoizedState;s.state=f,cu(e,r,s,i),a=e.memoizedState,l!==r||f!==a||gn.current||ni?(typeof u=="function"&&(Rf(e,n,u,r),a=e.memoizedState),(l=ni||qy(e,n,l,r,f,a,c))?(d||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),s.props=r,s.state=a,s.context=c,r=l):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{s=e.stateNode,K1(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:zn(e.type,l),s.props=c,d=e.pendingProps,f=s.context,a=n.contextType,typeof a=="object"&&a!==null?a=Ln(a):(a=yn(n)?Xi:Xt.current,a=es(e,a));var g=n.getDerivedStateFromProps;(u=typeof g=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(l!==d||f!==a)&&Hy(e,s,r,a),ni=!1,f=e.memoizedState,s.state=f,cu(e,r,s,i);var p=e.memoizedState;l!==d||f!==p||gn.current||ni?(typeof g=="function"&&(Rf(e,n,g,r),p=e.memoizedState),(c=ni||qy(e,n,c,r,f,p,a)||!1)?(u||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(r,p,a),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(r,p,a)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=p),s.props=r,s.state=p,s.context=a,r=c):(typeof s.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return bf(t,e,n,r,o,i)}function bf(t,e,n,r,i,o){wE(t,e);var s=(e.flags&128)!==0;if(!r&&!s)return i&&Vy(e,n,!1),Vr(t,e,o);r=e.stateNode,II.current=e;var l=s&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&s?(e.child=ns(e,t.child,null,o),e.child=ns(e,null,l,o)):on(t,e,l,o),e.memoizedState=r.state,i&&Vy(e,n,!0),e.child}function CE(t){var e=t.stateNode;e.pendingContext?Fy(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Fy(t,e.context,!1),pm(t,e.containerInfo)}function tv(t,e,n,r,i){return ts(),lm(i),e.flags|=256,on(t,e,n,r),e.child}var xf={dehydrated:null,treeContext:null,retryLane:0};function Df(t){return{baseLanes:t,cachePool:null,transitions:null}}function PE(t,e,n){var r=e.pendingProps,i=tt.current,o=!1,s=(e.flags&128)!==0,l;if((l=s)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(o=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),He(tt,i&1),t===null)return Cf(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=r.children,t=r.fallback,o?(r=e.mode,o=e.child,s={mode:"hidden",children:s},!(r&1)&&o!==null?(o.childLanes=0,o.pendingProps=s):o=id(s,r,0,null),t=Ki(t,r,n,null),o.return=e,t.return=e,o.sibling=t,e.child=o,e.child.memoizedState=Df(n),e.memoizedState=xf,t):Tm(e,s));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return AI(t,e,s,r,l,i,n);if(o){o=r.fallback,s=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(s&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=_i(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?o=_i(l,o):(o=Ki(o,s,n,null),o.flags|=2),o.return=e,r.return=e,r.sibling=o,e.child=r,r=o,o=e.child,s=t.child.memoizedState,s=s===null?Df(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},o.memoizedState=s,o.childLanes=t.childLanes&~n,e.memoizedState=xf,r}return o=t.child,t=o.sibling,r=_i(o,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Tm(t,e){return e=id({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nc(t,e,n,r){return r!==null&&lm(r),ns(e,t.child,null,n),t=Tm(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function AI(t,e,n,r,i,o,s){if(n)return e.flags&256?(e.flags&=-257,r=mh(Error(L(422))),nc(t,e,s,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(o=r.fallback,i=e.mode,r=id({mode:"visible",children:r.children},i,0,null),o=Ki(o,i,s,null),o.flags|=2,r.return=e,o.return=e,r.sibling=o,e.child=r,e.mode&1&&ns(e,t.child,null,s),e.child.memoizedState=Df(s),e.memoizedState=xf,o);if(!(e.mode&1))return nc(t,e,s,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,o=Error(L(419)),r=mh(o,r,void 0),nc(t,e,s,r)}if(l=(s&t.childLanes)!==0,mn||l){if(r=At,r!==null){switch(s&-s){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|s)?0:i,i!==0&&i!==o.retryLane&&(o.retryLane=i,Fr(t,i),Qn(r,t,i,-1))}return Am(),r=mh(Error(L(421))),nc(t,e,s,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=$I.bind(null,t),i._reactRetry=e,null):(t=o.treeContext,Sn=mi(i.nextSibling),Tn=e,Ze=!0,Wn=null,t!==null&&(kn[bn++]=Rr,kn[bn++]=Ir,kn[bn++]=Zi,Rr=t.id,Ir=t.overflow,Zi=e),e=Tm(e,r.children),e.flags|=4096,e)}function nv(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Pf(t.return,e,n)}function gh(t,e,n,r,i){var o=t.memoizedState;o===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(o.isBackwards=e,o.rendering=null,o.renderingStartTime=0,o.last=r,o.tail=n,o.tailMode=i)}function RE(t,e,n){var r=e.pendingProps,i=r.revealOrder,o=r.tail;if(on(t,e,r.children,n),r=tt.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&nv(t,n,e);else if(t.tag===19)nv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(He(tt,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&uu(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),gh(e,!1,i,n,o);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&uu(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}gh(e,!0,n,null,o);break;case"together":gh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function kc(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),to|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(L(153));if(e.child!==null){for(t=e.child,n=_i(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=_i(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function kI(t,e,n){switch(e.tag){case 3:CE(e),ts();break;case 5:Z1(e);break;case 1:yn(e.type)&&iu(e);break;case 4:pm(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;He(au,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(He(tt,tt.current&1),e.flags|=128,null):n&e.child.childLanes?PE(t,e,n):(He(tt,tt.current&1),t=Vr(t,e,n),t!==null?t.sibling:null);He(tt,tt.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return RE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),He(tt,tt.current),r)break;return null;case 22:case 23:return e.lanes=0,TE(t,e,n)}return Vr(t,e,n)}var IE,Nf,AE,kE;IE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Nf=function(){};AE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,Bi(mr.current);var o=null;switch(n){case"input":i=ef(t,i),r=ef(t,r),o=[];break;case"select":i=rt({},i,{value:void 0}),r=rt({},r,{value:void 0}),o=[];break;case"textarea":i=rf(t,i),r=rf(t,r),o=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=nu)}sf(n,r);var s;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(s in l)l.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Ia.hasOwnProperty(c)?o||(o=[]):(o=o||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(s in l)!l.hasOwnProperty(s)||a&&a.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in a)a.hasOwnProperty(s)&&l[s]!==a[s]&&(n||(n={}),n[s]=a[s])}else n||(o||(o=[]),o.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(o=o||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(o=o||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Ia.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Ge("scroll",t),o||l===a||(o=[])):(o=o||[]).push(c,a))}n&&(o=o||[]).push("style",n);var c=o;(e.updateQueue=c)&&(e.flags|=4)}};kE=function(t,e,n,r){n!==r&&(e.flags|=4)};function Vs(t,e){if(!Ze)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function Bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function bI(t,e,n){var r=e.pendingProps;switch(am(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Bt(e),null;case 1:return yn(e.type)&&ru(),Bt(e),null;case 3:return r=e.stateNode,rs(),Je(gn),Je(Xt),gm(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ec(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Wn!==null&&($f(Wn),Wn=null))),Nf(t,e),Bt(e),null;case 5:mm(e);var i=Bi(Va.current);if(n=e.type,t!==null&&e.stateNode!=null)AE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(L(166));return Bt(e),null}if(t=Bi(mr.current),ec(e)){r=e.stateNode,n=e.type;var o=e.memoizedProps;switch(r[cr]=e,r[La]=o,t=(e.mode&1)!==0,n){case"dialog":Ge("cancel",r),Ge("close",r);break;case"iframe":case"object":case"embed":Ge("load",r);break;case"video":case"audio":for(i=0;i<Zs.length;i++)Ge(Zs[i],r);break;case"source":Ge("error",r);break;case"img":case"image":case"link":Ge("error",r),Ge("load",r);break;case"details":Ge("toggle",r);break;case"input":dy(r,o),Ge("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!o.multiple},Ge("invalid",r);break;case"textarea":fy(r,o),Ge("invalid",r)}sf(n,o),i=null;for(var s in o)if(o.hasOwnProperty(s)){var l=o[s];s==="children"?typeof l=="string"?r.textContent!==l&&(o.suppressHydrationWarning!==!0&&Zl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(o.suppressHydrationWarning!==!0&&Zl(r.textContent,l,t),i=["children",""+l]):Ia.hasOwnProperty(s)&&l!=null&&s==="onScroll"&&Ge("scroll",r)}switch(n){case"input":Hl(r),hy(r,o,!0);break;case"textarea":Hl(r),py(r);break;case"select":case"option":break;default:typeof o.onClick=="function"&&(r.onclick=nu)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{s=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=n1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=s.createElement(n,{is:r.is}):(t=s.createElement(n),n==="select"&&(s=t,r.multiple?s.multiple=!0:r.size&&(s.size=r.size))):t=s.createElementNS(t,n),t[cr]=e,t[La]=r,IE(t,e,!1,!1),e.stateNode=t;e:{switch(s=af(n,r),n){case"dialog":Ge("cancel",t),Ge("close",t),i=r;break;case"iframe":case"object":case"embed":Ge("load",t),i=r;break;case"video":case"audio":for(i=0;i<Zs.length;i++)Ge(Zs[i],t);i=r;break;case"source":Ge("error",t),i=r;break;case"img":case"image":case"link":Ge("error",t),Ge("load",t),i=r;break;case"details":Ge("toggle",t),i=r;break;case"input":dy(t,r),i=ef(t,r),Ge("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=rt({},r,{value:void 0}),Ge("invalid",t);break;case"textarea":fy(t,r),i=rf(t,r),Ge("invalid",t);break;default:i=r}sf(n,i),l=i;for(o in l)if(l.hasOwnProperty(o)){var a=l[o];o==="style"?o1(t,a):o==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&r1(t,a)):o==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&Aa(t,a):typeof a=="number"&&Aa(t,""+a):o!=="suppressContentEditableWarning"&&o!=="suppressHydrationWarning"&&o!=="autoFocus"&&(Ia.hasOwnProperty(o)?a!=null&&o==="onScroll"&&Ge("scroll",t):a!=null&&Wp(t,o,a,s))}switch(n){case"input":Hl(t),hy(t,r,!1);break;case"textarea":Hl(t),py(t);break;case"option":r.value!=null&&t.setAttribute("value",""+Ci(r.value));break;case"select":t.multiple=!!r.multiple,o=r.value,o!=null?Uo(t,!!r.multiple,o,!1):r.defaultValue!=null&&Uo(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=nu)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return Bt(e),null;case 6:if(t&&e.stateNode!=null)kE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(L(166));if(n=Bi(Va.current),Bi(mr.current),ec(e)){if(r=e.stateNode,n=e.memoizedProps,r[cr]=e,(o=r.nodeValue!==n)&&(t=Tn,t!==null))switch(t.tag){case 3:Zl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Zl(r.nodeValue,n,(t.mode&1)!==0)}o&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[cr]=e,e.stateNode=r}return Bt(e),null;case 13:if(Je(tt),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Ze&&Sn!==null&&e.mode&1&&!(e.flags&128))W1(),ts(),e.flags|=98560,o=!1;else if(o=ec(e),r!==null&&r.dehydrated!==null){if(t===null){if(!o)throw Error(L(318));if(o=e.memoizedState,o=o!==null?o.dehydrated:null,!o)throw Error(L(317));o[cr]=e}else ts(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;Bt(e),o=!1}else Wn!==null&&($f(Wn),Wn=null),o=!0;if(!o)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||tt.current&1?wt===0&&(wt=3):Am())),e.updateQueue!==null&&(e.flags|=4),Bt(e),null);case 4:return rs(),Nf(t,e),t===null&&Ma(e.stateNode.containerInfo),Bt(e),null;case 10:return dm(e.type._context),Bt(e),null;case 17:return yn(e.type)&&ru(),Bt(e),null;case 19:if(Je(tt),o=e.memoizedState,o===null)return Bt(e),null;if(r=(e.flags&128)!==0,s=o.rendering,s===null)if(r)Vs(o,!1);else{if(wt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=uu(t),s!==null){for(e.flags|=128,Vs(o,!1),r=s.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)o=n,t=r,o.flags&=14680066,s=o.alternate,s===null?(o.childLanes=0,o.lanes=t,o.child=null,o.subtreeFlags=0,o.memoizedProps=null,o.memoizedState=null,o.updateQueue=null,o.dependencies=null,o.stateNode=null):(o.childLanes=s.childLanes,o.lanes=s.lanes,o.child=s.child,o.subtreeFlags=0,o.deletions=null,o.memoizedProps=s.memoizedProps,o.memoizedState=s.memoizedState,o.updateQueue=s.updateQueue,o.type=s.type,t=s.dependencies,o.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return He(tt,tt.current&1|2),e.child}t=t.sibling}o.tail!==null&&ft()>os&&(e.flags|=128,r=!0,Vs(o,!1),e.lanes=4194304)}else{if(!r)if(t=uu(s),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Vs(o,!0),o.tail===null&&o.tailMode==="hidden"&&!s.alternate&&!Ze)return Bt(e),null}else 2*ft()-o.renderingStartTime>os&&n!==1073741824&&(e.flags|=128,r=!0,Vs(o,!1),e.lanes=4194304);o.isBackwards?(s.sibling=e.child,e.child=s):(n=o.last,n!==null?n.sibling=s:e.child=s,o.last=s)}return o.tail!==null?(e=o.tail,o.rendering=e,o.tail=e.sibling,o.renderingStartTime=ft(),e.sibling=null,n=tt.current,He(tt,r?n&1|2:n&1),e):(Bt(e),null);case 22:case 23:return Im(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?En&1073741824&&(Bt(e),e.subtreeFlags&6&&(e.flags|=8192)):Bt(e),null;case 24:return null;case 25:return null}throw Error(L(156,e.tag))}function xI(t,e){switch(am(e),e.tag){case 1:return yn(e.type)&&ru(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return rs(),Je(gn),Je(Xt),gm(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return mm(e),null;case 13:if(Je(tt),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(L(340));ts()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Je(tt),null;case 4:return rs(),null;case 10:return dm(e.type._context),null;case 22:case 23:return Im(),null;case 24:return null;default:return null}}var rc=!1,Wt=!1,DI=typeof WeakSet=="function"?WeakSet:Set,K=null;function Oo(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){ot(t,e,r)}else n.current=null}function Of(t,e,n){try{n()}catch(r){ot(t,e,r)}}var rv=!1;function NI(t,e){if(yf=Zc,t=N1(),om(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,o=r.focusNode;r=r.focusOffset;try{n.nodeType,o.nodeType}catch{n=null;break e}var s=0,l=-1,a=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var g;d!==n||i!==0&&d.nodeType!==3||(l=s+i),d!==o||r!==0&&d.nodeType!==3||(a=s+r),d.nodeType===3&&(s+=d.nodeValue.length),(g=d.firstChild)!==null;)f=d,d=g;for(;;){if(d===t)break t;if(f===n&&++c===i&&(l=s),f===o&&++u===r&&(a=s),(g=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=g}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(vf={focusedElem:t,selectionRange:n},Zc=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var E=p.memoizedProps,T=p.memoizedState,v=e.stateNode,m=v.getSnapshotBeforeUpdate(e.elementType===e.type?E:zn(e.type,E),T);v.__reactInternalSnapshotBeforeUpdate=m}break;case 3:var S=e.stateNode.containerInfo;S.nodeType===1?S.textContent="":S.nodeType===9&&S.documentElement&&S.removeChild(S.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(L(163))}}catch(_){ot(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return p=rv,rv=!1,p}function ma(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.destroy;i.destroy=void 0,o!==void 0&&Of(e,n,o)}i=i.next}while(i!==r)}}function nd(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Mf(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function bE(t){var e=t.alternate;e!==null&&(t.alternate=null,bE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[cr],delete e[La],delete e[Sf],delete e[mI],delete e[gI])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function xE(t){return t.tag===5||t.tag===3||t.tag===4}function iv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||xE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function jf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=nu));else if(r!==4&&(t=t.child,t!==null))for(jf(t,e,n),t=t.sibling;t!==null;)jf(t,e,n),t=t.sibling}function Lf(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Lf(t,e,n),t=t.sibling;t!==null;)Lf(t,e,n),t=t.sibling}var xt=null,qn=!1;function Xr(t,e,n){for(n=n.child;n!==null;)DE(t,e,n),n=n.sibling}function DE(t,e,n){if(pr&&typeof pr.onCommitFiberUnmount=="function")try{pr.onCommitFiberUnmount(Ku,n)}catch{}switch(n.tag){case 5:Wt||Oo(n,e);case 6:var r=xt,i=qn;xt=null,Xr(t,e,n),xt=r,qn=i,xt!==null&&(qn?(t=xt,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):xt.removeChild(n.stateNode));break;case 18:xt!==null&&(qn?(t=xt,n=n.stateNode,t.nodeType===8?ch(t.parentNode,n):t.nodeType===1&&ch(t,n),Da(t)):ch(xt,n.stateNode));break;case 4:r=xt,i=qn,xt=n.stateNode.containerInfo,qn=!0,Xr(t,e,n),xt=r,qn=i;break;case 0:case 11:case 14:case 15:if(!Wt&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var o=i,s=o.destroy;o=o.tag,s!==void 0&&(o&2||o&4)&&Of(n,e,s),i=i.next}while(i!==r)}Xr(t,e,n);break;case 1:if(!Wt&&(Oo(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){ot(n,e,l)}Xr(t,e,n);break;case 21:Xr(t,e,n);break;case 22:n.mode&1?(Wt=(r=Wt)||n.memoizedState!==null,Xr(t,e,n),Wt=r):Xr(t,e,n);break;default:Xr(t,e,n)}}function ov(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new DI),e.forEach(function(r){var i=BI.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function Bn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var o=t,s=e,l=s;e:for(;l!==null;){switch(l.tag){case 5:xt=l.stateNode,qn=!1;break e;case 3:xt=l.stateNode.containerInfo,qn=!0;break e;case 4:xt=l.stateNode.containerInfo,qn=!0;break e}l=l.return}if(xt===null)throw Error(L(160));DE(o,s,i),xt=null,qn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){ot(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)NE(e,t),e=e.sibling}function NE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Bn(e,t),sr(t),r&4){try{ma(3,t,t.return),nd(3,t)}catch(E){ot(t,t.return,E)}try{ma(5,t,t.return)}catch(E){ot(t,t.return,E)}}break;case 1:Bn(e,t),sr(t),r&512&&n!==null&&Oo(n,n.return);break;case 5:if(Bn(e,t),sr(t),r&512&&n!==null&&Oo(n,n.return),t.flags&32){var i=t.stateNode;try{Aa(i,"")}catch(E){ot(t,t.return,E)}}if(r&4&&(i=t.stateNode,i!=null)){var o=t.memoizedProps,s=n!==null?n.memoizedProps:o,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&o.type==="radio"&&o.name!=null&&e1(i,o),af(l,s);var c=af(l,o);for(s=0;s<a.length;s+=2){var u=a[s],d=a[s+1];u==="style"?o1(i,d):u==="dangerouslySetInnerHTML"?r1(i,d):u==="children"?Aa(i,d):Wp(i,u,d,c)}switch(l){case"input":tf(i,o);break;case"textarea":t1(i,o);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!o.multiple;var g=o.value;g!=null?Uo(i,!!o.multiple,g,!1):f!==!!o.multiple&&(o.defaultValue!=null?Uo(i,!!o.multiple,o.defaultValue,!0):Uo(i,!!o.multiple,o.multiple?[]:"",!1))}i[La]=o}catch(E){ot(t,t.return,E)}}break;case 6:if(Bn(e,t),sr(t),r&4){if(t.stateNode===null)throw Error(L(162));i=t.stateNode,o=t.memoizedProps;try{i.nodeValue=o}catch(E){ot(t,t.return,E)}}break;case 3:if(Bn(e,t),sr(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Da(e.containerInfo)}catch(E){ot(t,t.return,E)}break;case 4:Bn(e,t),sr(t);break;case 13:Bn(e,t),sr(t),i=t.child,i.flags&8192&&(o=i.memoizedState!==null,i.stateNode.isHidden=o,!o||i.alternate!==null&&i.alternate.memoizedState!==null||(Pm=ft())),r&4&&ov(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Wt=(c=Wt)||u,Bn(e,t),Wt=c):Bn(e,t),sr(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for(K=t,u=t.child;u!==null;){for(d=K=u;K!==null;){switch(f=K,g=f.child,f.tag){case 0:case 11:case 14:case 15:ma(4,f,f.return);break;case 1:Oo(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(E){ot(r,n,E)}}break;case 5:Oo(f,f.return);break;case 22:if(f.memoizedState!==null){av(d);continue}}g!==null?(g.return=f,K=g):av(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(o=i.style,typeof o.setProperty=="function"?o.setProperty("display","none","important"):o.display="none"):(l=d.stateNode,a=d.memoizedProps.style,s=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=i1("display",s))}catch(E){ot(t,t.return,E)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(E){ot(t,t.return,E)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:Bn(e,t),sr(t),r&4&&ov(t);break;case 21:break;default:Bn(e,t),sr(t)}}function sr(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(xE(n)){var r=n;break e}n=n.return}throw Error(L(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&(Aa(i,""),r.flags&=-33);var o=iv(t);Lf(t,o,i);break;case 3:case 4:var s=r.stateNode.containerInfo,l=iv(t);jf(t,l,s);break;default:throw Error(L(161))}}catch(a){ot(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function OI(t,e,n){K=t,OE(t)}function OE(t,e,n){for(var r=(t.mode&1)!==0;K!==null;){var i=K,o=i.child;if(i.tag===22&&r){var s=i.memoizedState!==null||rc;if(!s){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Wt;l=rc;var c=Wt;if(rc=s,(Wt=a)&&!c)for(K=i;K!==null;)s=K,a=s.child,s.tag===22&&s.memoizedState!==null?lv(i):a!==null?(a.return=s,K=a):lv(i);for(;o!==null;)K=o,OE(o),o=o.sibling;K=i,rc=l,Wt=c}sv(t)}else i.subtreeFlags&8772&&o!==null?(o.return=i,K=o):sv(t)}}function sv(t){for(;K!==null;){var e=K;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Wt||nd(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Wt)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:zn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var o=e.updateQueue;o!==null&&zy(e,o,r);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}zy(e,s,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Da(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(L(163))}Wt||e.flags&512&&Mf(e)}catch(f){ot(e,e.return,f)}}if(e===t){K=null;break}if(n=e.sibling,n!==null){n.return=e.return,K=n;break}K=e.return}}function av(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var n=e.sibling;if(n!==null){n.return=e.return,K=n;break}K=e.return}}function lv(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{nd(4,e)}catch(a){ot(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){ot(e,i,a)}}var o=e.return;try{Mf(e)}catch(a){ot(e,o,a)}break;case 5:var s=e.return;try{Mf(e)}catch(a){ot(e,s,a)}}}catch(a){ot(e,e.return,a)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var MI=Math.ceil,fu=Hr.ReactCurrentDispatcher,wm=Hr.ReactCurrentOwner,On=Hr.ReactCurrentBatchConfig,ke=0,At=null,vt=null,Mt=0,En=0,Mo=bi(0),wt=0,za=null,to=0,rd=0,Cm=0,ga=null,pn=null,Pm=0,os=1/0,wr=null,pu=!1,Ff=null,yi=null,ic=!1,ui=null,mu=0,ya=0,Vf=null,bc=-1,xc=0;function an(){return ke&6?ft():bc!==-1?bc:bc=ft()}function vi(t){return t.mode&1?ke&2&&Mt!==0?Mt&-Mt:vI.transition!==null?(xc===0&&(xc=y1()),xc):(t=Fe,t!==0||(t=window.event,t=t===void 0?16:C1(t.type)),t):1}function Qn(t,e,n,r){if(50<ya)throw ya=0,Vf=null,Error(L(185));fl(t,n,r),(!(ke&2)||t!==At)&&(t===At&&(!(ke&2)&&(rd|=n),wt===4&&ii(t,Mt)),vn(t,r),n===1&&ke===0&&!(e.mode&1)&&(os=ft()+500,Zu&&xi()))}function vn(t,e){var n=t.callbackNode;vR(t,e);var r=Xc(t,t===At?Mt:0);if(r===0)n!==null&&yy(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&yy(n),e===1)t.tag===0?yI(cv.bind(null,t)):z1(cv.bind(null,t)),fI(function(){!(ke&6)&&xi()}),n=null;else{switch(v1(r)){case 1:n=Yp;break;case 4:n=m1;break;case 16:n=Yc;break;case 536870912:n=g1;break;default:n=Yc}n=BE(n,ME.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function ME(t,e){if(bc=-1,xc=0,ke&6)throw Error(L(327));var n=t.callbackNode;if(Ho()&&t.callbackNode!==n)return null;var r=Xc(t,t===At?Mt:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=gu(t,r);else{e=r;var i=ke;ke|=2;var o=LE();(At!==t||Mt!==e)&&(wr=null,os=ft()+500,Gi(t,e));do try{FI();break}catch(l){jE(t,l)}while(1);um(),fu.current=o,ke=i,vt!==null?e=0:(At=null,Mt=0,e=wt)}if(e!==0){if(e===2&&(i=hf(t),i!==0&&(r=i,e=Uf(t,i))),e===1)throw n=za,Gi(t,0),ii(t,r),vn(t,ft()),n;if(e===6)ii(t,r);else{if(i=t.current.alternate,!(r&30)&&!jI(i)&&(e=gu(t,r),e===2&&(o=hf(t),o!==0&&(r=o,e=Uf(t,o))),e===1))throw n=za,Gi(t,0),ii(t,r),vn(t,ft()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(L(345));case 2:Fi(t,pn,wr);break;case 3:if(ii(t,r),(r&130023424)===r&&(e=Pm+500-ft(),10<e)){if(Xc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){an(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=Ef(Fi.bind(null,t,pn,wr),e);break}Fi(t,pn,wr);break;case 4:if(ii(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var s=31-Jn(r);o=1<<s,s=e[s],s>i&&(i=s),r&=~o}if(r=i,r=ft()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*MI(r/1960))-r,10<r){t.timeoutHandle=Ef(Fi.bind(null,t,pn,wr),r);break}Fi(t,pn,wr);break;case 5:Fi(t,pn,wr);break;default:throw Error(L(329))}}}return vn(t,ft()),t.callbackNode===n?ME.bind(null,t):null}function Uf(t,e){var n=ga;return t.current.memoizedState.isDehydrated&&(Gi(t,e).flags|=256),t=gu(t,e),t!==2&&(e=pn,pn=n,e!==null&&$f(e)),t}function $f(t){pn===null?pn=t:pn.push.apply(pn,t)}function jI(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],o=i.getSnapshot;i=i.value;try{if(!Yn(o(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function ii(t,e){for(e&=~Cm,e&=~rd,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Jn(e),r=1<<n;t[n]=-1,e&=~r}}function cv(t){if(ke&6)throw Error(L(327));Ho();var e=Xc(t,0);if(!(e&1))return vn(t,ft()),null;var n=gu(t,e);if(t.tag!==0&&n===2){var r=hf(t);r!==0&&(e=r,n=Uf(t,r))}if(n===1)throw n=za,Gi(t,0),ii(t,e),vn(t,ft()),n;if(n===6)throw Error(L(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Fi(t,pn,wr),vn(t,ft()),null}function Rm(t,e){var n=ke;ke|=1;try{return t(e)}finally{ke=n,ke===0&&(os=ft()+500,Zu&&xi())}}function no(t){ui!==null&&ui.tag===0&&!(ke&6)&&Ho();var e=ke;ke|=1;var n=On.transition,r=Fe;try{if(On.transition=null,Fe=1,t)return t()}finally{Fe=r,On.transition=n,ke=e,!(ke&6)&&xi()}}function Im(){En=Mo.current,Je(Mo)}function Gi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,hI(n)),vt!==null)for(n=vt.return;n!==null;){var r=n;switch(am(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&ru();break;case 3:rs(),Je(gn),Je(Xt),gm();break;case 5:mm(r);break;case 4:rs();break;case 13:Je(tt);break;case 19:Je(tt);break;case 10:dm(r.type._context);break;case 22:case 23:Im()}n=n.return}if(At=t,vt=t=_i(t.current,null),Mt=En=e,wt=0,za=null,Cm=rd=to=0,pn=ga=null,$i!==null){for(e=0;e<$i.length;e++)if(n=$i[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,o=n.pending;if(o!==null){var s=o.next;o.next=i,r.next=s}n.pending=r}$i=null}return t}function jE(t,e){do{var n=vt;try{if(um(),Ic.current=hu,du){for(var r=nt.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}du=!1}if(eo=0,It=St=nt=null,pa=!1,Ua=0,wm.current=null,n===null||n.return===null){wt=1,za=e,vt=null;break}e:{var o=t,s=n.return,l=n,a=e;if(e=Mt,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var g=Qy(s);if(g!==null){g.flags&=-257,Yy(g,s,l,o,e),g.mode&1&&Jy(o,c,e),e=g,a=c;var p=e.updateQueue;if(p===null){var E=new Set;E.add(a),e.updateQueue=E}else p.add(a);break e}else{if(!(e&1)){Jy(o,c,e),Am();break e}a=Error(L(426))}}else if(Ze&&l.mode&1){var T=Qy(s);if(T!==null){!(T.flags&65536)&&(T.flags|=256),Yy(T,s,l,o,e),lm(is(a,l));break e}}o=a=is(a,l),wt!==4&&(wt=2),ga===null?ga=[o]:ga.push(o),o=s;do{switch(o.tag){case 3:o.flags|=65536,e&=-e,o.lanes|=e;var v=_E(o,a,e);By(o,v);break e;case 1:l=a;var m=o.type,S=o.stateNode;if(!(o.flags&128)&&(typeof m.getDerivedStateFromError=="function"||S!==null&&typeof S.componentDidCatch=="function"&&(yi===null||!yi.has(S)))){o.flags|=65536,e&=-e,o.lanes|=e;var _=EE(o,l,e);By(o,_);break e}}o=o.return}while(o!==null)}VE(n)}catch(C){e=C,vt===n&&n!==null&&(vt=n=n.return);continue}break}while(1)}function LE(){var t=fu.current;return fu.current=hu,t===null?hu:t}function Am(){(wt===0||wt===3||wt===2)&&(wt=4),At===null||!(to&268435455)&&!(rd&268435455)||ii(At,Mt)}function gu(t,e){var n=ke;ke|=2;var r=LE();(At!==t||Mt!==e)&&(wr=null,Gi(t,e));do try{LI();break}catch(i){jE(t,i)}while(1);if(um(),ke=n,fu.current=r,vt!==null)throw Error(L(261));return At=null,Mt=0,wt}function LI(){for(;vt!==null;)FE(vt)}function FI(){for(;vt!==null&&!cR();)FE(vt)}function FE(t){var e=$E(t.alternate,t,En);t.memoizedProps=t.pendingProps,e===null?VE(t):vt=e,wm.current=null}function VE(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=xI(n,e),n!==null){n.flags&=32767,vt=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{wt=6,vt=null;return}}else if(n=bI(n,e,En),n!==null){vt=n;return}if(e=e.sibling,e!==null){vt=e;return}vt=e=t}while(e!==null);wt===0&&(wt=5)}function Fi(t,e,n){var r=Fe,i=On.transition;try{On.transition=null,Fe=1,VI(t,e,n,r)}finally{On.transition=i,Fe=r}return null}function VI(t,e,n,r){do Ho();while(ui!==null);if(ke&6)throw Error(L(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(L(177));t.callbackNode=null,t.callbackPriority=0;var o=n.lanes|n.childLanes;if(_R(t,o),t===At&&(vt=At=null,Mt=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||ic||(ic=!0,BE(Yc,function(){return Ho(),null})),o=(n.flags&15990)!==0,n.subtreeFlags&15990||o){o=On.transition,On.transition=null;var s=Fe;Fe=1;var l=ke;ke|=4,wm.current=null,NI(t,n),NE(n,t),oI(vf),Zc=!!yf,vf=yf=null,t.current=n,OI(n),uR(),ke=l,Fe=s,On.transition=o}else t.current=n;if(ic&&(ic=!1,ui=t,mu=i),o=t.pendingLanes,o===0&&(yi=null),fR(n.stateNode),vn(t,ft()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(pu)throw pu=!1,t=Ff,Ff=null,t;return mu&1&&t.tag!==0&&Ho(),o=t.pendingLanes,o&1?t===Vf?ya++:(ya=0,Vf=t):ya=0,xi(),null}function Ho(){if(ui!==null){var t=v1(mu),e=On.transition,n=Fe;try{if(On.transition=null,Fe=16>t?16:t,ui===null)var r=!1;else{if(t=ui,ui=null,mu=0,ke&6)throw Error(L(331));var i=ke;for(ke|=4,K=t.current;K!==null;){var o=K,s=o.child;if(K.flags&16){var l=o.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for(K=c;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:ma(8,u,o)}var d=u.child;if(d!==null)d.return=u,K=d;else for(;K!==null;){u=K;var f=u.sibling,g=u.return;if(bE(u),u===c){K=null;break}if(f!==null){f.return=g,K=f;break}K=g}}}var p=o.alternate;if(p!==null){var E=p.child;if(E!==null){p.child=null;do{var T=E.sibling;E.sibling=null,E=T}while(E!==null)}}K=o}}if(o.subtreeFlags&2064&&s!==null)s.return=o,K=s;else e:for(;K!==null;){if(o=K,o.flags&2048)switch(o.tag){case 0:case 11:case 15:ma(9,o,o.return)}var v=o.sibling;if(v!==null){v.return=o.return,K=v;break e}K=o.return}}var m=t.current;for(K=m;K!==null;){s=K;var S=s.child;if(s.subtreeFlags&2064&&S!==null)S.return=s,K=S;else e:for(s=m;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:nd(9,l)}}catch(C){ot(l,l.return,C)}if(l===s){K=null;break e}var _=l.sibling;if(_!==null){_.return=l.return,K=_;break e}K=l.return}}if(ke=i,xi(),pr&&typeof pr.onPostCommitFiberRoot=="function")try{pr.onPostCommitFiberRoot(Ku,t)}catch{}r=!0}return r}finally{Fe=n,On.transition=e}}return!1}function uv(t,e,n){e=is(n,e),e=_E(t,e,1),t=gi(t,e,1),e=an(),t!==null&&(fl(t,1,e),vn(t,e))}function ot(t,e,n){if(t.tag===3)uv(t,t,n);else for(;e!==null;){if(e.tag===3){uv(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(yi===null||!yi.has(r))){t=is(n,t),t=EE(e,t,1),e=gi(e,t,1),t=an(),e!==null&&(fl(e,1,t),vn(e,t));break}}e=e.return}}function UI(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=an(),t.pingedLanes|=t.suspendedLanes&n,At===t&&(Mt&n)===n&&(wt===4||wt===3&&(Mt&130023424)===Mt&&500>ft()-Pm?Gi(t,0):Cm|=n),vn(t,e)}function UE(t,e){e===0&&(t.mode&1?(e=Kl,Kl<<=1,!(Kl&130023424)&&(Kl=4194304)):e=1);var n=an();t=Fr(t,e),t!==null&&(fl(t,e,n),vn(t,n))}function $I(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),UE(t,n)}function BI(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(L(314))}r!==null&&r.delete(e),UE(t,n)}var $E;$E=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||gn.current)mn=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return mn=!1,kI(t,e,n);mn=!!(t.flags&131072)}else mn=!1,Ze&&e.flags&1048576&&q1(e,su,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;kc(t,e),t=e.pendingProps;var i=es(e,Xt.current);qo(e,n),i=vm(null,e,r,t,i,n);var o=_m();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,yn(r)?(o=!0,iu(e)):o=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,fm(e),i.updater=ed,e.stateNode=i,i._reactInternals=e,If(e,r,t,n),e=bf(null,e,r,!0,o,n)):(e.tag=0,Ze&&o&&sm(e),on(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(kc(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=qI(r),t=zn(r,t),i){case 0:e=kf(null,e,r,t,n);break e;case 1:e=ev(null,e,r,t,n);break e;case 11:e=Xy(null,e,r,t,n);break e;case 14:e=Zy(null,e,r,zn(r.type,t),n);break e}throw Error(L(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),kf(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),ev(t,e,r,i,n);case 3:e:{if(CE(e),t===null)throw Error(L(387));r=e.pendingProps,o=e.memoizedState,i=o.element,K1(t,e),cu(e,r,null,n);var s=e.memoizedState;if(r=s.element,o.isDehydrated)if(o={element:r,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=o,e.memoizedState=o,e.flags&256){i=is(Error(L(423)),e),e=tv(t,e,r,n,i);break e}else if(r!==i){i=is(Error(L(424)),e),e=tv(t,e,r,n,i);break e}else for(Sn=mi(e.stateNode.containerInfo.firstChild),Tn=e,Ze=!0,Wn=null,n=X1(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ts(),r===i){e=Vr(t,e,n);break e}on(t,e,r,n)}e=e.child}return e;case 5:return Z1(e),t===null&&Cf(e),r=e.type,i=e.pendingProps,o=t!==null?t.memoizedProps:null,s=i.children,_f(r,i)?s=null:o!==null&&_f(r,o)&&(e.flags|=32),wE(t,e),on(t,e,s,n),e.child;case 6:return t===null&&Cf(e),null;case 13:return PE(t,e,n);case 4:return pm(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=ns(e,null,r,n):on(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),Xy(t,e,r,i,n);case 7:return on(t,e,e.pendingProps,n),e.child;case 8:return on(t,e,e.pendingProps.children,n),e.child;case 12:return on(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,o=e.memoizedProps,s=i.value,He(au,r._currentValue),r._currentValue=s,o!==null)if(Yn(o.value,s)){if(o.children===i.children&&!gn.current){e=Vr(t,e,n);break e}}else for(o=e.child,o!==null&&(o.return=e);o!==null;){var l=o.dependencies;if(l!==null){s=o.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(o.tag===1){a=Dr(-1,n&-n),a.tag=2;var c=o.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Pf(o.return,n,e),l.lanes|=n;break}a=a.next}}else if(o.tag===10)s=o.type===e.type?null:o.child;else if(o.tag===18){if(s=o.return,s===null)throw Error(L(341));s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Pf(s,n,e),s=o.sibling}else s=o.child;if(s!==null)s.return=o;else for(s=o;s!==null;){if(s===e){s=null;break}if(o=s.sibling,o!==null){o.return=s.return,s=o;break}s=s.return}o=s}on(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,qo(e,n),i=Ln(i),r=r(i),e.flags|=1,on(t,e,r,n),e.child;case 14:return r=e.type,i=zn(r,e.pendingProps),i=zn(r.type,i),Zy(t,e,r,i,n);case 15:return SE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:zn(r,i),kc(t,e),e.tag=1,yn(r)?(t=!0,iu(e)):t=!1,qo(e,n),Q1(e,r,i),If(e,r,i,n),bf(null,e,r,!0,t,n);case 19:return RE(t,e,n);case 22:return TE(t,e,n)}throw Error(L(156,e.tag))};function BE(t,e){return p1(t,e)}function zI(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Nn(t,e,n,r){return new zI(t,e,n,r)}function km(t){return t=t.prototype,!(!t||!t.isReactComponent)}function qI(t){if(typeof t=="function")return km(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Kp)return 11;if(t===Jp)return 14}return 2}function _i(t,e){var n=t.alternate;return n===null?(n=Nn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Dc(t,e,n,r,i,o){var s=2;if(r=t,typeof t=="function")km(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case Po:return Ki(n.children,i,o,e);case Gp:s=8,i|=8;break;case Qh:return t=Nn(12,n,e,i|2),t.elementType=Qh,t.lanes=o,t;case Yh:return t=Nn(13,n,e,i),t.elementType=Yh,t.lanes=o,t;case Xh:return t=Nn(19,n,e,i),t.elementType=Xh,t.lanes=o,t;case Y_:return id(n,i,o,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case J_:s=10;break e;case Q_:s=9;break e;case Kp:s=11;break e;case Jp:s=14;break e;case ti:s=16,r=null;break e}throw Error(L(130,t==null?t:typeof t,""))}return e=Nn(s,n,e,i),e.elementType=t,e.type=r,e.lanes=o,e}function Ki(t,e,n,r){return t=Nn(7,t,r,e),t.lanes=n,t}function id(t,e,n,r){return t=Nn(22,t,r,e),t.elementType=Y_,t.lanes=n,t.stateNode={isHidden:!1},t}function yh(t,e,n){return t=Nn(6,t,null,e),t.lanes=n,t}function vh(t,e,n){return e=Nn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function HI(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Xd(0),this.expirationTimes=Xd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Xd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function bm(t,e,n,r,i,o,s,l,a){return t=new HI(t,e,n,l,a),e===1?(e=1,o===!0&&(e|=8)):e=0,o=Nn(3,null,null,e),t.current=o,o.stateNode=t,o.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},fm(o),t}function WI(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Co,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function zE(t){if(!t)return Pi;t=t._reactInternals;e:{if(ho(t)!==t||t.tag!==1)throw Error(L(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(yn(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(L(171))}if(t.tag===1){var n=t.type;if(yn(n))return B1(t,n,e)}return e}function qE(t,e,n,r,i,o,s,l,a){return t=bm(n,r,!0,t,i,o,s,l,a),t.context=zE(null),n=t.current,r=an(),i=vi(n),o=Dr(r,i),o.callback=e??null,gi(n,o,i),t.current.lanes=i,fl(t,i,r),vn(t,r),t}function od(t,e,n,r){var i=e.current,o=an(),s=vi(i);return n=zE(n),e.context===null?e.context=n:e.pendingContext=n,e=Dr(o,s),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=gi(i,e,s),t!==null&&(Qn(t,i,s,o),Rc(t,i,s)),s}function yu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function dv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function xm(t,e){dv(t,e),(t=t.alternate)&&dv(t,e)}function GI(){return null}var HE=typeof reportError=="function"?reportError:function(t){console.error(t)};function Dm(t){this._internalRoot=t}sd.prototype.render=Dm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(L(409));od(t,e,null,null)};sd.prototype.unmount=Dm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;no(function(){od(null,t,null,null)}),e[Lr]=null}};function sd(t){this._internalRoot=t}sd.prototype.unstable_scheduleHydration=function(t){if(t){var e=S1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<ri.length&&e!==0&&e<ri[n].priority;n++);ri.splice(n,0,t),n===0&&w1(t)}};function Nm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ad(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function hv(){}function KI(t,e,n,r,i){if(i){if(typeof r=="function"){var o=r;r=function(){var c=yu(s);o.call(c)}}var s=qE(e,r,t,0,null,!1,!1,"",hv);return t._reactRootContainer=s,t[Lr]=s.current,Ma(t.nodeType===8?t.parentNode:t),no(),s}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=yu(a);l.call(c)}}var a=bm(t,0,!1,null,null,!1,!1,"",hv);return t._reactRootContainer=a,t[Lr]=a.current,Ma(t.nodeType===8?t.parentNode:t),no(function(){od(e,a,n,r)}),a}function ld(t,e,n,r,i){var o=n._reactRootContainer;if(o){var s=o;if(typeof i=="function"){var l=i;i=function(){var a=yu(s);l.call(a)}}od(e,s,t,i)}else s=KI(n,e,t,i,r);return yu(s)}_1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=Xs(e.pendingLanes);n!==0&&(Xp(e,n|1),vn(e,ft()),!(ke&6)&&(os=ft()+500,xi()))}break;case 13:no(function(){var r=Fr(t,1);if(r!==null){var i=an();Qn(r,t,1,i)}}),xm(t,1)}};Zp=function(t){if(t.tag===13){var e=Fr(t,134217728);if(e!==null){var n=an();Qn(e,t,134217728,n)}xm(t,134217728)}};E1=function(t){if(t.tag===13){var e=vi(t),n=Fr(t,e);if(n!==null){var r=an();Qn(n,t,e,r)}xm(t,e)}};S1=function(){return Fe};T1=function(t,e){var n=Fe;try{return Fe=t,e()}finally{Fe=n}};cf=function(t,e,n){switch(e){case"input":if(tf(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=Xu(r);if(!i)throw Error(L(90));Z_(r),tf(r,i)}}}break;case"textarea":t1(t,n);break;case"select":e=n.value,e!=null&&Uo(t,!!n.multiple,e,!1)}};l1=Rm;c1=no;var JI={usingClientEntryPoint:!1,Events:[ml,ko,Xu,s1,a1,Rm]},Us={findFiberByHostInstance:Ui,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},QI={bundleType:Us.bundleType,version:Us.version,rendererPackageName:Us.rendererPackageName,rendererConfig:Us.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Hr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=h1(t),t===null?null:t.stateNode},findFiberByHostInstance:Us.findFiberByHostInstance||GI,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var oc=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!oc.isDisabled&&oc.supportsFiber)try{Ku=oc.inject(QI),pr=oc}catch{}}Pn.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=JI;Pn.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Nm(e))throw Error(L(200));return WI(t,e,null,n)};Pn.createRoot=function(t,e){if(!Nm(t))throw Error(L(299));var n=!1,r="",i=HE;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=bm(t,1,!1,null,null,n,!1,r,i),t[Lr]=e.current,Ma(t.nodeType===8?t.parentNode:t),new Dm(e)};Pn.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(L(188)):(t=Object.keys(t).join(","),Error(L(268,t)));return t=h1(e),t=t===null?null:t.stateNode,t};Pn.flushSync=function(t){return no(t)};Pn.hydrate=function(t,e,n){if(!ad(e))throw Error(L(200));return ld(null,t,e,!0,n)};Pn.hydrateRoot=function(t,e,n){if(!Nm(t))throw Error(L(405));var r=n!=null&&n.hydratedSources||null,i=!1,o="",s=HE;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(o=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=qE(e,null,t,1,n??null,i,!1,o,s),t[Lr]=e.current,Ma(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new sd(e)};Pn.render=function(t,e,n){if(!ad(e))throw Error(L(200));return ld(null,t,e,!1,n)};Pn.unmountComponentAtNode=function(t){if(!ad(t))throw Error(L(40));return t._reactRootContainer?(no(function(){ld(null,null,t,!1,function(){t._reactRootContainer=null,t[Lr]=null})}),!0):!1};Pn.unstable_batchedUpdates=Rm;Pn.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!ad(n))throw Error(L(200));if(t==null||t._reactInternals===void 0)throw Error(L(38));return ld(t,e,n,!1,r)};Pn.version="18.2.0-next-9e3b772b8-20220608";function WE(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(WE)}catch(t){console.error(t)}}WE(),q_.exports=Pn;var YI=q_.exports,fv=YI;Kh.createRoot=fv.createRoot,Kh.hydrateRoot=fv.hydrateRoot;/**
 * @remix-run/router v1.8.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Xe(){return Xe=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Xe.apply(this,arguments)}var gt;(function(t){t.Pop="POP",t.Push="PUSH",t.Replace="REPLACE"})(gt||(gt={}));const pv="popstate";function XI(t){t===void 0&&(t={});function e(r,i){let{pathname:o,search:s,hash:l}=r.location;return qa("",{pathname:o,search:s,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:yl(i)}return eA(e,n,null,t)}function Re(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ss(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function ZI(){return Math.random().toString(36).substr(2,8)}function mv(t,e){return{usr:t.state,key:t.key,idx:e}}function qa(t,e,n,r){return n===void 0&&(n=null),Xe({pathname:typeof t=="string"?t:t.pathname,search:"",hash:""},typeof e=="string"?Wr(e):e,{state:n,key:e&&e.key||r||ZI()})}function yl(t){let{pathname:e="/",search:n="",hash:r=""}=t;return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(e+=r.charAt(0)==="#"?r:"#"+r),e}function Wr(t){let e={};if(t){let n=t.indexOf("#");n>=0&&(e.hash=t.substr(n),t=t.substr(0,n));let r=t.indexOf("?");r>=0&&(e.search=t.substr(r),t=t.substr(0,r)),t&&(e.pathname=t)}return e}function eA(t,e,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:o=!1}=r,s=i.history,l=gt.Pop,a=null,c=u();c==null&&(c=0,s.replaceState(Xe({},s.state,{idx:c}),""));function u(){return(s.state||{idx:null}).idx}function d(){l=gt.Pop;let T=u(),v=T==null?null:T-c;c=T,a&&a({action:l,location:E.location,delta:v})}function f(T,v){l=gt.Push;let m=qa(E.location,T,v);n&&n(m,T),c=u()+1;let S=mv(m,c),_=E.createHref(m);try{s.pushState(S,"",_)}catch(C){if(C instanceof DOMException&&C.name==="DataCloneError")throw C;i.location.assign(_)}o&&a&&a({action:l,location:E.location,delta:1})}function g(T,v){l=gt.Replace;let m=qa(E.location,T,v);n&&n(m,T),c=u();let S=mv(m,c),_=E.createHref(m);s.replaceState(S,"",_),o&&a&&a({action:l,location:E.location,delta:0})}function p(T){let v=i.location.origin!=="null"?i.location.origin:i.location.href,m=typeof T=="string"?T:yl(T);return Re(v,"No window.location.(origin|href) available to create URL for href: "+m),new URL(m,v)}let E={get action(){return l},get location(){return t(i,s)},listen(T){if(a)throw new Error("A history only accepts one active listener");return i.addEventListener(pv,d),a=T,()=>{i.removeEventListener(pv,d),a=null}},createHref(T){return e(i,T)},createURL:p,encodeLocation(T){let v=p(T);return{pathname:v.pathname,search:v.search,hash:v.hash}},push:f,replace:g,go(T){return s.go(T)}};return E}var ht;(function(t){t.data="data",t.deferred="deferred",t.redirect="redirect",t.error="error"})(ht||(ht={}));const tA=new Set(["lazy","caseSensitive","path","id","index","children"]);function nA(t){return t.index===!0}function Bf(t,e,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),t.map((i,o)=>{let s=[...n,o],l=typeof i.id=="string"?i.id:s.join("-");if(Re(i.index!==!0||!i.children,"Cannot specify children on an index route"),Re(!r[l],'Found a route id collision on id "'+l+`".  Route id's must be globally unique within Data Router usages`),nA(i)){let a=Xe({},i,e(i),{id:l});return r[l]=a,a}else{let a=Xe({},i,e(i),{id:l,children:void 0});return r[l]=a,i.children&&(a.children=Bf(i.children,e,s,r)),a}})}function jo(t,e,n){n===void 0&&(n="/");let r=typeof e=="string"?Wr(e):e,i=vl(r.pathname||"/",n);if(i==null)return null;let o=GE(t);rA(o);let s=null;for(let l=0;s==null&&l<o.length;++l)s=hA(o[l],mA(i));return s}function GE(t,e,n,r){e===void 0&&(e=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(o,s,l)=>{let a={relativePath:l===void 0?o.path||"":l,caseSensitive:o.caseSensitive===!0,childrenIndex:s,route:o};a.relativePath.startsWith("/")&&(Re(a.relativePath.startsWith(r),'Absolute route path "'+a.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),a.relativePath=a.relativePath.slice(r.length));let c=Ji([r,a.relativePath]),u=n.concat(a);o.children&&o.children.length>0&&(Re(o.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+c+'".')),GE(o.children,e,u,c)),!(o.path==null&&!o.index)&&e.push({path:c,score:uA(c,o.index),routesMeta:u})};return t.forEach((o,s)=>{var l;if(o.path===""||!((l=o.path)!=null&&l.includes("?")))i(o,s);else for(let a of KE(o.path))i(o,s,a)}),e}function KE(t){let e=t.split("/");if(e.length===0)return[];let[n,...r]=e,i=n.endsWith("?"),o=n.replace(/\?$/,"");if(r.length===0)return i?[o,""]:[o];let s=KE(r.join("/")),l=[];return l.push(...s.map(a=>a===""?o:[o,a].join("/"))),i&&l.push(...s),l.map(a=>t.startsWith("/")&&a===""?"/":a)}function rA(t){t.sort((e,n)=>e.score!==n.score?n.score-e.score:dA(e.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const iA=/^:\w+$/,oA=3,sA=2,aA=1,lA=10,cA=-2,gv=t=>t==="*";function uA(t,e){let n=t.split("/"),r=n.length;return n.some(gv)&&(r+=cA),e&&(r+=sA),n.filter(i=>!gv(i)).reduce((i,o)=>i+(iA.test(o)?oA:o===""?aA:lA),r)}function dA(t,e){return t.length===e.length&&t.slice(0,-1).every((r,i)=>r===e[i])?t[t.length-1]-e[e.length-1]:0}function hA(t,e){let{routesMeta:n}=t,r={},i="/",o=[];for(let s=0;s<n.length;++s){let l=n[s],a=s===n.length-1,c=i==="/"?e:e.slice(i.length)||"/",u=fA({path:l.relativePath,caseSensitive:l.caseSensitive,end:a},c);if(!u)return null;Object.assign(r,u.params);let d=l.route;o.push({params:r,pathname:Ji([i,u.pathname]),pathnameBase:EA(Ji([i,u.pathnameBase])),route:d}),u.pathnameBase!=="/"&&(i=Ji([i,u.pathnameBase]))}return o}function fA(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[n,r]=pA(t.path,t.caseSensitive,t.end),i=e.match(n);if(!i)return null;let o=i[0],s=o.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((c,u,d)=>{if(u==="*"){let f=l[d]||"";s=o.slice(0,o.length-f.length).replace(/(.)\/+$/,"$1")}return c[u]=gA(l[d]||"",u),c},{}),pathname:o,pathnameBase:s,pattern:t}}function pA(t,e,n){e===void 0&&(e=!1),n===void 0&&(n=!0),ss(t==="*"||!t.endsWith("*")||t.endsWith("/*"),'Route path "'+t+'" will be treated as if it were '+('"'+t.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+t.replace(/\*$/,"/*")+'".'));let r=[],i="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^$?{}|()[\]]/g,"\\$&").replace(/\/:(\w+)/g,(s,l)=>(r.push(l),"/([^\\/]+)"));return t.endsWith("*")?(r.push("*"),i+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":t!==""&&t!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,e?void 0:"i"),r]}function mA(t){try{return decodeURI(t)}catch(e){return ss(!1,'The URL path "'+t+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+e+").")),t}}function gA(t,e){try{return decodeURIComponent(t)}catch(n){return ss(!1,'The value for the URL param "'+e+'" will not be decoded because'+(' the string "'+t+'" is a malformed URL segment. This is probably')+(" due to a bad percent encoding ("+n+").")),t}}function vl(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let n=e.endsWith("/")?e.length-1:e.length,r=t.charAt(n);return r&&r!=="/"?null:t.slice(n)||"/"}function yA(t,e){e===void 0&&(e="/");let{pathname:n,search:r="",hash:i=""}=typeof t=="string"?Wr(t):t;return{pathname:n?n.startsWith("/")?n:vA(n,e):e,search:SA(r),hash:TA(i)}}function vA(t,e){let n=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function _h(t,e,n,r){return"Cannot include a '"+t+"' character in a manually specified "+("`to."+e+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function JE(t){return t.filter((e,n)=>n===0||e.route.path&&e.route.path.length>0)}function _A(t,e,n,r){r===void 0&&(r=!1);let i;typeof t=="string"?i=Wr(t):(i=Xe({},t),Re(!i.pathname||!i.pathname.includes("?"),_h("?","pathname","search",i)),Re(!i.pathname||!i.pathname.includes("#"),_h("#","pathname","hash",i)),Re(!i.search||!i.search.includes("#"),_h("#","search","hash",i)));let o=t===""||i.pathname==="",s=o?"/":i.pathname,l;if(r||s==null)l=n;else{let d=e.length-1;if(s.startsWith("..")){let f=s.split("/");for(;f[0]==="..";)f.shift(),d-=1;i.pathname=f.join("/")}l=d>=0?e[d]:"/"}let a=yA(i,l),c=s&&s!=="/"&&s.endsWith("/"),u=(o||s===".")&&n.endsWith("/");return!a.pathname.endsWith("/")&&(c||u)&&(a.pathname+="/"),a}const Ji=t=>t.join("/").replace(/\/\/+/g,"/"),EA=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),SA=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,TA=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;class Om{constructor(e,n,r,i){i===void 0&&(i=!1),this.status=e,this.statusText=n||"",this.internal=i,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function QE(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}const YE=["post","put","patch","delete"],wA=new Set(YE),CA=["get",...YE],PA=new Set(CA),RA=new Set([301,302,303,307,308]),IA=new Set([307,308]),Eh={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},AA={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},$s={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},XE=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kA=t=>({hasErrorBoundary:!!t.hasErrorBoundary});function bA(t){const e=t.window?t.window:typeof window<"u"?window:void 0,n=typeof e<"u"&&typeof e.document<"u"&&typeof e.document.createElement<"u",r=!n;Re(t.routes.length>0,"You must provide a non-empty routes array to createRouter");let i;if(t.mapRouteProperties)i=t.mapRouteProperties;else if(t.detectErrorBoundary){let P=t.detectErrorBoundary;i=A=>({hasErrorBoundary:P(A)})}else i=kA;let o={},s=Bf(t.routes,i,void 0,o),l,a=t.basename||"/",c=Xe({v7_normalizeFormMethod:!1,v7_prependBasename:!1},t.future),u=null,d=new Set,f=null,g=null,p=null,E=t.hydrationData!=null,T=jo(s,t.history.location,a),v=null;if(T==null){let P=An(404,{pathname:t.history.location.pathname}),{matches:A,route:D}=Cv(s);T=A,v={[D.id]:P}}let m=!T.some(P=>P.route.lazy)&&(!T.some(P=>P.route.loader)||t.hydrationData!=null),S,_={historyAction:t.history.action,location:t.history.location,matches:T,initialized:m,navigation:Eh,restoreScrollPosition:t.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:t.hydrationData&&t.hydrationData.loaderData||{},actionData:t.hydrationData&&t.hydrationData.actionData||null,errors:t.hydrationData&&t.hydrationData.errors||v,fetchers:new Map,blockers:new Map},C=gt.Pop,R=!1,b,y=!1,I=!1,w=[],Y=[],q=new Map,me=0,ge=-1,Z=new Map,ve=new Set,be=new Map,O=new Map,F=new Map,$=!1;function de(){return u=t.history.listen(P=>{let{action:A,location:D,delta:B}=P;if($){$=!1;return}ss(F.size===0||B!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let oe=tr({currentLocation:_.location,nextLocation:D,historyAction:A});if(oe&&B!=null){$=!0,t.history.go(B*-1),ct(oe,{state:"blocked",location:D,proceed(){ct(oe,{state:"proceeding",proceed:void 0,reset:void 0,location:D}),t.history.go(B)},reset(){let ne=new Map(_.blockers);ne.set(oe,$s),ae({blockers:ne})}});return}return N(A,D)}),_.initialized||N(gt.Pop,_.location),S}function fe(){u&&u(),d.clear(),b&&b.abort(),_.fetchers.forEach((P,A)=>Ye(A)),_.blockers.forEach((P,A)=>$n(A))}function ye(P){return d.add(P),()=>d.delete(P)}function ae(P){_=Xe({},_,P),d.forEach(A=>A(_))}function Ue(P,A){var D,B;let oe=_.actionData!=null&&_.navigation.formMethod!=null&&Hn(_.navigation.formMethod)&&_.navigation.state==="loading"&&((D=P.state)==null?void 0:D._isRedirect)!==!0,ne;A.actionData?Object.keys(A.actionData).length>0?ne=A.actionData:ne=null:oe?ne=_.actionData:ne=null;let ee=A.loaderData?wv(_.loaderData,A.loaderData,A.matches||[],A.errors):_.loaderData,Q=_.blockers;Q.size>0&&(Q=new Map(Q),Q.forEach((we,ze)=>Q.set(ze,$s)));let U=R===!0||_.navigation.formMethod!=null&&Hn(_.navigation.formMethod)&&((B=P.state)==null?void 0:B._isRedirect)!==!0;l&&(s=l,l=void 0),y||C===gt.Pop||(C===gt.Push?t.history.push(P,P.state):C===gt.Replace&&t.history.replace(P,P.state)),ae(Xe({},A,{actionData:ne,loaderData:ee,historyAction:C,location:P,initialized:!0,navigation:Eh,revalidation:"idle",restoreScrollPosition:_t(P,A.matches||_.matches),preventScrollReset:U,blockers:Q})),C=gt.Pop,R=!1,y=!1,I=!1,w=[],Y=[]}async function Me(P,A){if(typeof P=="number"){t.history.go(P);return}let D=zf(_.location,_.matches,a,c.v7_prependBasename,P,A==null?void 0:A.fromRouteId,A==null?void 0:A.relative),{path:B,submission:oe,error:ne}=yv(c.v7_normalizeFormMethod,!1,D,A),ee=_.location,Q=qa(_.location,B,A&&A.state);Q=Xe({},Q,t.history.encodeLocation(Q));let U=A&&A.replace!=null?A.replace:void 0,we=gt.Push;U===!0?we=gt.Replace:U===!1||oe!=null&&Hn(oe.formMethod)&&oe.formAction===_.location.pathname+_.location.search&&(we=gt.Replace);let ze=A&&"preventScrollReset"in A?A.preventScrollReset===!0:void 0,Ce=tr({currentLocation:ee,nextLocation:Q,historyAction:we});if(Ce){ct(Ce,{state:"blocked",location:Q,proceed(){ct(Ce,{state:"proceeding",proceed:void 0,reset:void 0,location:Q}),Me(P,A)},reset(){let qe=new Map(_.blockers);qe.set(Ce,$s),ae({blockers:qe})}});return}return await N(we,Q,{submission:oe,pendingError:ne,preventScrollReset:ze,replace:A&&A.replace})}function je(){if($e(),ae({revalidation:"loading"}),_.navigation.state!=="submitting"){if(_.navigation.state==="idle"){N(_.historyAction,_.location,{startUninterruptedRevalidation:!0});return}N(C||_.historyAction,_.navigation.location,{overrideNavigation:_.navigation})}}async function N(P,A,D){b&&b.abort(),b=null,C=P,y=(D&&D.startUninterruptedRevalidation)===!0,_e(_.location,_.matches),R=(D&&D.preventScrollReset)===!0;let B=l||s,oe=D&&D.overrideNavigation,ne=jo(B,A,a);if(!ne){let qe=An(404,{pathname:A.pathname}),{matches:ut,route:rr}=Cv(B);In(),Ue(A,{matches:ut,loaderData:{},errors:{[rr.id]:qe}});return}if(_.initialized&&!I&&MA(_.location,A)&&!(D&&D.submission&&Hn(D.submission.formMethod))){Ue(A,{matches:ne});return}b=new AbortController;let ee=zs(t.history,A,b.signal,D&&D.submission),Q,U;if(D&&D.pendingError)U={[Lo(ne).route.id]:D.pendingError};else if(D&&D.submission&&Hn(D.submission.formMethod)){let qe=await M(ee,A,D.submission,ne,{replace:D.replace});if(qe.shortCircuited)return;Q=qe.pendingActionData,U=qe.pendingActionError,oe=sc(A,D.submission),ee=new Request(ee.url,{signal:ee.signal})}let{shortCircuited:we,loaderData:ze,errors:Ce}=await te(ee,A,ne,oe,D&&D.submission,D&&D.fetcherSubmission,D&&D.replace,Q,U);we||(b=null,Ue(A,Xe({matches:ne},Q?{actionData:Q}:{},{loaderData:ze,errors:Ce})))}async function M(P,A,D,B,oe){oe===void 0&&(oe={}),$e();let ne=UA(A,D);ae({navigation:ne});let ee,Q=Hf(B,A);if(!Q.route.action&&!Q.route.lazy)ee={type:ht.error,error:An(405,{method:P.method,pathname:A.pathname,routeId:Q.route.id})};else if(ee=await Bs("action",P,Q,B,o,i,a),P.signal.aborted)return{shortCircuited:!0};if(Wo(ee)){let U;return oe&&oe.replace!=null?U=oe.replace:U=ee.location===_.location.pathname+_.location.search,await W(_,ee,{submission:D,replace:U}),{shortCircuited:!0}}if(va(ee)){let U=Lo(B,Q.route.id);return(oe&&oe.replace)!==!0&&(C=gt.Push),{pendingActionData:{},pendingActionError:{[U.route.id]:ee.error}}}if(zi(ee))throw An(400,{type:"defer-action"});return{pendingActionData:{[Q.route.id]:ee.data}}}async function te(P,A,D,B,oe,ne,ee,Q,U){let we=B||sc(A,oe),ze=oe||ne||Iv(we),Ce=l||s,[qe,ut]=vv(t.history,_,D,ze,A,I,w,Y,be,ve,Ce,a,Q,U);if(In(Ie=>!(D&&D.some(hn=>hn.route.id===Ie))||qe&&qe.some(hn=>hn.route.id===Ie)),ge=++me,qe.length===0&&ut.length===0){let Ie=Be();return Ue(A,Xe({matches:D,loaderData:{},errors:U||null},Q?{actionData:Q}:{},Ie?{fetchers:new Map(_.fetchers)}:{})),{shortCircuited:!0}}if(!y){ut.forEach(hn=>{let Yr=_.fetchers.get(hn.key),Wd=qs(void 0,Yr?Yr.data:void 0);_.fetchers.set(hn.key,Wd)});let Ie=Q||_.actionData;ae(Xe({navigation:we},Ie?Object.keys(Ie).length===0?{actionData:null}:{actionData:Ie}:{},ut.length>0?{fetchers:new Map(_.fetchers)}:{}))}ut.forEach(Ie=>{q.has(Ie.key)&&pt(Ie.key),Ie.controller&&q.set(Ie.key,Ie.controller)});let rr=()=>ut.forEach(Ie=>pt(Ie.key));b&&b.signal.addEventListener("abort",rr);let{results:ir,loaderResults:Kr,fetcherResults:or}=await nn(_.matches,D,qe,ut,P);if(P.signal.aborted)return{shortCircuited:!0};b&&b.signal.removeEventListener("abort",rr),ut.forEach(Ie=>q.delete(Ie.key));let Ut=Pv(ir);if(Ut){if(Ut.idx>=qe.length){let Ie=ut[Ut.idx-qe.length].key;ve.add(Ie)}return await W(_,Ut.result,{replace:ee}),{shortCircuited:!0}}let{loaderData:rn,errors:_n}=Tv(_,D,qe,Kr,U,ut,or,O);O.forEach((Ie,hn)=>{Ie.subscribe(Yr=>{(Yr||Ie.done)&&O.delete(hn)})});let Jr=Be(),xs=Un(ge),Qr=Jr||xs||ut.length>0;return Xe({loaderData:rn,errors:_n},Qr?{fetchers:new Map(_.fetchers)}:{})}function G(P){return _.fetchers.get(P)||AA}function H(P,A,D,B){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");q.has(P)&&pt(P);let oe=l||s,ne=zf(_.location,_.matches,a,c.v7_prependBasename,D,A,B==null?void 0:B.relative),ee=jo(oe,ne,a);if(!ee){We(P,A,An(404,{pathname:ne}));return}let{path:Q,submission:U,error:we}=yv(c.v7_normalizeFormMethod,!0,ne,B);if(we){We(P,A,we);return}let ze=Hf(ee,Q);if(R=(B&&B.preventScrollReset)===!0,U&&Hn(U.formMethod)){lt(P,A,Q,ze,ee,U);return}be.set(P,{routeId:A,path:Q}),et(P,A,Q,ze,ee,U)}async function lt(P,A,D,B,oe,ne){if($e(),be.delete(P),!B.route.action&&!B.route.lazy){let Et=An(405,{method:ne.formMethod,pathname:D,routeId:A});We(P,A,Et);return}let ee=_.fetchers.get(P),Q=$A(ne,ee);_.fetchers.set(P,Q),ae({fetchers:new Map(_.fetchers)});let U=new AbortController,we=zs(t.history,D,U.signal,ne);q.set(P,U);let ze=me,Ce=await Bs("action",we,B,oe,o,i,a);if(we.signal.aborted){q.get(P)===U&&q.delete(P);return}if(Wo(Ce))if(q.delete(P),ge>ze){let Et=Eo(void 0);_.fetchers.set(P,Et),ae({fetchers:new Map(_.fetchers)});return}else{ve.add(P);let Et=qs(ne);return _.fetchers.set(P,Et),ae({fetchers:new Map(_.fetchers)}),W(_,Ce,{submission:ne,isFetchActionRedirect:!0})}if(va(Ce)){We(P,A,Ce.error);return}if(zi(Ce))throw An(400,{type:"defer-action"});let qe=_.navigation.location||_.location,ut=zs(t.history,qe,U.signal),rr=l||s,ir=_.navigation.state!=="idle"?jo(rr,_.navigation.location,a):_.matches;Re(ir,"Didn't find any matches after fetcher action");let Kr=++me;Z.set(P,Kr);let or=qs(ne,Ce.data);_.fetchers.set(P,or);let[Ut,rn]=vv(t.history,_,ir,ne,qe,I,w,Y,be,ve,rr,a,{[B.route.id]:Ce.data},void 0);rn.filter(Et=>Et.key!==P).forEach(Et=>{let Ds=Et.key,iy=_.fetchers.get(Ds),SP=qs(void 0,iy?iy.data:void 0);_.fetchers.set(Ds,SP),q.has(Ds)&&pt(Ds),Et.controller&&q.set(Ds,Et.controller)}),ae({fetchers:new Map(_.fetchers)});let _n=()=>rn.forEach(Et=>pt(Et.key));U.signal.addEventListener("abort",_n);let{results:Jr,loaderResults:xs,fetcherResults:Qr}=await nn(_.matches,ir,Ut,rn,ut);if(U.signal.aborted)return;U.signal.removeEventListener("abort",_n),Z.delete(P),q.delete(P),rn.forEach(Et=>q.delete(Et.key));let Ie=Pv(Jr);if(Ie){if(Ie.idx>=Ut.length){let Et=rn[Ie.idx-Ut.length].key;ve.add(Et)}return W(_,Ie.result)}let{loaderData:hn,errors:Yr}=Tv(_,_.matches,Ut,xs,void 0,rn,Qr,O);if(_.fetchers.has(P)){let Et=Eo(Ce.data);_.fetchers.set(P,Et)}let Wd=Un(Kr);_.navigation.state==="loading"&&Kr>ge?(Re(C,"Expected pending action"),b&&b.abort(),Ue(_.navigation.location,{matches:ir,loaderData:hn,errors:Yr,fetchers:new Map(_.fetchers)})):(ae(Xe({errors:Yr,loaderData:wv(_.loaderData,hn,ir,Yr)},Wd||rn.length>0?{fetchers:new Map(_.fetchers)}:{})),I=!1)}async function et(P,A,D,B,oe,ne){let ee=_.fetchers.get(P),Q=qs(ne,ee?ee.data:void 0);_.fetchers.set(P,Q),ae({fetchers:new Map(_.fetchers)});let U=new AbortController,we=zs(t.history,D,U.signal);q.set(P,U);let ze=me,Ce=await Bs("loader",we,B,oe,o,i,a);if(zi(Ce)&&(Ce=await tS(Ce,we.signal,!0)||Ce),q.get(P)===U&&q.delete(P),we.signal.aborted)return;if(Wo(Ce))if(ge>ze){let ut=Eo(void 0);_.fetchers.set(P,ut),ae({fetchers:new Map(_.fetchers)});return}else{ve.add(P),await W(_,Ce);return}if(va(Ce)){let ut=Lo(_.matches,A);_.fetchers.delete(P),ae({fetchers:new Map(_.fetchers),errors:{[ut.route.id]:Ce.error}});return}Re(!zi(Ce),"Unhandled fetcher deferred data");let qe=Eo(Ce.data);_.fetchers.set(P,qe),ae({fetchers:new Map(_.fetchers)})}async function W(P,A,D){let{submission:B,replace:oe,isFetchActionRedirect:ne}=D===void 0?{}:D;A.revalidate&&(I=!0);let ee=qa(P.location,A.location,Xe({_isRedirect:!0},ne?{_isFetchActionRedirect:!0}:{}));if(Re(ee,"Expected a location on the redirect navigation"),n){let we=!1;if(A.reloadDocument)we=!0;else if(XE.test(A.location)){const ze=t.history.createURL(A.location);we=ze.origin!==e.location.origin||vl(ze.pathname,a)==null}if(we){oe?e.location.replace(A.location):e.location.assign(A.location);return}}b=null;let Q=oe===!0?gt.Replace:gt.Push,U=B||Iv(P.navigation);if(IA.has(A.status)&&U&&Hn(U.formMethod))await N(Q,ee,{submission:Xe({},U,{formAction:A.location}),preventScrollReset:R});else if(ne)await N(Q,ee,{overrideNavigation:sc(ee),fetcherSubmission:U,preventScrollReset:R});else{let we=sc(ee,U);await N(Q,ee,{overrideNavigation:we,preventScrollReset:R})}}async function nn(P,A,D,B,oe){let ne=await Promise.all([...D.map(U=>Bs("loader",oe,U,A,o,i,a)),...B.map(U=>U.matches&&U.match&&U.controller?Bs("loader",zs(t.history,U.path,U.controller.signal),U.match,U.matches,o,i,a):{type:ht.error,error:An(404,{pathname:U.path})})]),ee=ne.slice(0,D.length),Q=ne.slice(D.length);return await Promise.all([Rv(P,D,ee,ee.map(()=>oe.signal),!1,_.loaderData),Rv(P,B.map(U=>U.match),Q,B.map(U=>U.controller?U.controller.signal:null),!0)]),{results:ne,loaderResults:ee,fetcherResults:Q}}function $e(){I=!0,w.push(...In()),be.forEach((P,A)=>{q.has(A)&&(Y.push(A),pt(A))})}function We(P,A,D){let B=Lo(_.matches,A);Ye(P),ae({errors:{[B.route.id]:D},fetchers:new Map(_.fetchers)})}function Ye(P){let A=_.fetchers.get(P);q.has(P)&&!(A&&A.state==="loading"&&Z.has(P))&&pt(P),be.delete(P),Z.delete(P),ve.delete(P),_.fetchers.delete(P)}function pt(P){let A=q.get(P);Re(A,"Expected fetch controller: "+P),A.abort(),q.delete(P)}function Te(P){for(let A of P){let D=G(A),B=Eo(D.data);_.fetchers.set(A,B)}}function Be(){let P=[],A=!1;for(let D of ve){let B=_.fetchers.get(D);Re(B,"Expected fetcher: "+D),B.state==="loading"&&(ve.delete(D),P.push(D),A=!0)}return Te(P),A}function Un(P){let A=[];for(let[D,B]of Z)if(B<P){let oe=_.fetchers.get(D);Re(oe,"Expected fetcher: "+D),oe.state==="loading"&&(pt(D),Z.delete(D),A.push(D))}return Te(A),A.length>0}function er(P,A){let D=_.blockers.get(P)||$s;return F.get(P)!==A&&F.set(P,A),D}function $n(P){_.blockers.delete(P),F.delete(P)}function ct(P,A){let D=_.blockers.get(P)||$s;Re(D.state==="unblocked"&&A.state==="blocked"||D.state==="blocked"&&A.state==="blocked"||D.state==="blocked"&&A.state==="proceeding"||D.state==="blocked"&&A.state==="unblocked"||D.state==="proceeding"&&A.state==="unblocked","Invalid blocker state transition: "+D.state+" -> "+A.state);let B=new Map(_.blockers);B.set(P,A),ae({blockers:B})}function tr(P){let{currentLocation:A,nextLocation:D,historyAction:B}=P;if(F.size===0)return;F.size>1&&ss(!1,"A router only supports one blocker at a time");let oe=Array.from(F.entries()),[ne,ee]=oe[oe.length-1],Q=_.blockers.get(ne);if(!(Q&&Q.state==="proceeding")&&ee({currentLocation:A,nextLocation:D,historyAction:B}))return ne}function In(P){let A=[];return O.forEach((D,B)=>{(!P||P(B))&&(D.cancel(),A.push(B),O.delete(B))}),A}function nr(P,A,D){if(f=P,p=A,g=D||null,!E&&_.navigation===Eh){E=!0;let B=_t(_.location,_.matches);B!=null&&ae({restoreScrollPosition:B})}return()=>{f=null,p=null,g=null}}function dn(P,A){return g&&g(P,A.map(B=>VA(B,_.loaderData)))||P.key}function _e(P,A){if(f&&p){let D=dn(P,A);f[D]=p()}}function _t(P,A){if(f){let D=dn(P,A),B=f[D];if(typeof B=="number")return B}return null}function Ne(P){o={},l=Bf(P,i,void 0,o)}return S={get basename(){return a},get state(){return _},get routes(){return s},initialize:de,subscribe:ye,enableScrollRestoration:nr,navigate:Me,fetch:H,revalidate:je,createHref:P=>t.history.createHref(P),encodeLocation:P=>t.history.encodeLocation(P),getFetcher:G,deleteFetcher:Ye,dispose:fe,getBlocker:er,deleteBlocker:$n,_internalFetchControllers:q,_internalActiveDeferreds:O,_internalSetRoutes:Ne},S}function xA(t){return t!=null&&("formData"in t&&t.formData!=null||"body"in t&&t.body!==void 0)}function zf(t,e,n,r,i,o,s){let l,a;if(o!=null&&s!=="path"){l=[];for(let u of e)if(l.push(u),u.route.id===o){a=u;break}}else l=e,a=e[e.length-1];let c=_A(i||".",JE(l).map(u=>u.pathnameBase),vl(t.pathname,n)||t.pathname,s==="path");return i==null&&(c.search=t.search,c.hash=t.hash),(i==null||i===""||i===".")&&a&&a.route.index&&!Mm(c.search)&&(c.search=c.search?c.search.replace(/^\?/,"?index&"):"?index"),r&&n!=="/"&&(c.pathname=c.pathname==="/"?n:Ji([n,c.pathname])),yl(c)}function yv(t,e,n,r){if(!r||!xA(r))return{path:n};if(r.formMethod&&!FA(r.formMethod))return{path:n,error:An(405,{method:r.formMethod})};let i=()=>({path:n,error:An(400,{type:"invalid-body"})}),o=r.formMethod||"get",s=t?o.toUpperCase():o.toLowerCase(),l=eS(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!Hn(s))return i();let f=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((g,p)=>{let[E,T]=p;return""+g+E+"="+T+`
`},""):String(r.body);return{path:n,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:void 0,text:f}}}else if(r.formEncType==="application/json"){if(!Hn(s))return i();try{let f=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:s,formAction:l,formEncType:r.formEncType,formData:void 0,json:f,text:void 0}}}catch{return i()}}}Re(typeof FormData=="function","FormData is not available in this environment");let a,c;if(r.formData)a=qf(r.formData),c=r.formData;else if(r.body instanceof FormData)a=qf(r.body),c=r.body;else if(r.body instanceof URLSearchParams)a=r.body,c=Sv(a);else if(r.body==null)a=new URLSearchParams,c=new FormData;else try{a=new URLSearchParams(r.body),c=Sv(a)}catch{return i()}let u={formMethod:s,formAction:l,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:c,json:void 0,text:void 0};if(Hn(u.formMethod))return{path:n,submission:u};let d=Wr(n);return e&&d.search&&Mm(d.search)&&a.append("index",""),d.search="?"+a,{path:yl(d),submission:u}}function DA(t,e){let n=t;if(e){let r=t.findIndex(i=>i.route.id===e);r>=0&&(n=t.slice(0,r))}return n}function vv(t,e,n,r,i,o,s,l,a,c,u,d,f,g){let p=g?Object.values(g)[0]:f?Object.values(f)[0]:void 0,E=t.createURL(e.location),T=t.createURL(i),v=g?Object.keys(g)[0]:void 0,S=DA(n,v).filter((C,R)=>{if(C.route.lazy)return!0;if(C.route.loader==null)return!1;if(NA(e.loaderData,e.matches[R],C)||s.some(I=>I===C.route.id))return!0;let b=e.matches[R],y=C;return _v(C,Xe({currentUrl:E,currentParams:b.params,nextUrl:T,nextParams:y.params},r,{actionResult:p,defaultShouldRevalidate:o||E.pathname+E.search===T.pathname+T.search||E.search!==T.search||ZE(b,y)}))}),_=[];return a.forEach((C,R)=>{if(!n.some(Y=>Y.route.id===C.routeId))return;let b=jo(u,C.path,d);if(!b){_.push({key:R,routeId:C.routeId,path:C.path,matches:null,match:null,controller:null});return}let y=e.fetchers.get(R),I=Hf(b,C.path),w=!1;c.has(R)?w=!1:l.includes(R)?w=!0:y&&y.state!=="idle"&&y.data===void 0?w=o:w=_v(I,Xe({currentUrl:E,currentParams:e.matches[e.matches.length-1].params,nextUrl:T,nextParams:n[n.length-1].params},r,{actionResult:p,defaultShouldRevalidate:o})),w&&_.push({key:R,routeId:C.routeId,path:C.path,matches:b,match:I,controller:new AbortController})}),[S,_]}function NA(t,e,n){let r=!e||n.route.id!==e.route.id,i=t[n.route.id]===void 0;return r||i}function ZE(t,e){let n=t.route.path;return t.pathname!==e.pathname||n!=null&&n.endsWith("*")&&t.params["*"]!==e.params["*"]}function _v(t,e){if(t.route.shouldRevalidate){let n=t.route.shouldRevalidate(e);if(typeof n=="boolean")return n}return e.defaultShouldRevalidate}async function Ev(t,e,n){if(!t.lazy)return;let r=await t.lazy();if(!t.lazy)return;let i=n[t.id];Re(i,"No route found in manifest");let o={};for(let s in r){let a=i[s]!==void 0&&s!=="hasErrorBoundary";ss(!a,'Route "'+i.id+'" has a static property "'+s+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+s+'" will be ignored.')),!a&&!tA.has(s)&&(o[s]=r[s])}Object.assign(i,o),Object.assign(i,Xe({},e(i),{lazy:void 0}))}async function Bs(t,e,n,r,i,o,s,l){l===void 0&&(l={});let a,c,u,d=p=>{let E,T=new Promise((v,m)=>E=m);return u=()=>E(),e.signal.addEventListener("abort",u),Promise.race([p({request:e,params:n.params,context:l.requestContext}),T])};try{let p=n.route[t];if(n.route.lazy)if(p)c=(await Promise.all([d(p),Ev(n.route,o,i)]))[0];else if(await Ev(n.route,o,i),p=n.route[t],p)c=await d(p);else if(t==="action"){let E=new URL(e.url),T=E.pathname+E.search;throw An(405,{method:e.method,pathname:T,routeId:n.route.id})}else return{type:ht.data,data:void 0};else if(p)c=await d(p);else{let E=new URL(e.url),T=E.pathname+E.search;throw An(404,{pathname:T})}Re(c!==void 0,"You defined "+(t==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+t+"` ")+"function. Please return a value or `null`.")}catch(p){a=ht.error,c=p}finally{u&&e.signal.removeEventListener("abort",u)}if(LA(c)){let p=c.status;if(RA.has(p)){let v=c.headers.get("Location");if(Re(v,"Redirects returned/thrown from loaders/actions must have a Location header"),!XE.test(v))v=zf(new URL(e.url),r.slice(0,r.indexOf(n)+1),s,!0,v);else if(!l.isStaticRequest){let m=new URL(e.url),S=v.startsWith("//")?new URL(m.protocol+v):new URL(v),_=vl(S.pathname,s)!=null;S.origin===m.origin&&_&&(v=S.pathname+S.search+S.hash)}if(l.isStaticRequest)throw c.headers.set("Location",v),c;return{type:ht.redirect,status:p,location:v,revalidate:c.headers.get("X-Remix-Revalidate")!==null,reloadDocument:c.headers.get("X-Remix-Reload-Document")!==null}}if(l.isRouteRequest)throw{type:a===ht.error?ht.error:ht.data,response:c};let E,T=c.headers.get("Content-Type");return T&&/\bapplication\/json\b/.test(T)?E=await c.json():E=await c.text(),a===ht.error?{type:a,error:new Om(p,c.statusText,E),headers:c.headers}:{type:ht.data,data:E,statusCode:c.status,headers:c.headers}}if(a===ht.error)return{type:a,error:c};if(jA(c)){var f,g;return{type:ht.deferred,deferredData:c,statusCode:(f=c.init)==null?void 0:f.status,headers:((g=c.init)==null?void 0:g.headers)&&new Headers(c.init.headers)}}return{type:ht.data,data:c}}function zs(t,e,n,r){let i=t.createURL(eS(e)).toString(),o={signal:n};if(r&&Hn(r.formMethod)){let{formMethod:s,formEncType:l}=r;o.method=s.toUpperCase(),l==="application/json"?(o.headers=new Headers({"Content-Type":l}),o.body=JSON.stringify(r.json)):l==="text/plain"?o.body=r.text:l==="application/x-www-form-urlencoded"&&r.formData?o.body=qf(r.formData):o.body=r.formData}return new Request(i,o)}function qf(t){let e=new URLSearchParams;for(let[n,r]of t.entries())e.append(n,typeof r=="string"?r:r.name);return e}function Sv(t){let e=new FormData;for(let[n,r]of t.entries())e.append(n,r);return e}function OA(t,e,n,r,i){let o={},s=null,l,a=!1,c={};return n.forEach((u,d)=>{let f=e[d].route.id;if(Re(!Wo(u),"Cannot handle redirect results in processLoaderData"),va(u)){let g=Lo(t,f),p=u.error;r&&(p=Object.values(r)[0],r=void 0),s=s||{},s[g.route.id]==null&&(s[g.route.id]=p),o[f]=void 0,a||(a=!0,l=QE(u.error)?u.error.status:500),u.headers&&(c[f]=u.headers)}else zi(u)?(i.set(f,u.deferredData),o[f]=u.deferredData.data):o[f]=u.data,u.statusCode!=null&&u.statusCode!==200&&!a&&(l=u.statusCode),u.headers&&(c[f]=u.headers)}),r&&(s=r,o[Object.keys(r)[0]]=void 0),{loaderData:o,errors:s,statusCode:l||200,loaderHeaders:c}}function Tv(t,e,n,r,i,o,s,l){let{loaderData:a,errors:c}=OA(e,n,r,i,l);for(let u=0;u<o.length;u++){let{key:d,match:f,controller:g}=o[u];Re(s!==void 0&&s[u]!==void 0,"Did not find corresponding fetcher result");let p=s[u];if(!(g&&g.signal.aborted))if(va(p)){let E=Lo(t.matches,f==null?void 0:f.route.id);c&&c[E.route.id]||(c=Xe({},c,{[E.route.id]:p.error})),t.fetchers.delete(d)}else if(Wo(p))Re(!1,"Unhandled fetcher revalidation redirect");else if(zi(p))Re(!1,"Unhandled fetcher deferred data");else{let E=Eo(p.data);t.fetchers.set(d,E)}}return{loaderData:a,errors:c}}function wv(t,e,n,r){let i=Xe({},e);for(let o of n){let s=o.route.id;if(e.hasOwnProperty(s)?e[s]!==void 0&&(i[s]=e[s]):t[s]!==void 0&&o.route.loader&&(i[s]=t[s]),r&&r.hasOwnProperty(s))break}return i}function Lo(t,e){return(e?t.slice(0,t.findIndex(r=>r.route.id===e)+1):[...t]).reverse().find(r=>r.route.hasErrorBoundary===!0)||t[0]}function Cv(t){let e=t.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:e}],route:e}}function An(t,e){let{pathname:n,routeId:r,method:i,type:o}=e===void 0?{}:e,s="Unknown Server Error",l="Unknown @remix-run/router error";return t===400?(s="Bad Request",i&&n&&r?l="You made a "+i+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":o==="defer-action"?l="defer() is not supported in actions":o==="invalid-body"&&(l="Unable to encode submission body")):t===403?(s="Forbidden",l='Route "'+r+'" does not match URL "'+n+'"'):t===404?(s="Not Found",l='No route matches URL "'+n+'"'):t===405&&(s="Method Not Allowed",i&&n&&r?l="You made a "+i.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":i&&(l='Invalid request method "'+i.toUpperCase()+'"')),new Om(t||500,s,new Error(l),!0)}function Pv(t){for(let e=t.length-1;e>=0;e--){let n=t[e];if(Wo(n))return{result:n,idx:e}}}function eS(t){let e=typeof t=="string"?Wr(t):t;return yl(Xe({},e,{hash:""}))}function MA(t,e){return t.pathname!==e.pathname||t.search!==e.search?!1:t.hash===""?e.hash!=="":t.hash===e.hash?!0:e.hash!==""}function zi(t){return t.type===ht.deferred}function va(t){return t.type===ht.error}function Wo(t){return(t&&t.type)===ht.redirect}function jA(t){let e=t;return e&&typeof e=="object"&&typeof e.data=="object"&&typeof e.subscribe=="function"&&typeof e.cancel=="function"&&typeof e.resolveData=="function"}function LA(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.headers=="object"&&typeof t.body<"u"}function FA(t){return PA.has(t.toLowerCase())}function Hn(t){return wA.has(t.toLowerCase())}async function Rv(t,e,n,r,i,o){for(let s=0;s<n.length;s++){let l=n[s],a=e[s];if(!a)continue;let c=t.find(d=>d.route.id===a.route.id),u=c!=null&&!ZE(c,a)&&(o&&o[a.route.id])!==void 0;if(zi(l)&&(i||u)){let d=r[s];Re(d,"Expected an AbortSignal for revalidating fetcher deferred result"),await tS(l,d,i).then(f=>{f&&(n[s]=f||n[s])})}}}async function tS(t,e,n){if(n===void 0&&(n=!1),!await t.deferredData.resolveData(e)){if(n)try{return{type:ht.data,data:t.deferredData.unwrappedData}}catch(i){return{type:ht.error,error:i}}return{type:ht.data,data:t.deferredData.data}}}function Mm(t){return new URLSearchParams(t).getAll("index").some(e=>e==="")}function VA(t,e){let{route:n,pathname:r,params:i}=t;return{id:n.id,pathname:r,params:i,data:e[n.id],handle:n.handle}}function Hf(t,e){let n=typeof e=="string"?Wr(e).search:e.search;if(t[t.length-1].route.index&&Mm(n||""))return t[t.length-1];let r=JE(t);return r[r.length-1]}function Iv(t){let{formMethod:e,formAction:n,formEncType:r,text:i,formData:o,json:s}=t;if(!(!e||!n||!r)){if(i!=null)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:void 0,text:i};if(o!=null)return{formMethod:e,formAction:n,formEncType:r,formData:o,json:void 0,text:void 0};if(s!==void 0)return{formMethod:e,formAction:n,formEncType:r,formData:void 0,json:s,text:void 0}}}function sc(t,e){return e?{state:"loading",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}:{state:"loading",location:t,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function UA(t,e){return{state:"submitting",location:t,formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text}}function qs(t,e){return t?{state:"loading",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e," _hasFetcherDoneAnything ":!0}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e," _hasFetcherDoneAnything ":!0}}function $A(t,e){return{state:"submitting",formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text,data:e?e.data:void 0," _hasFetcherDoneAnything ":!0}}function Eo(t){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t," _hasFetcherDoneAnything ":!0}}/**
 * React Router v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Wf(){return Wf=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},Wf.apply(this,arguments)}const nS=k.createContext(null),rS=k.createContext(null),iS=k.createContext(null),cd=k.createContext(null),ud=k.createContext({outlet:null,matches:[],isDataRoute:!1}),oS=k.createContext(null);function jm(){return k.useContext(cd)!=null}function BA(){return jm()||Re(!1),k.useContext(cd).location}function zA(t,e,n){jm()||Re(!1);let{navigator:r}=k.useContext(iS),{matches:i}=k.useContext(ud),o=i[i.length-1],s=o?o.params:{};o&&o.pathname;let l=o?o.pathnameBase:"/";o&&o.route;let a=BA(),c;if(e){var u;let E=typeof e=="string"?Wr(e):e;l==="/"||(u=E.pathname)!=null&&u.startsWith(l)||Re(!1),c=E}else c=a;let d=c.pathname||"/",f=l==="/"?d:d.slice(l.length)||"/",g=jo(t,{pathname:f}),p=KA(g&&g.map(E=>Object.assign({},E,{params:Object.assign({},s,E.params),pathname:Ji([l,r.encodeLocation?r.encodeLocation(E.pathname).pathname:E.pathname]),pathnameBase:E.pathnameBase==="/"?l:Ji([l,r.encodeLocation?r.encodeLocation(E.pathnameBase).pathname:E.pathnameBase])})),i,n);return e&&p?k.createElement(cd.Provider,{value:{location:Wf({pathname:"/",search:"",hash:"",state:null,key:"default"},c),navigationType:gt.Pop}},p):p}function qA(){let t=XA(),e=QE(t)?t.status+" "+t.statusText:t instanceof Error?t.message:JSON.stringify(t),n=t instanceof Error?t.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"},o=null;return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},e),n?k.createElement("pre",{style:i},n):null,o)}const HA=k.createElement(qA,null);class WA extends k.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error||n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error?k.createElement(ud.Provider,{value:this.props.routeContext},k.createElement(oS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function GA(t){let{routeContext:e,match:n,children:r}=t,i=k.useContext(nS);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(ud.Provider,{value:e},r)}function KA(t,e,n){var r;if(e===void 0&&(e=[]),n===void 0&&(n=null),t==null){var i;if((i=n)!=null&&i.errors)t=n.matches;else return null}let o=t,s=(r=n)==null?void 0:r.errors;if(s!=null){let l=o.findIndex(a=>a.route.id&&(s==null?void 0:s[a.route.id]));l>=0||Re(!1),o=o.slice(0,Math.min(o.length,l+1))}return o.reduceRight((l,a,c)=>{let u=a.route.id?s==null?void 0:s[a.route.id]:null,d=null;n&&(d=a.route.errorElement||HA);let f=e.concat(o.slice(0,c+1)),g=()=>{let p;return u?p=d:a.route.Component?p=k.createElement(a.route.Component,null):a.route.element?p=a.route.element:p=l,k.createElement(GA,{match:a,routeContext:{outlet:l,matches:f,isDataRoute:n!=null},children:p})};return n&&(a.route.ErrorBoundary||a.route.errorElement||c===0)?k.createElement(WA,{location:n.location,revalidation:n.revalidation,component:d,error:u,children:g(),routeContext:{outlet:null,matches:f,isDataRoute:!0}}):g()},null)}var Gf=function(t){return t.UseBlocker="useBlocker",t.UseLoaderData="useLoaderData",t.UseActionData="useActionData",t.UseRouteError="useRouteError",t.UseNavigation="useNavigation",t.UseRouteLoaderData="useRouteLoaderData",t.UseMatches="useMatches",t.UseRevalidator="useRevalidator",t.UseNavigateStable="useNavigate",t.UseRouteId="useRouteId",t}(Gf||{});function JA(t){let e=k.useContext(rS);return e||Re(!1),e}function QA(t){let e=k.useContext(ud);return e||Re(!1),e}function YA(t){let e=QA(),n=e.matches[e.matches.length-1];return n.route.id||Re(!1),n.route.id}function XA(){var t;let e=k.useContext(oS),n=JA(Gf.UseRouteError),r=YA(Gf.UseRouteError);return e||((t=n.errors)==null?void 0:t[r])}const ZA="startTransition",Av=$P[ZA];function ek(t){let{fallbackElement:e,router:n,future:r}=t,[i,o]=k.useState(n.state),{v7_startTransition:s}=r||{},l=k.useCallback(d=>{s&&Av?Av(()=>o(d)):o(d)},[o,s]);k.useLayoutEffect(()=>n.subscribe(l),[n,l]);let a=k.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:d=>n.navigate(d),push:(d,f,g)=>n.navigate(d,{state:f,preventScrollReset:g==null?void 0:g.preventScrollReset}),replace:(d,f,g)=>n.navigate(d,{replace:!0,state:f,preventScrollReset:g==null?void 0:g.preventScrollReset})}),[n]),c=n.basename||"/",u=k.useMemo(()=>({router:n,navigator:a,static:!1,basename:c}),[n,a,c]);return k.createElement(k.Fragment,null,k.createElement(nS.Provider,{value:u},k.createElement(rS.Provider,{value:i},k.createElement(nk,{basename:c,location:i.location,navigationType:i.historyAction,navigator:a},i.initialized?k.createElement(tk,{routes:n.routes,state:i}):e))),null)}function tk(t){let{routes:e,state:n}=t;return zA(e,void 0,n)}function nk(t){let{basename:e="/",children:n=null,location:r,navigationType:i=gt.Pop,navigator:o,static:s=!1}=t;jm()&&Re(!1);let l=e.replace(/^\/*/,"/"),a=k.useMemo(()=>({basename:l,navigator:o,static:s}),[l,o,s]);typeof r=="string"&&(r=Wr(r));let{pathname:c="/",search:u="",hash:d="",state:f=null,key:g="default"}=r,p=k.useMemo(()=>{let E=vl(c,l);return E==null?null:{location:{pathname:E,search:u,hash:d,state:f,key:g},navigationType:i}},[l,c,u,d,f,g,i]);return p==null?null:k.createElement(iS.Provider,{value:a},k.createElement(cd.Provider,{children:n,value:p}))}new Promise(()=>{});function rk(t){let e={hasErrorBoundary:t.ErrorBoundary!=null||t.errorElement!=null};return t.Component&&Object.assign(e,{element:k.createElement(t.Component),Component:void 0}),t.ErrorBoundary&&Object.assign(e,{errorElement:k.createElement(t.ErrorBoundary),ErrorBoundary:void 0}),e}/**
 * React Router DOM v6.15.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vu(){return vu=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},vu.apply(this,arguments)}function ik(t,e){return bA({basename:e==null?void 0:e.basename,future:vu({},e==null?void 0:e.future,{v7_prependBasename:!0}),history:XI({window:e==null?void 0:e.window}),hydrationData:(e==null?void 0:e.hydrationData)||ok(),routes:t,mapRouteProperties:rk}).initialize()}function ok(){var t;let e=(t=window)==null?void 0:t.__staticRouterHydrationData;return e&&e.errors&&(e=vu({},e,{errors:sk(e.errors)})),e}function sk(t){if(!t)return null;let e=Object.entries(t),n={};for(let[r,i]of e)if(i&&i.__type==="RouteErrorResponse")n[r]=new Om(i.status,i.statusText,i.data,i.internal===!0);else if(i&&i.__type==="Error"){if(i.__subType){let o=window[i.__subType];if(typeof o=="function")try{let s=new o(i.message);s.stack="",n[r]=s}catch{}}if(n[r]==null){let o=new Error(i.message);o.stack="",n[r]=o}}else n[r]=i;return n}var kv;(function(t){t.UseScrollRestoration="useScrollRestoration",t.UseSubmit="useSubmit",t.UseSubmitFetcher="useSubmitFetcher",t.UseFetcher="useFetcher"})(kv||(kv={}));var bv;(function(t){t.UseFetchers="useFetchers",t.UseScrollRestoration="useScrollRestoration"})(bv||(bv={}));function ak(){return k.useEffect(()=>{document.title="Monopoly Gallery"},[]),h.jsx("main",{children:h.jsx("div",{className:"gallery-main",children:["1.PNG","2.PNG","3.PNG","4.PNG","5.PNG","6.PNG","7.PNG","8.PNG"].map(t=>h.jsx("img",{src:"Monopoly/gallery/"+t,onClick:()=>{document.location.href="/gallery/"+t}},t))})})}let xv=class{constructor(e,n){Le(this,"id");Le(this,"username");Le(this,"icon");Le(this,"position");Le(this,"balance");Le(this,"properties");Le(this,"isInJail");Le(this,"jailTurnsRemaining");Le(this,"getoutCards");Le(this,"ready");Le(this,"positions");this.id=e,this.username=n,this.icon=-1,this.position=0,this.balance=1500,this.properties=[],this.isInJail=!1,this.jailTurnsRemaining=0,this.getoutCards=0,this.ready=!1,this.positions={x:0,y:0}}recieveJson(e){return this.username=e.username,this.position=e.position,this.icon=e.icon,this.balance=e.balance,this.properties=e.properties,this.isInJail=e.isInJail,this.jailTurnsRemaining=e.jailTurnsRemaining,this.getoutCards=e.getoutCards,this}toJson(){return{balance:this.balance,icon:this.icon,id:this.id,isInJail:this.isInJail,jailTurnsRemaining:this.jailTurnsRemaining,position:this.position,properties:this.properties,username:this.username,getoutCards:this.getoutCards}}get color(){switch(this.icon){case 0:return"#E0115F";case 1:return"#4169e1";case 2:return"#50C878";case 3:return"#FFC000";case 5:return"#FF7F50";case 4:default:return""}}};const lk="/Monopoly/assets/players-69e481c3.png",Dv="/Monopoly/assets/chat-98a8e3f3.png",ck="/Monopoly/assets/chat_new-733d0bcc.png",uk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAjpQTFRFAAAA509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P/m/HAgAAAL50Uk5TABmAwNbYyZApXvX//H8BhTam5vvli0I8oud1DYTvgxQd+p4n/qwzukHITwLUXATfagnoeA/whhb3lB+hKq+9RMpRXwXhbQrqexDyiRj4liGkLLI5R81VA9liBuPrsdAONO0Hcodh/flD9OQg2xfDtZVxUPM1JKXs2s/CtIFvQKgM1x5GVxxokbniKEVWaX6Tp7gLEziInWQVVBIjIt6CWL96dO5OSUtmu7yrbhE9t5cajXfp0U0uJZySfGdSzLBMfx0AAATRSURBVHic7d35fxNFGAbwFxoK9AloFQtigUYDWCqI9aBYMAKCWiwoVpCzgEoFTzwIh1qqiOCJijfgfVRRvG//N7eNNWn2SrKTnbzv531+ntl5v712dnYmJdJoNKVkzNi6xDh7qR8/wYxjYgMsJzlpsgmHbcZQzovuGGP9+zGc8yNDxtom5NIYGVJnm5DLBZEhCduEXC6MDBlnm5BLUiEKqU4UEgCZclHT1FgyrcoQ4OLpl0S+bglprjoEmDFzloFKQxIHBGgY3xK91ODEAwFSl15moNqAxAUB0rPnGKjXN/FBnMy93MQzj3dihQCt89oMFO2VmCHAFfMXGCjbndghwJULrzJQeHEsQID2q68xUProWIEA1163yEDxhbEEAToWX2+g/HysQZwH0s4lBgAjsQhxsjT6ws1I7EKAGzKG7pG2IcCNy4zcI+1DgMTyFTIgwE0rV8mAADffcqsMCNC1+jYZEKB7zVoZEKeC2++QAXGy7k4hEKCup5J7ZA1CgLvWb5ABAe7euEkGBNgsBQKFKEQhCvHK9IKuWzhDphZ03coZ0rYt37XHp01vyXMfixDa3jHSs9OvSaaZA4QyO/5z7PRtgXs4QGjRvYnuLVv9fq6GIbiPAyQ0DmTXMiEQ9N0vBILdpSzTcoBgRwlr5ywg2POAEAgefEgIBNvCljW5QPBwyFozGwgeCX4BwAeCxsC3MowgeDRoKswJgplSINgrBYLlUiDJx4RA0NckBILHn7ALebK5ouxzj5L1PpIVF8T9pa04ezz39jCEYL/XVJgjBAc8dsGxhOCgeyrME4JDrqkwUwj2FU+FuUKwuGgqzBaCp6RA8LQUCCZKgSTnCYGg+xkhEHRtFwLBaiGQ/vyeJNaQuQUbkjhD6g8XDMAYMjDqrCRfyOZnRw3AFlL86M4V4nqvyBSSeq54AJ6Q9BHXADwhC90DsIRM8hiAI6T4KZcrpN/zFVxckOePVpQX3KMc897xzW41ftQEizFkwO/DKJhBjrf4teQFyb7o25IVJGjjFidI6qWAlowg6ZeDWjKCvBLYkg/k1eCWbCCvhWwu5wI5EXbynAnk9dAjdTwgrW+EtmQBSbwZ3pIDxH+CxQsSMMFiBdntsx2otiAn3+p/+53eIEgqU9qVrELePTTcL/uePyS9vsRr2YS8PzDS0/fUTiZ4glUjkPyusu4PfJr4Hr6qJcipgq5ryuxbU5CjBV1Pc4acKeia4gwRc+hYIQpRiEIUohCFKEQhClGIQhSiEIUoRCEKUYhCFKIQhZSdD8vL0pqFRIhCFFKlKOT/DIQPEkc6IkM+sk3IpT4y5GPbhFw+iQyZ9altw1DaA3Y6lZrPdtlWOL/qAZ/4W3o+b7ftyH5hwkF0+MvGrwbzOTCj0oIGK8rX35w143Dn2+8qg1SrngiZMzstA0K0ZFpSBoTo1Lk+GRCi739okAFxbpdnyvkTZrvawPT++JMMCNGqlcdlQIg2bdwvA0K04cjPMiBEk39plQFxKE2DMiBOTq4TAiH69UTA44vt4srLb7+nZECIWv7okAEZ+o80XTIgRGf/zMqAOA/Ie6fIgBDt/Ou0DAjRgvkJGRCitr//kQFxZi49B2VAKL98ZLsOA8ktH9muwkgmdCZlQIjWnrNdgUaj8c6/sjbbOODJyXwAAAAASUVORK5CYII=",dk="/Monopoly/assets/proprety-ed9394e1.png",hk="/Monopoly/assets/settings-ec1fd821.png",fk="/Monopoly/assets/icon-96ad3b33.png",Lm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOoAAADYCAMAAADS+I/aAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAGxQTFRFAAAAoM6mW7BnVK1hdLp+1enX7fbuRqdUL6BCOKJJNKFGHpw1qdOu6PPqPaRNI5054vDkKp8/KJ48mMqf0OfTvt3CkMeXuNq9isSSrdSyf7+IeryDbbd3YbJtMaFE3+/iyePNSapYrdWyxuHJWHk5egAAACR0Uk5TAP//////IP///////3D//9D/////////////////////////OqkGVgAABKFJREFUeJzt3dFW4jAUheGiAm3RFCqIjgIq7/+Og+OoUJImTXLaHdn/tXblW+iyx5SQZUy00dX1zXjoRfTRZJoXRTm7HXod8t2pQn1UjYZeiXTz8lP6+63jxZdUqfp+6NVItqzVUb/ZuqrUSfVDl+9WDkmtvGvrWXNl9WOHb0+I+lSdL23RwZoOdaSRHqx/nC+QDPWh1i/O3ZoK9c/CtLr8xvESiVCfc/PyXK1pUF9apM7WJKibbfsC8xeXq6RAvS5tK3SyJkCdWqVKbTf268BTJ9PCvkKlSrsVnXq3dZK6vK7g1J2r9PC6XlmuhU0d185SuxWa+qq97TVbr1uvhkxdGW57Pa3A1Kez8dRufWu5Hi511PU1tVlhqfc+UqWKqfGKqNRHP+nBalwuKNU8njpYJ/prYlJvWoc2m7XQWyGptqHNar3TXRWReuUwyrRbS50VkGofTx2s8wSoE5fx1MuKRr0rOtzgt1kXO3Dq3H1os1nzphWLerynGFzdeIgAirr0vUXStzi1IlE7D2226iUodd1tEHepOrbiUN/jSw+v6ysgVb+nGNxsD0e9l5Eefoa/rSBU7/HUwbqCogaMp+5WCGrQeOpgXcNQA8dTe7M1CPVKWnp4XZ8gqG8xhjZb1fvwVMc9xeCq26GpscZTe9XI5avkpLuyL+nB6vJFYtJx3p/ULSnpsvv+k3RC0ujjaYRkpOePvAIkIr2VGmWCkpB67ilKJyA1PfI6dPGlokNbSNGlwkNbQLGl7Y+8DlpkaQ9Dm3dxpRH2FOWKKo2ypyhWROjX+xRRiyeNt6coVDRp1D1FkWJJl6g3Dj9Fku4hb/BPiyMV2FOMXxSp7n2KeMWQCu0pxi6CFHVoaxYuhR3amgVLcYe2ZqFS4KGtWaA0+EHQHguTQg9tzYKk2ENbswDoBHxoa+Yvnfe2pxgpb+kOfmhr5isdp/NH5itP6Svi/pMlP2nzGJ0k8pKmMbQ1W9phZ2HuKVo7fqjWMdA9RXtVV6vgg6DS/TxU61Qy46mu74dqXUpnPNX2/0FTlxIaT/U5W5H3FB3796CpvaTGU1NO1rTGU2MfD9W219+DoNJVlpNq5z0+CCpd++mt+HuKXapbrAnsKXbKfHprCnuK3TJZk9hT7Jj+pFqR9ykOnu6k2kT2FDt3fqJpKnuK3WtaEx5PreXPx9LnX/ZX5rTjE02TH9os/VjF36c4eF8nmqa0e+rb9uVSpJ9WxLcFSVSvsseLeFGVKm4uh7rJ1r/6T+pP5eHGv6c3FQ9dtcuyuaq35pL6B0xhbvb5H4n9vbmHt1R+wPN8+mbs5VU/o5+2SuOuMXffvDC3T+F1reJ8QNkG//e1jPRxRyP8caA+OwjQr1t86sJw9iyppJKKFamkkkoqWKSSSiqpYJFKKqmkgkUqqaSSChappJJKKlikkkoqqWCRSiqppIJFKqmkkgoWqaSSSipYpJJKKqlgkUoqqaSCRSqppJIKFqmkkkoqWKSSSiqpYJFKKqmkgkUqqaSSChappJL6QcU/dTQWNYFDR8s40iyDp27PPvPDt32FfcDqdhpLmmXjTZG3HA09cErzmTWX3V/etxxj46OriAAAAABJRU5ErkJggg==",Fm="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOoAAADYBAMAAAAXCGLbAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAA9QTFRFAAAAswAAswAAswAAswAAZtGxUwAAAAV0Uk5TAP8gcNCNz+2CAAACfklEQVR4nO3di1HDQAyEYQwUEAUKgA5IB9B/U+QJse8hXbx7B5lVAfrmzxjM+Aw8PPyzmcz6o49mtumu7vZq99jnA9o91k7TF53Oat9Ys2qsJYNAp59t+ViO6q2jqNPVumwsRXX3MdRpti8Xy1D9hQR1WizMxBLUwEa8ukzNxeLVdGO6Eq6+Z9QkFq0+ZdB0J1rNokksWE0vpexSsFpAl7FYtZS63IpVi+giFqqWUxdroWoFncci1VrqfC9SraK25aj1VLM3iuqg9sJQvVSzD4LqovaKV3N3uOV8otX8Ha60G6V+hdTLtwqQ6l9Ks+UgNYheYjFqNPWyHaOG0XMsRI2nntdD1Ab0FItQW1JP+xFqE3qMBahtqUcAoDaih9j1amvqQVivNqP72NVqe+qeWKs+3oDaZq26u0XNTBN6y+e7XkWhTSostUmFoS0qLrVFxaENKjC1QQWicRWZGleRaFiFpoZVKBpVsalRFYsG1d0I9RmMxlQ0GlLBl1JQhaMRFZ8aUfFoQCWkBlQC6quMVF9loK5KSXVVCuqpnFRP5aCOGnkgC1fhd7iQykKrKulSclQaWlN5qTWVh1ZehCKmVmKZaDGWmlqM5aKFWHJq+K0v8ORi6anBF6Hgk8Z2SE1jY0eOa2cZGztyXD0DPl/z3yAhzYjUeWw39Dq2X+p1bEf0N7Znau3AnzojUstn4OQZkVo6FqbPiNT8SWmHkUpXR1xNxnskUJnNkC+d5AfUQQ8RGZdX4FeHxjwHvxd166NSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKl/UA39hfo7USMo/CPu/88dCvMNgwpEBhudalAAAAAASUVORK5CYII=",pk="/Monopoly/assets/rails-b5a8f288.png",mk="/Monopoly/assets/elects-0ca4f3b8.png",gk="/Monopoly/assets/water-7bf83b59.png";function _u(t){try{switch(t.toLowerCase()){case"red":return"#ED1B24";case"darkgreen":return"#1FB25A";case"darkblue":return"#0072BB";case"yellow":return"#FEF200";case"purple":return"#955436";case"lightgreen":return"#AAE0FA";case"orange":return"#F7941D";case"violet":return"#D93A96";default:return t.toLowerCase()}}catch{return t}}function Go({street:t,utility:e,railroad:n}){return t!==void 0?h.jsx(yk,{args:t}):e!==void 0?h.jsx(_k,{args:e}):n!==void 0?h.jsx(vk,{args:n}):h.jsx(h.Fragment,{})}function yk({args:t}){const e=_u(t.group);return h.jsxs("div",{className:"street-card",children:[h.jsxs("div",{style:{backgroundColor:e},children:[h.jsx("p",{children:"title dreed"}),h.jsx("h3",{children:t.title})]}),h.jsxs("div",{children:[h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("p",{children:"Rent"}),h.jsxs("p",{children:[t.rent,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with color set"}),h.jsxs("p",{children:[t.rentWithColorSet,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 1 house"}),h.jsxs("p",{children:[t.multpliedrent[0],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 2 houses"}),h.jsxs("p",{children:[t.multpliedrent[1],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 3 houses"}),h.jsxs("p",{children:[t.multpliedrent[2],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 4 houses"}),h.jsxs("p",{children:[t.multpliedrent[3],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with hotel"}),h.jsxs("p",{children:[t.multpliedrent[4],"M"]})]})]}),h.jsx("hr",{}),h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("p",{children:"House cost"}),h.jsxs("p",{children:[t.housesCost,"M each"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Hotels cost"}),h.jsxs("label",{children:[t.hotelsCost,"M each",h.jsx("br",{}),h.jsx("p",{style:{fontSize:12},children:"(plus 4 houses)"})]})]})]}),h.jsx("br",{}),h.jsx("hr",{}),h.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}function vk({args:t}){return h.jsxs("div",{className:"street-card",children:[h.jsxs("div",{"data-clear":!0,children:[h.jsx("img",{"data-type":"rail",src:pk.replace("/public",""),alt:""}),h.jsx("h3",{children:t.title})]}),h.jsxs("div",{children:[h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("p",{children:"Rent"}),h.jsxs("p",{children:[25,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"If 2 stations are owned"}),h.jsxs("p",{children:[50,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"If 3 stations are owned"}),h.jsxs("p",{children:[100,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"If 4 stations are owned"}),h.jsxs("p",{children:[200,"M"]})]})]}),h.jsx("h4",{children:"mortgage Value 100M"}),h.jsx("hr",{}),h.jsx("br",{}),h.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}function _k({args:t}){return h.jsxs("div",{className:"street-card",children:[h.jsxs("div",{"data-clear":!0,children:[h.jsx("center",{children:h.jsx("img",{"data-type":t.type,src:t.type==="electricity"?mk.replace("/public",""):gk.replace("/public",""),alt:""})}),h.jsx("h3",{children:t.title})]}),h.jsxs("div",{children:[h.jsxs("p",{style:{lineHeight:1,paddingInline:10},children:["If one Utility is owned, rent is 4 times amount shown on dice.",h.jsx("br",{}),h.jsx("br",{}),"If both Utilities are owned, rent is 10 times amount shown on dice"]}),h.jsx("hr",{}),h.jsx("br",{}),h.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}const Ek=[{name:"Mediterranean Avenue",id:"mediterraneanave",posistion:1,price:60,rent:2,multpliedrent:[10,30,90,160,250],housecost:50,group:"Purple",ownedby:-1,buildings:0,mortgaged:!1,probability:2.1314,rel:{Square:"Mediterranean Avenue","Probability % (Jail Short)":2.1314,Rank:36,"Probability % (Jail Long)":2.0073},ohousecost:50,oprice:60,averageProbability:2.06935},{name:"Baltic Avenue",id:"balticave",posistion:3,price:60,rent:4,multpliedrent:[20,60,180,320,450],housecost:50,group:"Purple",ownedby:-1,buildings:0,mortgaged:!1,probability:2.1624,rel:{Square:"Baltic Avenue","Probability % (Jail Short)":2.1624,Rank:35,"Probability % (Jail Long)":2.0369},ohousecost:50,oprice:60,averageProbability:2.09965},{name:"Oriental Avenue",id:"orientalave",posistion:6,price:100,rent:6,multpliedrent:[30,90,270,400,550],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Oriental Avenue","Probability % (Jail Short)":2.2621,Rank:32,"Probability % (Jail Long)":2.1317},ohousecost:50,oprice:100,averageProbability:2.1969000000000003},{name:"Vermont Avenue",id:"vermontave",posistion:8,price:100,rent:6,multpliedrent:[30,90,270,400,550],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Vermont Avenue","Probability % (Jail Short)":2.321,Rank:28,"Probability % (Jail Long)":2.1874},ohousecost:50,oprice:100,averageProbability:2.2542},{name:"Connecticut Avenue",id:"connecticutave",posistion:9,price:120,rent:8,multpliedrent:[40,100,300,450,600],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Connecticut Avenue","Probability % (Jail Short)":2.3003,Rank:30,"Probability % (Jail Long)":2.168},ohousecost:50,oprice:120,averageProbability:2.23415},{name:"St. Charles Place",id:"stcharlesplace",posistion:11,price:140,rent:10,multpliedrent:[50,150,450,625,750],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"St. Charles Place","Probability % (Jail Short)":2.7017,Rank:15,"Probability % (Jail Long)":2.556},ohousecost:100,oprice:140,averageProbability:2.62885},{name:"States Avenue",id:"statesave",posistion:13,price:140,rent:10,multpliedrent:[50,150,450,625,750],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"States Avenue","Probability % (Jail Short)":2.3721,Rank:29,"Probability % (Jail Long)":2.1741},ohousecost:100,oprice:140,averageProbability:2.2731000000000003},{name:"Virginia Avenue",id:"virginiaave",posistion:14,price:160,rent:12,multpliedrent:[60,180,500,700,900],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Virginia Avenue","Probability % (Jail Short)":2.4649,Rank:22,"Probability % (Jail Long)":2.4255},ohousecost:100,oprice:160,averageProbability:2.4452},{name:"St. James Place",id:"stjamesplace",posistion:16,price:180,rent:14,multpliedrent:[70,200,550,750,950],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"St. James Place","Probability % (Jail Short)":2.7924,Rank:9,"Probability % (Jail Long)":2.6802},ohousecost:100,oprice:180,averageProbability:2.7363},{name:"Tennessee Avenue",id:"tennesseeave",posistion:18,price:180,rent:14,multpliedrent:[70,200,550,750,950],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Tennessee Avenue","Probability % (Jail Short)":2.9356,Rank:6,"Probability % (Jail Long)":2.821},ohousecost:100,oprice:180,averageProbability:2.8783000000000003},{name:"New York Avenue",id:"newyorkave",posistion:19,price:200,rent:16,multpliedrent:[80,220,600,800,1e3],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"New York Avenue","Probability % (Jail Short)":3.0852,Rank:7,"Probability % (Jail Long)":2.8118},ohousecost:100,oprice:200,averageProbability:2.9485},{name:"Kentucky Avenue",id:"kentuckyave",posistion:21,price:220,rent:18,multpliedrent:[90,250,700,875,1050],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Kentucky Avenue","Probability % (Jail Short)":2.8358,Rank:12,"Probability % (Jail Long)":2.6143},ohousecost:150,oprice:220,averageProbability:2.72505},{name:"Indiana Avenue",id:"indianaave",posistion:23,price:220,rent:18,multpliedrent:[90,250,700,875,1050],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Indiana Avenue","Probability % (Jail Short)":2.7357,Rank:14,"Probability % (Jail Long)":2.5671},ohousecost:150,oprice:220,averageProbability:2.6513999999999998},{name:"Illinois Avenue",id:"illinoisave",posistion:24,price:240,rent:20,multpliedrent:[100,300,750,925,1100],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Illinois Avenue","Probability % (Jail Short)":3.1858,Rank:2,"Probability % (Jail Long)":2.9929},ohousecost:150,oprice:240,averageProbability:3.08935},{name:"Atlantic Avenue",id:"atlanticave",posistion:26,price:260,rent:22,multpliedrent:[110,330,800,975,1150],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Atlantic Avenue","Probability % (Jail Short)":2.7072,Rank:16,"Probability % (Jail Long)":2.537},ohousecost:150,oprice:260,averageProbability:2.6220999999999997},{name:"Ventnor Avenue",id:"ventnorave",posistion:27,price:260,rent:22,multpliedrent:[110,330,800,975,1150],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Ventnor Avenue","Probability % (Jail Short)":2.6789,Rank:18,"Probability % (Jail Long)":2.5191},ohousecost:150,oprice:260,averageProbability:2.599},{name:"Marvin Gardens",id:"marvingardens",posistion:29,price:280,rent:22,multpliedrent:[120,360,850,1025,1200],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Marvin Gardens","Probability % (Jail Short)":2.5861,Rank:21,"Probability % (Jail Long)":2.4381},ohousecost:150,oprice:280,averageProbability:2.5121},{name:"Pacific Avenue",id:"pacificave",posistion:31,price:300,rent:26,multpliedrent:[130,390,900,1100,1275],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Pacific Avenue","Probability % (Jail Short)":2.6774,Rank:17,"Probability % (Jail Long)":2.5236},ohousecost:200,oprice:300,averageProbability:2.6005000000000003},{name:"North Carolina Avenue",id:"northcarolinaave",posistion:32,price:300,rent:26,multpliedrent:[130,390,900,1100,1275],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"North Carolina Avenue","Probability % (Jail Short)":2.6252,Rank:20,"Probability % (Jail Long)":2.4721},ohousecost:200,oprice:300,averageProbability:2.5486500000000003},{name:"Pennsylvania Avenue",id:"pennsylvaniaave",posistion:34,price:320,rent:28,multpliedrent:[150,450,1e3,1200,1400],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Pennsylvania Avenue","Probability % (Jail Short)":2.5006,Rank:23,"Probability % (Jail Long)":2.3531},ohousecost:200,oprice:320,averageProbability:2.42685},{name:"Park Place",id:"parkplace",posistion:37,price:350,rent:35,multpliedrent:[175,500,1100,1300,1500],housecost:200,group:"darkblue",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Park Place","Probability % (Jail Short)":2.1864,Rank:33,"Probability % (Jail Long)":2.0595},ohousecost:200,oprice:350,averageProbability:2.12295},{name:"Boardwalk",id:"boardwalk",posistion:39,price:400,rent:50,multpliedrent:[200,600,1400,1700,2e3],housecost:200,group:"darkblue",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Boardwalk","Probability % (Jail Short)":2.626,Rank:19,"Probability % (Jail Long)":2.4832},ohousecost:200,oprice:400,averageProbability:2.5545999999999998},{name:"Electric Company",id:"electriccompany",posistion:12,price:150,group:"Utilities",ownedby:-1,mortgaged:!1,rel:{Square:"Electric Company","Probability % (Jail Short)":2.604,Rank:13,"Probability % (Jail Long)":2.614},oprice:150,averageProbability:2.609},{name:"Water Works",id:"waterworks",posistion:28,price:150,group:"Utilities",ownedby:-1,mortgaged:!1,rel:{Square:"Water Works","Probability % (Jail Short)":2.8074,Rank:10,"Probability % (Jail Long)":2.6507},oprice:150,averageProbability:2.72905},{name:"Reading Railroad",id:"readingrailroad",posistion:5,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,probability:2.1314,rel:{Square:"Reading Railroad","Probability % (Jail Short)":2.9631,Rank:8,"Probability % (Jail Long)":2.801},oprice:200,averageProbability:2.88205},{name:"Pennsylvania Railroad",id:"pennsylvaniarailroad",posistion:15,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,rel:{Square:"Pennsylvania Railroad","Probability % (Jail Short)":2.92,Rank:11,"Probability % (Jail Long)":2.6354},oprice:200,averageProbability:2.7777000000000003},{name:"B. & O. Railroad",id:"borailroad",posistion:25,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,oprice:200,averageProbability:2.975},{name:"Short Line Railroad",id:"shortlinerailroad",posistion:35,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,oprice:200,averageProbability:2.3609500000000003},{name:"Go",id:"go",posistion:0,group:"Special",rel:{Square:"Go","Probability % (Jail Short)":3.0961,Rank:3,"Probability % (Jail Long)":2.9143},averageProbability:3.0052},{name:"Income Tax",id:"incometax",group:"Special",posistion:4,rel:{Square:"Income Tax","Probability % (Jail Short)":2.3285,Rank:27,"Probability % (Jail Long)":2.1934},averageProbability:2.2609500000000002},{name:"Jail / Just Visiting",id:"jail",posistion:10,group:"Special",averageProbability:8.897},{name:"Chance",id:"chance",group:"Special",posistion:36,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Chance",id:"chance",group:"Special",posistion:7,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Chance",id:"chance",group:"Special",posistion:22,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Free Parking",id:"freeparking",group:"Special",posistion:20,rel:{Square:"Free Parking","Probability % (Jail Short)":2.8836,Rank:5,"Probability % (Jail Long)":2.8253},averageProbability:2.85445},{name:"Community Chest",id:"communitychest",group:"Special",posistion:2,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Community Chest",id:"communitychest",group:"Special",posistion:33,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Community Chest",id:"communitychest",group:"Special",posistion:17,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Go To Jail",id:"gotojail",group:"Special",posistion:30,rel:{Square:"Go To Jail","Probability % (Jail Short)":0,Rank:41,"Probability % (Jail Long)":0},averageProbability:0},{name:"Luxury Tax",id:"luxerytax",group:"Special",posistion:38,averageProbability:2.116}],Sk=[{id:"go"},{id:"mediterraneanave"},{id:"communitychest"},{id:"balticave"},{id:"incometax"},{id:"readingrailroad"},{id:"orientalave"},{id:"chance"},{id:"vermontave"},{id:"connecticutave"},{id:"jail"},{id:"stcharlesplace"},{id:"electriccompany"},{id:"statesave"},{id:"virginiaave"},{id:"pennsylvaniarailroad"},{id:"stjamesplace"},{id:"communitychest"},{id:"tennesseeave"},{id:"newyorkave"},{id:"freeparking"},{id:"kentuckyave"},{id:"chance"},{id:"indianaave"},{id:"illinoisave"},{id:"borailroad"},{id:"atlanticave"},{id:"ventnorave"},{id:"waterworks"},{id:"marvingardens"},{id:"gotojail"},{id:"pacificave"},{id:"northcarolinaave"},{id:"communitychest"},{id:"pennsylvaniaave"},{id:"shortlinerailroad"},{id:"chance"},{id:"parkplace"},{id:"luxerytax"},{id:"boardwalk"}],Tk=[{title:"Advance to Go (Collect $200)",action:"move",tileid:"go"},{title:"Advance to Illinois Avenue - If you pass Go, collect $200",action:"move",tileid:"illinoisave"},{title:"Advance to St. Charles Place - If you pass Go, collect $200",action:"move",tileid:"stcharlesplace"},{title:"Advance token to nearest Utility. If unowned, you may buy it from the Bank. If owned, throw dice and pay owner a total ten times the amount thrown.",action:"movenearest",groupid:"utility",rentmultiplier:10},{title:"Advance token to the nearest Railroad and pay owner twice the rental to which he/she is otherwise entitled. If Railroad is unowned, you may buy it from the Bank.",action:"movenearest",groupid:"railroad",rentmultiplier:2},{title:"Bank pays you dividend of $50",action:"addfunds",amount:50},{title:"Get out of Jail Free - This card may be kept until needed, or traded/sold",action:"jail",subaction:"getout"},{title:"Go Back 3 Spaces",action:"move",count:-3},{title:"Go to Jail - Go directly to Jail - Do not pass Go, do not collect $200",action:"jail",subaction:"goto"},{title:"Make general repairs on all your property - For each house pay $25 - For each hotel $100",action:"propertycharges",buildings:25,hotels:100},{title:"Pay poor tax of $15",action:"removefunds",amount:15},{title:"Take a trip to Reading Railroad - If you pass Go, collect $200",action:"move",tileid:"readingrailroad"},{title:"Take a walk on the Boardwalk - Advance token to Boardwalk",action:"move",tileid:"boardwalk"},{title:"You have been elected Chairman of the Board - Pay each player $50",action:"removefundstoplayers",amount:50},{title:"Your building loan matures - Collect $150",action:"addfunds",amount:50}],wk=[{title:"Advance to Go (Collect $200)",action:"move",tileid:"go"},{title:"Bank error in your favor - Collect $200 ",action:"addfunds",amount:200},{title:"Doctor fee - Pay $50",action:"removefunds",amount:50},{title:"From sale of stock you get $50",action:"addfunds",amount:50},{title:"Get Out of Jail Free",action:"jail",subaction:"getout"},{title:"Go to Jail - Go directly to jail - Do not pass Go - Do not collect $200",action:"jail",subaction:"goto"},{title:"Grand Opera Night - Collect $50 from every player for opening night seats",action:"addfundsfromplayers",amount:50},{title:"Holiday Fund matures - Receive $100",action:"addfunds",amount:100},{title:"Income tax refund - Collect $20",action:"addfunds",amount:20},{title:"Life insurance matures - Collect $100",action:"addfunds",amount:100},{title:"Pay hospital fees of $100",action:"removefunds",amount:100},{title:"Pay school fees of $150",action:"removefunds",amount:150},{title:"Receive $25 consultancy fee",action:"addfunds",amount:25},{title:"You are assessed for street repairs - $40 per house - $115 per hotel",action:"propertycharges",buildings:40,hotels:115},{title:"You have won second prize in a beauty contest - Collect $10",action:"addfunds",amount:10},{title:"You inherit $100",action:"addfunds",amount:100}],Nr={properties:Ek,tiles:Sk,chance:Tk,communitychest:wk};function Nv(t){const e=new Map(Nr.properties.map(o=>[o.posistion??0,o]));let n={},r="Utilities";const i=e.get(t.posistion);if(i)return i.group==="Special"?h.jsx(h.Fragment,{}):(i.group==="Utilities"?(r="Utilities",n={cardCost:i.price??-1,title:i.name??"error",type:i.id.includes("water")?"water":"electricity"}):i.group==="Railroad"?(r="Railroad",n={cardCost:i.price??-1,title:i.name??"error"}):(r="Street",n={cardCost:i.price??-1,hotelsCost:i.ohousecost??-1,housesCost:i.housecost??-1,rent:i.rent??-1,multpliedrent:i.multpliedrent?[i.multpliedrent[0]??-1,i.multpliedrent[1]??-1,i.multpliedrent[2]??-1,i.multpliedrent[3]??-1,i.multpliedrent[4]??-1]:[-1,-1,-1,-1,-1],rentWithColorSet:i.rent?i.rent*2:-1,title:i.name??"error",group:i.group}),h.jsx("div",{style:t.style,onClick:t.OnClick,children:r==="Railroad"?h.jsx(Go,{railroad:n}):r==="Utilities"?h.jsx(Go,{utility:n}):h.jsx(Go,{street:n})}))}const Ck=k.forwardRef((t,e)=>{const n=new Map(Nr.properties.map(p=>[p.posistion??0,p])),r={isRailroad:p=>{const E=n.get(p),T=t.players.filter(v=>v.id===t.socket.id)[0];return E!==void 0&&E.group==="Railroad"&&T.properties.filter(v=>v.group==="Railroad"&&v.posistion===p).length>0},isMortaged:p=>{const T=t.players.filter(v=>v.id===t.socket.id)[0].properties.filter(v=>v.group==="Railroad"&&v.posistion===p)[0];return T.morgage!==void 0&&T.morgage===!0},buttons:{cancel:()=>{const p=o,E=t.players.filter(v=>v.id===t.socket.id)[0],T=E.properties.filter(v=>v.group==="Railroad"&&v.posistion===p)[0];T.morgage=!1,t.Morgage.onCanc(10),s(-1),t.socket.emit("player_update",{playerId:t.socket.id,pJson:E.toJson()})},pay:()=>{const p=o,E=t.players.filter(v=>v.id===t.socket.id)[0],T=E.properties.filter(v=>v.group==="Railroad"&&v.posistion===p)[0];T.morgage=!0,t.Morgage.onMort(100),s(-1),t.socket.emit("player_update",{playerId:t.socket.id,pJson:E.toJson()})}}},i=t.players.filter(p=>p.id===t.socket.id)[0];if(i===void 0)return h.jsx(h.Fragment,{children:"Could not read local player!"});k.useImperativeHandle(e,()=>({clickedOnBoard(p){f(-1),a(""),u([]),s(p)}}));const[o,s]=k.useState(-1),[l,a]=k.useState(""),[c,u]=k.useState([]),[d,f]=k.useState(-1);function g(){f(-1),s(-1);const p=Array.from(n.values()).filter(m=>m.group!="Special"),E=p.map(m=>[m.name,m.posistion]),T=p.map(m=>m.posistion.toString()),v=[];for(const m of T)m.includes(l)&&v.push(parseInt(m));for(const m of E)m[0].toLowerCase().includes(l.toLowerCase())&&v.push(m[1]);u(v)}return k.useEffect(g,[l]),h.jsxs(h.Fragment,{children:[h.jsx("h3",{style:{textAlign:"center"},children:"Propreties"}),h.jsx("input",{type:"text",onChange:p=>a(p.currentTarget.value),placeholder:"Search for global cards..."}),h.jsx("div",{className:"propertyList",style:{overflowY:"auto",position:"relative",flexGrow:1,cursor:"pointer"},children:l.length>0?c.map((p,E)=>{var T,v;return h.jsx(h.Fragment,{children:d===p?h.jsx("center",{children:h.jsx(Nv,{style:{cursor:"pointer",marginBottom:25,marginTop:10},posistion:p,OnClick:()=>{f(-1)}},E)}):h.jsxs("div",{onClick:()=>f(p),className:"proprety-nav",children:[h.jsx("i",{className:"box",style:{backgroundColor:_u(((T=n.get(p))==null?void 0:T.group)??"")}}),h.jsx("h3",{children:((v=n.get(p))==null?void 0:v.name)??""})]},E)})}):o===-1?i.properties.map((p,E)=>{var T;return h.jsxs("div",{onClick:()=>{s(p.posistion)},className:"proprety-nav",children:[h.jsx("i",{className:"box",style:{backgroundColor:_u(p.group)}}),h.jsx("h3",{children:((T=n.get(p.posistion))==null?void 0:T.name)??""}),h.jsx("div",{children:p.count=="h"?h.jsx("img",{src:Fm.replace("public/",""),alt:""}):typeof p.count=="number"&&p.count>0?h.jsxs(h.Fragment,{children:[h.jsx("p",{children:p.count}),h.jsx("img",{src:Lm.replace("public/",""),alt:""})]}):h.jsx(h.Fragment,{})})]},E)}):h.jsx("div",{children:h.jsxs("center",{style:{transform:"scale(1) translateY(-50%) translateX(-50%)",position:"absolute",top:"50%",left:"50%"},children:[h.jsx(Nv,{style:{filter:"drop-shadow(5px 5px 0px rgba(255,255,255,20%))"},posistion:o,OnClick:()=>{s(-1)}}),r.isRailroad(o)?h.jsxs(h.Fragment,{children:[" ",h.jsx("h2",{children:"Actions"}),r.isMortaged(o)?h.jsx("button",{className:"railroads-actions",onClick:r.buttons.cancel,children:"Cancel Mortgage [Pay 10M]"}):h.jsxs("button",{className:"railroads-actions",onClick:r.buttons.pay,children:[" ","Mortgage [Pay 100M]"]})]}):h.jsx(h.Fragment,{})]})})})]})}),Kf="/Monopoly/assets/roll-893dc331.png",Pk=k.forwardRef((t,e)=>{const n=t.players.filter(a=>a.id===t.socket.id)[0],r=new Map(Nr.properties.map(a=>[a.posistion??0,a])),[i,o]=k.useState(),[s,l]=k.useState();return k.useEffect(()=>{l(JSON.parse(document.cookie).settings)},[document.cookie]),k.useImperativeHandle(e,()=>({clickdOnPlayer(a){for(const c of t.players)c.id===a&&o(c)}})),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:n!==void 0?"container-top":"",style:n===void 0?{height:"100%"}:{},children:[h.jsx("h3",{"data-clickable":i!==void 0,style:{textAlign:"center"},onClick:()=>{i!==void 0&&o(void 0)},children:"Players"}),i!=null?h.jsxs(h.Fragment,{children:[h.jsx("h4",{children:"Cards"}),h.jsx("h4",{children:"Propreties"}),i.properties.length===0?h.jsx("p",{children:"none"}):i.properties.map((a,c)=>{var u;return h.jsxs("div",{onClick:()=>{o(void 0),t.clickedOnPlayer(a.posistion)},className:"proprety-nav",children:[h.jsx("i",{className:"box",style:{backgroundColor:_u(a.group)}}),h.jsx("h3",{children:((u=r.get(a.posistion))==null?void 0:u.name)??""}),h.jsx("div",{children:a.count=="h"?h.jsx("img",{src:Fm.replace("public/",""),alt:""}):typeof a.count=="number"&&a.count>0?h.jsxs(h.Fragment,{children:[h.jsx("p",{children:a.count}),h.jsx("img",{src:Lm.replace("public/",""),alt:""})]}):h.jsx(h.Fragment,{})})]},c)})]}):h.jsx("div",{className:"playersInfos",children:t.players.map((a,c)=>h.jsx(h.Fragment,{children:h.jsxs("div",{className:"playerInfo",style:s!==void 0&&s.accessibility[4]===!0?{backgroundColor:a.color}:{},onClick:()=>{const u=document.querySelector(`div.player[player-id="${a.id}"]`);u.style.animation="spin2 1s cubic-bezier(.21, 1.57, .55, 1) infinite",setTimeout(()=>{u.style.animation=""},1*1e3)},onDoubleClick:()=>{o(a)},children:[h.jsxs("p",{children:[s!=null&&s.accessibility[2]?`[${a.id}]`:""," ",a.username]}),a.id===t.currentTurn?h.jsx("img",{src:Kf.replace("public/","")}):h.jsx(h.Fragment,{}),a.getoutCards>0?h.jsx("p",{className:"orange",children:a.getoutCards}):h.jsx(h.Fragment,{}),h.jsx("p",{children:a.balance}),h.jsx("p",{children:a.properties.length})]},c)}))})]}),n!==void 0?h.jsx(h.Fragment,{children:h.jsx("div",{className:"container-bottom",style:{},children:h.jsxs("p",{style:{margin:0,marginTop:5},children:[" ",n.balance," M"]})})}):h.jsx(h.Fragment,{})]})});function So(t){const[e,n]=k.useState(t.defaultValue??0);return h.jsxs("div",{className:"slider-component",children:[h.jsx("input",{type:"range",onChange:r=>{var i;(i=t.onChange)==null||i.call(t,r),n(parseFloat(r.currentTarget.value))},defaultValue:t.defaultValue??50,step:t.step??1,max:t.max??100,min:t.min??0}),e.toFixed(t.fixedNum??0),t.suffix]})}function sS(){const t=JSON.parse(document.cookie),e={gameEngine:k.useState("2d"),numbers:[k.useState(t.settings?t.settings.accessibility[0]:45),k.useState(t.settings?t.settings.accessibility[1]:5),k.useState(t.settings?t.settings.audio[0]:100),k.useState(t.settings?t.settings.audio[1]:100),k.useState(t.settings?t.settings.audio[2]:25)],booleans:[k.useState(t.settings?t.settings.accessibility[2]:!1),k.useState(t.settings?t.settings.accessibility[3]:!1),k.useState(t.settings?t.settings.accessibility[4]:!1),k.useState(t.settings?t.settings.notifications:!1)]};return k.useEffect(()=>{const n=JSON.parse(document.cookie),r={gameEngine:e.gameEngine[0],accessibility:[e.numbers[0][0],e.numbers[1][0],e.booleans[0][0],e.booleans[1][0],e.booleans[2][0]],audio:[e.numbers[2][0],e.numbers[3][0],e.numbers[4][0]],notifications:e.booleans[3][0]};document.cookie=JSON.stringify({login:n.login,settings:r})},[e.gameEngine[0],...e.numbers.map(n=>n[0]),,...e.booleans.map(n=>n[0])]),h.jsxs(h.Fragment,{children:[h.jsx("h3",{style:{textAlign:"center"},children:"Settings"}),h.jsxs("div",{className:"scroll",children:[h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Game Engine "}),h.jsx("div",{children:h.jsxs("select",{name:"",id:"",children:[h.jsx("option",{children:"2D"}),h.jsx("option",{children:"3D"})]})})]}),h.jsxs("p",{style:{marginBlock:0,marginInline:10,fontSize:12,opacity:.5},children:["3d isnt developed yet"," "]}),h.jsx("br",{}),h.jsx("hr",{}),h.jsx("h2",{children:"Accessibility"}),h.jsxs("div",{children:[h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Rotation Speed "}),h.jsx(So,{step:90/8,min:0,max:180,defaultValue:e.numbers[0][0],onChange:n=>{e.numbers[0][1](parseFloat(n.currentTarget.value))},fixedNum:2,suffix:" deg"})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Scale Speed "}),h.jsx(So,{step:1,min:1,max:10,defaultValue:e.numbers[1][0],onChange:n=>{e.numbers[1][1](parseFloat(n.currentTarget.value))},fixedNum:0})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Show Users Id "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[0][0],type:"checkbox",onChange:n=>{e.booleans[0][1](n.currentTarget.checked)}})})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Show Users Mouse "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[1][0],type:"checkbox",onChange:n=>{e.booleans[1][1](n.currentTarget.checked)}})})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Add Colors to Users "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[2][0],type:"checkbox",onChange:n=>{e.booleans[2][1](n.currentTarget.checked)}})})]}),h.jsx("br",{}),h.jsx("hr",{})]}),h.jsx("h2",{children:"Audio"}),h.jsxs("div",{children:[h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Master Audio "}),h.jsx(So,{step:1,min:0,max:100,defaultValue:e.numbers[2][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[2][1](parseFloat(n.currentTarget.value))}})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"SFX Audio "}),h.jsx(So,{step:1,min:0,max:100,defaultValue:e.numbers[3][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[3][1](parseFloat(n.currentTarget.value))}})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Music Audio "}),h.jsx(So,{step:1,min:0,max:100,defaultValue:e.numbers[4][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[4][1](parseFloat(n.currentTarget.value))}})]}),h.jsx("br",{}),h.jsx("hr",{})]}),h.jsx("h2",{children:"Notifications"}),h.jsx("div",{children:h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Notify Balance Movements "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[3][0],type:"checkbox",onChange:n=>{e.booleans[3][1](n.currentTarget.checked)}})})]})})]})]})}const Rk=k.forwardRef((t,e)=>{const[n,r]=k.useState(0),[i,o]=k.useState([]);function s(){a(t.players)}const[l,a]=k.useState(t.players);k.useImperativeHandle(e,()=>({addMessage(d){if(o(f=>[...f,d]),n!==2){const f=document.getElementById("chatIconChange"),g=f.querySelector("img");g.style.animation="spin3 2s cubic-bezier(.68,.05,.49,.95) infinite",g.src=ck.replace("/public",""),f.onclick=()=>{g.src=Dv.replace("/public",""),g.style.animation="",r(2),f.onclick=()=>{r(2)}}}},reRenderPlayerList:s,clickedOnBoard:d=>{r(1),requestAnimationFrame(()=>{var f;(f=c.current)==null||f.clickedOnBoard(d)})}}));const c=k.useRef(null),u=k.useRef(null);return k.useEffect(s,[t.players.map(d=>d.properties),t.players.map(d=>d.balance)]),k.useEffect(()=>{const d=f=>{const g=parseInt(f.key);if(!isNaN(g)){const p=document.activeElement;(p===null||p.tagName!=="INPUT")&&r(g-1)}};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),h.jsxs("nav",{className:"main",children:[h.jsxs("nav",{className:"header",children:[h.jsx("img",{style:{marginTop:75},className:"header",src:fk.replace("public/","")}),h.jsxs("div",{className:"upper",children:[h.jsx("div",{"data-selected":n==0,onClick:()=>r(0),"data-tooltip-hover":"players",className:"button",children:h.jsx("img",{src:lk.replace("public/",""),alt:""})}),h.jsx("div",{"data-selected":n==1,onClick:()=>r(1),"data-tooltip-hover":"propreties",className:"button",children:h.jsx("img",{src:dk.replace("public/",""),alt:""})}),h.jsx("div",{"data-selected":n==2,onClick:()=>r(2),"data-tooltip-hover":"chat",className:"button",id:"chatIconChange",children:h.jsx("img",{src:Dv.replace("public/",""),alt:""})}),h.jsx("div",{"data-selected":n===3,onClick:()=>{r(3)},"data-tooltip-hover":"trades",className:"button",children:h.jsx("img",{src:"morgage.png",alt:""})}),h.jsx("div",{"data-selected":n===4,onClick:()=>{r(4)},"data-tooltip-hover":"history",className:"button",children:h.jsx("img",{src:"history.png",alt:""})}),t.server!==void 0?h.jsx("div",{"data-selected":!1,onClick:()=>t.callServer(),"data-tooltip-hover":"server",className:"button",children:h.jsx("img",{src:"server.png",alt:""})}):h.jsx(h.Fragment,{})]}),h.jsxs("div",{className:"lower",children:[h.jsx("div",{"data-selected":n==5,onClick:()=>r(5),"data-tooltip-hover":"settings",className:"button",children:h.jsx("img",{src:hk.replace("public/",""),alt:""})}),h.jsx("div",{"data-tooltip":"leave",className:"button color","data-tooltip-hover":"leave",onClick:()=>{document.location.reload()},children:h.jsx("img",{src:uk.replace("public/",""),alt:""})})]})]}),h.jsx("nav",{className:"content","data-index":n>5||n<0?0:n,children:n==1?h.jsx(Ck,{ref:c,players:l,socket:t.socket,Morgage:t.Morgage}):n==2?h.jsxs(h.Fragment,{children:[h.jsx("h3",{style:{textAlign:"center"},children:"Chat"}),h.jsxs("div",{className:"main-chat",children:[h.jsx("div",{className:"messages",children:i.map((d,f)=>h.jsxs("div",{className:"message",children:[h.jsxs("p",{children:[d.from,":"]}),h.jsx("p",{children:d.message})]},f))}),h.jsx("input",{placeholder:"Type Message Here...",type:"text",onKeyDown:d=>{if(d.which===13&&d.currentTarget.value.length>0){const f=d.currentTarget.value;t.socket.emit("message",f),d.currentTarget.value=""}}})]})]}):n===3?h.jsx(h.Fragment,{children:h.jsx("h3",{style:{textAlign:"center"},children:"Trades"})}):n==4?h.jsx(h.Fragment,{children:h.jsx("h3",{style:{textAlign:"center"},children:"History"})}):n==5?h.jsx(sS,{}):h.jsx(Pk,{ref:u,clickedOnPlayer:d=>{r(1),requestAnimationFrame(()=>{var f;(f=c.current)==null||f.clickedOnBoard(d)})},players:l,socket:t.socket,currentTurn:t.currentTurn})})]})});function Ov({chance:t,chest:e}){return t!==void 0?h.jsx(Ik,{args:t}):e!==void 0?h.jsx(Ak,{args:e}):h.jsx(h.Fragment,{})}function Ik({args:t}){return h.jsxs("div",{"data-b-image":"chance",className:"chance-card",children:[h.jsx("div",{}),h.jsx("div",{children:h.jsx("h3",{children:t.title})}),h.jsx("div",{})]})}function Ak({args:t}){return h.jsxs("div",{"data-b-image":"chest",className:"chance-card",children:[h.jsx("div",{}),h.jsx("div",{children:h.jsx("h3",{children:t.title})}),h.jsx("div",{})]})}const kk=k.forwardRef((t,e)=>{const n=new Map(Nr.properties.map(y=>[y.posistion??0,y])),[r,i]=k.useState(!1),[o,s]=k.useState(!1),[l,a]=k.useState(!1),[c,u]=k.useState(!1),[d,f]=k.useState(0),[g,p]=k.useState(1),[E,T]=k.useState();k.useEffect(()=>{const y=setInterval(()=>{T(JSON.parse(document.cookie).settings)},200);return()=>{clearInterval(y)}},[document.cookie]);const[v,m]=k.useState({cardCost:-1,hotelsCost:-1,housesCost:-1,multpliedrent:[-1,-1,-1,-1,-1],rent:-1,rentWithColorSet:-1,title:"deafult",type:"electricity"}),[S,_]=k.useState("Street");function C(y,I){const w=document.getElementById("dice-panel");var Y=!0;function q(){var ge="./c";const Z=Math.floor(Math.random()*6)+1,ve=Math.floor(Math.random()*6)+1;w.innerHTML=`
                <img src="${ge}${Z}.png" />
                <img src="${ge}${ve}.png" />
                
                `}function me(){if(Y)q(),requestAnimationFrame(me);else{var ge="./c";w.innerHTML=`
                <img src="${ge}${y}.png" />
                <img src="${ge}${I}.png" />
                `}}setTimeout(()=>{Y=!1},1e3),requestAnimationFrame(me)}function R(y){const I=document.querySelector("img#moneyAnimations");if(I===null)return;const w=I;w.setAttribute("data-anim","0"),requestAnimationFrame(()=>{w.setAttribute("data-anim",y.toString()),setTimeout(()=>{w.setAttribute("data-anim","0")},1e3)})}function b(){const y=JSON.parse(document.cookie).settings;let I=new Audio("./card.mp3");I.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),I.loop=!1,I.play()}return k.useImperativeHandle(e,()=>({diceResults:y=>{C(...y.l),i(!0),setTimeout(()=>{i(!1),y.onDone()},y.time)},freeDice:()=>{const y=document.getElementById("dice-panel");y.innerHTML="",s(!1)},setStreet:y=>{const I=t.players.filter(ge=>ge.id===t.socket.id)[0],w=n.get(y.location);if(w&&y.location!==-1&&y.location<40&&y.location>=0){let ge=function(Z,ve,be){function O(){const $=JSON.parse(document.cookie).settings;let de=new Audio("./click.mp3");de.volume=(($==null?void 0:$.audio[1])??100)/100*((($==null?void 0:$.audio[0])??100)/100),de.loop=!1,de.play()}function F(){if(Z){const $=document.querySelector("div#advanced-responses");if($){let de=function(je){switch(je){case"h":return 5;default:return je}};const fe=n.get(ve);if(!fe)return;const ye=$;for(;ye.firstChild;)ye.removeChild(ye.firstChild);const ae=Array.from(new Map(I.properties.map((je,N)=>[N,je])).entries()).filter(je=>je[1].posistion===y.location)[0][0],Ue=de(I.properties[ae].count);for(let je=Ue+1;je<6;je++){const N=document.createElement("button");je===5?(N.innerHTML="buy hotel",N.disabled=je!==Ue+1||(fe.ohousecost??0)>(t.players.filter(M=>M.id===t.socket.id)[0].balance??0),N.onclick=()=>{y.onResponse("advance-buy",{state:je,money:1}),a(!1)}):(N.innerHTML=`buy ${je} house${je>1?"s":""}`,N.onclick=()=>{y.onResponse("advance-buy",{state:je,money:je-Ue}),a(!1)},N.disabled=(je-Ue)*(fe.housecost??0)>(t.players.filter(M=>M.id===t.socket.id)[0].balance??0)),ye.appendChild(N)}const Me=document.createElement("button");Me.innerHTML="CONTINUE",Me.onclick=()=>{O(),y.onResponse("nothing",{}),a(!1)},ye.appendChild(Me)}else requestAnimationFrame(F)}else{const $=document.querySelector("button#card-response-yes");$?($.onclick=()=>{be!==void 0?y.onResponse("special_action",{rolls:be.rolls}):y.onResponse("buy",{}),a(!1)},document.querySelector("button#card-response-no").onclick=()=>{O(),y.onResponse("nothing",{}),a(!1)}):requestAnimationFrame(F)}}return F};var Y=!1,q=!1,me=0;for(const Z of I.properties)!Y&&Z.posistion===y.location&&(Y=!0,me=Z.count);for(const Z of t.players)for(const ve of Z.properties)ve.posistion===y.location&&Z.id!=I.id&&(q=!0);if(w.group==="Special")y.onResponse("nothing",{}),a(!1);else if(w.group==="Utilities")if(Y)y.onResponse("nothing",{});else if(q){y.onResponse("someones",{}),a(!1);return}else if(I.balance-((w==null?void 0:w.price)??0)<0){a(!1),y.onResponse("nothing",{});return}else{_("Utilities");const Z={cardCost:w.price??-1,title:w.name??"error",type:w.id.includes("water")?"water":"electricity"};m(Z),u(!1),b(),a(!0),requestAnimationFrame(ge(!1,y.location,{rolls:y.rolls}))}else if(w.group==="Railroad")if(Y)y.onResponse("nothing",{});else if(q){y.onResponse("someones",{}),a(!1);return}else if(I.balance-((w==null?void 0:w.price)??0)<0){a(!1),y.onResponse("nothing",{});return}else{_("Railroad");const Z={cardCost:w.price??-1,title:w.name??"error"};m(Z),b(),a(!0),requestAnimationFrame(ge(!1,y.location))}else{if(!Y&&I.balance-((w==null?void 0:w.price)??0)<0){a(!1),y.onResponse("nothing",{});return}if(!Y){if(q){y.onResponse("someones",{}),a(!1);return}}if(Y&&me==="h"){a(!1),y.onResponse("nothing",{});return}_("Street");const Z={cardCost:w.price??-1,hotelsCost:w.ohousecost??-1,housesCost:w.housecost??-1,rent:w.rent??-1,multpliedrent:w.multpliedrent?[w.multpliedrent[0]??-1,w.multpliedrent[1]??-1,w.multpliedrent[2]??-1,w.multpliedrent[3]??-1,w.multpliedrent[4]??-1]:[-1,-1,-1,-1,-1],rentWithColorSet:w.rent?w.rent*2:-1,title:w.name??"error",group:w.group};m(Z),u(!!Y),b(),a(!0),requestAnimationFrame(ge(Y,y.location))}}else y.onResponse("nothing",{}),a(!1)},chorch(y,I,w){_(I?"Chance":"CommunityChest"),m({title:y.title}),b(),a(!0),setTimeout(()=>{a(!1)},w)},applyAnimation(y){R(y)},showJailsButtons:y=>{const I=document.querySelector('button.roll-button[data-button-type="pay"]'),w=document.querySelector('button.roll-button[data-button-type="card"]'),Y=document.querySelector('button.roll-button[data-button-type="roll"]');function q(){Y.onclick=()=>{s(!0),t.socket.emit("roll_dice"),console.warn("roll after return to normal")},s(!0),w.onclick=()=>{},w.style.translate="0px 0px",w.setAttribute("aria-disabled","true"),setTimeout(()=>{w.setAttribute("aria-disabled","true")},300),I.style.translate="0px 0px",I.onclick=()=>{},I.setAttribute("aria-disabled","true"),setTimeout(()=>{I.setAttribute("aria-disabled","true")},300)}if(I.setAttribute("aria-disabled","false"),I.style.translate="0px -80px",I.onclick=()=>{R(1),t.socket.emit("unjail","pay"),t.socket.emit("roll_dice"),console.warn("pay"),q()},y){const me=w;me.setAttribute("aria-disabled","false"),me.style.translate="0px -160px",me.style.backgroundColor="gold",me.onclick=()=>{t.socket.emit("unjail","card"),t.socket.emit("roll_dice"),console.warn("card"),q()}}Y.onclick=()=>{t.socket.emit("roll_dice"),console.warn("roll when in jail"),q(),s(!0)}}})),k.useEffect(()=>{document.getElementById("locations").onwheel=I=>{I.shiftKey?p(w=>w+I.deltaY*(E!==void 0?E.accessibility[1]:5)/5e3):f(w=>w+I.deltaY*(E!==void 0?E.accessibility[0]:45)/100)};const y=Array.from(n.values()).filter(I=>I.group!="Special");for(const I of y){const w=document.getElementById("locations").querySelector(`div.street[data-position="${I.posistion}"]`);w.onclick=()=>{t.clickedOnBoard(I.posistion)},w.onmousemove=()=>{w.style.cursor="pointer",w.style.backgroundColor="rgba(0,0,0,15%)"},w.onmouseleave=()=>{w.style.cursor="unset",w.style.scale="1",w.style.backgroundColor="rgba(0,0,0,0%)"}}},[E]),k.useEffect(()=>{var y=!0,I=()=>{var Y,q,me,ge;for(const Z of t.players.filter(ve=>ve.balance>=0)){const ve=Z.position,be=Z.icon+1,O=Z.isInJail,F=document.querySelector(`div.player[player-id="${Z.id}"]`);if(F!==null){const $=F.querySelector("div");$.style.rotate=`${-d}deg`,$.style.aspectRatio="1",E!==void 0&&E.accessibility[4]===!0?$.setAttribute("data-tooltip-color",Z.color):$.hasAttribute("data-tooltip-color")&&($.querySelector("img").style.filter="",$.removeAttribute("data-tooltip-color"));const de=(Y=F.parentElement)==null?void 0:Y.getAttribute("data-position");if(parseInt(de)!==Z.position&&((q=F.parentElement)==null||q.removeChild(F),(me=document.querySelector(`div.street[data-position="${ve}"]`))==null||me.appendChild(F)),!O&&F.querySelector("img.jailIcon")!=null){const fe=F.querySelector("img.jailIcon");F.removeChild(fe)}if(O&&F.querySelector("img.jailIcon")==null){for(;F.firstChild;)F.removeChild(F.firstChild);const fe=document.createElement("div");fe.setAttribute("data-tooltip-hover",Z.username);const ye=document.createElement("img");ye.src=`./p${be}.png`,fe.appendChild(ye);const ae=document.createElement("img");ae.src="./jail.png",ae.className="jailIcon",fe.appendChild(ae),F.appendChild(fe)}}else{const $=document.createElement("div");$.className="player",$.setAttribute("player-id",Z.id),$.setAttribute("player-position",Z.position.toString());const de=document.createElement("div");de.setAttribute("data-tooltip-hover",Z.username);const fe=document.createElement("img");if(fe.src=`./p${be}.png`,de.appendChild(fe),$.appendChild(de),O){const ye=document.createElement("img");ye.src="./jail.png",ye.className="jailIcon",$.appendChild(ye)}(ge=document.querySelector(`div.street[data-position="${ve}"]`))==null||ge.appendChild($)}}function w(){const Z=document.getElementById("display-houses"),ve=Array.from(Z.querySelectorAll("div.street-houses"));for(const O of ve){const F=O;for(;F.firstChild;)F.removeChild(F.firstChild);F.onclick=()=>{},F.style.cursor="unset",F.style.backgroundColor="rgba(0,0,0,0%)",F.style.padding="0px",F.innerHTML="",F.setAttribute("data-tooltip-hover",""),F.style.zIndex="unset",F.style.boxShadow=""}for(const O of t.players)for(const F of O.properties){const $=F.posistion,de=F.count,fe=Z.querySelector(`div.street-houses[data-position="${$}"`);if(fe!=null){const ye=fe;switch(ye.setAttribute("data-tooltip-hover",O.username),ye.onclick=()=>{const ae=document.querySelector(`div.player[player-id="${O.id}"]`);ae.style.animation="spin2 1s cubic-bezier(.21, 1.57, .55, 1) infinite",setTimeout(()=>{ae.style.animation=""},1*1e3)},ye.style.cursor="pointer",ye.style.zIndex="5",de){case 0:ye.style.backgroundColor="rgba(0,0,0,25%)",E!==void 0&&(E!=null&&E.accessibility[4])&&(ye.style.backgroundColor=O.color,ye.style.boxShadow="0px 0px 5px black");var be=0;if(F.group==="Railroad"){const Ue=O.properties.filter(N=>N.group==="Railroad").length;var be=[25,50,100,200][Ue]}else if(F.group==="Utilities"&&F.rent){const Ue=O.properties.filter(Me=>Me.group==="Utilities").length===2?10:4;be=F.rent*Ue}be!==0&&(ye.innerHTML=`<p>${be}M</p>`,ye.style.backgroundColor="rgba(0,0,0,75%)",E!==void 0&&(E!=null&&E.accessibility[4])&&(ye.style.backgroundColor=`${O.color}`,ye.style.boxShadow="0px 0px 5px black"));break;case 1:case 2:case 3:case 4:for(let Ue=0;Ue<de;Ue++){const Me=document.createElement("img");Me.src=Lm.replace("public/",""),ye.appendChild(Me)}break;case"h":const ae=document.createElement("img");ae.src=Fm.replace("public/",""),ye.appendChild(ae);break}}}}w(),y&&requestAnimationFrame(I)};return requestAnimationFrame(I),()=>{y=!1}},[t.players,d]),k.useEffect(()=>{const y=document.querySelector('button.roll-button[data-button-type="roll"]');y.onclick=()=>{s(!0),t.socket.emit("roll_dice"),console.warn("first roll")}},[]),h.jsx(h.Fragment,{children:h.jsxs("div",{className:"game",children:[h.jsx("div",{id:"dice-panel","data-show":r}),h.jsxs("div",{className:"board",style:{transform:`translateX(-50%) translateY(-50%) rotate(${d}deg) scale(${g})`},id:"locations",children:[h.jsxs("div",{id:"display-houses",children:[h.jsx("div",{"data-position":"39","data-rotate":"4",className:"street-houses",style:{top:"83%",left:"93.5%"}}),h.jsx("div",{"data-position":"37","data-rotate":"4",className:"street-houses",style:{top:"66.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"35","data-rotate":"4",className:"street-houses",style:{top:"50%",left:"93.5%"}}),h.jsx("div",{"data-position":"34","data-rotate":"4",className:"street-houses",style:{top:"41.75%",left:"93.5%"}}),h.jsx("div",{"data-position":"32","data-rotate":"4",className:"street-houses",style:{top:"25.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"31","data-rotate":"4",className:"street-houses",style:{top:"17.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"29","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"83%"}}),h.jsx("div",{"data-position":"28","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"74.75%"}}),h.jsx("div",{"data-position":"27","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"26","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"58.25%"}}),h.jsx("div",{"data-position":"25","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"50%"}}),h.jsx("div",{"data-position":"24","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"23","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"33.5%"}}),h.jsx("div",{"data-position":"21","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"19","data-rotate":"2",className:"street-houses",style:{top:"17.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"18","data-rotate":"2",className:"street-houses",style:{top:"25.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"16","data-rotate":"2",className:"street-houses",style:{top:"41.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"15","data-rotate":"2",className:"street-houses",style:{top:"50%",left:"6.5%"}}),h.jsx("div",{"data-position":"14","data-rotate":"2",className:"street-houses",style:{top:"58.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"13","data-rotate":"2",className:"street-houses",style:{top:"66.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"12","data-rotate":"2",className:"street-houses",style:{top:"74.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"11","data-rotate":"2",className:"street-houses",style:{top:"83%",left:"6.5%"}}),h.jsx("div",{"data-position":"9","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"8","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"25.5%"}}),h.jsx("div",{"data-position":"6","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"5","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"50%"}}),h.jsx("div",{"data-position":"3","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"1","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"83%"}})]}),h.jsxs("div",{id:"display-streets",children:[h.jsx("div",{"data-position":"39",className:"street",style:{width:120,height:75,top:"83%",left:"93.5%"}}),h.jsx("div",{"data-position":"38",className:"street",style:{width:120,height:75,top:"74.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"37",className:"street",style:{width:120,height:75,top:"66.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"36",className:"street",style:{width:120,height:75,top:"58.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"35",className:"street",style:{width:120,height:75,top:"50%",left:"93.5%"}}),h.jsx("div",{"data-position":"34",className:"street",style:{width:120,height:75,top:"41.75%",left:"93.5%"}}),h.jsx("div",{"data-position":"33",className:"street",style:{width:120,height:75,top:"33.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"32",className:"street",style:{width:120,height:75,top:"25.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"31",className:"street",style:{width:120,height:75,top:"17.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"30",className:"street",style:{width:120,height:120,top:"6.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"29",className:"street",style:{width:75,height:120,top:"6.5%",left:"83%"}}),h.jsx("div",{"data-position":"28",className:"street",style:{width:75,height:120,top:"6.5%",left:"74.75%"}}),h.jsx("div",{"data-position":"27",className:"street",style:{width:75,height:120,top:"6.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"26",className:"street",style:{width:75,height:120,top:"6.5%",left:"58.25%"}}),h.jsx("div",{"data-position":"25",className:"street",style:{width:75,height:120,top:"6.5%",left:"50%"}}),h.jsx("div",{"data-position":"24",className:"street",style:{width:75,height:120,top:"6.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"23",className:"street",style:{width:75,height:120,top:"6.5%",left:"33.5%"}}),h.jsx("div",{"data-position":"22",className:"street",style:{width:75,height:120,top:"6.5%",left:"25.5%"}}),h.jsx("div",{"data-position":"21",className:"street",style:{width:75,height:120,top:"6.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"20",className:"street",style:{width:120,height:120,top:"6.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"19",className:"street",style:{width:120,height:75,top:"17.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"18",className:"street",style:{width:120,height:75,top:"25.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"17",className:"street",style:{width:120,height:75,top:"33.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"16",className:"street",style:{width:120,height:75,top:"41.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"15",className:"street",style:{width:120,height:75,top:"50%",left:"6.5%"}}),h.jsx("div",{"data-position":"14",className:"street",style:{width:120,height:75,top:"58.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"13",className:"street",style:{width:120,height:75,top:"66.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"12",className:"street",style:{width:120,height:75,top:"74.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"11",className:"street",style:{width:120,height:75,top:"83%",left:"6.5%"}}),h.jsx("div",{className:"street","data-position":"10",style:{width:120,height:120,top:"93.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"9",className:"street",style:{width:75,height:120,top:"93.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"8",className:"street",style:{width:75,height:120,top:"93.5%",left:"25.5%"}}),h.jsx("div",{"data-position":"7",className:"street",style:{width:75,height:120,top:"93.5%",left:"33.5%"}}),h.jsx("div",{"data-position":"6",className:"street",style:{width:75,height:120,top:"93.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"5",className:"street",style:{width:75,height:120,top:"93.5%",left:"50%"}}),h.jsx("div",{"data-position":"4",className:"street",style:{width:75,height:120,top:"93.5%",left:"58.25%"}}),h.jsx("div",{"data-position":"3",className:"street",style:{width:75,height:120,top:"93.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"2",className:"street",style:{width:75,height:120,top:"93.5%",left:"74.75%"}}),h.jsx("div",{"data-position":"1",className:"street",style:{width:75,height:120,top:"93.5%",left:"83%"}}),h.jsx("div",{"data-position":"0",className:"street",style:{width:120,height:120,top:"93.5%",left:"93.5%"}})]})]}),h.jsxs("div",{className:"roll-panel",children:[h.jsx("button",{className:"roll-button","data-button-type":"card","aria-disabled":!0,style:t.myTurn&&!o?{}:{translate:"0px 20vh"},children:h.jsx("p",{children:"CARD"})}),h.jsx("button",{className:"roll-button","data-button-type":"pay","aria-disabled":!0,style:t.myTurn&&!o?{}:{translate:"0px 20vh"},children:h.jsx("p",{children:"PAY"})}),h.jsxs("button",{className:"roll-button","data-button-type":"roll","aria-disabled":!1,style:t.myTurn&&!o?{}:{translate:"0px 20vh"},children:[h.jsx("img",{src:Kf.replace("public/","")}),h.jsx("p",{children:"ROLL THE DICE"})," ",h.jsx("img",{src:Kf.replace("public/","")})]})]}),h.jsx("div",{className:S==="Chance"||S==="CommunityChest"?"chance-display-actions":"card-display-actions",style:l?{}:{transform:"translateY(-50%) translateX(-70vw)"},children:S==="Chance"||S==="CommunityChest"?h.jsx(h.Fragment,{children:S==="Chance"?h.jsx(Ov,{chance:v}):S==="CommunityChest"?h.jsx(Ov,{chance:v}):h.jsx(h.Fragment,{})}):h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:c?"would you like to buy this card?":"you can buy houses and hotels"}),S==="Railroad"?h.jsx(Go,{railroad:v}):S==="Utilities"?h.jsx(Go,{utility:v}):h.jsx(Go,{street:v}),h.jsx("div",{children:h.jsx("center",{children:c?h.jsx("div",{id:"advanced-responses"}):h.jsxs(h.Fragment,{children:[h.jsx("button",{id:"card-response-yes",children:"YES"}),h.jsx("button",{id:"card-response-no",children:"NO"})]})})})]})}),h.jsx("img",{"data-anim":"0",id:"moneyAnimations",alt:""})]})})}),aS=k.forwardRef((t,e)=>(k.useImperativeHandle(e,()=>({message(n,r,i,o,s){const l=document.querySelector("div.notify"),a=document.createElement("div");a.className="notification",a.innerHTML=n,a.setAttribute("data-notif-type",r??"info"),l.appendChild(a);var c=!1,u="popoff .7s cubic-bezier(.62,.25,1,-0.73)";if(a.onclick=()=>{c=!0,a.style.animation=u,setTimeout(()=>{l.removeChild(a),a.remove(),o&&o()},700)},setTimeout(()=>{c||(a.style.animation=u,setTimeout(()=>{l.removeChild(a),a.remove(),o&&o()},700))},(i??2)*1e3),s===void 0||s!==void 0&&s===!0){const d=JSON.parse(document.cookie).settings;let f=new Audio("./notifications.mp3");f.volume=((d==null?void 0:d.audio[1])??100)/100*(((d==null?void 0:d.audio[0])??100)/100),f.play()}},dialog(n,r){const i=document.querySelector("div.dialog-screen"),o=document.querySelector("div.dialog-box"),s=o.querySelector("div.texts"),l=o.querySelector("div.buttons"),a=n(()=>{i.setAttribute("data-show","false"),o.setAttribute("data-show","false"),o.style.animation="dialogout 1s cubic-bezier(.5,0,1,.5)",setTimeout(()=>{o.style.animation="",s.innerHTML="",l.innerHTML=""},1e3)},(d,f)=>{const g=document.createElement("button");return g.onclick=f,g.innerHTML=d,g});o.setAttribute("data-show","true"),i.setAttribute("data-show","true"),s.innerHTML=a.innerHTML;for(const d of a.buttons)l.appendChild(d);const c=JSON.parse(document.cookie).settings;switch(r){case"loosing":var u=new Audio("./dying.mp3");u.volume=.16*(((c==null?void 0:c.audio[1])??100)/100)*(((c==null?void 0:c.audio[0])??100)/100),u.loop=!1,u.play();break;case"winning":var u=new Audio("./winning.mp3");u.volume=((c==null?void 0:c.audio[1])??100)/100*(((c==null?void 0:c.audio[0])??100)/100),u.loop=!1,u.play();break}}})),h.jsxs(h.Fragment,{children:[" ",h.jsx("div",{className:"notify"}),h.jsx("div",{className:"dialog-screen","data-show":!1}),h.jsxs("div",{className:"dialog-box","data-show":!1,children:[h.jsx("div",{className:"texts"}),h.jsx("div",{className:"buttons"})]})]}))),ac=[{AllowDeals:!0,WinningMode:"last-standing",Name:"Classic",startingCash:1500,mortageAllowed:!0},{AllowDeals:!0,WinningMode:"monopols",Name:"Monopol",startingCash:1500,mortageAllowed:!1},{AllowDeals:!1,WinningMode:"last-standing",Name:"Run-Down",startingCash:1500,mortageAllowed:!1}];function bk({socket:t,name:e,server:n}){const[r,i]=k.useState(new Map),o=Array.from(r.values()),[s,l]=k.useState(""),[a,c]=k.useState(!1),[u,d]=k.useState(!1),[f,g]=k.useState(!1),[p,E]=k.useState(0),[T,v]=k.useState(),[m,S]=k.useState(new Audio("./main-theme.mp3"));k.useEffect(()=>{u&&(m.loop=!0,m.play(),m.volume=.25,T!==void 0&&(m.volume=T.audio[0]/100*(T.audio[2]/100)),S(m))},[u]),k.useEffect(()=>{const y=setInterval(()=>{const I=JSON.parse(document.cookie).settings;v(I)},1e3);return()=>{clearInterval(y)}},[document.cookie]),k.useEffect(()=>{T!==void 0&&(m.volume=T.audio[0]/100*(T.audio[2]/100))},[T]);const _=k.useRef(null),C=k.useRef(null),R=k.useRef(null),b=new Map(Nr.properties.map(y=>[y.posistion??0,y]));return n!==void 0&&n.RenderLogs(y=>{try{const I=document.body.querySelector("#server main div.middle");I.innerHTML="";for(const w of y)I.innerHTML+=`<p> ${w.join("	")} </p>`}catch{}}),k.useEffect(()=>{let y;const I=setInterval(()=>{y=JSON.parse(document.cookie).settings},1e3);function w(N){const M={x:N.clientX,y:N.clientY},te=r.get(t.id);t.emit("mouse",M),te&&(te.positions=M)}function Y(N){function M(){r.delete(N),i(new Map(r)),requestAnimationFrame(()=>{r.has(N)&&requestAnimationFrame(M)})}M();function te(){const G=document.querySelector(`div.player[player-id="${N}"]`);G!==null&&(G.parentElement&&G.parentElement.removeChild(G),G.remove(),requestAnimationFrame(()=>{document.querySelector(`div.player[player-id="${N}"]`)!==null&&requestAnimationFrame(te)}))}te()}function q(N,M,te=!0,G,H=!0){var lt=(N-M.position)%40;(N<M.position||lt<0)&&H&&(lt=40-M.position+N),H||(lt=M.position-N,lt<0&&(lt+=40));const et=.35*1e3*lt;console.log(`${new Date().toTimeString()} generator ${Math.random()} target ${N} time ${et} current ${M.position}`);function W(){var nn=0,$e=!1,We=0;const Ye=document.querySelector(`div.player[player-id="${M.id}"]`);nn=M.position,M.position+=1;var pt=new Audio("./step2.mp3");pt.volume=.1*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),pt.loop=!1,pt.play(),Ye.style.animation="jumpstreet 0.35s cubic-bezier(.26,1.5,.65,1.02)";const Te=()=>{var Un,er,$n,ct;if(We<lt){We+=1;var Be=new Audio("./step2.mp3");if(Be.volume=1*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),Be.loop=!1,Be.play(),M.position=(M.position+(H?1:-1))%40,M.position==0&&te){M.balance+=200;var Be=new Audio("./moneyplus.mp3");Be.volume=1*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),Be.loop=!1,Be.play(),M.id===t.id&&(y!==void 0&&y.notifications===!0&&((Un=R.current)==null||Un.message("200 of money is added to the account","info",2,()=>{},!1)),(er=_.current)==null||er.applyAnimation(2)),$e=!0,i(new Map(r.set(M.id,M)))}if(We==lt-1){if(M.position=N,Ye.style.animation="part 0.9s cubic-bezier(0,.7,.57,1)",setTimeout(()=>{Ye.style.animation=""},900),!$e&&nn>M.position&&te){var Be=new Audio("./moneyplus.mp3");Be.volume=1*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),Be.loop=!1,Be.play(),M.balance+=200,M.id===t.id&&(y!==void 0&&y.notifications===!0&&(($n=R.current)==null||$n.message("200 of money is added to the account","info",2,()=>{},!1)),(ct=_.current)==null||ct.applyAnimation(2)),$e=!0,i(new Map(r.set(M.id,M)))}G&&G()}else Ye.style.animation="jumpstreet 0.35s cubic-bezier(.26,1.5,.65,1.02)",setTimeout(Te,.35*1e3)}};setTimeout(Te,.35*1e3)}return{func:W,time:et}}const me=N=>{l(N.turn_id.toString());for(const M of N.other_players)i(r.set(M.id,new xv(M.id,M.username).recieveJson(M)))},ge=N=>{i(new Map(r.set(N.id,new xv(N.id,N.username).recieveJson(N))))},Z=N=>{const M=r.get(N.id);M!==void 0&&(M.ready=N.state,i(new Map(r.set(M.id,M))),E(N.selectedMode))},ve=()=>{c(!0);function N(M){const te=document.querySelector("p#floating-clock");te.innerHTML=`${M}`,te.className="clocking"}N(3),setTimeout(()=>{N(2),setTimeout(()=>{N(1),setTimeout(()=>{d(!0)},1e3)},1e3)},1e3)},be=N=>{var M,te,G;if(l(N.turn),r.size>2){const H=((M=r.get(N.id))==null?void 0:M.username)??"player";(te=R.current)==null||te.message(`${H} disconected`,"error")}else m.pause(),(G=R.current)==null||G.dialog((H,lt)=>{var et;return{innerHTML:`<h3> YOU WON! </h3> <p> your the only left player with the balance of ${((et=r.get(t.id))==null?void 0:et.balance)??0} </p>`,buttons:[lt("PLAY ANOTHER GAME",()=>{H(),document.location.reload()})]}},"winning");Y(N.id)},O=N=>{var G,H,lt,et,W,nn;const M=r.get(N.from);if(M!==void 0&&JSON.stringify(M.properties)!=JSON.stringify(N.pJson.properties)){var te=new Audio("./buying1.mp3");te.volume=.5*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),te.loop=!1,te.play()}if(N.from!==t.id&&M&&(M.recieveJson(N.pJson),i(new Map(r.set(N.from,M)))),N.pJson.balance<0){if(N.pJson.id!==t.id)if(r.size>2){const $e=N.pJson.username;(G=R.current)==null||G.message(`${$e} lost`,"info")}else if(r.has(t.id))m.pause(),(H=R.current)==null||H.dialog(($e,We)=>{var Ye;return{innerHTML:`<h3> YOU WON! </h3> <p> your the only left player with the balance of ${((Ye=r.get(t.id))==null?void 0:Ye.balance)??0} </p>`,buttons:[We("PLAY ANOTHER GAME",()=>{$e(),document.location.reload()})]}},"winning");else{const We=Array.from(r.values()).filter(Ye=>Ye.id!==N.pJson.id)[0].username??0;m.pause(),(lt=R.current)==null||lt.dialog((Ye,pt)=>{var Te;return{innerHTML:`<h3> ${We} WON! </h3> <p> ${We} won with the balance of ${((Te=r.get(t.id))==null?void 0:Te.balance)??0} </p>`,buttons:[pt("PLAY ANOTHER GAME",()=>{Ye(),document.location.reload()})]}},"winning")}else m.pause(),(et=R.current)==null||et.dialog(($e,We)=>{var Ye;return{innerHTML:`<h3> YOU LOST! </h3> <p> you lost your money and lost the monopol with a wanted balance of ${-(((Ye=r.get(t.id))==null?void 0:Ye.balance)??0)} </p>`,buttons:[We("CONTINUE WATCHING",()=>{$e()}),We("PLAY ANOTHER GAME",()=>{$e(),document.location.reload()})]}},"loosing");Y(N.pJson.id)}if(l(N.turnId),N.turnId===t.id){const $e=r.get(N.turnId);$e&&$e.isInJail&&((W=_.current)==null||W.showJailsButtons((($e==null?void 0:$e.getoutCards)??-1)>0))}(nn=C.current)==null||nn.reRenderPlayerList()},F=N=>{var M;(M=C.current)==null||M.addMessage(N)},$=N=>{var lt;var M=new Audio("./rolling.mp3");M.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),M.loop=!1,M.play();const te=r.get(t.id),G=r.get(N.turnId),H=q(N.listOfNums[2],G,!0,()=>{N.turnId!=t.id&&N.listOfNums[2]===30&&setTimeout(()=>{q(10,G,!1,()=>{G.position=10,G.isInJail=!0;var W=new Audio("./jail.mp3");W.volume=.5*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),W.loop=!1,W.play(),G.jailTurnsRemaining=3}).func()},800)});(lt=_.current)==null||lt.diceResults({l:[N.listOfNums[0],N.listOfNums[1]],time:te.isInJail?2e3:H.time+2e3+800,onDone:()=>{var nn,$e;if(t.id!==N.turnId)return;const et=((nn=r.get(t.id))==null?void 0:nn.position)??-1,W=b.get(et);W!=null&&(W.id==="communitychest"||W.id==="chance"?t.emit("chorch_roll",{is_chance:W.id==="chance",rolls:N.listOfNums[0]+N.listOfNums[1]}):($e=_.current)==null||$e.setStreet({location:et,rolls:N.listOfNums[1]+N.listOfNums[0],onResponse:(We,Ye)=>{var Un,er,$n,ct,tr,In,nr,dn,_e,_t,Ne,P,A,D,B,oe,ne;var pt=0;if(We==="buy"){y!==void 0&&y.notifications===!0&&((Un=R.current)==null||Un.message(`${((W==null?void 0:W.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1)),te.balance-=((W==null?void 0:W.price)??0)*1,(er=_.current)==null||er.applyAnimation(1),te.properties.push({posistion:te.position,count:0,group:(($n=b.get(te.position))==null?void 0:$n.group)??""});var Te=new Audio("./buying1.mp3");Te.volume=.5*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),Te.loop=!1,Te.play()}else if(We==="advance-buy"){var Te=new Audio("./buying1.mp3");Te.volume=.5*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),Te.loop=!1,Te.play();const Q=Array.from(new Map(te.properties.map((we,ze)=>[ze,we])).entries()).filter(we=>we[1].posistion===et)[0][0],U=Ye;te.properties[Q].count=U.state===5?"h":U.state,U.state===5?(y!==void 0&&y.notifications===!0&&((ct=R.current)==null||ct.message(`${W.ohousecost??0} of money is deducted from the account`,"info",2,()=>{},!1)),te.balance-=W.ohousecost??0,(tr=_.current)==null||tr.applyAnimation(1)):(y!==void 0&&y.notifications===!0&&((In=R.current)==null||In.message(`${W.housecost??0} of money is deducted from the account`,"info",2,()=>{},!1)),te.balance-=(W.housecost??0)*U.money,(nr=_.current)==null||nr.applyAnimation(1))}else if(We==="someones"){const ee=Array.from(r.values());for(const Q of ee)for(const U of Q.properties)if(U.posistion===et){var Be=0;if(W.group==="Utilities"&&U.rent){const ze=Q.properties.filter(Ce=>Ce.group==="Utilities").length===2?10:4;Be=U.rent*ze}else if(W.group==="Railroad"){const ze=Q.properties.filter(qe=>qe.group==="Railroad").length;Be=[25,50,100,200][ze]}else U.count===0?Be=(W==null?void 0:W.rent)??0:typeof U.count=="number"&&U.count>0?Be=((W==null?void 0:W.multpliedrent)??[0,0,0,0])[U.count-1]??0:U.count==="h"&&(Be=((W==null?void 0:W.multpliedrent)??[0,0,0,0,0])[4]??0);y!==void 0&&y.notifications===!0&&((dn=R.current)==null||dn.message(`${Be} of money is deducted from the account`,"info",2,()=>{},!1));var Te=new Audio("./moneyminus.mp3");Te.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),Te.loop=!1,Te.play(),(U.morgage===void 0||U.morgage!==void 0&&U.morgage===!1)&&(te.balance-=Be),(_e=_.current)==null||_e.applyAnimation(1),t.emit("pay",{balance:Be,from:t.id,to:Q.id}),(_t=_.current)==null||_t.applyAnimation(1)}}else if(We==="nothing"){if(((W==null?void 0:W.id)??"")=="gotojail"){const ee=q(10,G,!1,()=>{G.position=10,G.isInJail=!0,G.jailTurnsRemaining=3});pt=ee.time,ee.func()}if((W==null?void 0:W.id)==="incometax"){te.balance-=200,y!==void 0&&y.notifications===!0&&((Ne=R.current)==null||Ne.message("200 of money is deducted from the account","info",2,()=>{},!1));var Te=new Audio("./moneyminus.mp3");Te.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),Te.loop=!1,Te.play(),(P=_.current)==null||P.applyAnimation(1)}if((W==null?void 0:W.id)==="luxerytax"){te.balance-=100,y!==void 0&&y.notifications===!0&&((A=R.current)==null||A.message("100 of money is deducted from the account","info",2,()=>{},!1));var Te=new Audio("./moneyminus.mp3");Te.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),Te.loop=!1,Te.play(),(D=_.current)==null||D.applyAnimation(1)}}else if(We==="special_action"){y!==void 0&&y.notifications===!0&&((B=R.current)==null||B.message(`${((W==null?void 0:W.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1));var Te=new Audio("./buying1.mp3");Te.volume=.5*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),Te.loop=!1,Te.play(),te.balance-=((W==null?void 0:W.price)??0)*1,(oe=_.current)==null||oe.applyAnimation(1);const U=Ye.rolls;te.properties.push({posistion:te.position,count:0,rent:U,group:((ne=b.get(te.position))==null?void 0:ne.group)??""})}setTimeout(()=>{var Q;i(new Map(r.set(t.id,te))),(Q=_.current)==null||Q.freeDice();const ee=r.get(t.id).toJson();t.emit("finish-turn",ee)},pt)}}))}}),G.isInJail?setTimeout(()=>{N.listOfNums[0]==N.listOfNums[1]?(G.isInJail=!1,setTimeout(()=>{H.func()},2e3)):G.jailTurnsRemaining>0&&(G.jailTurnsRemaining-=1,G.jailTurnsRemaining===0&&(G.isInJail=!1)),i(new Map(r.set(N.turnId,G)))},1500):setTimeout(()=>{H.func()},2e3)},de=N=>{var G;const M=r.get(N.to);if(M){if(N.option==="card")M.getoutCards-=1;else{M.balance-=50,M.id===t.id&&y!==void 0&&y.notifications===!0&&((G=R.current)==null||G.message("50 of money is deducted from the account","info",2,()=>{},!1));var te=new Audio("./moneyminus.mp3");te.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),te.loop=!1,te.play()}M.isInJail=!1,M.jailTurnsRemaining=0,i(new Map(r.set(N.to,M)))}},fe=N=>{var M;for(const te of N.pJson){const G=r.get(te.id);G==null||G.recieveJson(te)}t.id===N.playerId&&((M=_.current)==null||M.applyAnimation(2))},ye=N=>{var te;(te=_.current)==null||te.chorch(N.element,N.is_chance,3e3),setTimeout(()=>{var We,Ye,pt,Te,Be,Un,er,$n;const G=N.element,H=r.get(N.turnId);if(H===void 0)return;function lt(ct){var nr;if(H===void 0)return 0;const tr=Array.from(r.values()).filter(dn=>dn.id!==H.id);for(const dn of tr){if(dn.balance+=ct,dn.id===t.id&&y!==void 0&&y.notifications===!0){(nr=R.current)==null||nr.message(`${ct} of money is added to the account`,"info",2,()=>{},!1);var In=new Audio("./moneyplus.mp3");In.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),In.loop=!1,In.play()}i(new Map(r.set(dn.id,dn))),H.id===t.id&&(ct>0?t.emit("pay",{balance:ct,from:t.id,to:H.id}):t.emit("pay",{balance:ct,from:H.id,to:t.id}))}return tr.length}var et=0;switch(G.action){case"move":if(G.tileid){const _t=(We=new Map(Nr.properties.map(P=>[P.id,P])).get(G.tileid))==null?void 0:We.posistion;if(_t===void 0)break;const Ne=q(_t,H);et=Ne.time,Ne.func()}else if(G.count){const _e=q((H.position+G.count)%40,H,!0,()=>{},G.count>=0);et=_e.time,_e.func()}break;case"addfunds":if(H.balance+=G.amount??0,H.id===t.id){y!==void 0&&y.notifications===!0&&((Ye=R.current)==null||Ye.message(`${G.amount??0} of money is added to the account`,"info",2,()=>{},!1));var W=new Audio("./moneyplus.mp3");W.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),W.loop=!1,W.play(),(pt=_.current)==null||pt.applyAnimation(2)}break;case"jail":if(G.subaction!==void 0){switch(G.subaction){case"getout":H.getoutCards+=1;break;case"goto":const _e=q(10,H,!1,()=>{H.position=10,H.isInJail=!0;var _t=new Audio("./jail.mp3");_t.volume=.5*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),_t.loop=!1,_t.play(),H.jailTurnsRemaining=3});et=_e.time,_e.func();break}i(new Map(r.set(H.id,H)))}break;case"removefunds":if(H.balance-=G.amount??0,H.id===t.id){(Te=_.current)==null||Te.applyAnimation(1),y!==void 0&&y.notifications===!0&&((Be=R.current)==null||Be.message(`${G.amount??0} of money is deducted from the account`,"info",2,()=>{},!1));var W=new Audio("./moneyminus.mp3");W.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),W.loop=!1,W.play()}break;case"removefundstoplayers":lt(G.amount??0),H.id===t.id&&((Un=_.current)==null||Un.applyAnimation(1));break;case"addfundsfromplayers":lt(-(G.amount??0));break;case"movenearest":let ct=function(_e,_t){_e.sort((Ne,P)=>Ne-P);for(let Ne=0;Ne<_e.length;Ne++)if(_e[Ne]>_t)return _e[Ne];return _e[0]};if(!G.groupid)return;var nn="";G.groupid==="utility"?nn="Utilities":nn="Railroad";const tr=Nr.properties.filter(_e=>_e.group===nn).map(_e=>_e.posistion),In=ct(tr,H.position),nr=q(In,H);et=-1,nr.func(),setTimeout(()=>{var _e;if(H.id===t.id){const _t=(H==null?void 0:H.position)??-1,Ne=b.get(_t);Ne!==void 0&&((_e=_.current)==null||_e.setStreet({location:_t,rolls:N.rolls,onResponse:(P,A)=>{var oe,ne,ee,Q,U,we,ze,Ce,qe,ut,rr,ir,Kr;if(P==="buy"){y!==void 0&&y.notifications===!0&&((oe=R.current)==null||oe.message(`${((Ne==null?void 0:Ne.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1)),H.balance-=((Ne==null?void 0:Ne.price)??0)*1,(ne=_.current)==null||ne.applyAnimation(1),H.properties.push({posistion:H.position,count:0,group:((ee=b.get(H.position))==null?void 0:ee.group)??""});var D=new Audio("./buying1.mp3");D.volume=.5*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),D.loop=!1,D.play(),i(new Map(r.set(t.id,H))),(Q=_.current)==null||Q.freeDice();const or=r.get(t.id).toJson();t.emit("finish-turn",or)}else if(P==="special_action"){console.log(A),y!==void 0&&y.notifications===!0&&((U=R.current)==null||U.message(`${((Ne==null?void 0:Ne.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1)),H.balance-=((Ne==null?void 0:Ne.price)??0)*1;const Ut=A.rolls;(we=_.current)==null||we.applyAnimation(1),H.properties.push({posistion:H.position,count:0,rent:Ut,group:((ze=b.get(H.position))==null?void 0:ze.group)??""});var D=new Audio("./buying1.mp3");D.volume=.5*(((y==null?void 0:y.audio[1])??100)/100)*(((y==null?void 0:y.audio[0])??100)/100),D.loop=!1,D.play(),i(new Map(r.set(t.id,H))),(Ce=_.current)==null||Ce.freeDice();const _n=r.get(t.id).toJson();t.emit("finish-turn",_n)}else if(P==="someones"){const or=Array.from(r.values());for(const Ut of or)for(const rn of Ut.properties)if(rn.posistion===_t){var B=0;if(Ne.group==="Utilities"&&rn.rent){const _n=[Math.floor(Math.random()*6)+1,Math.floor(Math.random()*6)+1];(qe=_.current)==null||qe.diceResults({l:[_n[0],_n[1]],time:2e3,onDone:()=>{var Qr,Ie,hn;B=(_n[0]+_n[1])*(G.rentmultiplier??1),y!==void 0&&y.notifications===!0&&((Qr=R.current)==null||Qr.message(`${B} of money is deducted from the account`,"info",2,()=>{},!1));var Jr=new Audio("./moneyminus.mp3");Jr.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),Jr.loop=!1,Jr.play(),H.balance-=B,(Ie=_.current)==null||Ie.applyAnimation(1),t.emit("pay",{balance:B,from:t.id,to:Ut.id}),i(new Map(r.set(t.id,H))),(hn=_.current)==null||hn.freeDice();const xs=r.get(t.id).toJson();t.emit("finish-turn",xs)}})}else if(Ne.group==="Railroad"){const _n=Ut.properties.filter(Ie=>Ie.group==="Railroad").length;B=[25,50,100,200][_n]*(G.rentmultiplier??1),y!==void 0&&y.notifications===!0&&((ut=R.current)==null||ut.message(`${B} of money is deducted from the account`,"info",2,()=>{},!1));var D=new Audio("./moneyminus.mp3");D.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),D.loop=!1,D.play(),(rn.morgage===void 0||rn.morgage!==void 0&&rn.morgage===!1)&&(H.balance-=B),(rr=_.current)==null||rr.applyAnimation(1),t.emit("pay",{balance:B,from:t.id,to:Ut.id}),i(new Map(r.set(t.id,H))),(ir=_.current)==null||ir.freeDice();const Qr=r.get(t.id).toJson();t.emit("finish-turn",Qr)}}}else{(Kr=_.current)==null||Kr.freeDice();const or=r.get(t.id).toJson();t.emit("finish-turn",or)}}}))}},nr.time);break;case"propertycharges":let dn=function(_e){for(const _t of _e);return 1};var $e=(G.buildings??1)*dn(H.properties.filter(_e=>typeof _e.count=="number").map(_e=>_e.count))+(G.hotels??1)*H.properties.filter(_e=>_e.count==="h").length;if(console.log(`
                        ${G.hotels??1} * ${H.properties.filter(_e=>typeof _e.count=="number").length} + 
                        ${G.buildings??1} * ${H.properties.filter(_e=>_e.count==="h").length}
                        `),H.id===t.id){y!==void 0&&y.notifications===!0&&((er=R.current)==null||er.message(`${$e} of money is deducted from the account`,"info",2,()=>{},!1));var W=new Audio("./moneyminus.mp3");W.volume=((y==null?void 0:y.audio[1])??100)/100*(((y==null?void 0:y.audio[0])??100)/100),W.loop=!1,W.play(),($n=_.current)==null||$n.applyAnimation(1)}H.balance-=$e,i(new Map(r.set(H.id,H)));break}et>=0&&setTimeout(()=>{var ct;i(new Map(r.set(H.id,H))),H.id===t.id&&((ct=_.current)==null||ct.freeDice(),t.emit("finish-turn",r.get(t.id).toJson()))},et)},3e3)};function ae(N){const M=r.get(N.id);M!==void 0&&(M.positions={x:N.x,y:N.y},r.set(N.id,M))}function Ue(){var N;m.pause(),(N=R.current)==null||N.dialog((M,te)=>({innerHTML:"<h3> LOST CONNECTION </h3> <p> you were disconnected from the game </p>",buttons:[te("PLAY ANOTHER GAME",()=>{M(),document.location.reload()})]}),"loosing")}function Me(N){const M=r.get(N.playerId);M!==void 0&&M.recieveJson(N.pJson)}document.addEventListener("mousemove",w),t.on("initials",me),t.on("new-player",ge),t.on("ready",Z),t.on("start-game",ve),t.on("disconnected-player",be),t.on("turn-finished",O),t.on("message",F),t.on("dice_roll_result",$),t.on("unjail",de),t.on("member_updating",fe),t.on("chorch_result",ye),t.on("mouse",ae),t.on("disconnect",Ue),t.on("player_update",Me);var je=!0;return je&&t.emit("name",e),()=>{je=!1,clearInterval(I),document.removeEventListener("mousemove",w)}},[]),k.useEffect(()=>{var y;(y=C.current)==null||y.reRenderPlayerList()},[r]),u?h.jsxs(h.Fragment,{children:[T!==void 0&&T.accessibility[3]?h.jsx("div",{className:"cursors",children:Array.from(r.values()).filter(y=>y.id!==t.id).map((y,I)=>h.jsx("img",{src:"./cursor.png",style:{translate:`${y.positions.x}px ${y.positions.y}px`},className:"cursor"},I))}):h.jsx(h.Fragment,{}),h.jsxs("main",{children:[h.jsx(Rk,{currentTurn:s,ref:C,name:e,socket:t,players:o,server:n,Morgage:{onCanc:y=>{var q,me;var I=JSON.parse(document.cookie).settings;const w=r.get(t.id);if(w!==void 0){I!==void 0&&I.notifications===!0&&((q=R.current)==null||q.message(`${y} of money is deducted from the account for canceling mortgage`,"info",2,()=>{},!1)),w.balance-=y,(me=_.current)==null||me.applyAnimation(1);var Y=new Audio("./buying1.mp3");Y.volume=.5*(((I==null?void 0:I.audio[1])??100)/100)*(((I==null?void 0:I.audio[0])??100)/100),Y.loop=!1,Y.play(),i(new Map(r.set(t.id,w)))}},onMort:y=>{var q,me;var I=JSON.parse(document.cookie).settings;const w=r.get(t.id);if(w!==void 0){I!==void 0&&I.notifications===!0&&((q=R.current)==null||q.message(`${y} of money is deducted from the account for mortgage`,"info",2,()=>{},!1)),w.balance-=y,(me=_.current)==null||me.applyAnimation(1);var Y=new Audio("./buying1.mp3");Y.volume=.5*(((I==null?void 0:I.audio[1])??100)/100)*(((I==null?void 0:I.audio[0])??100)/100),Y.loop=!1,Y.play(),i(new Map(r.set(t.id,w)))}}},callServer:()=>{const y=document.body.querySelector("#root");y.style.transform="translateX(100%)"}}),h.jsx(kk,{clickedOnBoard:y=>{var I;(I=C.current)==null||I.clickedOnBoard(y)},ref:_,socket:t,players:Array.from(r.values()),myTurn:s===t.id})]}),h.jsx(aS,{ref:R}),h.jsxs("div",{id:"server",children:[h.jsxs("main",{children:[h.jsx("div",{className:"upper",onClick:()=>{const y=document.body.querySelector("#root");y.style.transform=""},children:"Server.exe"}),h.jsx("div",{className:"middle"}),h.jsx("div",{className:"lower",children:h.jsx("input",{type:"text"})})]}),h.jsx("footer",{onClick:()=>{const y=document.body.querySelector("#root");y.style.transform=""},children:h.jsx("img",{src:"icon.png",alt:""})})]})]}):h.jsxs("div",{className:"lobby",children:[h.jsxs("main",{children:[h.jsx("section",{children:h.jsxs("div",{children:[h.jsxs("h3",{children:["Hello there ",e]}),"the players that are currently in the lobby are",h.jsxs("div",{children:[Array.from(r.values()).map((y,I)=>h.jsx("p",{style:y.ready?{backgroundColor:"#32a852"}:{},className:"lobby-players",children:y.username},I)),h.jsx("center",{children:h.jsx("button",{disabled:a,onClick:()=>{t.emit("ready",{ready:!f}),g(!f)},children:f?"Not Ready":"Ready"})})]}),h.jsx("br",{})]})}),h.jsxs("div",{children:[n===void 0?h.jsx(h.Fragment,{children:h.jsxs("p",{style:{opacity:.5,margin:0,textAlign:"center"},children:["the server-admin is ",h.jsx("br",{})," choosing the gamemode"]})}):h.jsx(h.Fragment,{}),h.jsxs("div",{className:"modes",children:[h.jsxs("main",{children:[h.jsx("h3",{children:ac[p].Name}),h.jsxs("p",{children:["Winning: ",ac[p].WinningMode.toUpperCase()]}),h.jsxs("p",{children:["Deals: ",ac[p].AllowDeals?"Allowed":"Not-Allowed"]})]}),h.jsx("div",{children:ac.map((y,I)=>h.jsx("p",{"data-select":I===p,onClick:()=>{n!==void 0&&t.emit("ready",{mode:I})},"data-disabled":n===void 0,children:y.Name},I))}),h.jsx("button",{children:"Custom Mode"})]})]})]}),h.jsx("p",{id:"floating-clock"})]})}var lS={exports:{}};(function(t){var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),t.exports.binaryFeatures=e;var n=t.exports.BlobBuilder;typeof window<"u"&&(n=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function r(){this._pieces=[],this._parts=[]}r.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},r.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);e.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var i=new n,o=0,s=this._parts.length;o<s;o++)i.append(this._parts[o]);return i.getBlob()}else return new Blob(this._parts)},t.exports.BufferBuilder=r})(lS);var cS=lS.exports,xk=cS.BufferBuilder,Mv=cS.binaryFeatures,Dk={unpack:function(t){var e=new Ft(t);return e.unpack()},pack:function(t){var e=new Vt;e.pack(t);var n=e.getBuffer();return n}},Nk=Dk;function Ft(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}Ft.prototype.unpack=function(){var t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;var e;if((e=t^160)<=15)return this.unpack_raw(e);if((e=t^176)<=15)return this.unpack_string(e);if((e=t^144)<=15)return this.unpack_array(e);if((e=t^128)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}};Ft.prototype.unpack_uint8=function(){var t=this.dataView[this.index]&255;return this.index++,t};Ft.prototype.unpack_uint16=function(){var t=this.read(2),e=(t[0]&255)*256+(t[1]&255);return this.index+=2,e};Ft.prototype.unpack_uint32=function(){var t=this.read(4),e=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,e};Ft.prototype.unpack_uint64=function(){var t=this.read(8),e=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,e};Ft.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256};Ft.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536};Ft.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)};Ft.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)};Ft.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e};Ft.prototype.unpack_string=function(t){for(var e=this.read(t),n=0,r="",i,o;n<t;)i=e[n],i<128?(r+=String.fromCharCode(i),n++):(i^192)<32?(o=(i^192)<<6|e[n+1]&63,r+=String.fromCharCode(o),n+=2):(o=(i&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,r+=String.fromCharCode(o),n+=3);return this.index+=t,r};Ft.prototype.unpack_array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.unpack();return e};Ft.prototype.unpack_map=function(t){for(var e={},n=0;n<t;n++){var r=this.unpack(),i=this.unpack();e[r]=i}return e};Ft.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,n=(t>>23&255)-127,r=t&8388607|8388608;return(e===0?1:-1)*r*Math.pow(2,n-23)};Ft.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),n=t>>31,r=(t>>20&2047)-1023,i=t&1048575|1048576,o=i*Math.pow(2,r-20)+e*Math.pow(2,r-52);return(n===0?1:-1)*o};Ft.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")};function Vt(){this.bufferBuilder=new xk}Vt.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};Vt.prototype.pack=function(t){var e=typeof t;if(e==="string")this.pack_string(t);else if(e==="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(e==="boolean")t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if(e==="undefined")this.bufferBuilder.append(192);else if(e==="object")if(t===null)this.bufferBuilder.append(192);else{var n=t.constructor;if(n==Array)this.pack_array(t);else if(n==Blob||n==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(n==ArrayBuffer)Mv.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)Mv.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(t);else if(n==Date)this.pack_string(t.toString());else if(typeof t.toBinaryPack=="function")this.bufferBuilder.append(t.toBinaryPack());else throw new Error('Type "'+n.toString()+'" not yet supported')}else throw new Error('Type "'+e+'" not yet supported');this.bufferBuilder.flush()};Vt.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};Vt.prototype.pack_string=function(t){var e=Mk(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};Vt.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");for(var n=0;n<e;n++)this.pack(t[n])};Vt.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(t&255);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")};Vt.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),o=Math.pow(2,32),s=e<<31|n+1023<<20|i/o&1048575,l=i%o;this.bufferBuilder.append(203),this.pack_int32(s),this.pack_int32(l)};Vt.prototype.pack_object=function(t){var e=Object.keys(t),n=e.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this.bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(var r in t)t.hasOwnProperty(r)&&(this.pack(r),this.pack(t[r]))};Vt.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)};Vt.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(t&255)};Vt.prototype.pack_uint32=function(t){var e=t&4294967295;this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};Vt.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};Vt.prototype.pack_int8=function(t){this.bufferBuilder.append(t&255)};Vt.prototype.pack_int16=function(t){this.bufferBuilder.append((t&65280)>>8),this.bufferBuilder.append(t&255)};Vt.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};Vt.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};function Ok(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function Mk(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,Ok).length}const jv=Wu(Nk);let uS=!0,dS=!0;function ea(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function Ss(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(s,l){if(s!==e)return i.apply(this,arguments);const a=c=>{const u=n(c);u&&(l.handleEvent?l.handleEvent(u):l(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,a),i.apply(this,[s,a])};const o=r.removeEventListener;r.removeEventListener=function(s,l){if(s!==e||!this._eventMap||!this._eventMap[e])return o.apply(this,arguments);if(!this._eventMap[e].has(l))return o.apply(this,arguments);const a=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,o.apply(this,[s,a])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(s){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),s&&this.addEventListener(e,this["_on"+e]=s)},enumerable:!0,configurable:!0})}function jk(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(uS=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function Lk(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(dS=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Vm(){if(typeof window=="object"){if(uS)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function dd(t,e){dS&&console.warn(t+" is deprecated, please use "+e+" instead.")}function Fk(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=ea(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=ea(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=ea(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=ea(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function Lv(t){return Object.prototype.toString.call(t)==="[object Object]"}function hS(t){return Lv(t)?Object.keys(t).reduce(function(e,n){const r=Lv(t[n]),i=r?hS(t[n]):t[n],o=r&&!Object.keys(i).length;return i===void 0||o?e:Object.assign(e,{[n]:i})},{}):t}function Jf(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?Jf(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{Jf(t,t.get(i),n)})}))}function Fv(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const o=[];return t.forEach(s=>{s.type==="track"&&s.trackIdentifier===e.id&&o.push(s)}),o.forEach(s=>{t.forEach(l=>{l.type===r&&l.trackId===s.id&&Jf(t,l,i)})}),i}const Vv=Vm;function fS(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const a={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof l[c]=="object"?l[c]:{ideal:l[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,g){return f?f+g.charAt(0).toUpperCase()+g.slice(1):g==="deviceId"?"sourceId":g};if(u.ideal!==void 0){a.optional=a.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",c)]=u.ideal,a.optional.push(f),f={},f[d("max",c)]=u.ideal,a.optional.push(f)):(f[d("",c)]=u.ideal,a.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(a.mandatory=a.mandatory||{},a.mandatory[d("",c)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(a.mandatory=a.mandatory||{},a.mandatory[d(f,c)]=u[f])})}),l.advanced&&(a.optional=(a.optional||[]).concat(l.advanced)),a},i=function(l,a){if(e.version>=61)return a(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete l.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(p=>p.kind==="videoinput");let g=f.find(p=>d.some(E=>p.label.toLowerCase().includes(E)));return!g&&f.length&&d.includes("back")&&(g=f[f.length-1]),g&&(l.video.deviceId=c.exact?{exact:g.deviceId}:{ideal:g.deviceId}),l.video=r(l.video),Vv("chrome: "+JSON.stringify(l)),a(l)})}l.video=r(l.video)}return Vv("chrome: "+JSON.stringify(l)),a(l)},o=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},s=function(l,a,c){i(l,u=>{n.webkitGetUserMedia(u,a,d=>{c&&c(o(d))})})};if(n.getUserMedia=s.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(a){return i(a,c=>l(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(o(u))))}}}function Vk(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const o=r.video&&r.video.width,s=r.video&&r.video.height,l=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},o&&(r.video.mandatory.maxWidth=o),s&&(r.video.mandatory.maxHeight=s),t.navigator.mediaDevices.getUserMedia(r)})}}}function pS(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function mS(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):o={track:i.track};const s=new Event("track");s.track=i.track,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)}),r.stream.getTracks().forEach(i=>{let o;t.RTCPeerConnection.prototype.getReceivers?o=this.getReceivers().find(l=>l.track&&l.track.id===i.id):o={track:i};const s=new Event("track");s.track=i,s.receiver=o,s.transceiver={receiver:o},s.streams=[r.stream],this.dispatchEvent(s)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else Ss(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function gS(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,o){return{track:o,get dtmf(){return this._dtmf===void 0&&(o.kind==="audio"?this._dtmf=i.createDTMFSender(o):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,a){let c=i.apply(this,arguments);return c||(c=e(this,l),this._senders.push(c)),c};const o=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){o.apply(this,arguments);const a=this._senders.indexOf(l);a!==-1&&this._senders.splice(a,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._senders=this._senders||[],n.apply(this,[o]),o.getTracks().forEach(s=>{this._senders.push(e(this,s))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){this._senders=this._senders||[],r.apply(this,[o]),o.getTracks().forEach(s=>{const l=this._senders.find(a=>a.track===s);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function yS(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,o]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const s=function(a){const c={};return a.result().forEach(d=>{const f={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(g=>{f[g]=d.stat(g)}),c[f.id]=f}),c},l=function(a){return new Map(Object.keys(a).map(c=>[c,a[c]]))};if(arguments.length>=2){const a=function(c){i(l(s(c)))};return e.apply(this,[a,r])}return new Promise((a,c)=>{e.apply(this,[function(u){a(l(s(u)))},c])}).then(i,o)}}function vS(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const o=n.apply(this,[]);return o.forEach(s=>s._pc=this),o});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const o=r.apply(this,arguments);return o._pc=this,o}),t.RTCRtpSender.prototype.getStats=function(){const o=this;return this._pc.getStats().then(s=>Fv(s,o.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(o=>o._pc=this),i}),Ss(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(o=>Fv(o,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,o,s;return this.getSenders().forEach(l=>{l.track===r&&(i?s=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(o?s=!0:o=l),l.track===r)),s||i&&o?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():o?o.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function _S(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(s=>this._shimmedLocalStreams[s][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(s,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const a=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(a)===-1&&this._shimmedLocalStreams[l.id].push(a):this._shimmedLocalStreams[l.id]=[l,a],a};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._shimmedLocalStreams=this._shimmedLocalStreams||{},s.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const a=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[s.id]=[s].concat(a)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[s.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(s){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},s&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const a=this._shimmedLocalStreams[l].indexOf(s);a!==-1&&this._shimmedLocalStreams[l].splice(a,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function ES(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return _S(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(g=>g.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(E=>E===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(E=>E.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const p=this._streams[d.id];if(p)p.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const E=new t.MediaStream([u]);this._streams[d.id]=E,this._reverseStreams[E.id]=d,this.addStream(E)}return this.getSenders().find(E=>E.track===u)};function o(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const g=c._reverseStreams[f],p=c._streams[g.id];d=d.replace(new RegExp(p.id,"g"),g.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function s(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const g=c._reverseStreams[f],p=c._streams[g.id];d=d.replace(new RegExp(g.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const u=t.RTCPeerConnection.prototype[c],d={[c](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[p=>{const E=o(this,p);f[0].apply(null,[E])},p=>{f[1]&&f[1].apply(null,p)},arguments[2]]):u.apply(this,arguments).then(p=>o(this,p))}};t.RTCPeerConnection.prototype[c]=d[c]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=s(this,arguments[0]),l.apply(this,arguments))};const a=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=a.get.apply(this);return c.type===""?c:o(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(g=>{this._streams[g].getTracks().find(E=>u.track===E)&&(f=this._streams[g])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function Qf(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function SS(t,e){Ss(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const Uv=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:SS,shimAddTrackRemoveTrack:ES,shimAddTrackRemoveTrackWithNative:_S,shimGetDisplayMedia:Vk,shimGetSendersWithDtmf:gS,shimGetStats:yS,shimGetUserMedia:fS,shimMediaStream:pS,shimOnTrack:mS,shimPeerConnection:Qf,shimSenderReceiverGetStats:vS},Symbol.toStringTag,{value:"Module"}));function Uk(t,e){let n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(r=>{if(r&&(r.urls||r.url)){let i=r.urls||r.url;r.url&&!r.urls&&dd("RTCIceServer.url","RTCIceServer.urls");const o=typeof i=="string";return o&&(i=[i]),i=i.filter(s=>{if(s.indexOf("stun:")===0)return!1;const l=s.startsWith("turn")&&!s.startsWith("turn:[")&&s.includes("transport=udp");return l&&!n?(n=!0,!0):l&&!n}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}var TS={exports:{}};(function(t){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(function(r){return r.trim()})},e.splitSections=function(n){var r=n.split(`
m=`);return r.map(function(i,o){return(o>0?"m="+i:i).trim()+`\r
`})},e.getDescription=function(n){var r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){var r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(function(i){return i.indexOf(r)===0})},e.parseCandidate=function(n){var r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");for(var i={foundation:r[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},o=8;o<r.length;o+=2)switch(r[o]){case"raddr":i.relatedAddress=r[o+1];break;case"rport":i.relatedPort=parseInt(r[o+1],10);break;case"tcptype":i.tcpType=r[o+1];break;case"ufrag":i.ufrag=r[o+1],i.usernameFragment=r[o+1];break;default:i[r[o]]=r[o+1];break}return i},e.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substr(14).split(" ")},e.parseRtpMap=function(n){var r=n.substr(9).split(" "),i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},e.parseFmtp=function(n){for(var r={},i,o=n.substr(n.indexOf(" ")+1).split(";"),s=0;s<o.length;s++)i=o[s].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){var r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var o=[];Object.keys(n.parameters).forEach(function(s){n.parameters[s]?o.push(s+"="+n.parameters[s]):o.push(s)}),r+="a=fmtp:"+i+" "+o.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){var r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(o){r+="a=rtcp-fb:"+i+" "+o.type+(o.parameter&&o.parameter.length?" "+o.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){var r=n.indexOf(" "),i={ssrc:parseInt(n.substr(7,r-7),10)},o=n.indexOf(":",r);return o>-1?(i.attribute=n.substr(r+1,o-r-1),i.value=n.substr(o+1)):i.attribute=n.substr(r+1),i},e.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(i){return parseInt(i,10)})}},e.getMid=function(n){var r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},e.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},e.getDtlsParameters=function(n,r){var i=e.matchPrefix(n+r,"a=fingerprint:");return{role:"auto",fingerprints:i.map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){var i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(o){i+="a=fingerprint:"+o.algorithm+" "+o.value+`\r
`}),i},e.parseCryptoLine=function(n){var r=n.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var r=n.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){var i=e.matchPrefix(n+r,"a=crypto:");return i.map(e.parseCryptoLine)},e.getIceParameters=function(n,r){var i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],o=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&o?{usernameFragment:i.substr(12),password:o.substr(10)}:null},e.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},e.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n),o=i[0].split(" "),s=3;s<o.length;s++){var l=o[s],a=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(a){var c=e.parseRtpMap(a),u=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(c.parameters=u.length?e.parseFmtp(u[0]):{},c.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase());break}}}return e.matchPrefix(n,"a=extmap:").forEach(function(d){r.headerExtensions.push(e.parseExtmap(d))}),r},e.writeRtpDescription=function(n,r){var i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(function(s){return s.preferredPayloadType!==void 0?s.preferredPayloadType:s.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(s){i+=e.writeRtpMap(s),i+=e.writeFmtp(s),i+=e.writeRtcpFb(s)});var o=0;return r.codecs.forEach(function(s){s.maxptime>o&&(o=s.maxptime)}),o>0&&(i+="a=maxptime:"+o+`\r
`),i+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(s){i+=e.writeExtmap(s)}),i},e.parseRtpEncodingParameters=function(n){var r=[],i=e.parseRtpParameters(n),o=i.fecMechanisms.indexOf("RED")!==-1,s=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(function(f){return e.parseSsrcMedia(f)}).filter(function(f){return f.attribute==="cname"}),a=l.length>0&&l[0].ssrc,c,u=e.matchPrefix(n,"a=ssrc-group:FID").map(function(f){var g=f.substr(17).split(" ");return g.map(function(p){return parseInt(p,10)})});u.length>0&&u[0].length>1&&u[0][0]===a&&(c=u[0][1]),i.codecs.forEach(function(f){if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){var g={ssrc:a,codecPayloadType:parseInt(f.parameters.apt,10)};a&&c&&(g.rtx={ssrc:c}),r.push(g),o&&(g=JSON.parse(JSON.stringify(g)),g.fec={ssrc:a,mechanism:s?"red+ulpfec":"red"},r.push(g))}}),r.length===0&&a&&r.push({ssrc:a});var d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substr(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substr(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(function(f){f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){var r={},i=e.matchPrefix(n,"a=ssrc:").map(function(l){return e.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var o=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=o.length>0,r.compound=o.length===0;var s=e.matchPrefix(n,"a=rtcp-mux");return r.mux=s.length>0,r},e.parseMsid=function(n){var r,i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substr(7).split(" "),{stream:r[0],track:r[1]};var o=e.matchPrefix(n,"a=ssrc:").map(function(s){return e.parseSsrcMedia(s)}).filter(function(s){return s.attribute==="msid"});if(o.length>0)return r=o[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){var r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:"),o;i.length>0&&(o=parseInt(i[0].substr(19),10)),isNaN(o)&&(o=65536);var s=e.matchPrefix(n,"a=sctp-port:");if(s.length>0)return{port:parseInt(s[0].substr(12),10),protocol:r.fmt,maxMessageSize:o};var l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){var a=e.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:o}}},e.writeSctpDescription=function(n,r){var i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(n,r,i){var o,s=r!==void 0?r:2;n?o=n:o=e.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+o+" "+s+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(n,r,i,o){var s=e.writeRtpDescription(n.kind,r);if(s+=e.writeIceParameters(n.iceGatherer.getLocalParameters()),s+=e.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),s+="a=mid:"+n.mid+`\r
`,n.direction?s+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?s+=`a=sendrecv\r
`:n.rtpSender?s+=`a=sendonly\r
`:n.rtpReceiver?s+=`a=recvonly\r
`:s+=`a=inactive\r
`,n.rtpSender){var l="msid:"+o.id+" "+n.rtpSender.track.id+`\r
`;s+="a="+l,s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+l,n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+l,s+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return s+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),s},e.getDirection=function(n,r){for(var i=e.splitLines(n),o=0;o<i.length;o++)switch(i[o]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[o].substr(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){var r=e.splitLines(n),i=r[0].split(" ");return i[0].substr(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){var r=e.splitLines(n),i=r[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){var r=e.matchPrefix(n,"o=")[0],i=r.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=e.splitLines(n),i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(TS);var wS=TS.exports;const Nc=Wu(wS);var se=wS;function $k(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}function $v(t,e,n,r,i){var o=se.writeRtpDescription(t.kind,e);if(o+=se.writeIceParameters(t.iceGatherer.getLocalParameters()),o+=se.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":i||"active"),o+="a=mid:"+t.mid+`\r
`,t.rtpSender&&t.rtpReceiver?o+=`a=sendrecv\r
`:t.rtpSender?o+=`a=sendonly\r
`:t.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,t.rtpSender){var s=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=s;var l="msid:"+(r?r.id:"-")+" "+s+`\r
`;o+="a="+l,o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+l,t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+l,o+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+se.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+se.localCName+`\r
`),o}function Bk(t,e){var n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(r){if(r&&(r.urls||r.url)){var i=r.urls||r.url;r.url&&!r.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var o=typeof i=="string";return o&&(i=[i]),i=i.filter(function(s){var l=s.indexOf("turn:")===0&&s.indexOf("transport=udp")!==-1&&s.indexOf("turn:[")===-1&&!n;return l?(n=!0,!0):s.indexOf("stun:")===0&&e>=14393&&s.indexOf("?transport=udp")===-1}),delete r.url,r.urls=o?i[0]:i,!!i.length}})}function lc(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(o,s){o=parseInt(o,10);for(var l=0;l<s.length;l++)if(s[l].payloadType===o||s[l].preferredPayloadType===o)return s[l]},i=function(o,s,l,a){var c=r(o.parameters.apt,l),u=r(s.parameters.apt,a);return c&&u&&c.name.toLowerCase()===u.name.toLowerCase()};return t.codecs.forEach(function(o){for(var s=0;s<e.codecs.length;s++){var l=e.codecs[s];if(o.name.toLowerCase()===l.name.toLowerCase()&&o.clockRate===l.clockRate){if(o.name.toLowerCase()==="rtx"&&o.parameters&&l.parameters.apt&&!i(o,l,t.codecs,e.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(o.numChannels,l.numChannels),n.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(a){for(var c=0;c<o.rtcpFeedback.length;c++)if(o.rtcpFeedback[c].type===a.type&&o.rtcpFeedback[c].parameter===a.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(o){for(var s=0;s<e.headerExtensions.length;s++){var l=e.headerExtensions[s];if(o.uri===l.uri){n.headerExtensions.push(l);break}}}),n}function Bv(t,e,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)!==-1}function Sh(t,e){var n=t.getRemoteCandidates().find(function(r){return e.foundation===r.foundation&&e.ip===r.ip&&e.port===r.port&&e.priority===r.priority&&e.protocol===r.protocol&&e.type===r.type});return n||t.addRemoteCandidate(e),!n}function zt(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}var zk=function(t,e){function n(a,c){c.addTrack(a),c.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:a}))}function r(a,c){c.removeTrack(a),c.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:a}))}function i(a,c,u,d){var f=new Event("track");f.track=c,f.receiver=u,f.transceiver={receiver:u},f.streams=d,t.setTimeout(function(){a._dispatchEvent("track",f)})}var o=function(a){var c=this,u=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(f){c[f]=u[f].bind(u)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",a=JSON.parse(JSON.stringify(a||{})),this.usingBundle=a.bundlePolicy==="max-bundle",a.rtcpMuxPolicy==="negotiate")throw zt("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(a.rtcpMuxPolicy||(a.rtcpMuxPolicy="require"),a.iceTransportPolicy){case"all":case"relay":break;default:a.iceTransportPolicy="all";break}switch(a.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:a.bundlePolicy="balanced";break}if(a.iceServers=Bk(a.iceServers||[],e),this._iceGatherers=[],a.iceCandidatePoolSize)for(var d=a.iceCandidatePoolSize;d>0;d--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:a.iceServers,gatherPolicy:a.iceTransportPolicy}));else a.iceCandidatePoolSize=0;this._config=a,this.transceivers=[],this._sdpSessionId=se.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(o.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(o.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),o.prototype.onicecandidate=null,o.prototype.onaddstream=null,o.prototype.ontrack=null,o.prototype.onremovestream=null,o.prototype.onsignalingstatechange=null,o.prototype.oniceconnectionstatechange=null,o.prototype.onconnectionstatechange=null,o.prototype.onicegatheringstatechange=null,o.prototype.onnegotiationneeded=null,o.prototype.ondatachannel=null,o.prototype._dispatchEvent=function(a,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+a]=="function"&&this["on"+a](c))},o.prototype._emitGatheringStateChange=function(){var a=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",a)},o.prototype.getConfiguration=function(){return this._config},o.prototype.getLocalStreams=function(){return this.localStreams},o.prototype.getRemoteStreams=function(){return this.remoteStreams},o.prototype._createTransceiver=function(a,c){var u=this.transceivers.length>0,d={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:a,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&u)d.iceTransport=this.transceivers[0].iceTransport,d.dtlsTransport=this.transceivers[0].dtlsTransport;else{var f=this._createIceAndDtlsTransports();d.iceTransport=f.iceTransport,d.dtlsTransport=f.dtlsTransport}return c||this.transceivers.push(d),d},o.prototype.addTrack=function(a,c){if(this._isClosed)throw zt("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var u=this.transceivers.find(function(g){return g.track===a});if(u)throw zt("InvalidAccessError","Track already exists.");for(var d,f=0;f<this.transceivers.length;f++)!this.transceivers[f].track&&this.transceivers[f].kind===a.kind&&(d=this.transceivers[f]);return d||(d=this._createTransceiver(a.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),d.track=a,d.stream=c,d.rtpSender=new t.RTCRtpSender(a,d.dtlsTransport),d.rtpSender},o.prototype.addStream=function(a){var c=this;if(e>=15025)a.getTracks().forEach(function(d){c.addTrack(d,a)});else{var u=a.clone();a.getTracks().forEach(function(d,f){var g=u.getTracks()[f];d.addEventListener("enabled",function(p){g.enabled=p.enabled})}),u.getTracks().forEach(function(d){c.addTrack(d,u)})}},o.prototype.removeTrack=function(a){if(this._isClosed)throw zt("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(a instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(f){return f.rtpSender===a});if(!c)throw zt("InvalidAccessError","Sender was not created by this connection.");var u=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var d=this.transceivers.map(function(f){return f.stream});d.indexOf(u)===-1&&this.localStreams.indexOf(u)>-1&&this.localStreams.splice(this.localStreams.indexOf(u),1),this._maybeFireNegotiationNeeded()},o.prototype.removeStream=function(a){var c=this;a.getTracks().forEach(function(u){var d=c.getSenders().find(function(f){return f.track===u});d&&c.removeTrack(d)})},o.prototype.getSenders=function(){return this.transceivers.filter(function(a){return!!a.rtpSender}).map(function(a){return a.rtpSender})},o.prototype.getReceivers=function(){return this.transceivers.filter(function(a){return!!a.rtpReceiver}).map(function(a){return a.rtpReceiver})},o.prototype._createIceGatherer=function(a,c){var u=this;if(c&&a>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var d=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(d,"state",{value:"new",writable:!0}),this.transceivers[a].bufferedCandidateEvents=[],this.transceivers[a].bufferCandidates=function(f){var g=!f.candidate||Object.keys(f.candidate).length===0;d.state=g?"completed":"gathering",u.transceivers[a].bufferedCandidateEvents!==null&&u.transceivers[a].bufferedCandidateEvents.push(f)},d.addEventListener("localcandidate",this.transceivers[a].bufferCandidates),d},o.prototype._gather=function(a,c){var u=this,d=this.transceivers[c].iceGatherer;if(!d.onlocalcandidate){var f=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,d.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),d.onlocalcandidate=function(g){if(!(u.usingBundle&&c>0)){var p=new Event("icecandidate");p.candidate={sdpMid:a,sdpMLineIndex:c};var E=g.candidate,T=!E||Object.keys(E).length===0;if(T)(d.state==="new"||d.state==="gathering")&&(d.state="completed");else{d.state==="new"&&(d.state="gathering"),E.component=1,E.ufrag=d.getLocalParameters().usernameFragment;var v=se.writeCandidate(E);p.candidate=Object.assign(p.candidate,se.parseCandidate(v)),p.candidate.candidate=v,p.candidate.toJSON=function(){return{candidate:p.candidate.candidate,sdpMid:p.candidate.sdpMid,sdpMLineIndex:p.candidate.sdpMLineIndex,usernameFragment:p.candidate.usernameFragment}}}var m=se.getMediaSections(u._localDescription.sdp);T?m[p.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:m[p.candidate.sdpMLineIndex]+="a="+p.candidate.candidate+`\r
`,u._localDescription.sdp=se.getDescription(u._localDescription.sdp)+m.join("");var S=u.transceivers.every(function(_){return _.iceGatherer&&_.iceGatherer.state==="completed"});u.iceGatheringState!=="gathering"&&(u.iceGatheringState="gathering",u._emitGatheringStateChange()),T||u._dispatchEvent("icecandidate",p),S&&(u._dispatchEvent("icecandidate",new Event("icecandidate")),u.iceGatheringState="complete",u._emitGatheringStateChange())}},t.setTimeout(function(){f.forEach(function(g){d.onlocalcandidate(g)})},0)}},o.prototype._createIceAndDtlsTransports=function(){var a=this,c=new t.RTCIceTransport(null);c.onicestatechange=function(){a._updateIceConnectionState(),a._updateConnectionState()};var u=new t.RTCDtlsTransport(c);return u.ondtlsstatechange=function(){a._updateConnectionState()},u.onerror=function(){Object.defineProperty(u,"state",{value:"failed",writable:!0}),a._updateConnectionState()},{iceTransport:c,dtlsTransport:u}},o.prototype._disposeIceAndDtlsTransports=function(a){var c=this.transceivers[a].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[a].iceGatherer);var u=this.transceivers[a].iceTransport;u&&(delete u.onicestatechange,delete this.transceivers[a].iceTransport);var d=this.transceivers[a].dtlsTransport;d&&(delete d.ondtlsstatechange,delete d.onerror,delete this.transceivers[a].dtlsTransport)},o.prototype._transceive=function(a,c,u){var d=lc(a.localCapabilities,a.remoteCapabilities);c&&a.rtpSender&&(d.encodings=a.sendEncodingParameters,d.rtcp={cname:se.localCName,compound:a.rtcpParameters.compound},a.recvEncodingParameters.length&&(d.rtcp.ssrc=a.recvEncodingParameters[0].ssrc),a.rtpSender.send(d)),u&&a.rtpReceiver&&d.codecs.length>0&&(a.kind==="video"&&a.recvEncodingParameters&&e<15019&&a.recvEncodingParameters.forEach(function(f){delete f.rtx}),a.recvEncodingParameters.length?d.encodings=a.recvEncodingParameters:d.encodings=[{}],d.rtcp={compound:a.rtcpParameters.compound},a.rtcpParameters.cname&&(d.rtcp.cname=a.rtcpParameters.cname),a.sendEncodingParameters.length&&(d.rtcp.ssrc=a.sendEncodingParameters[0].ssrc),a.rtpReceiver.receive(d))},o.prototype.setLocalDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(zt("TypeError",'Unsupported type "'+a.type+'"'));if(!Bv("setLocalDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(zt("InvalidStateError","Can not set local "+a.type+" in state "+c.signalingState));var u,d;if(a.type==="offer")u=se.splitSections(a.sdp),d=u.shift(),u.forEach(function(g,p){var E=se.parseRtpParameters(g);c.transceivers[p].localCapabilities=E}),c.transceivers.forEach(function(g,p){c._gather(g.mid,p)});else if(a.type==="answer"){u=se.splitSections(c._remoteDescription.sdp),d=u.shift();var f=se.matchPrefix(d,"a=ice-lite").length>0;u.forEach(function(g,p){var E=c.transceivers[p],T=E.iceGatherer,v=E.iceTransport,m=E.dtlsTransport,S=E.localCapabilities,_=E.remoteCapabilities,C=se.isRejected(g)&&se.matchPrefix(g,"a=bundle-only").length===0;if(!C&&!E.rejected){var R=se.getIceParameters(g,d),b=se.getDtlsParameters(g,d);f&&(b.role="server"),(!c.usingBundle||p===0)&&(c._gather(E.mid,p),v.state==="new"&&v.start(T,R,f?"controlling":"controlled"),m.state==="new"&&m.start(b));var y=lc(S,_);c._transceive(E,y.codecs.length>0,!1)}})}return c._localDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},o.prototype.setRemoteDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(zt("TypeError",'Unsupported type "'+a.type+'"'));if(!Bv("setRemoteDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(zt("InvalidStateError","Can not set remote "+a.type+" in state "+c.signalingState));var u={};c.remoteStreams.forEach(function(v){u[v.id]=v});var d=[],f=se.splitSections(a.sdp),g=f.shift(),p=se.matchPrefix(g,"a=ice-lite").length>0,E=se.matchPrefix(g,"a=group:BUNDLE ").length>0;c.usingBundle=E;var T=se.matchPrefix(g,"a=ice-options:")[0];return T?c.canTrickleIceCandidates=T.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,f.forEach(function(v,m){var S=se.splitLines(v),_=se.getKind(v),C=se.isRejected(v)&&se.matchPrefix(v,"a=bundle-only").length===0,R=S[0].substr(2).split(" ")[2],b=se.getDirection(v,g),y=se.parseMsid(v),I=se.getMid(v)||se.generateIdentifier();if(C||_==="application"&&(R==="DTLS/SCTP"||R==="UDP/DTLS/SCTP")){c.transceivers[m]={mid:I,kind:_,protocol:R,rejected:!0};return}!C&&c.transceivers[m]&&c.transceivers[m].rejected&&(c.transceivers[m]=c._createTransceiver(_,!0));var w,Y,q,me,ge,Z,ve,be,O,F=se.parseRtpParameters(v),$,de;C||($=se.getIceParameters(v,g),de=se.getDtlsParameters(v,g),de.role="client"),ve=se.parseRtpEncodingParameters(v);var fe=se.parseRtcpParameters(v),ye=se.matchPrefix(v,"a=end-of-candidates",g).length>0,ae=se.matchPrefix(v,"a=candidate:").map(function(M){return se.parseCandidate(M)}).filter(function(M){return M.component===1});if((a.type==="offer"||a.type==="answer")&&!C&&E&&m>0&&c.transceivers[m]&&(c._disposeIceAndDtlsTransports(m),c.transceivers[m].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[m].iceTransport=c.transceivers[0].iceTransport,c.transceivers[m].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[m].rtpSender&&c.transceivers[m].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[m].rtpReceiver&&c.transceivers[m].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),a.type==="offer"&&!C){w=c.transceivers[m]||c._createTransceiver(_),w.mid=I,w.iceGatherer||(w.iceGatherer=c._createIceGatherer(m,E)),ae.length&&w.iceTransport.state==="new"&&(ye&&(!E||m===0)?w.iceTransport.setRemoteCandidates(ae):ae.forEach(function(M){Sh(w.iceTransport,M)})),be=t.RTCRtpReceiver.getCapabilities(_),e<15019&&(be.codecs=be.codecs.filter(function(M){return M.name!=="rtx"})),Z=w.sendEncodingParameters||[{ssrc:(2*m+2)*1001}];var Ue=!1;if(b==="sendrecv"||b==="sendonly"){if(Ue=!w.rtpReceiver,ge=w.rtpReceiver||new t.RTCRtpReceiver(w.dtlsTransport,_),Ue){var Me;O=ge.track,y&&y.stream==="-"||(y?(u[y.stream]||(u[y.stream]=new t.MediaStream,Object.defineProperty(u[y.stream],"id",{get:function(){return y.stream}})),Object.defineProperty(O,"id",{get:function(){return y.track}}),Me=u[y.stream]):(u.default||(u.default=new t.MediaStream),Me=u.default)),Me&&(n(O,Me),w.associatedRemoteMediaStreams.push(Me)),d.push([O,ge,Me])}}else w.rtpReceiver&&w.rtpReceiver.track&&(w.associatedRemoteMediaStreams.forEach(function(M){var te=M.getTracks().find(function(G){return G.id===w.rtpReceiver.track.id});te&&r(te,M)}),w.associatedRemoteMediaStreams=[]);w.localCapabilities=be,w.remoteCapabilities=F,w.rtpReceiver=ge,w.rtcpParameters=fe,w.sendEncodingParameters=Z,w.recvEncodingParameters=ve,c._transceive(c.transceivers[m],!1,Ue)}else if(a.type==="answer"&&!C){w=c.transceivers[m],Y=w.iceGatherer,q=w.iceTransport,me=w.dtlsTransport,ge=w.rtpReceiver,Z=w.sendEncodingParameters,be=w.localCapabilities,c.transceivers[m].recvEncodingParameters=ve,c.transceivers[m].remoteCapabilities=F,c.transceivers[m].rtcpParameters=fe,ae.length&&q.state==="new"&&((p||ye)&&(!E||m===0)?q.setRemoteCandidates(ae):ae.forEach(function(M){Sh(w.iceTransport,M)})),(!E||m===0)&&(q.state==="new"&&q.start(Y,$,"controlling"),me.state==="new"&&me.start(de));var je=lc(w.localCapabilities,w.remoteCapabilities),N=je.codecs.filter(function(M){return M.name.toLowerCase()==="rtx"}).length;!N&&w.sendEncodingParameters[0].rtx&&delete w.sendEncodingParameters[0].rtx,c._transceive(w,b==="sendrecv"||b==="recvonly",b==="sendrecv"||b==="sendonly"),ge&&(b==="sendrecv"||b==="sendonly")?(O=ge.track,y?(u[y.stream]||(u[y.stream]=new t.MediaStream),n(O,u[y.stream]),d.push([O,ge,u[y.stream]])):(u.default||(u.default=new t.MediaStream),n(O,u.default),d.push([O,ge,u.default]))):delete w.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=a.type==="offer"?"active":"passive"),c._remoteDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(u).forEach(function(v){var m=u[v];if(m.getTracks().length){if(c.remoteStreams.indexOf(m)===-1){c.remoteStreams.push(m);var S=new Event("addstream");S.stream=m,t.setTimeout(function(){c._dispatchEvent("addstream",S)})}d.forEach(function(_){var C=_[0],R=_[1];m.id===_[2].id&&i(c,C,R,[m])})}}),d.forEach(function(v){v[2]||i(c,v[0],v[1],[])}),t.setTimeout(function(){c&&c.transceivers&&c.transceivers.forEach(function(v){v.iceTransport&&v.iceTransport.state==="new"&&v.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),v.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},o.prototype.close=function(){this.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.stop(),a.dtlsTransport&&a.dtlsTransport.stop(),a.rtpSender&&a.rtpSender.stop(),a.rtpReceiver&&a.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},o.prototype._updateSignalingState=function(a){this.signalingState=a;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},o.prototype._maybeFireNegotiationNeeded=function(){var a=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,t.setTimeout(function(){if(a.needNegotiation){a.needNegotiation=!1;var c=new Event("negotiationneeded");a._dispatchEvent("negotiationneeded",c)}},0))},o.prototype._updateIceConnectionState=function(){var a,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(d){d.iceTransport&&!d.rejected&&c[d.iceTransport.state]++}),a="new",c.failed>0?a="failed":c.checking>0?a="checking":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0?a="connected":c.completed>0&&(a="completed"),a!==this.iceConnectionState){this.iceConnectionState=a;var u=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",u)}},o.prototype._updateConnectionState=function(){var a,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(d){d.iceTransport&&d.dtlsTransport&&!d.rejected&&(c[d.iceTransport.state]++,c[d.dtlsTransport.state]++)}),c.connected+=c.completed,a="new",c.failed>0?a="failed":c.connecting>0?a="connecting":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0&&(a="connected"),a!==this.connectionState){this.connectionState=a;var u=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",u)}},o.prototype.createOffer=function(){var a=this;if(a._isClosed)return Promise.reject(zt("InvalidStateError","Can not call createOffer after close"));var c=a.transceivers.filter(function(p){return p.kind==="audio"}).length,u=a.transceivers.filter(function(p){return p.kind==="video"}).length,d=arguments[0];if(d){if(d.mandatory||d.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");d.offerToReceiveAudio!==void 0&&(d.offerToReceiveAudio===!0?c=1:d.offerToReceiveAudio===!1?c=0:c=d.offerToReceiveAudio),d.offerToReceiveVideo!==void 0&&(d.offerToReceiveVideo===!0?u=1:d.offerToReceiveVideo===!1?u=0:u=d.offerToReceiveVideo)}for(a.transceivers.forEach(function(p){p.kind==="audio"?(c--,c<0&&(p.wantReceive=!1)):p.kind==="video"&&(u--,u<0&&(p.wantReceive=!1))});c>0||u>0;)c>0&&(a._createTransceiver("audio"),c--),u>0&&(a._createTransceiver("video"),u--);var f=se.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.transceivers.forEach(function(p,E){var T=p.track,v=p.kind,m=p.mid||se.generateIdentifier();p.mid=m,p.iceGatherer||(p.iceGatherer=a._createIceGatherer(E,a.usingBundle));var S=t.RTCRtpSender.getCapabilities(v);e<15019&&(S.codecs=S.codecs.filter(function(C){return C.name!=="rtx"})),S.codecs.forEach(function(C){C.name==="H264"&&C.parameters["level-asymmetry-allowed"]===void 0&&(C.parameters["level-asymmetry-allowed"]="1"),p.remoteCapabilities&&p.remoteCapabilities.codecs&&p.remoteCapabilities.codecs.forEach(function(R){C.name.toLowerCase()===R.name.toLowerCase()&&C.clockRate===R.clockRate&&(C.preferredPayloadType=R.payloadType)})}),S.headerExtensions.forEach(function(C){var R=p.remoteCapabilities&&p.remoteCapabilities.headerExtensions||[];R.forEach(function(b){C.uri===b.uri&&(C.id=b.id)})});var _=p.sendEncodingParameters||[{ssrc:(2*E+1)*1001}];T&&e>=15019&&v==="video"&&!_[0].rtx&&(_[0].rtx={ssrc:_[0].ssrc+1}),p.wantReceive&&(p.rtpReceiver=new t.RTCRtpReceiver(p.dtlsTransport,v)),p.localCapabilities=S,p.sendEncodingParameters=_}),a._config.bundlePolicy!=="max-compat"&&(f+="a=group:BUNDLE "+a.transceivers.map(function(p){return p.mid}).join(" ")+`\r
`),f+=`a=ice-options:trickle\r
`,a.transceivers.forEach(function(p,E){f+=$v(p,p.localCapabilities,"offer",p.stream,a._dtlsRole),f+=`a=rtcp-rsize\r
`,p.iceGatherer&&a.iceGatheringState!=="new"&&(E===0||!a.usingBundle)&&(p.iceGatherer.getLocalCandidates().forEach(function(T){T.component=1,f+="a="+se.writeCandidate(T)+`\r
`}),p.iceGatherer.state==="completed"&&(f+=`a=end-of-candidates\r
`))});var g=new t.RTCSessionDescription({type:"offer",sdp:f});return Promise.resolve(g)},o.prototype.createAnswer=function(){var a=this;if(a._isClosed)return Promise.reject(zt("InvalidStateError","Can not call createAnswer after close"));if(!(a.signalingState==="have-remote-offer"||a.signalingState==="have-local-pranswer"))return Promise.reject(zt("InvalidStateError","Can not call createAnswer in signalingState "+a.signalingState));var c=se.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.usingBundle&&(c+="a=group:BUNDLE "+a.transceivers.map(function(f){return f.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var u=se.getMediaSections(a._remoteDescription.sdp).length;a.transceivers.forEach(function(f,g){if(!(g+1>u)){if(f.rejected){f.kind==="application"?f.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+f.protocol+` webrtc-datachannel\r
`:f.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:f.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+f.mid+`\r
`;return}if(f.stream){var p;f.kind==="audio"?p=f.stream.getAudioTracks()[0]:f.kind==="video"&&(p=f.stream.getVideoTracks()[0]),p&&e>=15019&&f.kind==="video"&&!f.sendEncodingParameters[0].rtx&&(f.sendEncodingParameters[0].rtx={ssrc:f.sendEncodingParameters[0].ssrc+1})}var E=lc(f.localCapabilities,f.remoteCapabilities),T=E.codecs.filter(function(v){return v.name.toLowerCase()==="rtx"}).length;!T&&f.sendEncodingParameters[0].rtx&&delete f.sendEncodingParameters[0].rtx,c+=$v(f,E,"answer",f.stream,a._dtlsRole),f.rtcpParameters&&f.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var d=new t.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(d)},o.prototype.addIceCandidate=function(a){var c=this,u;return a&&!(a.sdpMLineIndex!==void 0||a.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(d,f){if(c._remoteDescription)if(!a||a.candidate==="")for(var g=0;g<c.transceivers.length&&!(!c.transceivers[g].rejected&&(c.transceivers[g].iceTransport.addRemoteCandidate({}),u=se.getMediaSections(c._remoteDescription.sdp),u[g]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=se.getDescription(c._remoteDescription.sdp)+u.join(""),c.usingBundle));g++);else{var p=a.sdpMLineIndex;if(a.sdpMid){for(var E=0;E<c.transceivers.length;E++)if(c.transceivers[E].mid===a.sdpMid){p=E;break}}var T=c.transceivers[p];if(T){if(T.rejected)return d();var v=Object.keys(a.candidate).length>0?se.parseCandidate(a.candidate):{};if(v.protocol==="tcp"&&(v.port===0||v.port===9)||v.component&&v.component!==1)return d();if((p===0||p>0&&T.iceTransport!==c.transceivers[0].iceTransport)&&!Sh(T.iceTransport,v))return f(zt("OperationError","Can not add ICE candidate"));var m=a.candidate.trim();m.indexOf("a=")===0&&(m=m.substr(2)),u=se.getMediaSections(c._remoteDescription.sdp),u[p]+="a="+(v.type?m:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=se.getDescription(c._remoteDescription.sdp)+u.join("")}else return f(zt("OperationError","Can not add ICE candidate"))}else return f(zt("InvalidStateError","Can not add ICE candidate without a remote description"));d()})},o.prototype.getStats=function(a){if(a&&a instanceof t.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(d){d.rtpSender&&d.rtpSender.track===a?c=d.rtpSender:d.rtpReceiver&&d.rtpReceiver.track===a&&(c=d.rtpReceiver)}),!c)throw zt("InvalidAccessError","Invalid selector.");return c.getStats()}var u=[];return this.transceivers.forEach(function(d){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(f){d[f]&&u.push(d[f].getStats())})}),Promise.all(u).then(function(d){var f=new Map;return d.forEach(function(g){g.forEach(function(p){f.set(p.id,p)})}),f})};var s=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];s.forEach(function(a){var c=t[a];if(c&&c.prototype&&c.prototype.getStats){var u=c.prototype.getStats;c.prototype.getStats=function(){return u.apply(this).then(function(d){var f=new Map;return Object.keys(d).forEach(function(g){d[g].type=$k(d[g]),f.set(g,d[g])}),f})}}});var l=["createOffer","createAnswer"];return l.forEach(function(a){var c=o.prototype[a];o.prototype[a]=function(){var u=arguments;return typeof u[0]=="function"||typeof u[1]=="function"?c.apply(this,[arguments[2]]).then(function(d){typeof u[0]=="function"&&u[0].apply(null,[d])},function(d){typeof u[1]=="function"&&u[1].apply(null,[d])}):c.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(a){var c=o.prototype[a];o.prototype[a]=function(){var u=arguments;return typeof u[1]=="function"||typeof u[2]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)},function(d){typeof u[2]=="function"&&u[2].apply(null,[d])}):c.apply(this,arguments)}}),["getStats"].forEach(function(a){var c=o.prototype[a];o.prototype[a]=function(){var u=arguments;return typeof u[1]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)}):c.apply(this,arguments)}}),o};const qk=Wu(zk);function CS(t){const e=t&&t.navigator,n=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},r=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(i){return r(i).catch(o=>Promise.reject(n(o)))}}function PS(t){"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}function Yf(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(i){return i}),t.RTCSessionDescription||(t.RTCSessionDescription=function(i){return i}),e.version<15025)){const r=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const o=new Event("enabled");o.enabled=i,this.dispatchEvent(o)}})}t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)&&Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new t.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);const n=qk(t,e.version);t.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=Uk(i.iceServers,e.version),Vm("ICE servers after filtering:",i.iceServers)),new n(i)},t.RTCPeerConnection.prototype=n.prototype}function RS(t){t.RTCRtpSender&&!("replaceTrack"in t.RTCRtpSender.prototype)&&(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}const zv=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:PS,shimGetUserMedia:CS,shimPeerConnection:Yf,shimReplaceTrack:RS},Symbol.toStringTag,{value:"Module"}));function IS(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,o,s){dd("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(o,s)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(s,l,a){l in s&&!(a in s)&&(s[a]=s[l],delete s[l])},o=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(s){return typeof s=="object"&&typeof s.audio=="object"&&(s=JSON.parse(JSON.stringify(s)),i(s.audio,"autoGainControl","mozAutoGainControl"),i(s.audio,"noiseSuppression","mozNoiseSuppression")),o(s)},r&&r.prototype.getSettings){const s=r.prototype.getSettings;r.prototype.getSettings=function(){const l=s.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const s=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),s.apply(this,[l])}}}}function Hk(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function AS(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function Xf(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const o=t.RTCPeerConnection.prototype[i],s={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),o.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=s[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[o,s,l]=arguments;return r.apply(this,[o||null]).then(a=>{if(e.version<53&&!s)try{a.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;a.forEach((u,d)=>{a.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return a}).then(s,l)}}function kS(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(o=>o._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function bS(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),Ss(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function xS(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){dd("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function DS(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function NS(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],i=r&&"sendEncodings"in r;i&&r.sendEncodings.forEach(s=>{if("rid"in s&&!/^[a-z0-9]{0,16}$/i.test(s.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in s&&!(parseFloat(s.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in s&&!(parseFloat(s.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const o=e.apply(this,arguments);if(i){const{sender:s}=o,l=s.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r.sendEncodings,s.sendEncodings=r.sendEncodings,this.setParametersPromises.push(s.setParameters(l).then(()=>{delete s.sendEncodings}).catch(()=>{delete s.sendEncodings})))}return o})}function OS(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function MS(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function jS(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const qv=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:NS,shimCreateAnswer:jS,shimCreateOffer:MS,shimGetDisplayMedia:Hk,shimGetParameters:OS,shimGetUserMedia:IS,shimOnTrack:AS,shimPeerConnection:Xf,shimRTCDataChannel:DS,shimReceiverGetStats:bS,shimRemoveStream:xS,shimSenderGetStats:kS},Symbol.toStringTag,{value:"Module"}));function LS(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(o=>{this._localStreams?this._localStreams.includes(o)||this._localStreams.push(o):this._localStreams=[o]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(o=>{i.includes(o.track)&&this.removeTrack(o)})})}}function FS(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const o=new Event("addstream");o.stream=i,this.dispatchEvent(o)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(o=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(o)>=0)return;r._remoteStreams.push(o);const s=new Event("addstream");s.stream=o,r.dispatchEvent(s)})}),e.apply(r,arguments)}}}function VS(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,o=e.setRemoteDescription,s=e.addIceCandidate;e.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f},e.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f};let l=function(a,c,u){const d=i.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d};e.setLocalDescription=l,l=function(a,c,u){const d=o.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d},e.setRemoteDescription=l,l=function(a,c,u){const d=s.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d},e.addIceCandidate=l}function US(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r($S(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,o){e.mediaDevices.getUserMedia(r).then(i,o)}).bind(e))}function $S(t){return t&&t.video!==void 0?Object.assign({},t,{video:hS(t.video)}):t}function BS(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const o=[];for(let s=0;s<r.iceServers.length;s++){let l=r.iceServers[s];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?(dd("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,o.push(l)):o.push(r.iceServers[s])}r.iceServers=o}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function zS(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function qS(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(s=>s.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const o=this.getTransceivers().find(s=>s.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&o?o.direction==="sendrecv"?o.setDirection?o.setDirection("sendonly"):o.direction="sendonly":o.direction==="recvonly"&&(o.setDirection?o.setDirection("inactive"):o.direction="inactive"):r.offerToReceiveVideo===!0&&!o&&this.addTransceiver("video")}return e.apply(this,arguments)}}function HS(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const Hv=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:HS,shimCallbacksAPI:VS,shimConstraints:$S,shimCreateOfferLegacy:qS,shimGetUserMedia:US,shimLocalStreamsAPI:LS,shimRTCIceServerUrls:BS,shimRemoteStreamsAPI:FS,shimTrackEventTransceiver:zS},Symbol.toStringTag,{value:"Module"}));function Oc(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new e(r),o=Nc.parseCandidate(r.candidate),s=Object.assign(i,o);return s.toJSON=function(){return{candidate:s.candidate,sdpMid:s.sdpMid,sdpMLineIndex:s.sdpMLineIndex,usernameFragment:s.usernameFragment}},s}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,Ss(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function ta(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const a=Nc.splitSections(l.sdp);return a.shift(),a.some(c=>{const u=Nc.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(l){const a=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(a===null||a.length<2)return-1;const c=parseInt(a[1],10);return c!==c?-1:c},i=function(l){let a=65536;return e.browser==="firefox"&&(e.version<57?l===-1?a=16384:a=2147483637:e.version<60?a=e.version===57?65535:65536:a=2147483637),a},o=function(l,a){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const u=Nc.matchPrefix(l.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substr(19),10):e.browser==="firefox"&&a!==-1&&(c=2147483637),c},s=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:a}=this.getConfiguration();a==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const a=r(arguments[0]),c=i(a),u=o(arguments[0],a);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return s.apply(this,arguments)}}function na(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const o=r.send;r.send=function(){const l=arguments[0],a=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&a>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return o.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},Ss(t,"datachannel",r=>(e(r.channel,r.target),r))}function Zf(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const o=i.target;if(o._lastConnectionState!==o.connectionState){o._lastConnectionState=o.connectionState;const s=new Event("connectionstatechange",i);o.dispatchEvent(s)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function ep(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const o=i.sdp.split(`
`).filter(s=>s.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:o}):i.sdp=o}return n.apply(this,arguments)}}function Mc(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const Wk=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:ep,shimAddIceCandidateNullOrEmpty:Mc,shimConnectionState:Zf,shimMaxMessageSize:ta,shimRTCIceCandidate:Oc,shimSendThrowTypeError:na},Symbol.toStringTag,{value:"Module"}));function Gk({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=Vm,r=Fk(t),i={browserDetails:r,commonShim:Wk,extractVersion:ea,disableLog:jk,disableWarnings:Lk};switch(r.browser){case"chrome":if(!Uv||!Qf||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=Uv,Mc(t,r),fS(t,r),pS(t),Qf(t,r),mS(t),ES(t,r),gS(t),yS(t),vS(t),SS(t,r),Oc(t),Zf(t),ta(t,r),na(t),ep(t,r);break;case"firefox":if(!qv||!Xf||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=qv,Mc(t,r),IS(t,r),Xf(t,r),AS(t),xS(t),kS(t),bS(t),DS(t),NS(t),OS(t),MS(t),jS(t),Oc(t),Zf(t),ta(t,r),na(t);break;case"edge":if(!zv||!Yf||!e.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=zv,CS(t),PS(t),Yf(t,r),RS(t),ta(t,r),na(t);break;case"safari":if(!Hv||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=Hv,Mc(t,r),BS(t),qS(t),VS(t),LS(t),FS(t),zS(t),US(t),HS(t),Oc(t),ta(t,r),na(t),ep(t,r);break;default:n("Unsupported browser!");break}return i}const Wv=Gk({window:typeof window>"u"?void 0:window});function Sr(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var Th=Wv.default||Wv,Hs=new(function(){function t(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return t.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},t.prototype.isBrowserSupported=function(){var e=this.getBrowser(),n=this.getVersion(),r=this.supportedBrowsers.includes(e);return r?e==="chrome"?n>=this.minChromeVersion:e==="firefox"?n>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1},t.prototype.getBrowser=function(){return Th.browserDetails.browser},t.prototype.getVersion=function(){return Th.browserDetails.version||0},t.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),n=Th.browserDetails.version||0;if(e==="chrome"&&n<this.minChromeVersion)return!1;if(e==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,i=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),i=!0}catch{}finally{r&&r.close()}return i},t.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},t}()),Gv={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},Kk=function(){function t(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=Gv,this.browser=Hs.getBrowser(),this.browserVersion=Hs.getVersion(),this.supports=function(){var e={browser:Hs.isBrowserSupported(),webRTC:Hs.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;var n;try{n=new RTCPeerConnection(Gv),e.audioVideo=!0;var r=void 0;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!Hs.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return e}(),this.pack=jv.pack,this.unpack=jv.unpack,this._dataCount=1}return t.prototype.noop=function(){},t.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},t.prototype.chunk=function(e){for(var n=[],r=e.size,i=Math.ceil(r/Oe.chunkedMTU),o=0,s=0;s<r;){var l=Math.min(r,s+Oe.chunkedMTU),a=e.slice(s,l),c={__peerData:this._dataCount,n:o,data:a,total:i};n.push(c),s=l,o++}return this._dataCount++,n},t.prototype.blobToArrayBuffer=function(e,n){var r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r},t.prototype.binaryStringToArrayBuffer=function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer},t.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},t.prototype.isSecure=function(){return location.protocol==="https:"},t}(),Oe=new Kk,WS={};Sr(WS,"Peer",()=>i0,t=>i0=t);var _l={},Jk=Object.prototype.hasOwnProperty,ln="~";function Ha(){}Object.create&&(Ha.prototype=Object.create(null),new Ha().__proto__||(ln=!1));function Qk(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function GS(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var o=new Qk(n,r||t,i),s=ln?ln+e:e;return t._events[s]?t._events[s].fn?t._events[s]=[t._events[s],o]:t._events[s].push(o):(t._events[s]=o,t._eventsCount++),t}function jc(t,e){--t._eventsCount===0?t._events=new Ha:delete t._events[e]}function Zt(){this._events=new Ha,this._eventsCount=0}Zt.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)Jk.call(n,r)&&e.push(ln?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};Zt.prototype.listeners=function(e){var n=ln?ln+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,o=r.length,s=new Array(o);i<o;i++)s[i]=r[i].fn;return s};Zt.prototype.listenerCount=function(e){var n=ln?ln+e:e,r=this._events[n];return r?r.fn?1:r.length:0};Zt.prototype.emit=function(e,n,r,i,o,s){var l=ln?ln+e:e;if(!this._events[l])return!1;var a=this._events[l],c=arguments.length,u,d;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,i),!0;case 5:return a.fn.call(a.context,n,r,i,o),!0;case 6:return a.fn.call(a.context,n,r,i,o,s),!0}for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];a.fn.apply(a.context,u)}else{var f=a.length,g;for(d=0;d<f;d++)switch(a[d].once&&this.removeListener(e,a[d].fn,void 0,!0),c){case 1:a[d].fn.call(a[d].context);break;case 2:a[d].fn.call(a[d].context,n);break;case 3:a[d].fn.call(a[d].context,n,r);break;case 4:a[d].fn.call(a[d].context,n,r,i);break;default:if(!u)for(g=1,u=new Array(c-1);g<c;g++)u[g-1]=arguments[g];a[d].fn.apply(a[d].context,u)}}return!0};Zt.prototype.on=function(e,n,r){return GS(this,e,n,r,!1)};Zt.prototype.once=function(e,n,r){return GS(this,e,n,r,!0)};Zt.prototype.removeListener=function(e,n,r,i){var o=ln?ln+e:e;if(!this._events[o])return this;if(!n)return jc(this,o),this;var s=this._events[o];if(s.fn)s.fn===n&&(!i||s.once)&&(!r||s.context===r)&&jc(this,o);else{for(var l=0,a=[],c=s.length;l<c;l++)(s[l].fn!==n||i&&!s[l].once||r&&s[l].context!==r)&&a.push(s[l]);a.length?this._events[o]=a.length===1?a[0]:a:jc(this,o)}return this};Zt.prototype.removeAllListeners=function(e){var n;return e?(n=ln?ln+e:e,this._events[n]&&jc(this,n)):(this._events=new Ha,this._eventsCount=0),this};Zt.prototype.off=Zt.prototype.removeListener;Zt.prototype.addListener=Zt.prototype.on;Zt.prefixed=ln;Zt.EventEmitter=Zt;_l=Zt;var J={};Sr(J,"LogLevel",()=>fn,t=>fn=t);Sr(J,"default",()=>Kv,t=>Kv=t);var Mi=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},ji=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},Yk="PeerJS: ",fn;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(fn||(fn={}));var Xk=function(){function t(){this._logLevel=fn.Disabled}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=fn.All&&this._print.apply(this,ji([fn.All],Mi(e),!1))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=fn.Warnings&&this._print.apply(this,ji([fn.Warnings],Mi(e),!1))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=fn.Errors&&this._print.apply(this,ji([fn.Errors],Mi(e),!1))},t.prototype.setLogFunction=function(e){this._print=e},t.prototype._print=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=ji([Yk],Mi(n),!1);for(var o in i)i[o]instanceof Error&&(i[o]="("+i[o].name+") "+i[o].message);e>=fn.All?console.log.apply(console,ji([],Mi(i),!1)):e>=fn.Warnings?console.warn.apply(console,ji(["WARNING"],Mi(i),!1)):e>=fn.Errors&&console.error.apply(console,ji(["ERROR"],Mi(i),!1))},t}(),Kv=new Xk,KS={};Sr(KS,"Socket",()=>Jv,t=>Jv=t);var Gn;(function(t){t.Data="data",t.Media="media"})(Gn||(Gn={}));var dt;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})(dt||(dt={}));var Cr;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json"})(Cr||(Cr={}));var Ar;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(Ar||(Ar={}));var Nt;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(Nt||(Nt={}));var Um={};Um=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var Zk=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),eb=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},tb=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,o;r<i;r++)(o||!(r in e))&&(o||(o=Array.prototype.slice.call(e,0,r)),o[r]=e[r]);return t.concat(o||Array.prototype.slice.call(e))},nb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Jv=function(t){Zk(e,t);function e(n,r,i,o,s,l){l===void 0&&(l=5e3);var a=t.call(this)||this;a.pingInterval=l,a._disconnected=!0,a._messagesQueue=[];var c=n?"wss://":"ws://";return a._baseUrl=c+r+":"+i+o+"peerjs?key="+s,a}return e.prototype.start=function(n,r){var i=this;this._id=n;var o="".concat(this._baseUrl,"&id=").concat(n,"&token=").concat(r);this._socket||!this._disconnected||(this._socket=new WebSocket(o+"&version="+Um.version),this._disconnected=!1,this._socket.onmessage=function(s){var l;try{l=JSON.parse(s.data),J.default.log("Server message received:",l)}catch{J.default.log("Invalid server message",s.data);return}i.emit(Ar.Message,l)},this._socket.onclose=function(s){i._disconnected||(J.default.log("Socket closed.",s),i._cleanup(),i._disconnected=!0,i.emit(Ar.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),J.default.log("Socket open"),i._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var n=this;this._wsPingTimer=setTimeout(function(){n._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(!this._wsOpen()){J.default.log("Cannot send heartbeat, because socket closed");return}var n=JSON.stringify({type:Nt.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()},e.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},e.prototype._sendQueuedMessages=function(){var n,r,i=tb([],eb(this._messagesQueue),!1);this._messagesQueue=[];try{for(var o=nb(i),s=o.next();!s.done;s=o.next()){var l=s.value;this.send(l)}}catch(a){n={error:a}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}},e.prototype.send=function(n){if(!this._disconnected){if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit(Ar.Error,"Invalid message");return}if(this._wsOpen()){var r=JSON.stringify(n);this._socket.send(r)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}(_l.EventEmitter),tp={};Sr(tp,"MediaConnection",()=>Xv,t=>Xv=t);var $m={};Sr($m,"Negotiator",()=>Qv,t=>Qv=t);var Eu=function(){return Eu=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Eu.apply(this,arguments)},cc=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(u){try{c(r.next(u))}catch(d){s(d)}}function a(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})},uc=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},Qv=function(){function t(e){this.connection=e}return t.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===Gn.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===Gn.Data){var r=this.connection,i={ordered:!!e.reliable},o=n.createDataChannel(r.label,i);r.initialize(o)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},t.prototype._startPeerConnection=function(){J.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},t.prototype._setupListeners=function(e){var n=this,r=this.connection.peer,i=this.connection.connectionId,o=this.connection.type,s=this.connection.provider;J.default.log("Listening for ICE candidates."),e.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||(J.default.log("Received ICE candidates for ".concat(r,":"),l.candidate),s.socket.send({type:Nt.Candidate,payload:{candidate:l.candidate,type:o,connectionId:i},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":J.default.log("iceConnectionState is failed, closing connections to "+r),n.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),n.connection.close();break;case"closed":J.default.log("iceConnectionState is closed, closing connections to "+r),n.connection.emit("error",new Error("Connection to "+r+" closed.")),n.connection.close();break;case"disconnected":J.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=Oe.noop;break}n.connection.emit("iceStateChanged",e.iceConnectionState)},J.default.log("Listening for data channel"),e.ondatachannel=function(l){J.default.log("Received data channel");var a=l.channel,c=s.getConnection(r,i);c.initialize(a)},J.default.log("Listening for remote stream"),e.ontrack=function(l){J.default.log("Received remote stream");var a=l.streams[0],c=s.getConnection(r,i);if(c.type===Gn.Media){var u=c;n._addStreamToMediaConnection(a,u)}}},t.prototype.cleanup=function(){J.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n=e.signalingState!=="closed",r=!1;if(this.connection.type===Gn.Data){var i=this.connection,o=i.dataChannel;o&&(r=!!o.readyState&&o.readyState!=="closed")}(n||r)&&e.close()}},t.prototype._makeOffer=function(){return cc(this,void 0,Promise,function(){var e,n,r,i,o,s,l;return uc(this,function(a){switch(a.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:r=a.sent(),J.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return a.sent(),J.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:Oe.browser},this.connection.type===Gn.Data&&(o=this.connection,i=Eu(Eu({},i),{label:o.label,reliable:o.reliable,serialization:o.serialization})),n.socket.send({type:Nt.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return s=a.sent(),s!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError(dt.WebRTC,s),J.default.log("Failed to setLocalDescription, ",s)),[3,6];case 6:return[3,8];case 7:return l=a.sent(),n.emitError(dt.WebRTC,l),J.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},t.prototype._makeAnswer=function(){return cc(this,void 0,Promise,function(){var e,n,r,i,o;return uc(this,function(s){switch(s.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,s.label=1;case 1:return s.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:r=s.sent(),J.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),s.label=3;case 3:return s.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return s.sent(),J.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n.socket.send({type:Nt.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:Oe.browser},dst:this.connection.peer}),[3,6];case 5:return i=s.sent(),n.emitError(dt.WebRTC,i),J.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return o=s.sent(),n.emitError(dt.WebRTC,o),J.default.log("Failed to create answer, ",o),[3,8];case 8:return[2]}})})},t.prototype.handleSDP=function(e,n){return cc(this,void 0,Promise,function(){var r,i,o,s;return uc(this,function(l){switch(l.label){case 0:n=new RTCSessionDescription(n),r=this.connection.peerConnection,i=this.connection.provider,J.default.log("Setting remote description",n),o=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,r.setRemoteDescription(n)];case 2:return l.sent(),J.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),e!=="OFFER"?[3,4]:[4,o._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return s=l.sent(),i.emitError(dt.WebRTC,s),J.default.log("Failed to setRemoteDescription, ",s),[3,6];case 6:return[2]}})})},t.prototype.handleCandidate=function(e){return cc(this,void 0,Promise,function(){var n,r,i,o,s,l;return uc(this,function(a){switch(a.label){case 0:J.default.log("handleCandidate:",e),n=e.candidate,r=e.sdpMLineIndex,i=e.sdpMid,o=this.connection.peerConnection,s=this.connection.provider,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,o.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:r,candidate:n}))];case 2:return a.sent(),J.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=a.sent(),s.emitError(dt.WebRTC,l),J.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},t.prototype._addTracksToConnection=function(e,n){if(J.default.log("add tracks from stream ".concat(e.id," to peer connection")),!n.addTrack)return J.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(r){n.addTrack(r,e)})},t.prototype._addStreamToMediaConnection=function(e,n){J.default.log("add stream ".concat(e.id," to media connection ").concat(n.connectionId)),n.addStream(e)},t}(),Bm={};Sr(Bm,"BaseConnection",()=>Yv,t=>Yv=t);var rb=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Yv=function(t){rb(e,t);function e(n,r,i){var o=t.call(this)||this;return o.peer=n,o.provider=r,o.options=i,o._open=!1,o.metadata=i.metadata,o}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}(_l.EventEmitter),ib=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Su=function(){return Su=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Su.apply(this,arguments)},ob=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},Xv=function(t){ib(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return o._localStream=o.options._stream,o.connectionId=o.options.connectionId||e.ID_PREFIX+Oe.randomToken(),o._negotiator=new $m.Negotiator(o),o._localStream&&o._negotiator.startConnection({_stream:o._localStream,originator:!0}),o}return Object.defineProperty(e.prototype,"type",{get:function(){return Gn.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(n){J.default.log("Receiving stream",n),this._remoteStream=n,t.prototype.emit.call(this,"stream",n)},e.prototype.handleMessage=function(n){var r=n.type,i=n.payload;switch(n.type){case Nt.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case Nt.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:J.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer));break}},e.prototype.answer=function(n,r){var i,o;if(r===void 0&&(r={}),this._localStream){J.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(Su(Su({},this.options._payload),{_stream:n}));var s=this.provider._getMessages(this.connectionId);try{for(var l=ob(s),a=l.next();!a.done;a=l.next()){var c=a.value;this.handleMessage(c)}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}this._open=!0},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}(Bm.BaseConnection),np={};Sr(np,"DataConnection",()=>e0,t=>e0=t);var JS={};Sr(JS,"EncodingQueue",()=>Zv,t=>Zv=t);var sb=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Zv=function(t){sb(e,t);function e(){var n=t.call(this)||this;return n.fileReader=new FileReader,n._queue=[],n._processing=!1,n.fileReader.onload=function(r){n._processing=!1,r.target&&n.emit("done",r.target.result),n.doNextTask()},n.fileReader.onerror=function(r){J.default.error("EncodingQueue error:",r),n._processing=!1,n.destroy(),n.emit("error",r)},n}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(n){this.queue.push(n),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}(_l.EventEmitter),ab=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),lb=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},e0=function(t){ab(e,t);function e(n,r,i){var o=t.call(this,n,r,i)||this;return o.stringify=JSON.stringify,o.parse=JSON.parse,o._buffer=[],o._bufferSize=0,o._buffering=!1,o._chunkedData={},o._encodingQueue=new JS.EncodingQueue,o.connectionId=o.options.connectionId||e.ID_PREFIX+Oe.randomToken(),o.label=o.options.label||o.connectionId,o.serialization=o.options.serialization||Cr.Binary,o.reliable=!!o.options.reliable,o._encodingQueue.on("done",function(s){o._bufferedSend(s)}),o._encodingQueue.on("error",function(){J.default.error("DC#".concat(o.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),o.close()}),o._negotiator=new $m.Negotiator(o),o._negotiator.startConnection(o.options._payload||{originator:!0}),o}return Object.defineProperty(e.prototype,"type",{get:function(){return Gn.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(n){this._dc=n,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var n=this;(!Oe.supports.binaryBlob||Oe.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){J.default.log("DC#".concat(n.connectionId," dc connection success")),n._open=!0,n.emit("open")},this.dataChannel.onmessage=function(r){J.default.log("DC#".concat(n.connectionId," dc onmessage:"),r.data),n._handleDataMessage(r)},this.dataChannel.onclose=function(){J.default.log("DC#".concat(n.connectionId," dc closed for:"),n.peer),n.close()}},e.prototype._handleDataMessage=function(n){var r=this,i=n.data,o=i.constructor,s=this.serialization===Cr.Binary||this.serialization===Cr.BinaryUTF8,l=i;if(s){if(o===Blob){Oe.blobToArrayBuffer(i,function(c){var u=Oe.unpack(c);r.emit("data",u)});return}else if(o===ArrayBuffer)l=Oe.unpack(i);else if(o===String){var a=Oe.binaryStringToArrayBuffer(i);l=Oe.unpack(a)}}else this.serialization===Cr.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}t.prototype.emit.call(this,"data",l)},e.prototype._handleChunk=function(n){var r=n.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:n.total};if(i.data[n.n]=n.data,i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];var o=new Blob(i.data);this._handleDataMessage({data:o})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.prototype.send=function(n,r){if(!this.open){t.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===Cr.JSON)this._bufferedSend(this.stringify(n));else if(this.serialization===Cr.Binary||this.serialization===Cr.BinaryUTF8){var i=Oe.pack(n);if(!r&&i.size>Oe.chunkedMTU){this._sendChunks(i);return}Oe.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(n)},e.prototype._bufferedSend=function(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(i){return J.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},e.prototype._sendChunks=function(n){var r,i,o=Oe.chunk(n);J.default.log("DC#".concat(this.connectionId," Try to send ").concat(o.length," chunks..."));try{for(var s=lb(o),l=s.next();!l.done;l=s.next()){var a=l.value;this.send(a,!0)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},e.prototype.handleMessage=function(n){var r=n.payload;switch(n.type){case Nt.Answer:this._negotiator.handleSDP(n.type,r.sdp);break;case Nt.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:J.default.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}(Bm.BaseConnection),QS={};Sr(QS,"API",()=>r0,t=>r0=t);var t0=function(t,e,n,r){function i(o){return o instanceof n?o:new n(function(s){s(o)})}return new(n||(n=Promise))(function(o,s){function l(u){try{c(r.next(u))}catch(d){s(d)}}function a(u){try{c(r.throw(u))}catch(d){s(d)}}function c(u){u.done?o(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})},n0=function(t,e){var n={label:0,sent:function(){if(o[0]&1)throw o[1];return o[1]},trys:[],ops:[]},r,i,o,s;return s={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(s[Symbol.iterator]=function(){return this}),s;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(o=c[0]&2?i.return:c[0]?i.throw||((o=i.return)&&o.call(i),0):i.next)&&!(o=o.call(i,c[1])).done)return o;switch(i=0,o&&(c=[c[0]&2,o.value]),c[0]){case 0:case 1:o=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(o=n.trys,!(o=o.length>0&&o[o.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!o||c[1]>o[0]&&c[1]<o[3])){n.label=c[1];break}if(c[0]===6&&n.label<o[1]){n.label=o[1],o=c;break}if(o&&n.label<o[2]){n.label=o[2],n.ops.push(c);break}o[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=o=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},r0=function(){function t(e){this._options=e}return t.prototype._buildRequest=function(e){var n=this._options.secure?"https":"http",r=this._options,i=r.host,o=r.port,s=r.path,l=r.key,a=new URL("".concat(n,"://").concat(i,":").concat(o).concat(s).concat(l,"/").concat(e));return a.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),a.searchParams.set("version",Um.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})},t.prototype.retrieveId=function(){return t0(this,void 0,Promise,function(){var e,n,r;return n0(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(e=i.sent(),e.status!==200)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw n=i.sent(),J.default.error("Error retrieving ID",n),r="",this._options.path==="/"&&this._options.host!==Oe.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},t.prototype.listAllPeers=function(){return t0(this,void 0,Promise,function(){var e,n,r;return n0(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(e=i.sent(),e.status!==200)throw e.status===401?(n="",this._options.host===Oe.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw r=i.sent(),J.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},t}(),cb=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),_a=function(){return _a=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},_a.apply(this,arguments)},Ws=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},ub=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,o=[],s;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)o.push(i.value)}catch(l){s={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(s)throw s.error}}return o},i0=function(t){cb(e,t);function e(n,r){var i=t.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var o;return n&&n.constructor==Object?r=n:n&&(o=n.toString()),r=_a({debug:0,host:Oe.CLOUD_HOST,port:Oe.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:Oe.randomToken(),config:Oe.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==Oe.CLOUD_HOST?i._options.secure=Oe.isSecure():i._options.host==Oe.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&J.default.setLogFunction(i._options.logFunction),J.default.logLevel=i._options.debug||0,i._api=new QS.API(r),i._socket=i._createServerConnection(),!Oe.supports.audioVideo&&!Oe.supports.data?(i._delayedAbort(dt.BrowserIncompatible,"The current browser does not support WebRTC"),i):o&&!Oe.validateId(o)?(i._delayedAbort(dt.InvalidID,'ID "'.concat(o,'" is invalid')),i):(o?i._initialize(o):i._api.retrieveId().then(function(s){return i._initialize(s)}).catch(function(s){return i._abort(dt.ServerError,s)}),i)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var n,r,i=Object.create(null);try{for(var o=Ws(this._connections),s=o.next();!s.done;s=o.next()){var l=ub(s.value,2),a=l[0],c=l[1];i[a]=c}}catch(u){n={error:u}}finally{try{s&&!s.done&&(r=o.return)&&r.call(o)}finally{if(n)throw n.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var n=this,r=new KS.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(Ar.Message,function(i){n._handleMessage(i)}),r.on(Ar.Error,function(i){n._abort(dt.SocketError,i)}),r.on(Ar.Disconnected,function(){n.disconnected||(n.emitError(dt.Network,"Lost connection to server."),n.disconnect())}),r.on(Ar.Close,function(){n.disconnected||n._abort(dt.SocketClosed,"Underlying socket is already closed.")}),r},e.prototype._initialize=function(n){this._id=n,this.socket.start(n,this._options.token)},e.prototype._handleMessage=function(n){var r,i,o=n.type,s=n.payload,l=n.src;switch(o){case Nt.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case Nt.Error:this._abort(dt.ServerError,s.msg);break;case Nt.IdTaken:this._abort(dt.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case Nt.InvalidKey:this._abort(dt.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case Nt.Leave:J.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case Nt.Expire:this.emitError(dt.PeerUnavailable,"Could not connect to peer ".concat(l));break;case Nt.Offer:var p=s.connectionId,E=this.getConnection(l,p);if(E&&(E.close(),J.default.warn("Offer received for existing Connection ID:".concat(p))),s.type===Gn.Media){var a=new tp.MediaConnection(l,this,{connectionId:p,_payload:s,metadata:s.metadata});E=a,this._addConnection(l,E),this.emit("call",a)}else if(s.type===Gn.Data){var c=new np.DataConnection(l,this,{connectionId:p,_payload:s,metadata:s.metadata,label:s.label,serialization:s.serialization,reliable:s.reliable});E=c,this._addConnection(l,E),this.emit("connection",c)}else{J.default.warn("Received malformed connection type:".concat(s.type));return}var u=this._getMessages(p);try{for(var d=Ws(u),f=d.next();!f.done;f=d.next()){var g=f.value;E.handleMessage(g)}}catch(T){r={error:T}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}break;default:if(!s){J.default.warn("You received a malformed message from ".concat(l," of type ").concat(o));return}var p=s.connectionId,E=this.getConnection(l,p);E&&E.peerConnection?E.handleMessage(n):p?this._storeMessage(p,n):J.default.warn("You received an unrecognized message:",n);break}},e.prototype._storeMessage=function(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)},e.prototype._getMessages=function(n){var r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]},e.prototype.connect=function(n,r){if(r===void 0&&(r={}),this.disconnected){J.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError(dt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new np.DataConnection(n,this,r);return this._addConnection(n,i),i},e.prototype.call=function(n,r,i){if(i===void 0&&(i={}),this.disconnected){J.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError(dt.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){J.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var o=new tp.MediaConnection(n,this,_a(_a({},i),{_stream:r}));return this._addConnection(n,o),o},e.prototype._addConnection=function(n,r){J.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(n)),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)},e.prototype._removeConnection=function(n){var r=this._connections.get(n.peer);if(r){var i=r.indexOf(n);i!==-1&&r.splice(i,1)}this._lostMessages.delete(n.connectionId)},e.prototype.getConnection=function(n,r){var i,o,s=this._connections.get(n);if(!s)return null;try{for(var l=Ws(s),a=l.next();!a.done;a=l.next()){var c=a.value;if(c.connectionId===r)return c}}catch(u){i={error:u}}finally{try{a&&!a.done&&(o=l.return)&&o.call(l)}finally{if(i)throw i.error}}return null},e.prototype._delayedAbort=function(n,r){var i=this;setTimeout(function(){i._abort(n,r)},0)},e.prototype._abort=function(n,r){J.default.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(n,r){J.default.error("Error:",r);var i;typeof r=="string"?i=new Error(r):i=r,i.type=n,this.emit("error",i)},e.prototype.destroy=function(){this.destroyed||(J.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var n,r;try{for(var i=Ws(this._connections.keys()),o=i.next();!o.done;o=i.next()){var s=o.value;this._cleanupPeer(s),this._connections.delete(s)}}catch(l){n={error:l}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(n){var r,i,o=this._connections.get(n);if(o)try{for(var s=Ws(o),l=s.next();!l.done;l=s.next()){var a=l.value;a.close()}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=s.return)&&i.call(s)}finally{if(r)throw r.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var n=this.id;J.default.log("Disconnect peer with ID:".concat(n)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)J.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)J.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},e.prototype.listAllPeers=function(n){var r=this;n===void 0&&(n=function(i){}),this._api.listAllPeers().then(function(i){return n(i)}).catch(function(i){return r._abort(dt.ServerError,i)})},e.DEFAULT_KEY="peerjs",e}(_l.EventEmitter),YS=WS.Peer;function db(t){return new Promise((e,n)=>{const r=new YS({debug:0,secure:!1});r.on("open",i=>{const o=r.connect(t,{reliable:!0}),s=new XS(o);s.id=i,e(s)}),r.on("error",i=>{console.error("PeerJS error:",i),n(i)})})}class XS{constructor(e){Le(this,"client");Le(this,"events");Le(this,"id");this.id="",this.client=e,this.events=new Map,this.client.on("data",n=>{try{const r=JSON.parse(n),i=this.events.get(r.event);i!==void 0&&i(r.args)}catch{}}),this.client.on("error",n=>{console.error("Data connection error:",n)}),this.client.on("close",()=>{try{const n=this.events.get("disconnect");n!==void 0&&n("")}catch{}})}on(e,n){this.events.set(e,n),this.client.on("data",()=>{})}emit(e,n){this.client.send(JSON.stringify({event:e,args:n??void 0}))}disconnect(){this.emit("disconnect"),this.client.close()}}class hb{constructor(e,n){Le(this,"socket");Le(this,"logFunction");Le(this,"renderFunction");Le(this,"logs",[]);Le(this,"whenCloseF");this.socket=new YS({debug:0}),this.logFunction=(...r)=>{this.logs.push(r),console.log(r),this.renderFunction(this.logs)},this.whenCloseF=()=>{},this.renderFunction=()=>{},this.socket.on("open",async r=>{const i=await(e==null?void 0:e(r,this));i&&(this.whenCloseF=i)}),this.socket.on("connection",r=>{r.on("open",()=>{const i=new XS(r);i.id=r.peer,n==null||n(i,this)})})}set OnLogs(e){this.logFunction=e}RenderLogs(e){this.renderFunction=e,e(this.logs)}stop(){this.socket.destroy(),this.whenCloseF()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZS=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},fb=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const o=t[n++];e[r++]=String.fromCharCode((i&31)<<6|o&63)}else if(i>239&&i<365){const o=t[n++],s=t[n++],l=t[n++],a=((i&7)<<18|(o&63)<<12|(s&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const o=t[n++],s=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(o&63)<<6|s&63)}}return e.join("")},eT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const o=t[i],s=i+1<t.length,l=s?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,u=o>>2,d=(o&3)<<4|l>>4;let f=(l&15)<<2|c>>6,g=c&63;a||(g=64,s||(f=64)),r.push(n[u],n[d],n[f],n[g])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(ZS(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):fb(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const o=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,o==null||l==null||c==null||d==null)throw new pb;const f=o<<2|l>>4;if(r.push(f),c!==64){const g=l<<4&240|c>>2;if(r.push(g),d!==64){const p=c<<6&192|d;r.push(p)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class pb extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const mb=function(t){const e=ZS(t);return eT.encodeByteArray(e,!0)},Tu=function(t){return mb(t).replace(/\./g,"")},tT=function(t){try{return eT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gb(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yb=()=>gb().__FIREBASE_DEFAULTS__,vb=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},_b=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&tT(t[1]);return e&&JSON.parse(e)},zm=()=>{try{return yb()||vb()||_b()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},nT=t=>{var e,n;return(n=(e=zm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},Eb=t=>{const e=nT(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},rT=()=>{var t;return(t=zm())===null||t===void 0?void 0:t.config},iT=t=>{var e;return(e=zm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Sb{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Tb(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,o=t.sub||t.user_id;if(!o)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const s=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:o,user_id:o,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Tu(JSON.stringify(n)),Tu(JSON.stringify(s)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function en(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function wb(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(en())}function Cb(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function Pb(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function Rb(){const t=en();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function Ib(){try{return typeof indexedDB=="object"}catch{return!1}}function Ab(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var o;e(((o=i.error)===null||o===void 0?void 0:o.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const kb="FirebaseError";class Gr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=kb,Object.setPrototypeOf(this,Gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,El.prototype.create)}}class El{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,o=this.errors[e],s=o?bb(o,r):"Error",l=`${this.serviceName}: ${s} (${i}).`;return new Gr(i,l,r)}}function bb(t,e){return t.replace(xb,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const xb=/\{\$([^}]+)}/g;function Db(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function wu(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const o=t[i],s=e[i];if(o0(o)&&o0(s)){if(!wu(o,s))return!1}else if(o!==s)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function o0(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Sl(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function ra(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,o]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(o)}}),e}function ia(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function Nb(t,e){const n=new Ob(t,e);return n.subscribe.bind(n)}class Ob{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");Mb(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=wh),i.error===void 0&&(i.error=wh),i.complete===void 0&&(i.complete=wh);const o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),o}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function Mb(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function wh(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Vn(t){return t&&t._delegate?t._delegate:t}class ro{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jb{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new Sb;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(o){if(i)return null;throw o}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(Fb(e))try{this.getOrInitializeService({instanceIdentifier:Vi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const o=this.getOrInitializeService({instanceIdentifier:i});r.resolve(o)}catch{}}}}clearInstance(e=Vi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=Vi){return this.instances.has(e)}getOptions(e=Vi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[o,s]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(o);r===l&&s.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),o=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;o.add(e),this.onInitCallbacks.set(i,o);const s=this.instances.get(i);return s&&e(s,i),()=>{o.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:Lb(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=Vi){return this.component?this.component.multipleInstances?e:Vi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function Lb(t){return t===Vi?void 0:t}function Fb(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vb{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new jb(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var xe;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(xe||(xe={}));const Ub={debug:xe.DEBUG,verbose:xe.VERBOSE,info:xe.INFO,warn:xe.WARN,error:xe.ERROR,silent:xe.SILENT},$b=xe.INFO,Bb={[xe.DEBUG]:"log",[xe.VERBOSE]:"log",[xe.INFO]:"info",[xe.WARN]:"warn",[xe.ERROR]:"error"},zb=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=Bb[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class qm{constructor(e){this.name=e,this._logLevel=$b,this._logHandler=zb,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in xe))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?Ub[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,xe.DEBUG,...e),this._logHandler(this,xe.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,xe.VERBOSE,...e),this._logHandler(this,xe.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,xe.INFO,...e),this._logHandler(this,xe.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,xe.WARN,...e),this._logHandler(this,xe.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,xe.ERROR,...e),this._logHandler(this,xe.ERROR,...e)}}const qb=(t,e)=>e.some(n=>t instanceof n);let s0,a0;function Hb(){return s0||(s0=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function Wb(){return a0||(a0=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const oT=new WeakMap,rp=new WeakMap,sT=new WeakMap,Ch=new WeakMap,Hm=new WeakMap;function Gb(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",o),t.removeEventListener("error",s)},o=()=>{n(Ei(t.result)),i()},s=()=>{r(t.error),i()};t.addEventListener("success",o),t.addEventListener("error",s)});return e.then(n=>{n instanceof IDBCursor&&oT.set(n,t)}).catch(()=>{}),Hm.set(e,t),e}function Kb(t){if(rp.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",o),t.removeEventListener("error",s),t.removeEventListener("abort",s)},o=()=>{n(),i()},s=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",o),t.addEventListener("error",s),t.addEventListener("abort",s)});rp.set(t,e)}let ip={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return rp.get(t);if(e==="objectStoreNames")return t.objectStoreNames||sT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ei(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function Jb(t){ip=t(ip)}function Qb(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ph(this),e,...n);return sT.set(r,e.sort?e.sort():[e]),Ei(r)}:Wb().includes(t)?function(...e){return t.apply(Ph(this),e),Ei(oT.get(this))}:function(...e){return Ei(t.apply(Ph(this),e))}}function Yb(t){return typeof t=="function"?Qb(t):(t instanceof IDBTransaction&&Kb(t),qb(t,Hb())?new Proxy(t,ip):t)}function Ei(t){if(t instanceof IDBRequest)return Gb(t);if(Ch.has(t))return Ch.get(t);const e=Yb(t);return e!==t&&(Ch.set(t,e),Hm.set(e,t)),e}const Ph=t=>Hm.get(t);function Xb(t,e,{blocked:n,upgrade:r,blocking:i,terminated:o}={}){const s=indexedDB.open(t,e),l=Ei(s);return r&&s.addEventListener("upgradeneeded",a=>{r(Ei(s.result),a.oldVersion,a.newVersion,Ei(s.transaction),a)}),n&&s.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{o&&a.addEventListener("close",()=>o()),i&&a.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const Zb=["get","getKey","getAll","getAllKeys","count"],ex=["put","add","delete","clear"],Rh=new Map;function l0(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(Rh.get(e))return Rh.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=ex.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||Zb.includes(n)))return;const o=async function(s,...l){const a=this.transaction(s,i?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&a.done]))[0]};return Rh.set(e,o),o}Jb(t=>({...t,get:(e,n,r)=>l0(e,n)||t.get(e,n,r),has:(e,n)=>!!l0(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tx{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(nx(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function nx(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const op="@firebase/app",c0="0.9.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const io=new qm("@firebase/app"),rx="@firebase/app-compat",ix="@firebase/analytics-compat",ox="@firebase/analytics",sx="@firebase/app-check-compat",ax="@firebase/app-check",lx="@firebase/auth",cx="@firebase/auth-compat",ux="@firebase/database",dx="@firebase/database-compat",hx="@firebase/functions",fx="@firebase/functions-compat",px="@firebase/installations",mx="@firebase/installations-compat",gx="@firebase/messaging",yx="@firebase/messaging-compat",vx="@firebase/performance",_x="@firebase/performance-compat",Ex="@firebase/remote-config",Sx="@firebase/remote-config-compat",Tx="@firebase/storage",wx="@firebase/storage-compat",Cx="@firebase/firestore",Px="@firebase/firestore-compat",Rx="firebase",Ix="10.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sp="[DEFAULT]",Ax={[op]:"fire-core",[rx]:"fire-core-compat",[ox]:"fire-analytics",[ix]:"fire-analytics-compat",[ax]:"fire-app-check",[sx]:"fire-app-check-compat",[lx]:"fire-auth",[cx]:"fire-auth-compat",[ux]:"fire-rtdb",[dx]:"fire-rtdb-compat",[hx]:"fire-fn",[fx]:"fire-fn-compat",[px]:"fire-iid",[mx]:"fire-iid-compat",[gx]:"fire-fcm",[yx]:"fire-fcm-compat",[vx]:"fire-perf",[_x]:"fire-perf-compat",[Ex]:"fire-rc",[Sx]:"fire-rc-compat",[Tx]:"fire-gcs",[wx]:"fire-gcs-compat",[Cx]:"fire-fst",[Px]:"fire-fst-compat","fire-js":"fire-js",[Rx]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cu=new Map,ap=new Map;function kx(t,e){try{t.container.addComponent(e)}catch(n){io.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function as(t){const e=t.name;if(ap.has(e))return io.debug(`There were multiple attempts to register component ${e}.`),!1;ap.set(e,t);for(const n of Cu.values())kx(n,t);return!0}function Wm(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const bx={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},Si=new El("app","Firebase",bx);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xx{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new ro("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw Si.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ts=Ix;function aT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:sp,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw Si.create("bad-app-name",{appName:String(i)});if(n||(n=rT()),!n)throw Si.create("no-options");const o=Cu.get(i);if(o){if(wu(n,o.options)&&wu(r,o.config))return o;throw Si.create("duplicate-app",{appName:i})}const s=new Vb(i);for(const a of ap.values())s.addComponent(a);const l=new xx(n,r,s);return Cu.set(i,l),l}function lT(t=sp){const e=Cu.get(t);if(!e&&t===sp&&rT())return aT();if(!e)throw Si.create("no-app",{appName:t});return e}function Ti(t,e,n){var r;let i=(r=Ax[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const o=i.match(/\s|\//),s=e.match(/\s|\//);if(o||s){const l=[`Unable to register library "${i}" with version "${e}":`];o&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),o&&s&&l.push("and"),s&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),io.warn(l.join(" "));return}as(new ro(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Dx="firebase-heartbeat-database",Nx=1,Wa="firebase-heartbeat-store";let Ih=null;function cT(){return Ih||(Ih=Xb(Dx,Nx,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(Wa)}}}).catch(t=>{throw Si.create("idb-open",{originalErrorMessage:t.message})})),Ih}async function Ox(t){try{return await(await cT()).transaction(Wa).objectStore(Wa).get(uT(t))}catch(e){if(e instanceof Gr)io.warn(e.message);else{const n=Si.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});io.warn(n.message)}}}async function u0(t,e){try{const r=(await cT()).transaction(Wa,"readwrite");await r.objectStore(Wa).put(e,uT(t)),await r.done}catch(n){if(n instanceof Gr)io.warn(n.message);else{const r=Si.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});io.warn(r.message)}}}function uT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Mx=1024,jx=30*24*60*60*1e3;class Lx{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Vx(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=d0();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const o=new Date(i.date).valueOf();return Date.now()-o<=jx}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=d0(),{heartbeatsToSend:n,unsentEntries:r}=Fx(this._heartbeatsCache.heartbeats),i=Tu(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function d0(){return new Date().toISOString().substring(0,10)}function Fx(t,e=Mx){const n=[];let r=t.slice();for(const i of t){const o=n.find(s=>s.agent===i.agent);if(o){if(o.dates.push(i.date),h0(n)>e){o.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),h0(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Vx{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Ib()?Ab().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Ox(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return u0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return u0(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function h0(t){return Tu(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){as(new ro("platform-logger",e=>new tx(e),"PRIVATE")),as(new ro("heartbeat",e=>new Lx(e),"PRIVATE")),Ti(op,c0,t),Ti(op,c0,"esm2017"),Ti("fire-js","")}Ux("");function Gm(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function f0(t){return t!==void 0&&t.enterprise!==void 0}class $x{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}function dT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Bx=dT,hT=new El("auth","Firebase",dT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Pu=new qm("@firebase/auth");function zx(t,...e){Pu.logLevel<=xe.WARN&&Pu.warn(`Auth (${Ts}): ${t}`,...e)}function Lc(t,...e){Pu.logLevel<=xe.ERROR&&Pu.error(`Auth (${Ts}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xn(t,...e){throw Km(t,...e)}function gr(t,...e){return Km(t,...e)}function qx(t,e,n){const r=Object.assign(Object.assign({},Bx()),{[e]:n});return new El("auth","Firebase",r).create(e,{appName:t.name})}function Km(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return hT.create(t,...e)}function le(t,e,...n){if(!t)throw Km(e,...n)}function kr(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Lc(e),new Error(e)}function Ur(t,e){t||kr(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lp(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Hx(){return p0()==="http:"||p0()==="https:"}function p0(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wx(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Hx()||Cb()||"connection"in navigator)?navigator.onLine:!0}function Gx(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tl{constructor(e,n){this.shortDelay=e,this.longDelay=n,Ur(n>e,"Short delay should be less than long delay!"),this.isMobile=wb()||Pb()}get(){return Wx()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Jm(t,e){Ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;kr("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;kr("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;kr("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Kx={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jx=new Tl(3e4,6e4);function fo(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Di(t,e,n,r,i={}){return pT(t,i,async()=>{let o={},s={};r&&(e==="GET"?s=r:o={body:JSON.stringify(r)});const l=Sl(Object.assign({key:t.config.apiKey},s)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),fT.fetch()(mT(t,t.config.apiHost,n,l),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},o))})}async function pT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Kx),e);try{const i=new Qx(t),o=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const s=await o.json();if("needConfirmation"in s)throw dc(t,"account-exists-with-different-credential",s);if(o.ok&&!("errorMessage"in s))return s;{const l=o.ok?s.errorMessage:s.error.message,[a,c]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw dc(t,"credential-already-in-use",s);if(a==="EMAIL_EXISTS")throw dc(t,"email-already-in-use",s);if(a==="USER_DISABLED")throw dc(t,"user-disabled",s);const u=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw qx(t,u,c);Xn(t,u)}}catch(i){if(i instanceof Gr)throw i;Xn(t,"network-request-failed",{message:String(i)})}}async function wl(t,e,n,r,i={}){const o=await Di(t,e,n,r,i);return"mfaPendingCredential"in o&&Xn(t,"multi-factor-auth-required",{_serverResponse:o}),o}function mT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?Jm(t.config,i):`${t.config.apiScheme}://${i}`}class Qx{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(gr(this.auth,"network-request-failed")),Jx.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function dc(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=gr(t,e,r);return i.customData._tokenResponse=n,i}async function Yx(t,e){return Di(t,"GET","/v2/recaptchaConfig",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Xx(t,e){return Di(t,"POST","/v1/accounts:delete",e)}async function Zx(t,e){return Di(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ea(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function e2(t,e=!1){const n=Vn(t),r=await n.getIdToken(e),i=Qm(r);le(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const o=typeof i.firebase=="object"?i.firebase:void 0,s=o==null?void 0:o.sign_in_provider;return{claims:i,token:r,authTime:Ea(Ah(i.auth_time)),issuedAtTime:Ea(Ah(i.iat)),expirationTime:Ea(Ah(i.exp)),signInProvider:s||null,signInSecondFactor:(o==null?void 0:o.sign_in_second_factor)||null}}function Ah(t){return Number(t)*1e3}function Qm(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Lc("JWT malformed, contained fewer than 3 sections"),null;try{const i=tT(n);return i?JSON.parse(i):(Lc("Failed to decode base64 JWT payload"),null)}catch(i){return Lc("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function t2(t){const e=Qm(t);return le(e,"internal-error"),le(typeof e.exp<"u","internal-error"),le(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ls(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof Gr&&n2(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function n2({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class r2{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=Ea(this.lastLoginAt),this.creationTime=Ea(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ru(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ls(t,Zx(n,{idToken:r}));le(i==null?void 0:i.users.length,n,"internal-error");const o=i.users[0];t._notifyReloadListener(o);const s=!((e=o.providerUserInfo)===null||e===void 0)&&e.length?s2(o.providerUserInfo):[],l=o2(t.providerData,s),a=t.isAnonymous,c=!(t.email&&o.passwordHash)&&!(l!=null&&l.length),u=a?c:!1,d={uid:o.localId,displayName:o.displayName||null,photoURL:o.photoUrl||null,email:o.email||null,emailVerified:o.emailVerified||!1,phoneNumber:o.phoneNumber||null,tenantId:o.tenantId||null,providerData:l,metadata:new gT(o.createdAt,o.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function i2(t){const e=Vn(t);await Ru(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function o2(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function s2(t){return t.map(e=>{var{providerId:n}=e,r=Gm(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function a2(t,e){const n=await pT(t,{},async()=>{const r=Sl({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:o}=t.config,s=mT(t,i,"/v1/token",`key=${o}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",fT.fetch()(s,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ga{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){le(e.idToken,"internal-error"),le(typeof e.idToken<"u","internal-error"),le(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):t2(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return le(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:o}=await a2(e,n);this.updateTokensAndExpiration(r,i,Number(o))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:o}=n,s=new Ga;return r&&(le(typeof r=="string","internal-error",{appName:e}),s.refreshToken=r),i&&(le(typeof i=="string","internal-error",{appName:e}),s.accessToken=i),o&&(le(typeof o=="number","internal-error",{appName:e}),s.expirationTime=o),s}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new Ga,this.toJSON())}_performRefresh(){return kr("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Zr(t,e){le(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class Qi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,o=Gm(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new r2(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=o.displayName||null,this.email=o.email||null,this.emailVerified=o.emailVerified||!1,this.phoneNumber=o.phoneNumber||null,this.photoURL=o.photoURL||null,this.isAnonymous=o.isAnonymous||!1,this.tenantId=o.tenantId||null,this.providerData=o.providerData?[...o.providerData]:[],this.metadata=new gT(o.createdAt||void 0,o.lastLoginAt||void 0)}async getIdToken(e){const n=await ls(this,this.stsTokenManager.getToken(this.auth,e));return le(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return e2(this,e)}reload(){return i2(this)}_assign(e){this!==e&&(le(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new Qi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){le(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Ru(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ls(this,Xx(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,o,s,l,a,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,g=(o=n.phoneNumber)!==null&&o!==void 0?o:void 0,p=(s=n.photoURL)!==null&&s!==void 0?s:void 0,E=(l=n.tenantId)!==null&&l!==void 0?l:void 0,T=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,v=(c=n.createdAt)!==null&&c!==void 0?c:void 0,m=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:S,emailVerified:_,isAnonymous:C,providerData:R,stsTokenManager:b}=n;le(S&&b,e,"internal-error");const y=Ga.fromJSON(this.name,b);le(typeof S=="string",e,"internal-error"),Zr(d,e.name),Zr(f,e.name),le(typeof _=="boolean",e,"internal-error"),le(typeof C=="boolean",e,"internal-error"),Zr(g,e.name),Zr(p,e.name),Zr(E,e.name),Zr(T,e.name),Zr(v,e.name),Zr(m,e.name);const I=new Qi({uid:S,auth:e,email:f,emailVerified:_,displayName:d,isAnonymous:C,photoURL:p,phoneNumber:g,tenantId:E,stsTokenManager:y,createdAt:v,lastLoginAt:m});return R&&Array.isArray(R)&&(I.providerData=R.map(w=>Object.assign({},w))),T&&(I._redirectEventId=T),I}static async _fromIdTokenResponse(e,n,r=!1){const i=new Ga;i.updateFromServerResponse(n);const o=new Qi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Ru(o),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const m0=new Map;function br(t){Ur(t instanceof Function,"Expected a class definition");let e=m0.get(t);return e?(Ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,m0.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}yT.type="NONE";const g0=yT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Fc(t,e,n){return`firebase:${t}:${e}:${n}`}class Ko{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:o}=this.auth;this.fullUserKey=Fc(this.userKey,i.apiKey,o),this.fullPersistenceKey=Fc("persistence",i.apiKey,o),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?Qi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new Ko(br(g0),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let o=i[0]||br(g0);const s=Fc(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const u=await c._get(s);if(u){const d=Qi._fromJSON(e,u);c!==o&&(l=d),o=c;break}}catch{}const a=i.filter(c=>c._shouldAllowMigration);return!o._shouldAllowMigration||!a.length?new Ko(o,e,r):(o=a[0],l&&await o._set(s,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==o)try{await c._remove(s)}catch{}})),new Ko(o,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function y0(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(ET(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(vT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(TT(e))return"Blackberry";if(wT(e))return"Webos";if(Ym(e))return"Safari";if((e.includes("chrome/")||_T(e))&&!e.includes("edge/"))return"Chrome";if(ST(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function vT(t=en()){return/firefox\//i.test(t)}function Ym(t=en()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function _T(t=en()){return/crios\//i.test(t)}function ET(t=en()){return/iemobile/i.test(t)}function ST(t=en()){return/android/i.test(t)}function TT(t=en()){return/blackberry/i.test(t)}function wT(t=en()){return/webos/i.test(t)}function hd(t=en()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function l2(t=en()){var e;return hd(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function c2(){return Rb()&&document.documentMode===10}function CT(t=en()){return hd(t)||ST(t)||wT(t)||TT(t)||/windows phone/i.test(t)||ET(t)}function u2(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function PT(t,e=[]){let n;switch(t){case"Browser":n=y0(en());break;case"Worker":n=`${y0(en())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Ts}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class d2{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=o=>new Promise((s,l)=>{try{const a=e(o);s(a)}catch(a){l(a)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function h2(t,e={}){return Di(t,"GET","/v2/passwordPolicy",fo(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const f2=6;class p2{constructor(e){var n,r,i,o;const s=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=s.minPasswordLength)!==null&&n!==void 0?n:f2,s.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=s.maxPasswordLength),s.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=s.containsLowercaseCharacter),s.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=s.containsUppercaseCharacter),s.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=s.containsNumericCharacter),s.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=s.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(o=e.forceUpgradeOnSignin)!==null&&o!==void 0?o:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,o,s,l;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(o=a.containsUppercaseLetter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(s=a.containsNumericCharacter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(l=a.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,o){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m2{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new v0(this),this.idTokenSubscription=new v0(this),this.beforeStateQueue=new d2(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=hT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=br(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await Ko.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,o=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const s=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);(!s||s===l)&&(a!=null&&a.user)&&(i=a.user,o=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(o)try{await this.beforeStateQueue.runMiddleware(i)}catch(s){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(s))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return le(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Ru(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=Gx()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?Vn(e):null;return n&&le(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&le(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(br(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await h2(this),n=new p2(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new El("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&br(e)||this._popupRedirectResolver;le(n,this,"argument-error"),this.redirectPersistenceManager=await Ko.create(this,[br(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const o=typeof n=="function"?n:n.next.bind(n);let s=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(le(l,this,"internal-error"),l.then(()=>{s||o(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,i);return()=>{s=!0,a()}}else{const a=e.addObserver(n);return()=>{s=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return le(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=PT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&zx(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function po(t){return Vn(t)}class v0{constructor(e){this.auth=e,this.observer=null,this.addObserver=Nb(n=>this.observer=n)}get next(){return le(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function g2(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function RT(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const o=gr("internal-error");o.customData=i,n(o)},r.type="text/javascript",r.charset="UTF-8",g2().appendChild(r)})}function y2(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const v2="https://www.google.com/recaptcha/enterprise.js?render=",_2="recaptcha-enterprise",E2="NO_RECAPTCHA";class S2{constructor(e){this.type=_2,this.auth=po(e)}async verify(e="verify",n=!1){async function r(o){if(!n){if(o.tenantId==null&&o._agentRecaptchaConfig!=null)return o._agentRecaptchaConfig.siteKey;if(o.tenantId!=null&&o._tenantRecaptchaConfigs[o.tenantId]!==void 0)return o._tenantRecaptchaConfigs[o.tenantId].siteKey}return new Promise(async(s,l)=>{Yx(o,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new $x(a);return o.tenantId==null?o._agentRecaptchaConfig=c:o._tenantRecaptchaConfigs[o.tenantId]=c,s(c.siteKey)}}).catch(a=>{l(a)})})}function i(o,s,l){const a=window.grecaptcha;f0(a)?a.enterprise.ready(()=>{a.enterprise.execute(o,{action:e}).then(c=>{s(c)}).catch(()=>{s(E2)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((o,s)=>{r(this.auth).then(l=>{if(!n&&f0(window.grecaptcha))i(l,o,s);else{if(typeof window>"u"){s(new Error("RecaptchaVerifier is only supported in browser"));return}RT(v2+l).then(()=>{i(l,o,s)}).catch(a=>{s(a)})}}).catch(l=>{s(l)})})}}async function Iu(t,e,n,r=!1){const i=new S2(t);let o;try{o=await i.verify(n)}catch{o=await i.verify(n,!0)}const s=Object.assign({},e);return r?Object.assign(s,{captchaResp:o}):Object.assign(s,{captchaResponse:o}),Object.assign(s,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(s,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function T2(t,e){const n=Wm(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),o=n.getOptions();if(wu(o,e??{}))return i;Xn(i,"already-initialized")}return n.initialize({options:e})}function w2(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(br);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function C2(t,e,n){const r=po(t);le(r._canInitEmulator,r,"emulator-config-failed"),le(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),o=IT(e),{host:s,port:l}=P2(e),a=l===null?"":`:${l}`;r.config.emulator={url:`${o}//${s}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:s,port:l,protocol:o.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||R2()}function IT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function P2(t){const e=IT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const o=i[1];return{host:o,port:_0(r.substr(o.length+1))}}else{const[o,s]=r.split(":");return{host:o,port:_0(s)}}}function _0(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function R2(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return kr("not implemented")}_getIdTokenResponse(e){return kr("not implemented")}_linkToIdToken(e,n){return kr("not implemented")}_getReauthenticationResolver(e){return kr("not implemented")}}async function I2(t,e){return Di(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function kh(t,e){return wl(t,"POST","/v1/accounts:signInWithPassword",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function A2(t,e){return wl(t,"POST","/v1/accounts:signInWithEmailLink",fo(t,e))}async function k2(t,e){return wl(t,"POST","/v1/accounts:signInWithEmailLink",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ka extends Xm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new Ka(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new Ka(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await Iu(e,r,"signInWithPassword");return kh(e,i)}else return kh(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const o=await Iu(e,r,"signInWithPassword");return kh(e,o)}else return Promise.reject(i)});case"emailLink":return A2(e,{email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return I2(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return k2(e,{idToken:n,email:this._email,oobCode:this._password});default:Xn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Jo(t,e){return wl(t,"POST","/v1/accounts:signInWithIdp",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const b2="http://localhost";class oo extends Xm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new oo(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Xn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,o=Gm(n,["providerId","signInMethod"]);if(!r||!i)return null;const s=new oo(r,i);return s.idToken=o.idToken||void 0,s.accessToken=o.accessToken||void 0,s.secret=o.secret,s.nonce=o.nonce,s.pendingToken=o.pendingToken||null,s}_getIdTokenResponse(e){const n=this.buildRequest();return Jo(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,Jo(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,Jo(e,n)}buildRequest(){const e={requestUri:b2,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=Sl(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function x2(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function D2(t){const e=ra(ia(t)).link,n=e?ra(ia(e)).deep_link_id:null,r=ra(ia(t)).deep_link_id;return(r?ra(ia(r)).link:null)||r||n||e||t}class Zm{constructor(e){var n,r,i,o,s,l;const a=ra(ia(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,u=(r=a.oobCode)!==null&&r!==void 0?r:null,d=x2((i=a.mode)!==null&&i!==void 0?i:null);le(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(o=a.continueUrl)!==null&&o!==void 0?o:null,this.languageCode=(s=a.languageCode)!==null&&s!==void 0?s:null,this.tenantId=(l=a.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=D2(e);try{return new Zm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ws{constructor(){this.providerId=ws.PROVIDER_ID}static credential(e,n){return Ka._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=Zm.parseLink(n);return le(r,"argument-error"),Ka._fromEmailAndCode(e,r.code,r.tenantId)}}ws.PROVIDER_ID="password";ws.EMAIL_PASSWORD_SIGN_IN_METHOD="password";ws.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cl extends AT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oi extends Cl{constructor(){super("facebook.com")}static credential(e){return oo._fromParams({providerId:oi.PROVIDER_ID,signInMethod:oi.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return oi.credentialFromTaggedObject(e)}static credentialFromError(e){return oi.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return oi.credential(e.oauthAccessToken)}catch{return null}}}oi.FACEBOOK_SIGN_IN_METHOD="facebook.com";oi.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class si extends Cl{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return oo._fromParams({providerId:si.PROVIDER_ID,signInMethod:si.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return si.credentialFromTaggedObject(e)}static credentialFromError(e){return si.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return si.credential(n,r)}catch{return null}}}si.GOOGLE_SIGN_IN_METHOD="google.com";si.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ai extends Cl{constructor(){super("github.com")}static credential(e){return oo._fromParams({providerId:ai.PROVIDER_ID,signInMethod:ai.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return ai.credentialFromTaggedObject(e)}static credentialFromError(e){return ai.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return ai.credential(e.oauthAccessToken)}catch{return null}}}ai.GITHUB_SIGN_IN_METHOD="github.com";ai.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class li extends Cl{constructor(){super("twitter.com")}static credential(e,n){return oo._fromParams({providerId:li.PROVIDER_ID,signInMethod:li.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return li.credentialFromTaggedObject(e)}static credentialFromError(e){return li.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return li.credential(n,r)}catch{return null}}}li.TWITTER_SIGN_IN_METHOD="twitter.com";li.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bh(t,e){return wl(t,"POST","/v1/accounts:signUp",fo(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class so{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const o=await Qi._fromIdTokenResponse(e,r,i),s=E0(r);return new so({user:o,providerId:s,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=E0(r);return new so({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function E0(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Au extends Gr{constructor(e,n,r,i){var o;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,Au.prototype),this.customData={appName:e.name,tenantId:(o=e.tenantId)!==null&&o!==void 0?o:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new Au(e,n,r,i)}}function kT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(o=>{throw o.code==="auth/multi-factor-auth-required"?Au._fromErrorAndOperation(t,o,e,r):o})}async function N2(t,e,n=!1){const r=await ls(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return so._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function O2(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const o=await ls(t,kT(r,i,e,t),n);le(o.idToken,r,"internal-error");const s=Qm(o.idToken);le(s,r,"internal-error");const{sub:l}=s;return le(t.uid===l,r,"user-mismatch"),so._forOperation(t,i,o)}catch(o){throw(o==null?void 0:o.code)==="auth/user-not-found"&&Xn(r,"user-mismatch"),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bT(t,e,n=!1){const r="signIn",i=await kT(t,r,e),o=await so._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(o.user),o}async function M2(t,e){return bT(po(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function xT(t){const e=po(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function j2(t,e,n){var r;const i=po(t),o={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let s;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const c=await Iu(i,o,"signUpPassword");s=bh(i,c)}else s=bh(i,o).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const u=await Iu(i,o,"signUpPassword");return bh(i,u)}throw c});const l=await s.catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&xT(t),c}),a=await so._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(a.user),a}function L2(t,e,n){return M2(Vn(t),ws.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&xT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function F2(t,e){return Di(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function V2(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=Vn(t),o={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},s=await ls(r,F2(r.auth,o));r.displayName=s.displayName||null,r.photoURL=s.photoUrl||null;const l=r.providerData.find(({providerId:a})=>a==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(s)}function U2(t,e,n,r){return Vn(t).onIdTokenChanged(e,n,r)}function $2(t,e,n){return Vn(t).beforeAuthStateChanged(e,n)}const ku="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(ku,"1"),this.storage.removeItem(ku),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(){const t=en();return Ym(t)||hd(t)}const z2=1e3,q2=10;class NT extends DT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=B2()&&u2(),this.fallbackToPolling=CT(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((s,l,a)=>{this.notifyListeners(s,a)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const s=this.storage.getItem(r);if(e.newValue!==s)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const s=this.storage.getItem(r);!n&&this.localCache[r]===s||this.notifyListeners(r,s)},o=this.storage.getItem(r);c2()&&o!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,q2):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},z2)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}NT.type="LOCAL";const H2=NT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OT extends DT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}OT.type="SESSION";const MT=OT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W2(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fd{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new fd(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:o}=n.data,s=this.handlersMap[i];if(!(s!=null&&s.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(s).map(async c=>c(n.origin,o)),a=await W2(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}fd.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eg(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class G2{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let o,s;return new Promise((l,a)=>{const c=eg("",20);i.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},r);s={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),o=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(o),l(f.data.response);break;default:clearTimeout(u),clearTimeout(o),a(new Error("invalid_response"));break}}},this.handlers.add(s),i.port1.addEventListener("message",s.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{s&&this.removeMessageHandler(s)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function yr(){return window}function K2(t){yr().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function jT(){return typeof yr().WorkerGlobalScope<"u"&&typeof yr().importScripts=="function"}async function J2(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function Q2(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Y2(){return jT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LT="firebaseLocalStorageDb",X2=1,bu="firebaseLocalStorage",FT="fbase_key";class Pl{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function pd(t,e){return t.transaction([bu],e?"readwrite":"readonly").objectStore(bu)}function Z2(){const t=indexedDB.deleteDatabase(LT);return new Pl(t).toPromise()}function cp(){const t=indexedDB.open(LT,X2);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(bu,{keyPath:FT})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(bu)?e(r):(r.close(),await Z2(),e(await cp()))})})}async function S0(t,e,n){const r=pd(t,!0).put({[FT]:e,value:n});return new Pl(r).toPromise()}async function eD(t,e){const n=pd(t,!1).get(e),r=await new Pl(n).toPromise();return r===void 0?null:r.value}function T0(t,e){const n=pd(t,!0).delete(e);return new Pl(n).toPromise()}const tD=800,nD=3;class VT{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await cp(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>nD)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return jT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=fd._getInstance(Y2()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await J2(),!this.activeServiceWorker)return;this.sender=new G2(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||Q2()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await cp();return await S0(e,ku,"1"),await T0(e,ku),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>S0(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>eD(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>T0(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const o=pd(i,!1).getAll();return new Pl(o).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:o}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(o)&&(this.notifyListeners(i,o),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),tD)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}VT.type="LOCAL";const rD=VT;new Tl(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function iD(t,e){return e?br(e):(le(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tg extends Xm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return Jo(e,this._buildIdpRequest())}_linkToIdToken(e,n){return Jo(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return Jo(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function oD(t){return bT(t.auth,new tg(t),t.bypassAuthState)}function sD(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),O2(n,new tg(t),t.bypassAuthState)}async function aD(t){const{auth:e,user:n}=t;return le(n,e,"internal-error"),N2(n,new tg(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(e,n,r,i,o=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=o,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:o,error:s,type:l}=e;if(s){this.reject(s);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:o||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return oD;case"linkViaPopup":case"linkViaRedirect":return aD;case"reauthViaPopup":case"reauthViaRedirect":return sD;default:Xn(this.auth,"internal-error")}}resolve(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){Ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const lD=new Tl(2e3,1e4);class Fo extends UT{constructor(e,n,r,i,o){super(e,n,i,o),this.provider=r,this.authWindow=null,this.pollId=null,Fo.currentPopupAction&&Fo.currentPopupAction.cancel(),Fo.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return le(e,this.auth,"internal-error"),e}async onExecution(){Ur(this.filter.length===1,"Popup operations only handle one event");const e=eg();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(gr(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(gr(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,Fo.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(gr(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,lD.get())};e()}}Fo.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const cD="pendingRedirect",Vc=new Map;class uD extends UT{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Vc.get(this.auth._key());if(!e){try{const r=await dD(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Vc.set(this.auth._key(),e)}return this.bypassAuthState||Vc.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function dD(t,e){const n=pD(e),r=fD(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function hD(t,e){Vc.set(t._key(),e)}function fD(t){return br(t._redirectPersistence)}function pD(t){return Fc(cD,t.config.apiKey,t.name)}async function mD(t,e,n=!1){const r=po(t),i=iD(r,e),s=await new uD(r,i,n).execute();return s&&!n&&(delete s.user._redirectEventId,await r._persistUserIfCurrent(s.user),await r._setRedirectUser(null,e)),s}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gD=10*60*1e3;class yD{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!vD(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!$T(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(gr(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=gD&&this.cachedEventUids.clear(),this.cachedEventUids.has(w0(e))}saveEventToCache(e){this.cachedEventUids.add(w0(e)),this.lastProcessedEventTime=Date.now()}}function w0(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function $T({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function vD(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return $T(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _D(t,e={}){return Di(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ED=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,SD=/^https?/;async function TD(t){if(t.config.emulator)return;const{authorizedDomains:e}=await _D(t);for(const n of e)try{if(wD(n))return}catch{}Xn(t,"unauthorized-domain")}function wD(t){const e=lp(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const s=new URL(t);return s.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&s.hostname===r}if(!SD.test(n))return!1;if(ED.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const CD=new Tl(3e4,6e4);function C0(){const t=yr().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function PD(t){return new Promise((e,n)=>{var r,i,o;function s(){C0(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{C0(),n(gr(t,"network-request-failed"))},timeout:CD.get()})}if(!((i=(r=yr().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((o=yr().gapi)===null||o===void 0)&&o.load)s();else{const l=y2("iframefcb");return yr()[l]=()=>{gapi.load?s():n(gr(t,"network-request-failed"))},RT(`https://apis.google.com/js/api.js?onload=${l}`).catch(a=>n(a))}}).catch(e=>{throw Uc=null,e})}let Uc=null;function RD(t){return Uc=Uc||PD(t),Uc}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ID=new Tl(5e3,15e3),AD="__/auth/iframe",kD="emulator/auth/iframe",bD={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},xD=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function DD(t){const e=t.config;le(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?Jm(e,kD):`https://${t.config.authDomain}/${AD}`,r={apiKey:e.apiKey,appName:t.name,v:Ts},i=xD.get(t.config.apiHost);i&&(r.eid=i);const o=t._getFrameworks();return o.length&&(r.fw=o.join(",")),`${n}?${Sl(r).slice(1)}`}async function ND(t){const e=await RD(t),n=yr().gapi;return le(n,t,"internal-error"),e.open({where:document.body,url:DD(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:bD,dontclear:!0},r=>new Promise(async(i,o)=>{await r.restyle({setHideOnLeave:!1});const s=gr(t,"network-request-failed"),l=yr().setTimeout(()=>{o(s)},ID.get());function a(){yr().clearTimeout(l),i(r)}r.ping(a).then(a,()=>{o(s)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const OD={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},MD=500,jD=600,LD="_blank",FD="http://localhost";class P0{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function VD(t,e,n,r=MD,i=jD){const o=Math.max((window.screen.availHeight-i)/2,0).toString(),s=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const a=Object.assign(Object.assign({},OD),{width:r.toString(),height:i.toString(),top:o,left:s}),c=en().toLowerCase();n&&(l=_T(c)?LD:n),vT(c)&&(e=e||FD,a.scrollbars="yes");const u=Object.entries(a).reduce((f,[g,p])=>`${f}${g}=${p},`,"");if(l2(c)&&l!=="_self")return UD(e||"",l),new P0(null);const d=window.open(e||"",l,u);le(d,t,"popup-blocked");try{d.focus()}catch{}return new P0(d)}function UD(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const $D="__/auth/handler",BD="emulator/auth/handler",zD=encodeURIComponent("fac");async function R0(t,e,n,r,i,o){le(t.config.authDomain,t,"auth-domain-config-required"),le(t.config.apiKey,t,"invalid-api-key");const s={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Ts,eventId:i};if(e instanceof AT){e.setDefaultLanguage(t.languageCode),s.providerId=e.providerId||"",Db(e.getCustomParameters())||(s.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(o||{}))s[u]=d}if(e instanceof Cl){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(s.scopes=u.join(","))}t.tenantId&&(s.tid=t.tenantId);const l=s;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const a=await t._getAppCheckToken(),c=a?`#${zD}=${encodeURIComponent(a)}`:"";return`${qD(t)}?${Sl(l).slice(1)}${c}`}function qD({config:t}){return t.emulator?Jm(t,BD):`https://${t.authDomain}/${$D}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xh="webStorageSupport";class HD{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=MT,this._completeRedirectFn=mD,this._overrideRedirectResult=hD}async _openPopup(e,n,r,i){var o;Ur((o=this.eventManagers[e._key()])===null||o===void 0?void 0:o.manager,"_initialize() not called before _openPopup()");const s=await R0(e,n,r,lp(),i);return VD(e,s,eg())}async _openRedirect(e,n,r,i){await this._originValidation(e);const o=await R0(e,n,r,lp(),i);return K2(o),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:o}=this.eventManagers[n];return i?Promise.resolve(i):(Ur(o,"If manager is not set, promise should be"),o)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await ND(e),r=new yD(e);return n.register("authEvent",i=>(le(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(xh,{type:xh},i=>{var o;const s=(o=i==null?void 0:i[0])===null||o===void 0?void 0:o[xh];s!==void 0&&n(!!s),Xn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=TD(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return CT()||Ym()||hd()}}const WD=HD;var I0="@firebase/auth",A0="1.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GD{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){le(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function KD(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function JD(t){as(new ro("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),o=e.getProvider("app-check-internal"),{apiKey:s,authDomain:l}=r.options;le(s&&!s.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:s,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:PT(t)},c=new m2(r,i,o,a);return w2(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),as(new ro("auth-internal",e=>{const n=po(e.getProvider("auth").getImmediate());return(r=>new GD(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Ti(I0,A0,KD(t)),Ti(I0,A0,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const QD=5*60,YD=iT("authIdTokenMaxAge")||QD;let k0=null;const XD=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>YD)return;const i=n==null?void 0:n.token;k0!==i&&(k0=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function ZD(t=lT()){const e=Wm(t,"auth");if(e.isInitialized())return e.getImmediate();const n=T2(t,{popupRedirectResolver:WD,persistence:[rD,H2,MT]}),r=iT("authTokenSyncURL");if(r){const o=XD(r);$2(n,o,()=>o(n.currentUser)),U2(n,s=>o(s))}const i=nT("auth");return i&&C2(n,`http://${i}`),n}JD("Browser");var eN=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},z,ng=ng||{},ce=eN||self;function md(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function Rl(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function tN(t){return Object.prototype.hasOwnProperty.call(t,Dh)&&t[Dh]||(t[Dh]=++nN)}var Dh="closure_uid_"+(1e9*Math.random()>>>0),nN=0;function rN(t,e,n){return t.call.apply(t.bind,arguments)}function iN(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function Jt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?Jt=rN:Jt=iN,Jt.apply(null,arguments)}function hc(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function bt(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,o){for(var s=Array(arguments.length-2),l=2;l<arguments.length;l++)s[l-2]=arguments[l];return e.prototype[i].apply(r,s)}}function Ni(){this.s=this.s,this.o=this.o}var oN=0;Ni.prototype.s=!1;Ni.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),oN!=0)&&tN(this)};Ni.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const BT=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function rg(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function b0(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(md(r)){const i=t.length||0,o=r.length||0;t.length=i+o;for(let s=0;s<o;s++)t[i+s]=r[s]}else t.push(r)}}function Qt(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Qt.prototype.h=function(){this.defaultPrevented=!0};var sN=function(){if(!ce.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{ce.addEventListener("test",()=>{},e),ce.removeEventListener("test",()=>{},e)}catch{}return t}();function Ja(t){return/^[\s\xa0]*$/.test(t)}function gd(){var t=ce.navigator;return t&&(t=t.userAgent)?t:""}function ur(t){return gd().indexOf(t)!=-1}function ig(t){return ig[" "](t),t}ig[" "]=function(){};function aN(t,e){var n=ZN;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var lN=ur("Opera"),cs=ur("Trident")||ur("MSIE"),zT=ur("Edge"),up=zT||cs,qT=ur("Gecko")&&!(gd().toLowerCase().indexOf("webkit")!=-1&&!ur("Edge"))&&!(ur("Trident")||ur("MSIE"))&&!ur("Edge"),cN=gd().toLowerCase().indexOf("webkit")!=-1&&!ur("Edge");function HT(){var t=ce.document;return t?t.documentMode:void 0}var dp;e:{var Nh="",Oh=function(){var t=gd();if(qT)return/rv:([^\);]+)(\)|;)/.exec(t);if(zT)return/Edge\/([\d\.]+)/.exec(t);if(cs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(cN)return/WebKit\/(\S+)/.exec(t);if(lN)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Oh&&(Nh=Oh?Oh[1]:""),cs){var Mh=HT();if(Mh!=null&&Mh>parseFloat(Nh)){dp=String(Mh);break e}}dp=Nh}var hp;if(ce.document&&cs){var x0=HT();hp=x0||parseInt(dp,10)||void 0}else hp=void 0;var uN=hp;function Qa(t,e){if(Qt.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(qT){e:{try{ig(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:dN[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&Qa.$.h.call(this)}}bt(Qa,Qt);var dN={2:"touch",3:"pen",4:"mouse"};Qa.prototype.h=function(){Qa.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var Il="closure_listenable_"+(1e6*Math.random()|0),hN=0;function fN(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++hN,this.fa=this.ia=!1}function yd(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function og(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function pN(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function WT(t){const e={};for(const n in t)e[n]=t[n];return e}const D0="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function GT(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let o=0;o<D0.length;o++)n=D0[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function vd(t){this.src=t,this.g={},this.h=0}vd.prototype.add=function(t,e,n,r,i){var o=t.toString();t=this.g[o],t||(t=this.g[o]=[],this.h++);var s=pp(t,e,r,i);return-1<s?(e=t[s],n||(e.ia=!1)):(e=new fN(e,this.src,o,!!r,i),e.ia=n,t.push(e)),e};function fp(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=BT(r,e),o;(o=0<=i)&&Array.prototype.splice.call(r,i,1),o&&(yd(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function pp(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.fa&&o.listener==e&&o.capture==!!n&&o.la==r)return i}return-1}var sg="closure_lm_"+(1e6*Math.random()|0),jh={};function KT(t,e,n,r,i){if(r&&r.once)return QT(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)KT(t,e[o],n,r,i);return null}return n=cg(n),t&&t[Il]?t.O(e,n,Rl(r)?!!r.capture:!!r,i):JT(t,e,n,!1,r,i)}function JT(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Rl(i)?!!i.capture:!!i,l=lg(t);if(l||(t[sg]=l=new vd(t)),n=l.add(e,n,r,s,o),n.proxy)return n;if(r=mN(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)sN||(i=s),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(XT(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function mN(){function t(n){return e.call(t.src,t.listener,n)}const e=gN;return t}function QT(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)QT(t,e[o],n,r,i);return null}return n=cg(n),t&&t[Il]?t.P(e,n,Rl(r)?!!r.capture:!!r,i):JT(t,e,n,!0,r,i)}function YT(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)YT(t,e[o],n,r,i);else r=Rl(r)?!!r.capture:!!r,n=cg(n),t&&t[Il]?(t=t.i,e=String(e).toString(),e in t.g&&(o=t.g[e],n=pp(o,n,r,i),-1<n&&(yd(o[n]),Array.prototype.splice.call(o,n,1),o.length==0&&(delete t.g[e],t.h--)))):t&&(t=lg(t))&&(e=t.g[e.toString()],t=-1,e&&(t=pp(e,n,r,i)),(n=-1<t?e[t]:null)&&ag(n))}function ag(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[Il])fp(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(XT(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=lg(e))?(fp(n,t),n.h==0&&(n.src=null,e[sg]=null)):yd(t)}}}function XT(t){return t in jh?jh[t]:jh[t]="on"+t}function gN(t,e){if(t.fa)t=!0;else{e=new Qa(e,this);var n=t.listener,r=t.la||t.src;t.ia&&ag(t),t=n.call(r,e)}return t}function lg(t){return t=t[sg],t instanceof vd?t:null}var Lh="__closure_events_fn_"+(1e9*Math.random()>>>0);function cg(t){return typeof t=="function"?t:(t[Lh]||(t[Lh]=function(e){return t.handleEvent(e)}),t[Lh])}function kt(){Ni.call(this),this.i=new vd(this),this.S=this,this.J=null}bt(kt,Ni);kt.prototype[Il]=!0;kt.prototype.removeEventListener=function(t,e,n,r){YT(this,t,e,n,r)};function jt(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Qt(e,t);else if(e instanceof Qt)e.target=e.target||t;else{var i=e;e=new Qt(r,t),GT(e,i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.g=n[o];i=fc(s,r,!0,e)&&i}if(s=e.g=t,i=fc(s,r,!0,e)&&i,i=fc(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)s=e.g=n[o],i=fc(s,r,!1,e)&&i}kt.prototype.N=function(){if(kt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)yd(n[r]);delete t.g[e],t.h--}}this.J=null};kt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};kt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function fc(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.fa&&s.capture==n){var l=s.listener,a=s.la||s.src;s.ia&&fp(t.i,s),i=l.call(a,r)!==!1&&i}}return i&&!r.defaultPrevented}var ug=ce.JSON.stringify;class yN{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function vN(){var t=dg;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class _N{constructor(){this.h=this.g=null}add(e,n){const r=ZT.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var ZT=new yN(()=>new EN,t=>t.reset());class EN{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function SN(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function TN(t){ce.setTimeout(()=>{throw t},0)}let Ya,Xa=!1,dg=new _N,ew=()=>{const t=ce.Promise.resolve(void 0);Ya=()=>{t.then(wN)}};var wN=()=>{for(var t;t=vN();){try{t.h.call(t.g)}catch(n){TN(n)}var e=ZT;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}Xa=!1};function _d(t,e){kt.call(this),this.h=t||1,this.g=e||ce,this.j=Jt(this.qb,this),this.l=Date.now()}bt(_d,kt);z=_d.prototype;z.ga=!1;z.T=null;z.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),jt(this,"tick"),this.ga&&(hg(this),this.start()))}};z.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function hg(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}z.N=function(){_d.$.N.call(this),hg(this),delete this.g};function fg(t,e,n){if(typeof t=="function")n&&(t=Jt(t,n));else if(t&&typeof t.handleEvent=="function")t=Jt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:ce.setTimeout(t,e||0)}function tw(t){t.g=fg(()=>{t.g=null,t.i&&(t.i=!1,tw(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class CN extends Ni{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:tw(this)}N(){super.N(),this.g&&(ce.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Za(t){Ni.call(this),this.h=t,this.g={}}bt(Za,Ni);var N0=[];function nw(t,e,n,r){Array.isArray(n)||(n&&(N0[0]=n.toString()),n=N0);for(var i=0;i<n.length;i++){var o=KT(e,n[i],r||t.handleEvent,!1,t.h||t);if(!o)break;t.g[o.key]=o}}function rw(t){og(t.g,function(e,n){this.g.hasOwnProperty(n)&&ag(e)},t),t.g={}}Za.prototype.N=function(){Za.$.N.call(this),rw(this)};Za.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function Ed(){this.g=!0}Ed.prototype.Ea=function(){this.g=!1};function PN(t,e,n,r,i,o){t.info(function(){if(t.g)if(o)for(var s="",l=o.split("&"),a=0;a<l.length;a++){var c=l[a].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");s=2<=d.length&&d[1]=="type"?s+(u+"="+c+"&"):s+(u+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+s})}function RN(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+o+" "+s})}function Vo(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+AN(t,n)+(r?" "+r:"")})}function IN(t,e){t.info(function(){return"TIMEOUT: "+e})}Ed.prototype.info=function(){};function AN(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if(o!="noop"&&o!="stop"&&o!="close")for(var s=1;s<i.length;s++)i[s]=""}}}}return ug(n)}catch{return e}}var mo={},O0=null;function Sd(){return O0=O0||new kt}mo.Ta="serverreachability";function iw(t){Qt.call(this,mo.Ta,t)}bt(iw,Qt);function el(t){const e=Sd();jt(e,new iw(e))}mo.STAT_EVENT="statevent";function ow(t,e){Qt.call(this,mo.STAT_EVENT,t),this.stat=e}bt(ow,Qt);function sn(t){const e=Sd();jt(e,new ow(e,t))}mo.Ua="timingevent";function sw(t,e){Qt.call(this,mo.Ua,t),this.size=e}bt(sw,Qt);function Al(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return ce.setTimeout(function(){t()},e)}var Td={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},aw={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function pg(){}pg.prototype.h=null;function M0(t){return t.h||(t.h=t.i())}function lw(){}var kl={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function mg(){Qt.call(this,"d")}bt(mg,Qt);function gg(){Qt.call(this,"c")}bt(gg,Qt);var mp;function wd(){}bt(wd,pg);wd.prototype.g=function(){return new XMLHttpRequest};wd.prototype.i=function(){return{}};mp=new wd;function bl(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new Za(this),this.P=kN,t=up?125:void 0,this.V=new _d(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new cw}function cw(){this.i=null,this.g="",this.h=!1}var kN=45e3,gp={},xu={};z=bl.prototype;z.setTimeout=function(t){this.P=t};function yp(t,e,n){t.L=1,t.v=Pd($r(e)),t.s=n,t.S=!0,uw(t,null)}function uw(t,e){t.G=Date.now(),xl(t),t.A=$r(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),vw(n.i,"t",r),t.C=0,n=t.l.J,t.h=new cw,t.g=Vw(t.l,n?e:null,!t.s),0<t.O&&(t.M=new CN(Jt(t.Pa,t,t.g),t.O)),nw(t.U,t.g,"readystatechange",t.nb),e=t.I?WT(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),el(),PN(t.j,t.u,t.A,t.m,t.W,t.s)}z.nb=function(t){t=t.target;const e=this.M;e&&dr(t)==3?e.l():this.Pa(t)};z.Pa=function(t){try{if(t==this.g)e:{const u=dr(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>u)&&(u!=3||up||this.g&&(this.h.h||this.g.ja()||V0(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?el(3):el(2)),Cd(this);var n=this.g.da();this.ca=n;t:if(dw(this)){var r=V0(this.g);t="";var i=r.length,o=dr(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){qi(this),Sa(this);var s="";break t}this.h.i=new ce.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:o&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,s=this.h.g}else s=this.g.ja();if(this.i=n==200,RN(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var l,a=this.g;if((l=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ja(l)){var c=l;break t}}c=null}if(n=c)Vo(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,vp(this,n);else{this.i=!1,this.o=3,sn(12),qi(this),Sa(this);break e}}this.S?(hw(this,u,s),up&&this.i&&u==3&&(nw(this.U,this.V,"tick",this.mb),this.V.start())):(Vo(this.j,this.m,s,null),vp(this,s)),u==4&&qi(this),this.i&&!this.J&&(u==4?Mw(this.l,this):(this.i=!1,xl(this)))}else QN(this.g),n==400&&0<s.indexOf("Unknown SID")?(this.o=3,sn(12)):(this.o=0,sn(13)),qi(this),Sa(this)}}}catch{}finally{}};function dw(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function hw(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=bN(t,n),i==xu){e==4&&(t.o=4,sn(14),r=!1),Vo(t.j,t.m,null,"[Incomplete Response]");break}else if(i==gp){t.o=4,sn(15),Vo(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else Vo(t.j,t.m,i,null),vp(t,i);dw(t)&&i!=xu&&i!=gp&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,sn(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Tg(e),e.M=!0,sn(11))):(Vo(t.j,t.m,n,"[Invalid Chunked Response]"),qi(t),Sa(t))}z.mb=function(){if(this.g){var t=dr(this.g),e=this.g.ja();this.C<e.length&&(Cd(this),hw(this,t,e),this.i&&t!=4&&xl(this))}};function bN(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?xu:(n=Number(e.substring(n,r)),isNaN(n)?gp:(r+=1,r+n>e.length?xu:(e=e.slice(r,r+n),t.C=r+n,e)))}z.cancel=function(){this.J=!0,qi(this)};function xl(t){t.Y=Date.now()+t.P,fw(t,t.P)}function fw(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Al(Jt(t.lb,t),e)}function Cd(t){t.B&&(ce.clearTimeout(t.B),t.B=null)}z.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(IN(this.j,this.A),this.L!=2&&(el(),sn(17)),qi(this),this.o=2,Sa(this)):fw(this,this.Y-t)};function Sa(t){t.l.H==0||t.J||Mw(t.l,t)}function qi(t){Cd(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,hg(t.V),rw(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function vp(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||_p(n.i,t))){if(!t.K&&_p(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Ou(n),Ad(n);else break e;Sg(n),sn(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Al(Jt(n.ib,n),6e3));if(1>=Sw(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else Hi(n,11)}else if((t.K||n.g==t)&&Ou(n),!Ja(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const g=t.g;if(g){const p=g.g?g.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(p){var o=r.i;o.g||p.indexOf("spdy")==-1&&p.indexOf("quic")==-1&&p.indexOf("h2")==-1||(o.j=o.l,o.g=new Set,o.h&&(yg(o,o.h),o.h=null))}if(r.F){const E=g.g?g.g.getResponseHeader("X-HTTP-Session-Id"):null;E&&(r.Da=E,Ke(r.I,r.F,E))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var s=t;if(r.wa=Fw(r,r.J?r.pa:null,r.Y),s.K){Tw(r.i,s);var l=s,a=r.L;a&&l.setTimeout(a),l.B&&(Cd(l),xl(l)),r.g=s}else Nw(r);0<n.j.length&&kd(n)}else c[0]!="stop"&&c[0]!="close"||Hi(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?Hi(n,7):Eg(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}el(4)}catch{}}function xN(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(md(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function DN(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(md(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function pw(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(md(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=DN(t),r=xN(t),i=r.length,o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}var mw=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function NN(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function Yi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof Yi){this.h=t.h,Du(this,t.j),this.s=t.s,this.g=t.g,Nu(this,t.m),this.l=t.l;var e=t.i,n=new tl;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),j0(this,n),this.o=t.o}else t&&(e=String(t).match(mw))?(this.h=!1,Du(this,e[1]||"",!0),this.s=oa(e[2]||""),this.g=oa(e[3]||"",!0),Nu(this,e[4]),this.l=oa(e[5]||"",!0),j0(this,e[6]||"",!0),this.o=oa(e[7]||"")):(this.h=!1,this.i=new tl(null,this.h))}Yi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(sa(e,L0,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(sa(e,L0,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(sa(n,n.charAt(0)=="/"?jN:MN,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",sa(n,FN)),t.join("")};function $r(t){return new Yi(t)}function Du(t,e,n){t.j=n?oa(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Nu(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function j0(t,e,n){e instanceof tl?(t.i=e,VN(t.i,t.h)):(n||(e=sa(e,LN)),t.i=new tl(e,t.h))}function Ke(t,e,n){t.i.set(e,n)}function Pd(t){return Ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function oa(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function sa(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,ON),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function ON(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var L0=/[#\/\?@]/g,MN=/[#\?:]/g,jN=/[#\?]/g,LN=/[#\?@]/g,FN=/#/g;function tl(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function Oi(t){t.g||(t.g=new Map,t.h=0,t.i&&NN(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}z=tl.prototype;z.add=function(t,e){Oi(this),this.i=null,t=Cs(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function gw(t,e){Oi(t),e=Cs(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function yw(t,e){return Oi(t),e=Cs(t,e),t.g.has(e)}z.forEach=function(t,e){Oi(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};z.ta=function(){Oi(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let o=0;o<i.length;o++)n.push(e[r])}return n};z.Z=function(t){Oi(this);let e=[];if(typeof t=="string")yw(this,t)&&(e=e.concat(this.g.get(Cs(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};z.set=function(t,e){return Oi(this),this.i=null,t=Cs(this,t),yw(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};z.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function vw(t,e,n){gw(t,e),0<n.length&&(t.i=null,t.g.set(Cs(t,e),rg(n)),t.h+=n.length)}z.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const o=encodeURIComponent(String(r)),s=this.Z(r);for(r=0;r<s.length;r++){var i=o;s[r]!==""&&(i+="="+encodeURIComponent(String(s[r]))),t.push(i)}}return this.i=t.join("&")};function Cs(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function VN(t,e){e&&!t.j&&(Oi(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(gw(this,r),vw(this,i,n))},t)),t.j=e}var UN=class{constructor(t,e){this.g=t,this.map=e}};function _w(t){this.l=t||$N,ce.PerformanceNavigationTiming?(t=ce.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(ce.g&&ce.g.Ka&&ce.g.Ka()&&ce.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var $N=10;function Ew(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function Sw(t){return t.h?1:t.g?t.g.size:0}function _p(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function yg(t,e){t.g?t.g.add(e):t.h=e}function Tw(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}_w.prototype.cancel=function(){if(this.i=ww(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function ww(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return rg(t.i)}var BN=class{stringify(t){return ce.JSON.stringify(t,void 0)}parse(t){return ce.JSON.parse(t,void 0)}};function zN(){this.g=new BN}function qN(t,e,n){const r=n||"";try{pw(t,function(i,o){let s=i;Rl(i)&&(s=ug(i)),e.push(r+o+"="+encodeURIComponent(s))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function HN(t,e){const n=new Ed;if(ce.Image){const r=new Image;r.onload=hc(pc,n,r,"TestLoadImage: loaded",!0,e),r.onerror=hc(pc,n,r,"TestLoadImage: error",!1,e),r.onabort=hc(pc,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=hc(pc,n,r,"TestLoadImage: timeout",!1,e),ce.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function pc(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Dl(t){this.l=t.fc||null,this.j=t.ob||!1}bt(Dl,pg);Dl.prototype.g=function(){return new Rd(this.l,this.j)};Dl.prototype.i=function(t){return function(){return t}}({});function Rd(t,e){kt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=vg,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}bt(Rd,kt);var vg=0;z=Rd.prototype;z.open=function(t,e){if(this.readyState!=vg)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,nl(this)};z.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||ce).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};z.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,Nl(this)),this.readyState=vg};z.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,nl(this)),this.g&&(this.readyState=3,nl(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof ce.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;Cw(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function Cw(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}z.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?Nl(this):nl(this),this.readyState==3&&Cw(this)}};z.Za=function(t){this.g&&(this.response=this.responseText=t,Nl(this))};z.Ya=function(t){this.g&&(this.response=t,Nl(this))};z.ka=function(){this.g&&Nl(this)};function Nl(t){t.readyState=4,t.l=null,t.j=null,t.A=null,nl(t)}z.setRequestHeader=function(t,e){this.v.append(t,e)};z.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};z.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function nl(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(Rd.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var WN=ce.JSON.parse;function at(t){kt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=Pw,this.L=this.M=!1}bt(at,kt);var Pw="",GN=/^https?$/i,KN=["POST","PUT"];z=at.prototype;z.Oa=function(t){this.M=t};z.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():mp.g(),this.C=this.u?M0(this.u):M0(mp),this.g.onreadystatechange=Jt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(o){F0(this,o);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const o of r.keys())n.set(o,r.get(o));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(o=>o.toLowerCase()=="content-type"),i=ce.FormData&&t instanceof ce.FormData,!(0<=BT(KN,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[o,s]of n)this.g.setRequestHeader(o,s);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{Aw(this),0<this.B&&((this.L=JN(this.g))?(this.g.timeout=this.B,this.g.ontimeout=Jt(this.ua,this)):this.A=fg(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(o){F0(this,o)}};function JN(t){return cs&&typeof t.timeout=="number"&&t.ontimeout!==void 0}z.ua=function(){typeof ng<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,jt(this,"timeout"),this.abort(8))};function F0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,Rw(t),Id(t)}function Rw(t){t.F||(t.F=!0,jt(t,"complete"),jt(t,"error"))}z.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,jt(this,"complete"),jt(this,"abort"),Id(this))};z.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Id(this,!0)),at.$.N.call(this)};z.La=function(){this.s||(this.G||this.v||this.l?Iw(this):this.kb())};z.kb=function(){Iw(this)};function Iw(t){if(t.h&&typeof ng<"u"&&(!t.C[1]||dr(t)!=4||t.da()!=2)){if(t.v&&dr(t)==4)fg(t.La,0,t);else if(jt(t,"readystatechange"),dr(t)==4){t.h=!1;try{const s=t.da();e:switch(s){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=s===0){var i=String(t.I).match(mw)[1]||null;!i&&ce.self&&ce.self.location&&(i=ce.self.location.protocol.slice(0,-1)),r=!GN.test(i?i.toLowerCase():"")}n=r}if(n)jt(t,"complete"),jt(t,"success");else{t.m=6;try{var o=2<dr(t)?t.g.statusText:""}catch{o=""}t.j=o+" ["+t.da()+"]",Rw(t)}}finally{Id(t)}}}}function Id(t,e){if(t.g){Aw(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||jt(t,"ready");try{n.onreadystatechange=r}catch{}}}function Aw(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(ce.clearTimeout(t.A),t.A=null)}z.isActive=function(){return!!this.g};function dr(t){return t.g?t.g.readyState:0}z.da=function(){try{return 2<dr(this)?this.g.status:-1}catch{return-1}};z.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};z.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),WN(e)}};function V0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case Pw:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function QN(t){const e={};t=(t.g&&2<=dr(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(Ja(t[r]))continue;var n=SN(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const o=e[i]||[];e[i]=o,o.push(n)}pN(e,function(r){return r.join(", ")})}z.Ia=function(){return this.m};z.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function kw(t){let e="";return og(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function _g(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=kw(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):Ke(t,e,n))}function Gs(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function bw(t){this.Ga=0,this.j=[],this.l=new Ed,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=Gs("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=Gs("baseRetryDelayMs",5e3,t),this.hb=Gs("retryDelaySeedMs",1e4,t),this.eb=Gs("forwardChannelMaxRetries",2,t),this.xa=Gs("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new _w(t&&t.concurrentRequestLimit),this.Ja=new zN,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}z=bw.prototype;z.ra=8;z.H=1;function Eg(t){if(xw(t),t.H==3){var e=t.W++,n=$r(t.I);if(Ke(n,"SID",t.K),Ke(n,"RID",e),Ke(n,"TYPE","terminate"),Ol(t,n),e=new bl(t,t.l,e),e.L=2,e.v=Pd($r(n)),n=!1,ce.navigator&&ce.navigator.sendBeacon)try{n=ce.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&ce.Image&&(new Image().src=e.v,n=!0),n||(e.g=Vw(e.l,null),e.g.ha(e.v)),e.G=Date.now(),xl(e)}Lw(t)}function Ad(t){t.g&&(Tg(t),t.g.cancel(),t.g=null)}function xw(t){Ad(t),t.u&&(ce.clearTimeout(t.u),t.u=null),Ou(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&ce.clearTimeout(t.m),t.m=null)}function kd(t){if(!Ew(t.i)&&!t.m){t.m=!0;var e=t.Na;Ya||ew(),Xa||(Ya(),Xa=!0),dg.add(e,t),t.C=0}}function YN(t,e){return Sw(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Al(Jt(t.Na,t,e),jw(t,t.C)),t.C++,!0)}z.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new bl(this,this.l,t);let o=this.s;if(this.U&&(o?(o=WT(o),GT(o,this.U)):o=this.U),this.o!==null||this.O||(i.I=o,o=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=Dw(this,i,e),n=$r(this.I),Ke(n,"RID",t),Ke(n,"CVER",22),this.F&&Ke(n,"X-HTTP-Session-Id",this.F),Ol(this,n),o&&(this.O?e="headers="+encodeURIComponent(String(kw(o)))+"&"+e:this.o&&_g(n,this.o,o)),yg(this.i,i),this.bb&&Ke(n,"TYPE","init"),this.P?(Ke(n,"$req",e),Ke(n,"SID","null"),i.aa=!0,yp(i,n,null)):yp(i,n,e),this.H=2}}else this.H==3&&(t?U0(this,t):this.j.length==0||Ew(this.i)||U0(this))};function U0(t,e){var n;e?n=e.m:n=t.W++;const r=$r(t.I);Ke(r,"SID",t.K),Ke(r,"RID",n),Ke(r,"AID",t.V),Ol(t,r),t.o&&t.s&&_g(r,t.o,t.s),n=new bl(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=Dw(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),yg(t.i,n),yp(n,r,e)}function Ol(t,e){t.na&&og(t.na,function(n,r){Ke(e,r,n)}),t.h&&pw({},function(n,r){Ke(e,r,n)})}function Dw(t,e,n){n=Math.min(t.j.length,n);var r=t.h?Jt(t.h.Va,t.h,t):null;e:{var i=t.j;let o=-1;for(;;){const s=["count="+n];o==-1?0<n?(o=i[0].g,s.push("ofs="+o)):o=0:s.push("ofs="+o);let l=!0;for(let a=0;a<n;a++){let c=i[a].g;const u=i[a].map;if(c-=o,0>c)o=Math.max(0,i[a].g-100),l=!1;else try{qN(u,s,"req"+c+"_")}catch{r&&r(u)}}if(l){r=s.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function Nw(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;Ya||ew(),Xa||(Ya(),Xa=!0),dg.add(e,t),t.A=0}}function Sg(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Al(Jt(t.Ma,t),jw(t,t.A)),t.A++,!0)}z.Ma=function(){if(this.u=null,Ow(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Al(Jt(this.jb,this),t)}};z.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,sn(10),Ad(this),Ow(this))};function Tg(t){t.B!=null&&(ce.clearTimeout(t.B),t.B=null)}function Ow(t){t.g=new bl(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=$r(t.wa);Ke(e,"RID","rpc"),Ke(e,"SID",t.K),Ke(e,"AID",t.V),Ke(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&Ke(e,"TO",t.qa),Ke(e,"TYPE","xmlhttp"),Ol(t,e),t.o&&t.s&&_g(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Pd($r(e)),n.s=null,n.S=!0,uw(n,t)}z.ib=function(){this.v!=null&&(this.v=null,Ad(this),Sg(this),sn(19))};function Ou(t){t.v!=null&&(ce.clearTimeout(t.v),t.v=null)}function Mw(t,e){var n=null;if(t.g==e){Ou(t),Tg(t),t.g=null;var r=2}else if(_p(t.i,e))n=e.F,Tw(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Sd(),jt(r,new sw(r,n)),kd(t)}else Nw(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&YN(t,e)||r==2&&Sg(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:Hi(t,5);break;case 4:Hi(t,10);break;case 3:Hi(t,6);break;default:Hi(t,2)}}}function jw(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function Hi(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=Jt(t.pb,t);n||(n=new Yi("//www.google.com/images/cleardot.gif"),ce.location&&ce.location.protocol=="http"||Du(n,"https"),Pd(n)),HN(n.toString(),r)}else sn(2);t.H=0,t.h&&t.h.za(e),Lw(t),xw(t)}z.pb=function(t){t?(this.l.info("Successfully pinged google.com"),sn(2)):(this.l.info("Failed to ping google.com"),sn(1))};function Lw(t){if(t.H=0,t.ma=[],t.h){const e=ww(t.i);(e.length!=0||t.j.length!=0)&&(b0(t.ma,e),b0(t.ma,t.j),t.i.i.length=0,rg(t.j),t.j.length=0),t.h.ya()}}function Fw(t,e,n){var r=n instanceof Yi?$r(n):new Yi(n);if(r.g!="")e&&(r.g=e+"."+r.g),Nu(r,r.m);else{var i=ce.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var o=new Yi(null);r&&Du(o,r),e&&(o.g=e),i&&Nu(o,i),n&&(o.l=n),r=o}return n=t.F,e=t.Da,n&&e&&Ke(r,n,e),Ke(r,"VER",t.ra),Ol(t,r),r}function Vw(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new at(new Dl({ob:!0})):new at(t.va),e.Oa(t.J),e}z.isActive=function(){return!!this.h&&this.h.isActive(this)};function Uw(){}z=Uw.prototype;z.Ba=function(){};z.Aa=function(){};z.za=function(){};z.ya=function(){};z.isActive=function(){return!0};z.Va=function(){};function Mu(){if(cs&&!(10<=Number(uN)))throw Error("Environmental error: no available transport.")}Mu.prototype.g=function(t,e){return new Cn(t,e)};function Cn(t,e){kt.call(this),this.g=new bw(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!Ja(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ja(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new Ps(this)}bt(Cn,kt);Cn.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;sn(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=Fw(t,null,t.Y),kd(t)};Cn.prototype.close=function(){Eg(this.g)};Cn.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=ug(t),t=n);e.j.push(new UN(e.fb++,t)),e.H==3&&kd(e)};Cn.prototype.N=function(){this.g.h=null,delete this.j,Eg(this.g),delete this.g,Cn.$.N.call(this)};function $w(t){mg.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}bt($w,mg);function Bw(){gg.call(this),this.status=1}bt(Bw,gg);function Ps(t){this.g=t}bt(Ps,Uw);Ps.prototype.Ba=function(){jt(this.g,"a")};Ps.prototype.Aa=function(t){jt(this.g,new $w(t))};Ps.prototype.za=function(t){jt(this.g,new Bw)};Ps.prototype.ya=function(){jt(this.g,"b")};function XN(){this.blockSize=-1}function Zn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}bt(Zn,XN);Zn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Fh(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var o=t.g[3],s=e+(o^n&(i^o))+r[0]+3614090360&4294967295;e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[1]+3905402710&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[2]+606105819&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[3]+3250441966&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[4]+4118548399&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[5]+1200080426&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[6]+2821735955&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[7]+4249261313&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[8]+1770035416&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[9]+2336552879&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[10]+4294925233&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[11]+2304563134&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(o^n&(i^o))+r[12]+1804603682&4294967295,e=n+(s<<7&4294967295|s>>>25),s=o+(i^e&(n^i))+r[13]+4254626195&4294967295,o=e+(s<<12&4294967295|s>>>20),s=i+(n^o&(e^n))+r[14]+2792965006&4294967295,i=o+(s<<17&4294967295|s>>>15),s=n+(e^i&(o^e))+r[15]+1236535329&4294967295,n=i+(s<<22&4294967295|s>>>10),s=e+(i^o&(n^i))+r[1]+4129170786&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[6]+3225465664&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[11]+643717713&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[0]+3921069994&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[5]+3593408605&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[10]+38016083&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[15]+3634488961&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[4]+3889429448&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[9]+568446438&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[14]+3275163606&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[3]+4107603335&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[8]+1163531501&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(i^o&(n^i))+r[13]+2850285829&4294967295,e=n+(s<<5&4294967295|s>>>27),s=o+(n^i&(e^n))+r[2]+4243563512&4294967295,o=e+(s<<9&4294967295|s>>>23),s=i+(e^n&(o^e))+r[7]+1735328473&4294967295,i=o+(s<<14&4294967295|s>>>18),s=n+(o^e&(i^o))+r[12]+2368359562&4294967295,n=i+(s<<20&4294967295|s>>>12),s=e+(n^i^o)+r[5]+4294588738&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[8]+2272392833&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[11]+1839030562&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[14]+4259657740&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[1]+2763975236&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[4]+1272893353&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[7]+4139469664&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[10]+3200236656&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[13]+681279174&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[0]+3936430074&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[3]+3572445317&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[6]+76029189&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(n^i^o)+r[9]+3654602809&4294967295,e=n+(s<<4&4294967295|s>>>28),s=o+(e^n^i)+r[12]+3873151461&4294967295,o=e+(s<<11&4294967295|s>>>21),s=i+(o^e^n)+r[15]+530742520&4294967295,i=o+(s<<16&4294967295|s>>>16),s=n+(i^o^e)+r[2]+3299628645&4294967295,n=i+(s<<23&4294967295|s>>>9),s=e+(i^(n|~o))+r[0]+4096336452&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[7]+1126891415&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[14]+2878612391&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[5]+4237533241&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[12]+1700485571&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[3]+2399980690&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[10]+4293915773&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[1]+2240044497&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[8]+1873313359&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[15]+4264355552&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[6]+2734768916&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[13]+1309151649&4294967295,n=i+(s<<21&4294967295|s>>>11),s=e+(i^(n|~o))+r[4]+4149444226&4294967295,e=n+(s<<6&4294967295|s>>>26),s=o+(n^(e|~i))+r[11]+3174756917&4294967295,o=e+(s<<10&4294967295|s>>>22),s=i+(e^(o|~n))+r[2]+718787259&4294967295,i=o+(s<<15&4294967295|s>>>17),s=n+(o^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(s<<21&4294967295|s>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+o&4294967295}Zn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,o=0;o<e;){if(i==0)for(;o<=n;)Fh(this,t,o),o+=this.blockSize;if(typeof t=="string"){for(;o<e;)if(r[i++]=t.charCodeAt(o++),i==this.blockSize){Fh(this,r),i=0;break}}else for(;o<e;)if(r[i++]=t[o++],i==this.blockSize){Fh(this,r),i=0;break}}this.h=i,this.i+=e};Zn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ve(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var o=t[i]|0;r&&o==e||(n[i]=o,r=!1)}this.g=n}var ZN={};function wg(t){return-128<=t&&128>t?aN(t,function(e){return new Ve([e|0],0>e?-1:0)}):new Ve([t|0],0>t?-1:0)}function hr(t){if(isNaN(t)||!isFinite(t))return Qo;if(0>t)return Ot(hr(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=Ep;return new Ve(e,0)}function zw(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return Ot(zw(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=hr(Math.pow(e,8)),r=Qo,i=0;i<t.length;i+=8){var o=Math.min(8,t.length-i),s=parseInt(t.substring(i,i+o),e);8>o?(o=hr(Math.pow(e,o)),r=r.R(o).add(hr(s))):(r=r.R(n),r=r.add(hr(s)))}return r}var Ep=4294967296,Qo=wg(0),Sp=wg(1),$0=wg(16777216);z=Ve.prototype;z.ea=function(){if(xn(this))return-Ot(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:Ep+r)*e,e*=Ep}return t};z.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(xr(this))return"0";if(xn(this))return"-"+Ot(this).toString(t);for(var e=hr(Math.pow(t,6)),n=this,r="";;){var i=Lu(n,e).g;n=ju(n,i.R(e));var o=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,xr(n))return o+r;for(;6>o.length;)o="0"+o;r=o+r}};z.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function xr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function xn(t){return t.h==-1}z.X=function(t){return t=ju(this,t),xn(t)?-1:xr(t)?0:1};function Ot(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ve(n,~t.h).add(Sp)}z.abs=function(){return xn(this)?Ot(this):this};z.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var o=r+(this.D(i)&65535)+(t.D(i)&65535),s=(o>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=s>>>16,o&=65535,s&=65535,n[i]=s<<16|o}return new Ve(n,n[n.length-1]&-2147483648?-1:0)};function ju(t,e){return t.add(Ot(e))}z.R=function(t){if(xr(this)||xr(t))return Qo;if(xn(this))return xn(t)?Ot(this).R(Ot(t)):Ot(Ot(this).R(t));if(xn(t))return Ot(this.R(Ot(t)));if(0>this.X($0)&&0>t.X($0))return hr(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var o=this.D(r)>>>16,s=this.D(r)&65535,l=t.D(i)>>>16,a=t.D(i)&65535;n[2*r+2*i]+=s*a,mc(n,2*r+2*i),n[2*r+2*i+1]+=o*a,mc(n,2*r+2*i+1),n[2*r+2*i+1]+=s*l,mc(n,2*r+2*i+1),n[2*r+2*i+2]+=o*l,mc(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ve(n,0)};function mc(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function Ks(t,e){this.g=t,this.h=e}function Lu(t,e){if(xr(e))throw Error("division by zero");if(xr(t))return new Ks(Qo,Qo);if(xn(t))return e=Lu(Ot(t),e),new Ks(Ot(e.g),Ot(e.h));if(xn(e))return e=Lu(t,Ot(e)),new Ks(Ot(e.g),e.h);if(30<t.g.length){if(xn(t)||xn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=Sp,r=e;0>=r.X(t);)n=B0(n),r=B0(r);var i=_o(n,1),o=_o(r,1);for(r=_o(r,2),n=_o(n,2);!xr(r);){var s=o.add(r);0>=s.X(t)&&(i=i.add(n),o=s),r=_o(r,1),n=_o(n,1)}return e=ju(t,i.R(e)),new Ks(i,e)}for(i=Qo;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),o=hr(n),s=o.R(e);xn(s)||0<s.X(t);)n-=r,o=hr(n),s=o.R(e);xr(o)&&(o=Sp),i=i.add(o),t=ju(t,s)}return new Ks(i,t)}z.gb=function(t){return Lu(this,t).h};z.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ve(n,this.h&t.h)};z.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ve(n,this.h|t.h)};z.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ve(n,this.h^t.h)};function B0(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ve(n,t.h)}function _o(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],o=0;o<r;o++)i[o]=0<e?t.D(o+n)>>>e|t.D(o+n+1)<<32-e:t.D(o+n);return new Ve(i,t.h)}Mu.prototype.createWebChannel=Mu.prototype.g;Cn.prototype.send=Cn.prototype.u;Cn.prototype.open=Cn.prototype.m;Cn.prototype.close=Cn.prototype.close;Td.NO_ERROR=0;Td.TIMEOUT=8;Td.HTTP_ERROR=6;aw.COMPLETE="complete";lw.EventType=kl;kl.OPEN="a";kl.CLOSE="b";kl.ERROR="c";kl.MESSAGE="d";kt.prototype.listen=kt.prototype.O;at.prototype.listenOnce=at.prototype.P;at.prototype.getLastError=at.prototype.Sa;at.prototype.getLastErrorCode=at.prototype.Ia;at.prototype.getStatus=at.prototype.da;at.prototype.getResponseJson=at.prototype.Wa;at.prototype.getResponseText=at.prototype.ja;at.prototype.send=at.prototype.ha;at.prototype.setWithCredentials=at.prototype.Oa;Zn.prototype.digest=Zn.prototype.l;Zn.prototype.reset=Zn.prototype.reset;Zn.prototype.update=Zn.prototype.j;Ve.prototype.add=Ve.prototype.add;Ve.prototype.multiply=Ve.prototype.R;Ve.prototype.modulo=Ve.prototype.gb;Ve.prototype.compare=Ve.prototype.X;Ve.prototype.toNumber=Ve.prototype.ea;Ve.prototype.toString=Ve.prototype.toString;Ve.prototype.getBits=Ve.prototype.D;Ve.fromNumber=hr;Ve.fromString=zw;var eO=function(){return new Mu},tO=function(){return Sd()},Vh=Td,nO=aw,rO=mo,z0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},iO=Dl,gc=lw,oO=at,sO=Zn,Yo=Ve;const q0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ht{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}Ht.UNAUTHENTICATED=new Ht(null),Ht.GOOGLE_CREDENTIALS=new Ht("google-credentials-uid"),Ht.FIRST_PARTY=new Ht("first-party-uid"),Ht.MOCK_USER=new Ht("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Rs="10.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ao=new qm("@firebase/firestore");function H0(){return ao.logLevel}function X(t,...e){if(ao.logLevel<=xe.DEBUG){const n=e.map(Cg);ao.debug(`Firestore (${Rs}): ${t}`,...n)}}function Br(t,...e){if(ao.logLevel<=xe.ERROR){const n=e.map(Cg);ao.error(`Firestore (${Rs}): ${t}`,...n)}}function us(t,...e){if(ao.logLevel<=xe.WARN){const n=e.map(Cg);ao.warn(`Firestore (${Rs}): ${t}`,...n)}}function Cg(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ue(t="Unexpected state"){const e=`FIRESTORE (${Rs}) INTERNAL ASSERTION FAILED: `+t;throw Br(e),new Error(e)}function Qe(t,e){t||ue()}function pe(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const j={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class ie extends Gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wi{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class aO{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(Ht.UNAUTHENTICATED))}shutdown(){}}class lO{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class cO{constructor(e){this.t=e,this.currentUser=Ht.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let o=new wi;this.o=()=>{this.i++,this.currentUser=this.u(),o.resolve(),o=new wi,e.enqueueRetryable(()=>i(this.currentUser))};const s=()=>{const a=o;e.enqueueRetryable(async()=>{await a.promise,await i(this.currentUser)})},l=a=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.auth.addAuthTokenListener(this.o),s()};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),o.resolve(),o=new wi)}},0),s()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Qe(typeof r.accessToken=="string"),new qw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Qe(e===null||typeof e=="string"),new Ht(e)}}class uO{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=Ht.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class dO{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new uO(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(Ht.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class hO{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class fO{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=o=>{o.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${o.error.message}`);const s=o.token!==this.R;return this.R=o.token,X("FirebaseAppCheckTokenProvider",`Received ${s?"new":"existing"} token.`),s?n(o.token):Promise.resolve()};this.o=o=>{e.enqueueRetryable(()=>r(o))};const i=o=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=o,this.appCheck.addTokenListener(this.o)};this.A.onInit(o=>i(o)),setTimeout(()=>{if(!this.appCheck){const o=this.A.getImmediate({optional:!0});o?i(o):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Qe(typeof n.token=="string"),this.R=n.token,new hO(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pO(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hw{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=pO(40);for(let o=0;o<i.length;++o)r.length<20&&i[o]<n&&(r+=e.charAt(i[o]%e.length))}return r}}function De(t,e){return t<e?-1:t>e?1:0}function ds(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ct{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new ie(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new ie(j.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new ie(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new ie(j.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Ct.fromMillis(Date.now())}static fromDate(e){return Ct.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Ct(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?De(this.nanoseconds,e.nanoseconds):De(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class he{constructor(e){this.timestamp=e}static fromTimestamp(e){return new he(e)}static min(){return new he(new Ct(0,0))}static max(){return new he(new Ct(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rl{constructor(e,n,r){n===void 0?n=0:n>e.length&&ue(),r===void 0?r=e.length-n:r>e.length-n&&ue(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return rl.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof rl?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const o=e.get(i),s=n.get(i);if(o<s)return-1;if(o>s)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class st extends rl{construct(e,n,r){return new st(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new ie(j.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new st(n)}static emptyPath(){return new st([])}}const mO=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class Kt extends rl{construct(e,n,r){return new Kt(e,n,r)}static isValidIdentifier(e){return mO.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),Kt.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new Kt(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const o=()=>{if(r.length===0)throw new ie(j.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let s=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new ie(j.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[i+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new ie(j.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,i+=2}else l==="`"?(s=!s,i++):l!=="."||s?(r+=l,i++):(o(),i++)}if(o(),s)throw new ie(j.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new Kt(n)}static emptyPath(){return new Kt([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class re{constructor(e){this.path=e}static fromPath(e){return new re(st.fromString(e))}static fromName(e){return new re(st.fromString(e).popFirst(5))}static empty(){return new re(st.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&st.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return st.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new re(new st(e.slice()))}}function gO(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=he.fromTimestamp(r===1e9?new Ct(n+1,0):new Ct(n,r));return new Ri(i,re.empty(),e)}function yO(t){return new Ri(t.readTime,t.key,-1)}class Ri{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Ri(he.min(),re.empty(),-1)}static max(){return new Ri(he.max(),re.empty(),-1)}}function vO(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=re.comparator(t.documentKey,e.documentKey),n!==0?n:De(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _O="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class EO{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ml(t){if(t.code!==j.FAILED_PRECONDITION||t.message!==_O)throw t;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&ue(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new V((r,i)=>{this.nextCallback=o=>{this.wrapSuccess(e,o).next(r,i)},this.catchCallback=o=>{this.wrapFailure(n,o).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof V?n:V.resolve(n)}catch(n){return V.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):V.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):V.reject(n)}static resolve(e){return new V((n,r)=>{n(e)})}static reject(e){return new V((n,r)=>{r(e)})}static waitFor(e){return new V((n,r)=>{let i=0,o=0,s=!1;e.forEach(l=>{++i,l.next(()=>{++o,s&&o===i&&n()},a=>r(a))}),s=!0,o===i&&n()})}static or(e){let n=V.resolve(!1);for(const r of e)n=n.next(i=>i?V.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,o)=>{r.push(n.call(this,i,o))}),this.waitFor(r)}static mapArray(e,n){return new V((r,i)=>{const o=e.length,s=new Array(o);let l=0;for(let a=0;a<o;a++){const c=a;n(e[c]).next(u=>{s[c]=u,++l,l===o&&r(s)},u=>i(u))}})}static doWhile(e,n){return new V((r,i)=>{const o=()=>{e()===!0?n().next(()=>{o()},i):r()};o()})}}function jl(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pg{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Pg.ae=-1;function bd(t){return t==null}function Fu(t){return t===0&&1/t==-1/0}function SO(t){return typeof t=="number"&&Number.isInteger(t)&&!Fu(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function W0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Is(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function Ww(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{constructor(e,n){this.comparator=e,this.root=n||Dt.EMPTY}insert(e,n){return new it(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,Dt.BLACK,null,null))}remove(e){return new it(this.comparator,this.root.remove(e,this.comparator).copy(null,null,Dt.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new yc(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new yc(this.root,e,this.comparator,!1)}getReverseIterator(){return new yc(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new yc(this.root,e,this.comparator,!0)}}class yc{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let o=1;for(;!e.isEmpty();)if(o=n?r(e.key,n):1,n&&i&&(o*=-1),o<0)e=this.isReverse?e.left:e.right;else{if(o===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class Dt{constructor(e,n,r,i,o){this.key=e,this.value=n,this.color=r??Dt.RED,this.left=i??Dt.EMPTY,this.right=o??Dt.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,o){return new Dt(e??this.key,n??this.value,r??this.color,i??this.left,o??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const o=r(e,i.key);return i=o<0?i.copy(null,null,null,i.left.insert(e,n,r),null):o===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return Dt.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return Dt.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,Dt.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,Dt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw ue();const e=this.left.check();if(e!==this.right.check())throw ue();return e+(this.isRed()?0:1)}}Dt.EMPTY=null,Dt.RED=!0,Dt.BLACK=!1;Dt.EMPTY=new class{constructor(){this.size=0}get key(){throw ue()}get value(){throw ue()}get color(){throw ue()}get left(){throw ue()}get right(){throw ue()}copy(e,n,r,i,o){return this}insert(e,n,r){return new Dt(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yt{constructor(e){this.comparator=e,this.data=new it(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new G0(this.data.getIterator())}getIteratorFrom(e){return new G0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Yt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(this.comparator(i,o)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Yt(this.comparator);return n.data=e,n}}class G0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kn{constructor(e){this.fields=e,e.sort(Kt.comparator)}static empty(){return new Kn([])}unionWith(e){let n=new Yt(Kt.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Kn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return ds(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tn{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(o){throw typeof DOMException<"u"&&o instanceof DOMException?new Gw("Invalid base64 string: "+o):o}}(e);return new tn(n)}static fromUint8Array(e){const n=function(i){let o="";for(let s=0;s<i.length;++s)o+=String.fromCharCode(i[s]);return o}(e);return new tn(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return De(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}tn.EMPTY_BYTE_STRING=new tn("");const TO=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Ii(t){if(Qe(!!t),typeof t=="string"){let e=0;const n=TO.exec(t);if(Qe(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:yt(t.seconds),nanos:yt(t.nanos)}}function yt(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function lo(t){return typeof t=="string"?tn.fromBase64String(t):tn.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Rg(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function Ig(t){const e=t.mapValue.fields.__previous_value__;return Rg(e)?Ig(e):e}function il(t){const e=Ii(t.mapValue.fields.__local_write_time__.timestampValue);return new Ct(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wO{constructor(e,n,r,i,o,s,l,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=o,this.forceLongPolling=s,this.autoDetectLongPolling=l,this.longPollingOptions=a,this.useFetchStreams=c}}class ol{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ol("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ol&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vc={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function co(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Rg(t)?4:CO(t)?9007199254740991:10:ue()}function _r(t,e){if(t===e)return!0;const n=co(t);if(n!==co(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return il(t).isEqual(il(e));case 3:return function(i,o){if(typeof i.timestampValue=="string"&&typeof o.timestampValue=="string"&&i.timestampValue.length===o.timestampValue.length)return i.timestampValue===o.timestampValue;const s=Ii(i.timestampValue),l=Ii(o.timestampValue);return s.seconds===l.seconds&&s.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,o){return lo(i.bytesValue).isEqual(lo(o.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,o){return yt(i.geoPointValue.latitude)===yt(o.geoPointValue.latitude)&&yt(i.geoPointValue.longitude)===yt(o.geoPointValue.longitude)}(t,e);case 2:return function(i,o){if("integerValue"in i&&"integerValue"in o)return yt(i.integerValue)===yt(o.integerValue);if("doubleValue"in i&&"doubleValue"in o){const s=yt(i.doubleValue),l=yt(o.doubleValue);return s===l?Fu(s)===Fu(l):isNaN(s)&&isNaN(l)}return!1}(t,e);case 9:return ds(t.arrayValue.values||[],e.arrayValue.values||[],_r);case 10:return function(i,o){const s=i.mapValue.fields||{},l=o.mapValue.fields||{};if(W0(s)!==W0(l))return!1;for(const a in s)if(s.hasOwnProperty(a)&&(l[a]===void 0||!_r(s[a],l[a])))return!1;return!0}(t,e);default:return ue()}}function sl(t,e){return(t.values||[]).find(n=>_r(n,e))!==void 0}function hs(t,e){if(t===e)return 0;const n=co(t),r=co(e);if(n!==r)return De(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return De(t.booleanValue,e.booleanValue);case 2:return function(o,s){const l=yt(o.integerValue||o.doubleValue),a=yt(s.integerValue||s.doubleValue);return l<a?-1:l>a?1:l===a?0:isNaN(l)?isNaN(a)?0:-1:1}(t,e);case 3:return K0(t.timestampValue,e.timestampValue);case 4:return K0(il(t),il(e));case 5:return De(t.stringValue,e.stringValue);case 6:return function(o,s){const l=lo(o),a=lo(s);return l.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(o,s){const l=o.split("/"),a=s.split("/");for(let c=0;c<l.length&&c<a.length;c++){const u=De(l[c],a[c]);if(u!==0)return u}return De(l.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(o,s){const l=De(yt(o.latitude),yt(s.latitude));return l!==0?l:De(yt(o.longitude),yt(s.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(o,s){const l=o.values||[],a=s.values||[];for(let c=0;c<l.length&&c<a.length;++c){const u=hs(l[c],a[c]);if(u)return u}return De(l.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(o,s){if(o===vc.mapValue&&s===vc.mapValue)return 0;if(o===vc.mapValue)return 1;if(s===vc.mapValue)return-1;const l=o.fields||{},a=Object.keys(l),c=s.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let d=0;d<a.length&&d<u.length;++d){const f=De(a[d],u[d]);if(f!==0)return f;const g=hs(l[a[d]],c[u[d]]);if(g!==0)return g}return De(a.length,u.length)}(t.mapValue,e.mapValue);default:throw ue()}}function K0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return De(t,e);const n=Ii(t),r=Ii(e),i=De(n.seconds,r.seconds);return i!==0?i:De(n.nanos,r.nanos)}function fs(t){return Tp(t)}function Tp(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Ii(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return lo(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return re.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const o of n.values||[])i?i=!1:r+=",",r+=Tp(o);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",o=!0;for(const s of r)o?o=!1:i+=",",i+=`${s}:${Tp(n.fields[s])}`;return i+"}"}(t.mapValue):ue()}function wp(t){return!!t&&"integerValue"in t}function Ag(t){return!!t&&"arrayValue"in t}function J0(t){return!!t&&"nullValue"in t}function Q0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function $c(t){return!!t&&"mapValue"in t}function Ta(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return Is(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Ta(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Ta(t.arrayValue.values[n]);return e}return Object.assign({},t)}function CO(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dn{constructor(e){this.value=e}static empty(){return new Dn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!$c(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Ta(n)}setAll(e){let n=Kt.emptyPath(),r={},i=[];e.forEach((s,l)=>{if(!n.isImmediateParentOf(l)){const a=this.getFieldsMap(n);this.applyChanges(a,r,i),r={},i=[],n=l.popLast()}s?r[l.lastSegment()]=Ta(s):i.push(l.lastSegment())});const o=this.getFieldsMap(n);this.applyChanges(o,r,i)}delete(e){const n=this.field(e.popLast());$c(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return _r(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];$c(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){Is(n,(i,o)=>e[i]=o);for(const i of r)delete e[i]}clone(){return new Dn(Ta(this.value))}}function Kw(t){const e=[];return Is(t.fields,(n,r)=>{const i=new Kt([n]);if($c(r)){const o=Kw(r.mapValue).fields;if(o.length===0)e.push(i);else for(const s of o)e.push(i.child(s))}else e.push(i)}),new Kn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Gt{constructor(e,n,r,i,o,s,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=o,this.data=s,this.documentState=l}static newInvalidDocument(e){return new Gt(e,0,he.min(),he.min(),he.min(),Dn.empty(),0)}static newFoundDocument(e,n,r,i){return new Gt(e,1,n,he.min(),r,i,0)}static newNoDocument(e,n){return new Gt(e,2,n,he.min(),he.min(),Dn.empty(),0)}static newUnknownDocument(e,n){return new Gt(e,3,n,he.min(),he.min(),Dn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(he.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=Dn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=Dn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=he.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Gt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Gt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vu{constructor(e,n){this.position=e,this.inclusive=n}}function Y0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const o=e[i],s=t.position[i];if(o.field.isKeyField()?r=re.comparator(re.fromName(s.referenceValue),n.key):r=hs(s,n.data.field(o.field)),o.dir==="desc"&&(r*=-1),r!==0)break}return r}function X0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!_r(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wa{constructor(e,n="asc"){this.field=e,this.dir=n}}function PO(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jw{}class Tt extends Jw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new IO(e,n,r):n==="array-contains"?new bO(e,r):n==="in"?new xO(e,r):n==="not-in"?new DO(e,r):n==="array-contains-any"?new NO(e,r):new Tt(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new AO(e,r):new kO(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(hs(n,this.value)):n!==null&&co(this.value)===co(n)&&this.matchesComparison(hs(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return ue()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class Er extends Jw{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new Er(e,n)}matches(e){return Qw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function Qw(t){return t.op==="and"}function Yw(t){return RO(t)&&Qw(t)}function RO(t){for(const e of t.filters)if(e instanceof Er)return!1;return!0}function Cp(t){if(t instanceof Tt)return t.field.canonicalString()+t.op.toString()+fs(t.value);if(Yw(t))return t.filters.map(e=>Cp(e)).join(",");{const e=t.filters.map(n=>Cp(n)).join(",");return`${t.op}(${e})`}}function Xw(t,e){return t instanceof Tt?function(r,i){return i instanceof Tt&&r.op===i.op&&r.field.isEqual(i.field)&&_r(r.value,i.value)}(t,e):t instanceof Er?function(r,i){return i instanceof Er&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((o,s,l)=>o&&Xw(s,i.filters[l]),!0):!1}(t,e):void ue()}function Zw(t){return t instanceof Tt?function(n){return`${n.field.canonicalString()} ${n.op} ${fs(n.value)}`}(t):t instanceof Er?function(n){return n.op.toString()+" {"+n.getFilters().map(Zw).join(" ,")+"}"}(t):"Filter"}class IO extends Tt{constructor(e,n,r){super(e,n,r),this.key=re.fromName(r.referenceValue)}matches(e){const n=re.comparator(e.key,this.key);return this.matchesComparison(n)}}class AO extends Tt{constructor(e,n){super(e,"in",n),this.keys=eC("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class kO extends Tt{constructor(e,n){super(e,"not-in",n),this.keys=eC("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function eC(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>re.fromName(r.referenceValue))}class bO extends Tt{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Ag(n)&&sl(n.arrayValue,this.value)}}class xO extends Tt{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&sl(this.value.arrayValue,n)}}class DO extends Tt{constructor(e,n){super(e,"not-in",n)}matches(e){if(sl(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!sl(this.value.arrayValue,n)}}class NO extends Tt{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Ag(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>sl(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OO{constructor(e,n=null,r=[],i=[],o=null,s=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=o,this.startAt=s,this.endAt=l,this.he=null}}function Z0(t,e=null,n=[],r=[],i=null,o=null,s=null){return new OO(t,e,n,r,i,o,s)}function kg(t){const e=pe(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Cp(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(o){return o.field.canonicalString()+o.dir}(r)).join(","),bd(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>fs(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>fs(r)).join(",")),e.he=n}return e.he}function bg(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!PO(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!Xw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!X0(t.startAt,e.startAt)&&X0(t.endAt,e.endAt)}function Pp(t){return re.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xd{constructor(e,n=null,r=[],i=[],o=null,s="F",l=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=o,this.limitType=s,this.startAt=l,this.endAt=a,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function MO(t,e,n,r,i,o,s,l){return new xd(t,e,n,r,i,o,s,l)}function xg(t){return new xd(t)}function e_(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function jO(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function LO(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function FO(t){return t.collectionGroup!==null}function Ca(t){const e=pe(t);if(e.Pe===null){e.Pe=[];const n=LO(e),r=jO(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new wa(n)),e.Pe.push(new wa(Kt.keyField(),"asc"));else{let i=!1;for(const o of e.explicitOrderBy)e.Pe.push(o),o.field.isKeyField()&&(i=!0);if(!i){const o=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new wa(Kt.keyField(),o))}}}return e.Pe}function zr(t){const e=pe(t);return e.Ie||(e.Ie=VO(e,Ca(t))),e.Ie}function VO(t,e){if(t.limitType==="F")return Z0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const o=i.dir==="desc"?"asc":"desc";return new wa(i.field,o)});const n=t.endAt?new Vu(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Vu(t.startAt.position,t.startAt.inclusive):null;return Z0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Rp(t,e,n){return new xd(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function Dd(t,e){return bg(zr(t),zr(e))&&t.limitType===e.limitType}function tC(t){return`${kg(zr(t))}|lt:${t.limitType}`}function Ip(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>Zw(i)).join(", ")}]`),bd(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(s){return`${s.field.canonicalString()} (${s.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>fs(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>fs(i)).join(",")),`Target(${r})`}(zr(t))}; limitType=${t.limitType})`}function Nd(t,e){return e.isFoundDocument()&&function(r,i){const o=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(o):re.isDocumentKey(r.path)?r.path.isEqual(o):r.path.isImmediateParentOf(o)}(t,e)&&function(r,i){for(const o of Ca(r))if(!o.field.isKeyField()&&i.data.field(o.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const o of r.filters)if(!o.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(s,l,a){const c=Y0(s,l,a);return s.inclusive?c<=0:c<0}(r.startAt,Ca(r),i)||r.endAt&&!function(s,l,a){const c=Y0(s,l,a);return s.inclusive?c>=0:c>0}(r.endAt,Ca(r),i))}(t,e)}function UO(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function nC(t){return(e,n)=>{let r=!1;for(const i of Ca(t)){const o=$O(i,e,n);if(o!==0)return o;r=r||i.field.isKeyField()}return 0}}function $O(t,e,n){const r=t.field.isKeyField()?re.comparator(e.key,n.key):function(o,s,l){const a=s.data.field(o),c=l.data.field(o);return a!==null&&c!==null?hs(a,c):ue()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return ue()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,o]of r)if(this.equalsFn(i,e))return o}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let o=0;o<i.length;o++)if(this.equalsFn(i[o][0],e))return void(i[o]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){Is(this.inner,(n,r)=>{for(const[i,o]of r)e(i,o)})}isEmpty(){return Ww(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const BO=new it(re.comparator);function qr(){return BO}const rC=new it(re.comparator);function aa(...t){let e=rC;for(const n of t)e=e.insert(n.key,n);return e}function iC(t){let e=rC;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function Wi(){return Pa()}function oC(){return Pa()}function Pa(){return new As(t=>t.toString(),(t,e)=>t.isEqual(e))}const zO=new it(re.comparator),qO=new Yt(re.comparator);function Ee(...t){let e=qO;for(const n of t)e=e.add(n);return e}const HO=new Yt(De);function WO(){return HO}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Fu(e)?"-0":e}}function aC(t){return{integerValue:""+t}}function GO(t,e){return SO(e)?aC(e):sC(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Od{constructor(){this._=void 0}}function KO(t,e,n){return t instanceof Uu?function(i,o){const s={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return o&&Rg(o)&&(o=Ig(o)),o&&(s.fields.__previous_value__=o),{mapValue:s}}(n,e):t instanceof al?cC(t,e):t instanceof ll?uC(t,e):function(i,o){const s=lC(i,o),l=t_(s)+t_(i.Ee);return wp(s)&&wp(i.Ee)?aC(l):sC(i.serializer,l)}(t,e)}function JO(t,e,n){return t instanceof al?cC(t,e):t instanceof ll?uC(t,e):n}function lC(t,e){return t instanceof $u?function(r){return wp(r)||function(o){return!!o&&"doubleValue"in o}(r)}(e)?e:{integerValue:0}:null}class Uu extends Od{}class al extends Od{constructor(e){super(),this.elements=e}}function cC(t,e){const n=dC(e);for(const r of t.elements)n.some(i=>_r(i,r))||n.push(r);return{arrayValue:{values:n}}}class ll extends Od{constructor(e){super(),this.elements=e}}function uC(t,e){let n=dC(e);for(const r of t.elements)n=n.filter(i=>!_r(i,r));return{arrayValue:{values:n}}}class $u extends Od{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function t_(t){return yt(t.integerValue||t.doubleValue)}function dC(t){return Ag(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function QO(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof al&&i instanceof al||r instanceof ll&&i instanceof ll?ds(r.elements,i.elements,_r):r instanceof $u&&i instanceof $u?_r(r.Ee,i.Ee):r instanceof Uu&&i instanceof Uu}(t.transform,e.transform)}class YO{constructor(e,n){this.version=e,this.transformResults=n}}class Or{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new Or}static exists(e){return new Or(void 0,e)}static updateTime(e){return new Or(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function Bc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Md{}function hC(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new pC(t.key,Or.none()):new Ll(t.key,t.data,Or.none());{const n=t.data,r=Dn.empty();let i=new Yt(Kt.comparator);for(let o of e.fields)if(!i.has(o)){let s=n.field(o);s===null&&o.length>1&&(o=o.popLast(),s=n.field(o)),s===null?r.delete(o):r.set(o,s),i=i.add(o)}return new go(t.key,r,new Kn(i.toArray()),Or.none())}}function XO(t,e,n){t instanceof Ll?function(i,o,s){const l=i.value.clone(),a=r_(i.fieldTransforms,o,s.transformResults);l.setAll(a),o.convertToFoundDocument(s.version,l).setHasCommittedMutations()}(t,e,n):t instanceof go?function(i,o,s){if(!Bc(i.precondition,o))return void o.convertToUnknownDocument(s.version);const l=r_(i.fieldTransforms,o,s.transformResults),a=o.data;a.setAll(fC(i)),a.setAll(l),o.convertToFoundDocument(s.version,a).setHasCommittedMutations()}(t,e,n):function(i,o,s){o.convertToNoDocument(s.version).setHasCommittedMutations()}(0,e,n)}function Ra(t,e,n,r){return t instanceof Ll?function(o,s,l,a){if(!Bc(o.precondition,s))return l;const c=o.value.clone(),u=i_(o.fieldTransforms,a,s);return c.setAll(u),s.convertToFoundDocument(s.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof go?function(o,s,l,a){if(!Bc(o.precondition,s))return l;const c=i_(o.fieldTransforms,a,s),u=s.data;return u.setAll(fC(o)),u.setAll(c),s.convertToFoundDocument(s.version,u).setHasLocalMutations(),l===null?null:l.unionWith(o.fieldMask.fields).unionWith(o.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(o,s,l){return Bc(o.precondition,s)?(s.convertToNoDocument(s.version).setHasLocalMutations(),null):l}(t,e,n)}function ZO(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),o=lC(r.transform,i||null);o!=null&&(n===null&&(n=Dn.empty()),n.set(r.field,o))}return n||null}function n_(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&ds(r,i,(o,s)=>QO(o,s))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ll extends Md{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class go extends Md{constructor(e,n,r,i,o=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=o,this.type=1}getFieldMask(){return this.fieldMask}}function fC(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function r_(t,e,n){const r=new Map;Qe(t.length===n.length);for(let i=0;i<n.length;i++){const o=t[i],s=o.transform,l=e.data.field(o.field);r.set(o.field,JO(s,l,n[i]))}return r}function i_(t,e,n){const r=new Map;for(const i of t){const o=i.transform,s=n.data.field(i.field);r.set(i.field,KO(o,s,e))}return r}class pC extends Md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class eM extends Md{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tM{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const o=this.mutations[i];o.key.isEqual(e.key)&&XO(o,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Ra(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Ra(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=oC();return this.mutations.forEach(i=>{const o=e.get(i.key),s=o.overlayedDocument;let l=this.applyToLocalView(s,o.mutatedFields);l=n.has(i.key)?null:l;const a=hC(s,l);a!==null&&r.set(i.key,a),s.isValidDocument()||s.convertToNoDocument(he.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),Ee())}isEqual(e){return this.batchId===e.batchId&&ds(this.mutations,e.mutations,(n,r)=>n_(n,r))&&ds(this.baseMutations,e.baseMutations,(n,r)=>n_(n,r))}}class Dg{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Qe(e.mutations.length===r.length);let i=function(){return zO}();const o=e.mutations;for(let s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new Dg(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nM{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rM{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var mt,Pe;function iM(t){switch(t){default:return ue();case j.CANCELLED:case j.UNKNOWN:case j.DEADLINE_EXCEEDED:case j.RESOURCE_EXHAUSTED:case j.INTERNAL:case j.UNAVAILABLE:case j.UNAUTHENTICATED:return!1;case j.INVALID_ARGUMENT:case j.NOT_FOUND:case j.ALREADY_EXISTS:case j.PERMISSION_DENIED:case j.FAILED_PRECONDITION:case j.ABORTED:case j.OUT_OF_RANGE:case j.UNIMPLEMENTED:case j.DATA_LOSS:return!0}}function mC(t){if(t===void 0)return Br("GRPC error has no .code"),j.UNKNOWN;switch(t){case mt.OK:return j.OK;case mt.CANCELLED:return j.CANCELLED;case mt.UNKNOWN:return j.UNKNOWN;case mt.DEADLINE_EXCEEDED:return j.DEADLINE_EXCEEDED;case mt.RESOURCE_EXHAUSTED:return j.RESOURCE_EXHAUSTED;case mt.INTERNAL:return j.INTERNAL;case mt.UNAVAILABLE:return j.UNAVAILABLE;case mt.UNAUTHENTICATED:return j.UNAUTHENTICATED;case mt.INVALID_ARGUMENT:return j.INVALID_ARGUMENT;case mt.NOT_FOUND:return j.NOT_FOUND;case mt.ALREADY_EXISTS:return j.ALREADY_EXISTS;case mt.PERMISSION_DENIED:return j.PERMISSION_DENIED;case mt.FAILED_PRECONDITION:return j.FAILED_PRECONDITION;case mt.ABORTED:return j.ABORTED;case mt.OUT_OF_RANGE:return j.OUT_OF_RANGE;case mt.UNIMPLEMENTED:return j.UNIMPLEMENTED;case mt.DATA_LOSS:return j.DATA_LOSS;default:return ue()}}(Pe=mt||(mt={}))[Pe.OK=0]="OK",Pe[Pe.CANCELLED=1]="CANCELLED",Pe[Pe.UNKNOWN=2]="UNKNOWN",Pe[Pe.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Pe[Pe.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Pe[Pe.NOT_FOUND=5]="NOT_FOUND",Pe[Pe.ALREADY_EXISTS=6]="ALREADY_EXISTS",Pe[Pe.PERMISSION_DENIED=7]="PERMISSION_DENIED",Pe[Pe.UNAUTHENTICATED=16]="UNAUTHENTICATED",Pe[Pe.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Pe[Pe.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Pe[Pe.ABORTED=10]="ABORTED",Pe[Pe.OUT_OF_RANGE=11]="OUT_OF_RANGE",Pe[Pe.UNIMPLEMENTED=12]="UNIMPLEMENTED",Pe[Pe.INTERNAL=13]="INTERNAL",Pe[Pe.UNAVAILABLE=14]="UNAVAILABLE",Pe[Pe.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ng{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return _c}static getOrCreateInstance(){return _c===null&&(_c=new Ng),_c}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let _c=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function oM(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const sM=new Yo([4294967295,4294967295],0);function o_(t){const e=oM().encode(t),n=new sO;return n.update(e),new Uint8Array(n.digest())}function s_(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),o=e.getUint32(12,!0);return[new Yo([n,r],0),new Yo([i,o],0)]}class Og{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new la(`Invalid padding: ${n}`);if(r<0)throw new la(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new la(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new la(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=Yo.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(Yo.fromNumber(r)));return i.compare(sM)===1&&(i=new Yo([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=o_(e),[r,i]=s_(n);for(let o=0;o<this.hashCount;o++){const s=this.Ve(r,i,o);if(!this.me(s))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,o=new Uint8Array(Math.ceil(e/8)),s=new Og(o,i,n);return r.forEach(l=>s.insert(l)),s}insert(e){if(this.Ae===0)return;const n=o_(e),[r,i]=s_(n);for(let o=0;o<this.hashCount;o++){const s=this.Ve(r,i,o);this.fe(s)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class la extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jd{constructor(e,n,r,i,o){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=o}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Fl.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new jd(he.min(),i,new it(De),qr(),Ee())}}class Fl{constructor(e,n,r,i,o){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=o}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Fl(r,n,Ee(),Ee(),Ee())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zc{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class gC{constructor(e,n){this.targetId=e,this.ye=n}}class yC{constructor(e,n,r=tn.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class a_{constructor(){this.we=0,this.Se=c_(),this.be=tn.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=Ee(),n=Ee(),r=Ee();return this.Se.forEach((i,o)=>{switch(o){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:ue()}}),new Fl(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=c_()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class aM{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=qr(),this.Ue=l_(),this.We=new it(De)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:ue()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){var n;const r=e.targetId,i=e.ye.count,o=this.et(r);if(o){const s=o.target;if(Pp(s))if(i===0){const l=new re(s.path);this.je(r,l,Gt.newNoDocument(l,he.min()))}else Qe(i===1);else{const l=this.tt(r);if(l!==i){const a=this.nt(e),c=a?this.rt(a,e,l):1;if(c!==0){this.Ze(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(r,u)}(n=Ng.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(d,f,g,p,E){var T,v,m,S,_,C;const R={localCacheCount:d,existenceFilterCount:f.count,databaseId:g.database,projectId:g.projectId},b=f.unchangedNames;return b&&(R.bloomFilter={applied:E===0,hashCount:(T=b==null?void 0:b.hashCount)!==null&&T!==void 0?T:0,bitmapLength:(S=(m=(v=b==null?void 0:b.bits)===null||v===void 0?void 0:v.bitmap)===null||m===void 0?void 0:m.length)!==null&&S!==void 0?S:0,padding:(C=(_=b==null?void 0:b.bits)===null||_===void 0?void 0:_.padding)!==null&&C!==void 0?C:0,mightContain:y=>{var I;return(I=p==null?void 0:p.mightContain(y))!==null&&I!==void 0&&I}}),R}(l,e.ye,this.Qe.it(),a,c))}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:o=0}=n;let s,l;try{s=lo(r).toUint8Array()}catch(a){if(a instanceof Gw)return us("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{l=new Og(s,i,o)}catch(a){return us(a instanceof la?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return l.Ae===0?null:l}rt(e,n,r){return n.ye.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(o=>{const s=this.Qe.it(),l=`projects/${s.projectId}/databases/${s.database}/documents/${o.path.canonicalString()}`;e.mightContain(l)||(this.je(n,o,null),i++)}),i}ot(e){const n=new Map;this.Ke.forEach((o,s)=>{const l=this.et(s);if(l){if(o.current&&Pp(l.target)){const a=new re(l.target.path);this.$e.get(a)!==null||this._t(s,a)||this.je(s,a,Gt.newNoDocument(a,e))}o.Fe&&(n.set(s,o.xe()),o.Oe())}});let r=Ee();this.Ue.forEach((o,s)=>{let l=!0;s.forEachWhile(a=>{const c=this.et(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(o))}),this.$e.forEach((o,s)=>s.setReadTime(e));const i=new jd(e,n,this.We,this.$e,r);return this.$e=qr(),this.Ue=l_(),this.We=new it(De),i}ze(e,n){if(!this.Ye(e))return;const r=this._t(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ut(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this._t(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ut(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new a_,this.Ke.set(e,n)),n}ut(e){let n=this.Ue.get(e);return n||(n=new Yt(De),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||X("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.ct(e)}Ze(e){this.Ke.set(e,new a_),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}_t(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function l_(){return new it(re.comparator)}function c_(){return new it(re.comparator)}const lM=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),cM=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),uM=(()=>({and:"AND",or:"OR"}))();class dM{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Ap(t,e){return t.useProto3Json||bd(e)?e:{value:e}}function Bu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function vC(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function hM(t,e){return Bu(t,e.toTimestamp())}function vr(t){return Qe(!!t),he.fromTimestamp(function(n){const r=Ii(n);return new Ct(r.seconds,r.nanos)}(t))}function Mg(t,e){return function(r){return new st(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function _C(t){const e=st.fromString(t);return Qe(wC(e)),e}function kp(t,e){return Mg(t.databaseId,e.path)}function Uh(t,e){const n=_C(e);if(n.get(1)!==t.databaseId.projectId)throw new ie(j.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new ie(j.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new re(EC(n))}function bp(t,e){return Mg(t.databaseId,e)}function fM(t){const e=_C(t);return e.length===4?st.emptyPath():EC(e)}function xp(t){return new st(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function EC(t){return Qe(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function u_(t,e,n){return{name:kp(t,e),fields:n.value.mapValue.fields}}function pM(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:ue()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(c,u){return c.useProto3Json?(Qe(u===void 0||typeof u=="string"),tn.fromBase64String(u||"")):(Qe(u===void 0||u instanceof Uint8Array),tn.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),s=e.targetChange.cause,l=s&&function(c){const u=c.code===void 0?j.UNKNOWN:mC(c.code);return new ie(u,c.message||"")}(s);n=new yC(r,i,o,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Uh(t,r.document.name),o=vr(r.document.updateTime),s=r.document.createTime?vr(r.document.createTime):he.min(),l=new Dn({mapValue:{fields:r.document.fields}}),a=Gt.newFoundDocument(i,o,s,l),c=r.targetIds||[],u=r.removedTargetIds||[];n=new zc(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Uh(t,r.document),o=r.readTime?vr(r.readTime):he.min(),s=Gt.newNoDocument(i,o),l=r.removedTargetIds||[];n=new zc([],l,s.key,s)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Uh(t,r.document),o=r.removedTargetIds||[];n=new zc([],o,i,null)}else{if(!("filter"in e))return ue();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:o}=r,s=new rM(i,o),l=r.targetId;n=new gC(l,s)}}return n}function mM(t,e){let n;if(e instanceof Ll)n={update:u_(t,e.key,e.value)};else if(e instanceof pC)n={delete:kp(t,e.key)};else if(e instanceof go)n={update:u_(t,e.key,e.data),updateMask:CM(e.fieldMask)};else{if(!(e instanceof eM))return ue();n={verify:kp(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(o,s){const l=s.transform;if(l instanceof Uu)return{fieldPath:s.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof al)return{fieldPath:s.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof ll)return{fieldPath:s.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof $u)return{fieldPath:s.field.canonicalString(),increment:l.Ee};throw ue()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,o){return o.updateTime!==void 0?{updateTime:hM(i,o.updateTime)}:o.exists!==void 0?{exists:o.exists}:ue()}(t,e.precondition)),n}function gM(t,e){return t&&t.length>0?(Qe(e!==void 0),t.map(n=>function(i,o){let s=i.updateTime?vr(i.updateTime):vr(o);return s.isEqual(he.min())&&(s=vr(o)),new YO(s,i.transformResults||[])}(n,e))):[]}function yM(t,e){return{documents:[bp(t,e.path)]}}function vM(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=bp(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=bp(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(a){if(a.length!==0)return TC(Er.create(a,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const o=function(a){if(a.length!==0)return a.map(c=>function(d){return{field:To(d.field),direction:SM(d.dir)}}(c))}(e.orderBy);o&&(n.structuredQuery.orderBy=o);const s=Ap(t,e.limit);return s!==null&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=function(a){return{before:a.inclusive,values:a.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(a){return{before:!a.inclusive,values:a.position}}(e.endAt)),n}function _M(t){let e=fM(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Qe(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let o=[];n.where&&(o=function(d){const f=SC(d);return f instanceof Er&&Yw(f)?f.getFilters():[f]}(n.where));let s=[];n.orderBy&&(s=function(d){return d.map(f=>function(p){return new wa(wo(p.field),function(T){switch(T){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(p.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(d){let f;return f=typeof d=="object"?d.value:d,bd(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(d){const f=!!d.before,g=d.values||[];return new Vu(g,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,g=d.values||[];return new Vu(g,f)}(n.endAt)),MO(e,i,s,o,l,"F",a,c)}function EM(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ue()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function SC(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=wo(n.unaryFilter.field);return Tt.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=wo(n.unaryFilter.field);return Tt.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const o=wo(n.unaryFilter.field);return Tt.create(o,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const s=wo(n.unaryFilter.field);return Tt.create(s,"!=",{nullValue:"NULL_VALUE"});default:return ue()}}(t):t.fieldFilter!==void 0?function(n){return Tt.create(wo(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return ue()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return Er.create(n.compositeFilter.filters.map(r=>SC(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return ue()}}(n.compositeFilter.op))}(t):ue()}function SM(t){return lM[t]}function TM(t){return cM[t]}function wM(t){return uM[t]}function To(t){return{fieldPath:t.canonicalString()}}function wo(t){return Kt.fromServerFormat(t.fieldPath)}function TC(t){return t instanceof Tt?function(n){if(n.op==="=="){if(Q0(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NAN"}};if(J0(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(Q0(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NOT_NAN"}};if(J0(n.value))return{unaryFilter:{field:To(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:To(n.field),op:TM(n.op),value:n.value}}}(t):t instanceof Er?function(n){const r=n.getFilters().map(i=>TC(i));return r.length===1?r[0]:{compositeFilter:{op:wM(n.op),filters:r}}}(t):ue()}function CM(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function wC(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(e,n,r,i,o=he.min(),s=he.min(),l=tn.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=o,this.lastLimboFreeSnapshotVersion=s,this.resumeToken=l,this.expectedCount=a}withSequenceNumber(e){return new di(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new di(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PM{constructor(e){this.lt=e}}function RM(t){const e=_M({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Rp(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IM{constructor(){this.on=new AM}addToCollectionParentIndex(e,n){return this.on.add(n),V.resolve()}getCollectionParents(e,n){return V.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return V.resolve()}deleteFieldIndex(e,n){return V.resolve()}getDocumentsMatchingTarget(e,n){return V.resolve(null)}getIndexType(e,n){return V.resolve(0)}getFieldIndexes(e,n){return V.resolve([])}getNextCollectionGroupToUpdate(e){return V.resolve(null)}getMinOffset(e,n){return V.resolve(Ri.min())}getMinOffsetFromCollectionGroup(e,n){return V.resolve(Ri.min())}updateCollectionGroup(e,n,r){return V.resolve()}updateIndexEntries(e,n){return V.resolve()}}class AM{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Yt(st.comparator),o=!i.has(r);return this.index[n]=i.add(r),o}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Yt(st.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new ps(0)}static Nn(){return new ps(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kM{constructor(){this.changes=new As(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Gt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?V.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bM{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xM{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Ra(r.mutation,i,Kn.empty(),Ct.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,Ee()).next(()=>r))}getLocalViewOfDocuments(e,n,r=Ee()){const i=Wi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(o=>{let s=aa();return o.forEach((l,a)=>{s=s.insert(l,a.overlayedDocument)}),s}))}getOverlayedDocuments(e,n){const r=Wi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,Ee()))}populateOverlays(e,n,r){const i=[];return r.forEach(o=>{n.has(o)||i.push(o)}),this.documentOverlayCache.getOverlays(e,i).next(o=>{o.forEach((s,l)=>{n.set(s,l)})})}computeViews(e,n,r,i){let o=qr();const s=Pa(),l=function(){return Pa()}();return n.forEach((a,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof go)?o=o.insert(c.key,c):u!==void 0?(s.set(c.key,u.mutation.getFieldMask()),Ra(u.mutation,c,u.mutation.getFieldMask(),Ct.now())):s.set(c.key,Kn.empty())}),this.recalculateAndSaveOverlays(e,o).next(a=>(a.forEach((c,u)=>s.set(c,u)),n.forEach((c,u)=>{var d;return l.set(c,new bM(u,(d=s.get(c))!==null&&d!==void 0?d:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Pa();let i=new it((s,l)=>s-l),o=Ee();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(s=>{for(const l of s)l.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let u=r.get(a)||Kn.empty();u=l.applyToLocalView(c,u),r.set(a,u);const d=(i.get(l.batchId)||Ee()).add(a);i=i.insert(l.batchId,d)})}).next(()=>{const s=[],l=i.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),c=a.key,u=a.value,d=oC();u.forEach(f=>{if(!o.has(f)){const g=hC(n.get(f),r.get(f));g!==null&&d.set(f,g),o=o.add(f)}}),s.push(this.documentOverlayCache.saveOverlays(e,c,d))}return V.waitFor(s)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(o){return re.isDocumentKey(o.path)&&o.collectionGroup===null&&o.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):FO(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(o=>{const s=i-o.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-o.size):V.resolve(Wi());let l=-1,a=o;return s.next(c=>V.forEach(c,(u,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),o.get(u)?V.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{a=a.insert(u,f)}))).next(()=>this.populateOverlays(e,c,o)).next(()=>this.computeViews(e,a,c,Ee())).next(u=>({batchId:l,changes:iC(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new re(n)).next(r=>{let i=aa();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let o=aa();return this.indexManager.getCollectionParents(e,i).next(s=>V.forEach(s,l=>{const a=function(u,d){return new xd(d,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,r).next(c=>{c.forEach((u,d)=>{o=o.insert(u,d)})})}).next(()=>o))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(o=>(i=o,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(o=>{i.forEach((l,a)=>{const c=a.getKey();o.get(c)===null&&(o=o.insert(c,Gt.newInvalidDocument(c)))});let s=aa();return o.forEach((l,a)=>{const c=i.get(l);c!==void 0&&Ra(c.mutation,a,Kn.empty(),Ct.now()),Nd(n,a)&&(s=s.insert(l,a))}),s})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return V.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:vr(i.createTime)}}(n)),V.resolve()}getNamedQuery(e,n){return V.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:RM(i.bundledQuery),readTime:vr(i.readTime)}}(n)),V.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(){this.overlays=new it(re.comparator),this.lr=new Map}getOverlay(e,n){return V.resolve(this.overlays.get(n))}getOverlays(e,n){const r=Wi();return V.forEach(n,i=>this.getOverlay(e,i).next(o=>{o!==null&&r.set(i,o)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,o)=>{this.Pt(e,n,o)}),V.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(o=>this.overlays=this.overlays.remove(o)),this.lr.delete(r)),V.resolve()}getOverlaysForCollection(e,n,r){const i=Wi(),o=n.length+1,s=new re(n.child("")),l=this.overlays.getIteratorFrom(s);for(;l.hasNext();){const a=l.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===o&&a.largestBatchId>r&&i.set(a.getKey(),a)}return V.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let o=new it((c,u)=>c-u);const s=this.overlays.getIterator();for(;s.hasNext();){const c=s.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=o.get(c.largestBatchId);u===null&&(u=Wi(),o=o.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const l=Wi(),a=o.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>l.set(c,u)),!(l.size()>=i)););return V.resolve(l)}Pt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const s=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,s)}this.overlays=this.overlays.insert(r.key,new nM(n,r));let o=this.lr.get(n);o===void 0&&(o=Ee(),this.lr.set(n,o)),this.lr.set(n,o.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jg{constructor(){this.hr=new Yt(Rt.Pr),this.Ir=new Yt(Rt.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new Rt(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new Rt(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new re(new st([])),r=new Rt(n,e),i=new Rt(n,e+1),o=[];return this.Ir.forEachInRange([r,i],s=>{this.dr(s),o.push(s.key)}),o}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new re(new st([])),r=new Rt(n,e),i=new Rt(n,e+1);let o=Ee();return this.Ir.forEachInRange([r,i],s=>{o=o.add(s.key)}),o}containsKey(e){const n=new Rt(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class Rt{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return re.comparator(e.key,n.key)||De(e.gr,n.gr)}static Tr(e,n){return De(e.gr,n.gr)||re.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OM{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Yt(Rt.Pr)}checkEmpty(e){return V.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const o=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const s=new tM(o,n,r,i);this.mutationQueue.push(s);for(const l of i)this.yr=this.yr.add(new Rt(l.key,o)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return V.resolve(s)}lookupMutationBatch(e,n){return V.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Sr(r),o=i<0?0:i;return V.resolve(this.mutationQueue.length>o?this.mutationQueue[o]:null)}getHighestUnacknowledgedBatchId(){return V.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return V.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new Rt(n,0),i=new Rt(n,Number.POSITIVE_INFINITY),o=[];return this.yr.forEachInRange([r,i],s=>{const l=this.wr(s.gr);o.push(l)}),V.resolve(o)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Yt(De);return n.forEach(i=>{const o=new Rt(i,0),s=new Rt(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([o,s],l=>{r=r.add(l.gr)})}),V.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let o=r;re.isDocumentKey(o)||(o=o.child(""));const s=new Rt(new re(o),0);let l=new Yt(De);return this.yr.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(a.gr)),!0)},s),V.resolve(this.br(l))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Qe(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return V.forEach(n.mutations,i=>{const o=new Rt(i.key,n.batchId);return r=r.delete(o),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new Rt(n,0),i=this.yr.firstAfterOrEqual(r);return V.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,V.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MM{constructor(e){this.vr=e,this.docs=function(){return new it(re.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),o=i?i.size:0,s=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:s}),this.size+=s-o,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return V.resolve(r?r.document.mutableCopy():Gt.newInvalidDocument(n))}getEntries(e,n){let r=qr();return n.forEach(i=>{const o=this.docs.get(i);r=r.insert(i,o?o.document.mutableCopy():Gt.newInvalidDocument(i))}),V.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let o=qr();const s=n.path,l=new re(s.child("")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!s.isPrefixOf(c.path))break;c.path.length>s.length+1||vO(yO(u),r)<=0||(i.has(u.key)||Nd(n,u))&&(o=o.insert(u.key,u.mutableCopy()))}return V.resolve(o)}getAllFromCollectionGroup(e,n,r,i){ue()}Cr(e,n){return V.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new jM(this)}getSize(e){return V.resolve(this.size)}}class jM extends kM{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),V.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class LM{constructor(e){this.persistence=e,this.Fr=new As(n=>kg(n),bg),this.lastRemoteSnapshotVersion=he.min(),this.highestTargetId=0,this.Mr=0,this.Or=new jg,this.targetCount=0,this.Nr=ps.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),V.resolve()}getLastRemoteSnapshotVersion(e){return V.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return V.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),V.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),V.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new ps(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,V.resolve()}updateTargetData(e,n){return this.kn(n),V.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,V.resolve()}removeTargets(e,n,r){let i=0;const o=[];return this.Fr.forEach((s,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Fr.delete(s),o.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),V.waitFor(o).next(()=>i)}getTargetCount(e){return V.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return V.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),V.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,o=[];return i&&n.forEach(s=>{o.push(i.markPotentiallyOrphaned(e,s))}),V.waitFor(o)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),V.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return V.resolve(r)}containsKey(e,n){return V.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FM{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Pg(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new LM(this),this.indexManager=new IM,this.remoteDocumentCache=function(i){return new MM(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new PM(n),this.Kr=new DM(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new NM,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new OM(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){X("MemoryPersistence","Starting transaction:",e);const i=new VM(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(o=>this.referenceDelegate.Ur(i).next(()=>o)).toPromise().then(o=>(i.raiseOnCommittedEvent(),o))}Wr(e,n){return V.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class VM extends EO{constructor(e){super(),this.currentSequenceNumber=e}}class Lg{constructor(e){this.persistence=e,this.Gr=new jg,this.zr=null}static jr(e){return new Lg(e)}get Hr(){if(this.zr)return this.zr;throw ue()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),V.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),V.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),V.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(o=>this.Hr.add(o.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return V.forEach(this.Hr,r=>{const i=re.fromPath(r);return this.Jr(e,i).next(o=>{o||n.removeEntry(i,he.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return V.or([()=>V.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fg{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=Ee(),i=Ee();for(const o of n.docChanges)switch(o.type){case 0:r=r.add(o.doc.key);break;case 1:i=i.add(o.doc.key)}return new Fg(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UM{constructor(){this.Ki=!1}initialize(e,n){this.$i=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ui(e,n).next(o=>o||this.Wi(e,n,i,r)).next(o=>o||this.Gi(e,n))}Ui(e,n){if(e_(n))return V.resolve(null);let r=zr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Rp(n,null,"F"),r=zr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(o=>{const s=Ee(...o);return this.$i.getDocuments(e,s).next(l=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.zi(n,l);return this.ji(n,c,s,a.readTime)?this.Ui(e,Rp(n,null,"F")):this.Hi(e,c,n,a)}))})))}Wi(e,n,r,i){return e_(n)||i.isEqual(he.min())?this.Gi(e,n):this.$i.getDocuments(e,r).next(o=>{const s=this.zi(n,o);return this.ji(n,s,r,i)?this.Gi(e,n):(H0()<=xe.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),Ip(n)),this.Hi(e,s,n,gO(i,-1)))})}zi(e,n){let r=new Yt(nC(e));return n.forEach((i,o)=>{Nd(e,o)&&(r=r.add(o))}),r}ji(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const o=e.limitType==="F"?n.last():n.first();return!!o&&(o.hasPendingWrites||o.version.compareTo(i)>0)}Gi(e,n){return H0()<=xe.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",Ip(n)),this.$i.getDocumentsMatchingQuery(e,n,Ri.min())}Hi(e,n,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(o=>(n.forEach(s=>{o=o.insert(s.key,s)}),o))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $M{constructor(e,n,r,i){this.persistence=e,this.Ji=n,this.serializer=i,this.Yi=new it(De),this.Zi=new As(o=>kg(o),bg),this.Xi=new Map,this.es=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.ts(r)}ts(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new xM(this.es,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.es.setIndexManager(this.indexManager),this.Ji.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Yi))}}function BM(t,e,n,r){return new $M(t,e,n,r)}async function CC(t,e){const n=pe(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(o=>(i=o,n.ts(e),n.mutationQueue.getAllMutationBatches(r))).next(o=>{const s=[],l=[];let a=Ee();for(const c of i){s.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of o){l.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return n.localDocuments.getDocuments(r,a).next(c=>({ns:c,removedBatchIds:s,addedBatchIds:l}))})})}function zM(t,e){const n=pe(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),o=n.es.newChangeBuffer({trackRemovals:!0});return function(l,a,c,u){const d=c.batch,f=d.keys();let g=V.resolve();return f.forEach(p=>{g=g.next(()=>u.getEntry(a,p)).next(E=>{const T=c.docVersions.get(p);Qe(T!==null),E.version.compareTo(T)<0&&(d.applyToRemoteDocument(E,c),E.isValidDocument()&&(E.setReadTime(c.commitVersion),u.addEntry(E)))})}),g.next(()=>l.mutationQueue.removeMutationBatch(a,d))}(n,r,e,o).next(()=>o.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let a=Ee();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(a=a.add(l.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function PC(t){const e=pe(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function qM(t,e){const n=pe(t),r=e.snapshotVersion;let i=n.Yi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",o=>{const s=n.es.newChangeBuffer({trackRemovals:!0});i=n.Yi;const l=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;l.push(n.qr.removeMatchingKeys(o,u.removedDocuments,d).next(()=>n.qr.addMatchingKeys(o,u.addedDocuments,d)));let g=f.withSequenceNumber(o.currentSequenceNumber);e.targetMismatches.get(d)!==null?g=g.withResumeToken(tn.EMPTY_BYTE_STRING,he.min()).withLastLimboFreeSnapshotVersion(he.min()):u.resumeToken.approximateByteSize()>0&&(g=g.withResumeToken(u.resumeToken,r)),i=i.insert(d,g),function(E,T,v){return E.resumeToken.approximateByteSize()===0||T.snapshotVersion.toMicroseconds()-E.snapshotVersion.toMicroseconds()>=3e8?!0:v.addedDocuments.size+v.modifiedDocuments.size+v.removedDocuments.size>0}(f,g,u)&&l.push(n.qr.updateTargetData(o,g))});let a=qr(),c=Ee();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(o,u))}),l.push(HM(o,s,e.documentUpdates).next(u=>{a=u.rs,c=u.ss})),!r.isEqual(he.min())){const u=n.qr.getLastRemoteSnapshotVersion(o).next(d=>n.qr.setTargetsMetadata(o,o.currentSequenceNumber,r));l.push(u)}return V.waitFor(l).next(()=>s.apply(o)).next(()=>n.localDocuments.getLocalViewOfDocuments(o,a,c)).next(()=>a)}).then(o=>(n.Yi=i,o))}function HM(t,e,n){let r=Ee(),i=Ee();return n.forEach(o=>r=r.add(o)),e.getEntries(t,r).next(o=>{let s=qr();return n.forEach((l,a)=>{const c=o.get(l);a.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),a.isNoDocument()&&a.version.isEqual(he.min())?(e.removeEntry(l,a.readTime),s=s.insert(l,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),s=s.insert(l,a)):X("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",a.version)}),{rs:s,ss:i}})}function WM(t,e){const n=pe(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function GM(t,e){const n=pe(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(o=>o?(i=o,V.resolve(i)):n.qr.allocateTargetId(r).next(s=>(i=new di(e,s,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Yi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Yi=n.Yi.insert(r.targetId,r),n.Zi.set(e,r.targetId)),r})}async function Dp(t,e,n){const r=pe(t),i=r.Yi.get(e),o=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",o,s=>r.persistence.referenceDelegate.removeTarget(s,i))}catch(s){if(!jl(s))throw s;X("LocalStore",`Failed to update sequence numbers for target ${e}: ${s}`)}r.Yi=r.Yi.remove(e),r.Zi.delete(i.target)}function d_(t,e,n){const r=pe(t);let i=he.min(),o=Ee();return r.persistence.runTransaction("Execute query","readonly",s=>function(a,c,u){const d=pe(a),f=d.Zi.get(u);return f!==void 0?V.resolve(d.Yi.get(f)):d.qr.getTargetData(c,u)}(r,s,zr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(s,l.targetId).next(a=>{o=a})}).next(()=>r.Ji.getDocumentsMatchingQuery(s,e,n?i:he.min(),n?o:Ee())).next(l=>(KM(r,UO(e),l),{documents:l,os:o})))}function KM(t,e,n){let r=t.Xi.get(e)||he.min();n.forEach((i,o)=>{o.readTime.compareTo(r)>0&&(r=o.readTime)}),t.Xi.set(e,r)}class h_{constructor(){this.activeTargetIds=WO()}Ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}Is(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class JM{constructor(){this.Js=new h_,this.Ys={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Js.Ps(e),this.Ys[e]||"not-current"}updateQueryState(e,n,r){this.Ys[e]=n}removeLocalQueryTarget(e){this.Js.Is(e)}isLocalQueryTarget(e){return this.Js.activeTargetIds.has(e)}clearQueryState(e){delete this.Ys[e]}getAllActiveQueryTargets(){return this.Js.activeTargetIds}isActiveQueryTarget(e){return this.Js.activeTargetIds.has(e)}start(){return this.Js=new h_,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QM{Zs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class f_{constructor(){this.Xs=()=>this.eo(),this.no=()=>this.ro(),this.io=[],this.so()}Zs(e){this.io.push(e)}shutdown(){window.removeEventListener("online",this.Xs),window.removeEventListener("offline",this.no)}so(){window.addEventListener("online",this.Xs),window.addEventListener("offline",this.no)}eo(){X("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.io)e(0)}ro(){X("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.io)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Ec=null;function $h(){return Ec===null?Ec=function(){return 268435456+Math.round(2147483648*Math.random())}():Ec++,"0x"+Ec.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YM={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XM{constructor(e){this.oo=e.oo,this._o=e._o}ao(e){this.uo=e}co(e){this.lo=e}onMessage(e){this.ho=e}close(){this._o()}send(e){this.oo(e)}Po(){this.uo()}Io(e){this.lo(e)}To(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qt="WebChannelConnection";class ZM extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),o=encodeURIComponent(this.databaseId.database);this.Eo=r+"://"+n.host,this.Ao=`projects/${i}/databases/${o}`,this.Ro=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${o}`}get Vo(){return!1}mo(n,r,i,o,s){const l=$h(),a=this.fo(n,r);X("RestConnection",`Sending RPC '${n}' ${l}:`,a,i);const c={"google-cloud-resource-prefix":this.Ao,"x-goog-request-params":this.Ro};return this.po(c,o,s),this.yo(n,a,c,i).then(u=>(X("RestConnection",`Received RPC '${n}' ${l}: `,u),u),u=>{throw us("RestConnection",`RPC '${n}' ${l} failed with error: `,u,"url: ",a,"request:",i),u})}wo(n,r,i,o,s,l){return this.mo(n,r,i,o,s)}po(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Rs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((o,s)=>n[s]=o),i&&i.headers.forEach((o,s)=>n[s]=o)}fo(n,r){const i=YM[n];return`${this.Eo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}yo(e,n,r,i){const o=$h();return new Promise((s,l)=>{const a=new oO;a.setWithCredentials(!0),a.listenOnce(nO.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Vh.NO_ERROR:const u=a.getResponseJson();X(qt,`XHR for RPC '${e}' ${o} received:`,JSON.stringify(u)),s(u);break;case Vh.TIMEOUT:X(qt,`RPC '${e}' ${o} timed out`),l(new ie(j.DEADLINE_EXCEEDED,"Request time out"));break;case Vh.HTTP_ERROR:const d=a.getStatus();if(X(qt,`RPC '${e}' ${o} failed with status:`,d,"response text:",a.getResponseText()),d>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const g=f==null?void 0:f.error;if(g&&g.status&&g.message){const p=function(T){const v=T.toLowerCase().replace(/_/g,"-");return Object.values(j).indexOf(v)>=0?v:j.UNKNOWN}(g.status);l(new ie(p,g.message))}else l(new ie(j.UNKNOWN,"Server responded with status "+a.getStatus()))}else l(new ie(j.UNAVAILABLE,"Connection failed."));break;default:ue()}}finally{X(qt,`RPC '${e}' ${o} completed.`)}});const c=JSON.stringify(i);X(qt,`RPC '${e}' ${o} sending request:`,i),a.send(n,"POST",c,r,15)})}So(e,n,r){const i=$h(),o=[this.Eo,"/","google.firestore.v1.Firestore","/",e,"/channel"],s=eO(),l=tO(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new iO({})),this.po(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=o.join("");X(qt,`Creating RPC '${e}' stream ${i}: ${u}`,a);const d=s.createWebChannel(u,a);let f=!1,g=!1;const p=new XM({oo:T=>{g?X(qt,`Not sending because RPC '${e}' stream ${i} is closed:`,T):(f||(X(qt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),X(qt,`RPC '${e}' stream ${i} sending:`,T),d.send(T))},_o:()=>d.close()}),E=(T,v,m)=>{T.listen(v,S=>{try{m(S)}catch(_){setTimeout(()=>{throw _},0)}})};return E(d,gc.EventType.OPEN,()=>{g||X(qt,`RPC '${e}' stream ${i} transport opened.`)}),E(d,gc.EventType.CLOSE,()=>{g||(g=!0,X(qt,`RPC '${e}' stream ${i} transport closed`),p.Io())}),E(d,gc.EventType.ERROR,T=>{g||(g=!0,us(qt,`RPC '${e}' stream ${i} transport errored:`,T),p.Io(new ie(j.UNAVAILABLE,"The operation could not be completed")))}),E(d,gc.EventType.MESSAGE,T=>{var v;if(!g){const m=T.data[0];Qe(!!m);const S=m,_=S.error||((v=S[0])===null||v===void 0?void 0:v.error);if(_){X(qt,`RPC '${e}' stream ${i} received error:`,_);const C=_.status;let R=function(I){const w=mt[I];if(w!==void 0)return mC(w)}(C),b=_.message;R===void 0&&(R=j.INTERNAL,b="Unknown error status: "+C+" with message "+_.message),g=!0,p.Io(new ie(R,b)),d.close()}else X(qt,`RPC '${e}' stream ${i} received:`,m),p.To(m)}}),E(l,rO.STAT_EVENT,T=>{T.stat===z0.PROXY?X(qt,`RPC '${e}' stream ${i} detected buffering proxy`):T.stat===z0.NOPROXY&&X(qt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{p.Po()},0),p}}function Bh(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ld(t){return new dM(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RC{constructor(e,n,r=1e3,i=1.5,o=6e4){this.si=e,this.timerId=n,this.bo=r,this.Do=i,this.vo=o,this.Co=0,this.Fo=null,this.Mo=Date.now(),this.reset()}reset(){this.Co=0}xo(){this.Co=this.vo}Oo(e){this.cancel();const n=Math.floor(this.Co+this.No()),r=Math.max(0,Date.now()-this.Mo),i=Math.max(0,n-r);i>0&&X("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Co} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Fo=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Mo=Date.now(),e())),this.Co*=this.Do,this.Co<this.bo&&(this.Co=this.bo),this.Co>this.vo&&(this.Co=this.vo)}Bo(){this.Fo!==null&&(this.Fo.skipDelay(),this.Fo=null)}cancel(){this.Fo!==null&&(this.Fo.cancel(),this.Fo=null)}No(){return(Math.random()-.5)*this.Co}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IC{constructor(e,n,r,i,o,s,l,a){this.si=e,this.Lo=r,this.ko=i,this.connection=o,this.authCredentialsProvider=s,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.qo=0,this.Qo=null,this.Ko=null,this.stream=null,this.$o=new RC(e,n)}Uo(){return this.state===1||this.state===5||this.Wo()}Wo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}zo(){this.state=0,this.$o.reset()}jo(){this.Wo()&&this.Qo===null&&(this.Qo=this.si.enqueueAfterDelay(this.Lo,6e4,()=>this.Ho()))}Jo(e){this.Yo(),this.stream.send(e)}async Ho(){if(this.Wo())return this.close(0)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}async close(e,n){this.Yo(),this.Zo(),this.$o.cancel(),this.qo++,e!==4?this.$o.reset():n&&n.code===j.RESOURCE_EXHAUSTED?(Br(n.toString()),Br("Using maximum backoff delay to prevent overloading the backend."),this.$o.xo()):n&&n.code===j.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Xo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(n)}Xo(){}auth(){this.state=1;const e=this.e_(this.qo),n=this.qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.qo===n&&this.t_(r,i)},r=>{e(()=>{const i=new ie(j.UNKNOWN,"Fetching auth token failed: "+r.message);return this.n_(i)})})}t_(e,n){const r=this.e_(this.qo);this.stream=this.r_(e,n),this.stream.ao(()=>{r(()=>(this.state=2,this.Ko=this.si.enqueueAfterDelay(this.ko,1e4,()=>(this.Wo()&&(this.state=3),Promise.resolve())),this.listener.ao()))}),this.stream.co(i=>{r(()=>this.n_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.$o.Oo(async()=>{this.state=0,this.start()})}n_(e){return X("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}e_(e){return n=>{this.si.enqueueAndForget(()=>this.qo===e?n():(X("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class ej extends IC{constructor(e,n,r,i,o,s){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o}r_(e,n){return this.connection.So("Listen",e,n)}onMessage(e){this.$o.reset();const n=pM(this.serializer,e),r=function(o){if(!("targetChange"in o))return he.min();const s=o.targetChange;return s.targetIds&&s.targetIds.length?he.min():s.readTime?vr(s.readTime):he.min()}(e);return this.listener.i_(n,r)}s_(e){const n={};n.database=xp(this.serializer),n.addTarget=function(o,s){let l;const a=s.target;if(l=Pp(a)?{documents:yM(o,a)}:{query:vM(o,a)},l.targetId=s.targetId,s.resumeToken.approximateByteSize()>0){l.resumeToken=vC(o,s.resumeToken);const c=Ap(o,s.expectedCount);c!==null&&(l.expectedCount=c)}else if(s.snapshotVersion.compareTo(he.min())>0){l.readTime=Bu(o,s.snapshotVersion.toTimestamp());const c=Ap(o,s.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=EM(this.serializer,e);r&&(n.labels=r),this.Jo(n)}o_(e){const n={};n.database=xp(this.serializer),n.removeTarget=e,this.Jo(n)}}class tj extends IC{constructor(e,n,r,i,o,s){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,s),this.serializer=o,this.__=!1}get a_(){return this.__}start(){this.__=!1,this.lastStreamToken=void 0,super.start()}Xo(){this.__&&this.u_([])}r_(e,n){return this.connection.So("Write",e,n)}onMessage(e){if(Qe(!!e.streamToken),this.lastStreamToken=e.streamToken,this.__){this.$o.reset();const n=gM(e.writeResults,e.commitTime),r=vr(e.commitTime);return this.listener.c_(r,n)}return Qe(!e.writeResults||e.writeResults.length===0),this.__=!0,this.listener.l_()}h_(){const e={};e.database=xp(this.serializer),this.Jo(e)}u_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>mM(this.serializer,r))};this.Jo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nj extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.P_=!1}I_(){if(this.P_)throw new ie(j.FAILED_PRECONDITION,"The client has already been terminated.")}mo(e,n,r){return this.I_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,o])=>this.connection.mo(e,n,r,i,o)).catch(i=>{throw i.name==="FirebaseError"?(i.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new ie(j.UNKNOWN,i.toString())})}wo(e,n,r,i){return this.I_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([o,s])=>this.connection.wo(e,n,r,o,s,i)).catch(o=>{throw o.name==="FirebaseError"?(o.code===j.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),o):new ie(j.UNKNOWN,o.toString())})}terminate(){this.P_=!0}}class rj{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.E_=0,this.d_=null,this.A_=!0}R_(){this.E_===0&&(this.V_("Unknown"),this.d_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.d_=null,this.m_("Backend didn't respond within 10 seconds."),this.V_("Offline"),Promise.resolve())))}f_(e){this.state==="Online"?this.V_("Unknown"):(this.E_++,this.E_>=1&&(this.g_(),this.m_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.V_("Offline")))}set(e){this.g_(),this.E_=0,e==="Online"&&(this.A_=!1),this.V_(e)}V_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}m_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.A_?(Br(n),this.A_=!1):X("OnlineStateTracker",n)}g_(){this.d_!==null&&(this.d_.cancel(),this.d_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ij{constructor(e,n,r,i,o){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.p_=[],this.y_=new Map,this.w_=new Set,this.S_=[],this.b_=o,this.b_.Zs(s=>{r.enqueueAndForget(async()=>{yo(this)&&(X("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=pe(a);c.w_.add(4),await Vl(c),c.D_.set("Unknown"),c.w_.delete(4),await Fd(c)}(this))})}),this.D_=new rj(r,i)}}async function Fd(t){if(yo(t))for(const e of t.S_)await e(!0)}async function Vl(t){for(const e of t.S_)await e(!1)}function AC(t,e){const n=pe(t);n.y_.has(e.targetId)||(n.y_.set(e.targetId,e),$g(n)?Ug(n):ks(n).Wo()&&Vg(n,e))}function kC(t,e){const n=pe(t),r=ks(n);n.y_.delete(e),r.Wo()&&bC(n,e),n.y_.size===0&&(r.Wo()?r.jo():yo(n)&&n.D_.set("Unknown"))}function Vg(t,e){if(t.v_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(he.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}ks(t).s_(e)}function bC(t,e){t.v_.Le(e),ks(t).o_(e)}function Ug(t){t.v_=new aM({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ct:e=>t.y_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),ks(t).start(),t.D_.R_()}function $g(t){return yo(t)&&!ks(t).Uo()&&t.y_.size>0}function yo(t){return pe(t).w_.size===0}function xC(t){t.v_=void 0}async function oj(t){t.y_.forEach((e,n)=>{Vg(t,e)})}async function sj(t,e){xC(t),$g(t)?(t.D_.f_(e),Ug(t)):t.D_.set("Unknown")}async function aj(t,e,n){if(t.D_.set("Online"),e instanceof yC&&e.state===2&&e.cause)try{await async function(i,o){const s=o.cause;for(const l of o.targetIds)i.y_.has(l)&&(await i.remoteSyncer.rejectListen(l,s),i.y_.delete(l),i.v_.removeTarget(l))}(t,e)}catch(r){X("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await zu(t,r)}else if(e instanceof zc?t.v_.Ge(e):e instanceof gC?t.v_.Xe(e):t.v_.He(e),!n.isEqual(he.min()))try{const r=await PC(t.localStore);n.compareTo(r)>=0&&await function(o,s){const l=o.v_.ot(s);return l.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=o.y_.get(c);u&&o.y_.set(c,u.withResumeToken(a.resumeToken,s))}}),l.targetMismatches.forEach((a,c)=>{const u=o.y_.get(a);if(!u)return;o.y_.set(a,u.withResumeToken(tn.EMPTY_BYTE_STRING,u.snapshotVersion)),bC(o,a);const d=new di(u.target,a,c,u.sequenceNumber);Vg(o,d)}),o.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){X("RemoteStore","Failed to raise snapshot:",r),await zu(t,r)}}async function zu(t,e,n){if(!jl(e))throw e;t.w_.add(1),await Vl(t),t.D_.set("Offline"),n||(n=()=>PC(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{X("RemoteStore","Retrying IndexedDB access"),await n(),t.w_.delete(1),await Fd(t)})}function DC(t,e){return e().catch(n=>zu(t,n,e))}async function Vd(t){const e=pe(t),n=Ai(e);let r=e.p_.length>0?e.p_[e.p_.length-1].batchId:-1;for(;lj(e);)try{const i=await WM(e.localStore,r);if(i===null){e.p_.length===0&&n.jo();break}r=i.batchId,cj(e,i)}catch(i){await zu(e,i)}NC(e)&&OC(e)}function lj(t){return yo(t)&&t.p_.length<10}function cj(t,e){t.p_.push(e);const n=Ai(t);n.Wo()&&n.a_&&n.u_(e.mutations)}function NC(t){return yo(t)&&!Ai(t).Uo()&&t.p_.length>0}function OC(t){Ai(t).start()}async function uj(t){Ai(t).h_()}async function dj(t){const e=Ai(t);for(const n of t.p_)e.u_(n.mutations)}async function hj(t,e,n){const r=t.p_.shift(),i=Dg.from(r,e,n);await DC(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Vd(t)}async function fj(t,e){e&&Ai(t).a_&&await async function(r,i){if(function(s){return iM(s)&&s!==j.ABORTED}(i.code)){const o=r.p_.shift();Ai(r).zo(),await DC(r,()=>r.remoteSyncer.rejectFailedWrite(o.batchId,i)),await Vd(r)}}(t,e),NC(t)&&OC(t)}async function p_(t,e){const n=pe(t);n.asyncQueue.verifyOperationInProgress(),X("RemoteStore","RemoteStore received new credentials");const r=yo(n);n.w_.add(3),await Vl(n),r&&n.D_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.w_.delete(3),await Fd(n)}async function pj(t,e){const n=pe(t);e?(n.w_.delete(2),await Fd(n)):e||(n.w_.add(2),await Vl(n),n.D_.set("Unknown"))}function ks(t){return t.C_||(t.C_=function(n,r,i){const o=pe(n);return o.I_(),new ej(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ao:oj.bind(null,t),co:sj.bind(null,t),i_:aj.bind(null,t)}),t.S_.push(async e=>{e?(t.C_.zo(),$g(t)?Ug(t):t.D_.set("Unknown")):(await t.C_.stop(),xC(t))})),t.C_}function Ai(t){return t.F_||(t.F_=function(n,r,i){const o=pe(n);return o.I_(),new tj(r,o.connection,o.authCredentials,o.appCheckCredentials,o.serializer,i)}(t.datastore,t.asyncQueue,{ao:uj.bind(null,t),co:fj.bind(null,t),l_:dj.bind(null,t),c_:hj.bind(null,t)}),t.S_.push(async e=>{e?(t.F_.zo(),await Vd(t)):(await t.F_.stop(),t.p_.length>0&&(X("RemoteStore",`Stopping write stream with ${t.p_.length} pending writes`),t.p_=[]))})),t.F_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bg{constructor(e,n,r,i,o){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=o,this.deferred=new wi,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(s=>{})}static createAndSchedule(e,n,r,i,o){const s=Date.now()+r,l=new Bg(e,n,s,i,o);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new ie(j.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function zg(t,e){if(Br("AsyncQueue",`${e}: ${t}`),jl(t))return new ie(j.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xo{constructor(e){this.comparator=e?(n,r)=>e(n,r)||re.comparator(n.key,r.key):(n,r)=>re.comparator(n.key,r.key),this.keyedMap=aa(),this.sortedSet=new it(this.comparator)}static emptySet(e){return new Xo(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof Xo)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new Xo;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class m_{constructor(){this.M_=new it(re.comparator)}track(e){const n=e.doc.key,r=this.M_.get(n);r?e.type!==0&&r.type===3?this.M_=this.M_.insert(n,e):e.type===3&&r.type!==1?this.M_=this.M_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.M_=this.M_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.M_=this.M_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.M_=this.M_.remove(n):e.type===1&&r.type===2?this.M_=this.M_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.M_=this.M_.insert(n,{type:2,doc:e.doc}):ue():this.M_=this.M_.insert(n,e)}x_(){const e=[];return this.M_.inorderTraversal((n,r)=>{e.push(r)}),e}}class ms{constructor(e,n,r,i,o,s,l,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=o,this.fromCache=s,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,o){const s=[];return n.forEach(l=>{s.push({type:0,doc:l})}),new ms(e,n,Xo.emptySet(n),s,r,i,!0,!1,o)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&Dd(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mj{constructor(){this.O_=void 0,this.listeners=[]}}class gj{constructor(){this.queries=new As(e=>tC(e),Dd),this.onlineState="Unknown",this.N_=new Set}}async function yj(t,e){const n=pe(t),r=e.query;let i=!1,o=n.queries.get(r);if(o||(i=!0,o=new mj),i)try{o.O_=await n.onListen(r)}catch(s){const l=zg(s,`Initialization of query '${Ip(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,o),o.listeners.push(e),e.B_(n.onlineState),o.O_&&e.L_(o.O_)&&qg(n)}async function vj(t,e){const n=pe(t),r=e.query;let i=!1;const o=n.queries.get(r);if(o){const s=o.listeners.indexOf(e);s>=0&&(o.listeners.splice(s,1),i=o.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function _j(t,e){const n=pe(t);let r=!1;for(const i of e){const o=i.query,s=n.queries.get(o);if(s){for(const l of s.listeners)l.L_(i)&&(r=!0);s.O_=i}}r&&qg(n)}function Ej(t,e,n){const r=pe(t),i=r.queries.get(e);if(i)for(const o of i.listeners)o.onError(n);r.queries.delete(e)}function qg(t){t.N_.forEach(e=>{e.next()})}class Sj{constructor(e,n,r){this.query=e,this.k_=n,this.q_=!1,this.Q_=null,this.onlineState="Unknown",this.options=r||{}}L_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new ms(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.q_?this.K_(e)&&(this.k_.next(e),n=!0):this.U_(e,this.onlineState)&&(this.W_(e),n=!0),this.Q_=e,n}onError(e){this.k_.error(e)}B_(e){this.onlineState=e;let n=!1;return this.Q_&&!this.q_&&this.U_(this.Q_,e)&&(this.W_(this.Q_),n=!0),n}U_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.G_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}K_(e){if(e.docChanges.length>0)return!0;const n=this.Q_&&this.Q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}W_(e){e=ms.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.q_=!0,this.k_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MC{constructor(e){this.key=e}}class jC{constructor(e){this.key=e}}class Tj{constructor(e,n){this.query=e,this.ea=n,this.ta=null,this.hasCachedResults=!1,this.current=!1,this.na=Ee(),this.mutatedKeys=Ee(),this.ra=nC(e),this.ia=new Xo(this.ra)}get sa(){return this.ea}oa(e,n){const r=n?n._a:new m_,i=n?n.ia:this.ia;let o=n?n.mutatedKeys:this.mutatedKeys,s=i,l=!1;const a=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),g=Nd(this.query,d)?d:null,p=!!f&&this.mutatedKeys.has(f.key),E=!!g&&(g.hasLocalMutations||this.mutatedKeys.has(g.key)&&g.hasCommittedMutations);let T=!1;f&&g?f.data.isEqual(g.data)?p!==E&&(r.track({type:3,doc:g}),T=!0):this.aa(f,g)||(r.track({type:2,doc:g}),T=!0,(a&&this.ra(g,a)>0||c&&this.ra(g,c)<0)&&(l=!0)):!f&&g?(r.track({type:0,doc:g}),T=!0):f&&!g&&(r.track({type:1,doc:f}),T=!0,(a||c)&&(l=!0)),T&&(g?(s=s.add(g),o=E?o.add(u):o.delete(u)):(s=s.delete(u),o=o.delete(u)))}),this.query.limit!==null)for(;s.size>this.query.limit;){const u=this.query.limitType==="F"?s.last():s.first();s=s.delete(u.key),o=o.delete(u.key),r.track({type:1,doc:u})}return{ia:s,_a:r,ji:l,mutatedKeys:o}}aa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ia;this.ia=e.ia,this.mutatedKeys=e.mutatedKeys;const o=e._a.x_();o.sort((c,u)=>function(f,g){const p=E=>{switch(E){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ue()}};return p(f)-p(g)}(c.type,u.type)||this.ra(c.doc,u.doc)),this.ua(r);const s=n?this.ca():[],l=this.na.size===0&&this.current?1:0,a=l!==this.ta;return this.ta=l,o.length!==0||a?{snapshot:new ms(this.query,e.ia,i,o,e.mutatedKeys,l===0,a,!1,!!r&&r.resumeToken.approximateByteSize()>0),la:s}:{la:s}}B_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ia:this.ia,_a:new m_,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{la:[]}}ha(e){return!this.ea.has(e)&&!!this.ia.has(e)&&!this.ia.get(e).hasLocalMutations}ua(e){e&&(e.addedDocuments.forEach(n=>this.ea=this.ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ea=this.ea.delete(n)),this.current=e.current)}ca(){if(!this.current)return[];const e=this.na;this.na=Ee(),this.ia.forEach(r=>{this.ha(r.key)&&(this.na=this.na.add(r.key))});const n=[];return e.forEach(r=>{this.na.has(r)||n.push(new jC(r))}),this.na.forEach(r=>{e.has(r)||n.push(new MC(r))}),n}Pa(e){this.ea=e.os,this.na=Ee();const n=this.oa(e.documents);return this.applyChanges(n,!0)}Ia(){return ms.fromInitialDocuments(this.query,this.ia,this.mutatedKeys,this.ta===0,this.hasCachedResults)}}class wj{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class Cj{constructor(e){this.key=e,this.Ta=!1}}class Pj{constructor(e,n,r,i,o,s){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=o,this.maxConcurrentLimboResolutions=s,this.Ea={},this.da=new As(l=>tC(l),Dd),this.Aa=new Map,this.Ra=new Set,this.Va=new it(re.comparator),this.ma=new Map,this.fa=new jg,this.ga={},this.pa=new Map,this.ya=ps.Nn(),this.onlineState="Unknown",this.wa=void 0}get isPrimaryClient(){return this.wa===!0}}async function Rj(t,e){const n=jj(t);let r,i;const o=n.da.get(e);if(o)r=o.targetId,n.sharedClientState.addLocalQueryTarget(r),i=o.view.Ia();else{const s=await GM(n.localStore,zr(e)),l=n.sharedClientState.addLocalQueryTarget(s.targetId);r=s.targetId,i=await Ij(n,e,r,l==="current",s.resumeToken),n.isPrimaryClient&&AC(n.remoteStore,s)}return i}async function Ij(t,e,n,r,i){t.Sa=(d,f,g)=>async function(E,T,v,m){let S=T.view.oa(v);S.ji&&(S=await d_(E.localStore,T.query,!1).then(({documents:R})=>T.view.oa(R,S)));const _=m&&m.targetChanges.get(T.targetId),C=T.view.applyChanges(S,E.isPrimaryClient,_);return y_(E,T.targetId,C.la),C.snapshot}(t,d,f,g);const o=await d_(t.localStore,e,!0),s=new Tj(e,o.os),l=s.oa(o.documents),a=Fl.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=s.applyChanges(l,t.isPrimaryClient,a);y_(t,n,c.la);const u=new wj(e,n,s);return t.da.set(e,u),t.Aa.has(n)?t.Aa.get(n).push(e):t.Aa.set(n,[e]),c.snapshot}async function Aj(t,e){const n=pe(t),r=n.da.get(e),i=n.Aa.get(r.targetId);if(i.length>1)return n.Aa.set(r.targetId,i.filter(o=>!Dd(o,e))),void n.da.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Dp(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),kC(n.remoteStore,r.targetId),Np(n,r.targetId)}).catch(Ml)):(Np(n,r.targetId),await Dp(n.localStore,r.targetId,!0))}async function kj(t,e,n){const r=Lj(t);try{const i=await function(s,l){const a=pe(s),c=Ct.now(),u=l.reduce((g,p)=>g.add(p.key),Ee());let d,f;return a.persistence.runTransaction("Locally write mutations","readwrite",g=>{let p=qr(),E=Ee();return a.es.getEntries(g,u).next(T=>{p=T,p.forEach((v,m)=>{m.isValidDocument()||(E=E.add(v))})}).next(()=>a.localDocuments.getOverlayedDocuments(g,p)).next(T=>{d=T;const v=[];for(const m of l){const S=ZO(m,d.get(m.key).overlayedDocument);S!=null&&v.push(new go(m.key,S,Kw(S.value.mapValue),Or.exists(!0)))}return a.mutationQueue.addMutationBatch(g,c,v,l)}).next(T=>{f=T;const v=T.applyToLocalDocumentSet(d,E);return a.documentOverlayCache.saveOverlays(g,T.batchId,v)})}).then(()=>({batchId:f.batchId,changes:iC(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(s,l,a){let c=s.ga[s.currentUser.toKey()];c||(c=new it(De)),c=c.insert(l,a),s.ga[s.currentUser.toKey()]=c}(r,i.batchId,n),await Ul(r,i.changes),await Vd(r.remoteStore)}catch(i){const o=zg(i,"Failed to persist write");n.reject(o)}}async function LC(t,e){const n=pe(t);try{const r=await qM(n.localStore,e);e.targetChanges.forEach((i,o)=>{const s=n.ma.get(o);s&&(Qe(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?s.Ta=!0:i.modifiedDocuments.size>0?Qe(s.Ta):i.removedDocuments.size>0&&(Qe(s.Ta),s.Ta=!1))}),await Ul(n,r,e)}catch(r){await Ml(r)}}function g_(t,e,n){const r=pe(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.da.forEach((o,s)=>{const l=s.view.B_(e);l.snapshot&&i.push(l.snapshot)}),function(s,l){const a=pe(s);a.onlineState=l;let c=!1;a.queries.forEach((u,d)=>{for(const f of d.listeners)f.B_(l)&&(c=!0)}),c&&qg(a)}(r.eventManager,e),i.length&&r.Ea.i_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function bj(t,e,n){const r=pe(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ma.get(e),o=i&&i.key;if(o){let s=new it(re.comparator);s=s.insert(o,Gt.newNoDocument(o,he.min()));const l=Ee().add(o),a=new jd(he.min(),new Map,new it(De),s,l);await LC(r,a),r.Va=r.Va.remove(o),r.ma.delete(e),Hg(r)}else await Dp(r.localStore,e,!1).then(()=>Np(r,e,n)).catch(Ml)}async function xj(t,e){const n=pe(t),r=e.batch.batchId;try{const i=await zM(n.localStore,e);VC(n,r,null),FC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Ul(n,i)}catch(i){await Ml(i)}}async function Dj(t,e,n){const r=pe(t);try{const i=await function(s,l){const a=pe(s);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,l).next(d=>(Qe(d!==null),u=d.keys(),a.mutationQueue.removeMutationBatch(c,d))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,l)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);VC(r,e,n),FC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Ul(r,i)}catch(i){await Ml(i)}}function FC(t,e){(t.pa.get(e)||[]).forEach(n=>{n.resolve()}),t.pa.delete(e)}function VC(t,e,n){const r=pe(t);let i=r.ga[r.currentUser.toKey()];if(i){const o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.ga[r.currentUser.toKey()]=i}}function Np(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Aa.get(e))t.da.delete(r),n&&t.Ea.ba(r,n);t.Aa.delete(e),t.isPrimaryClient&&t.fa.Rr(e).forEach(r=>{t.fa.containsKey(r)||UC(t,r)})}function UC(t,e){t.Ra.delete(e.path.canonicalString());const n=t.Va.get(e);n!==null&&(kC(t.remoteStore,n),t.Va=t.Va.remove(e),t.ma.delete(n),Hg(t))}function y_(t,e,n){for(const r of n)r instanceof MC?(t.fa.addReference(r.key,e),Nj(t,r)):r instanceof jC?(X("SyncEngine","Document no longer in limbo: "+r.key),t.fa.removeReference(r.key,e),t.fa.containsKey(r.key)||UC(t,r.key)):ue()}function Nj(t,e){const n=e.key,r=n.path.canonicalString();t.Va.get(n)||t.Ra.has(r)||(X("SyncEngine","New document in limbo: "+n),t.Ra.add(r),Hg(t))}function Hg(t){for(;t.Ra.size>0&&t.Va.size<t.maxConcurrentLimboResolutions;){const e=t.Ra.values().next().value;t.Ra.delete(e);const n=new re(st.fromString(e)),r=t.ya.next();t.ma.set(r,new Cj(n)),t.Va=t.Va.insert(n,r),AC(t.remoteStore,new di(zr(xg(n.path)),r,"TargetPurposeLimboResolution",Pg.ae))}}async function Ul(t,e,n){const r=pe(t),i=[],o=[],s=[];r.da.isEmpty()||(r.da.forEach((l,a)=>{s.push(r.Sa(a,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=Fg.Qi(a.targetId,c);o.push(u)}}))}),await Promise.all(s),r.Ea.i_(i),await async function(a,c){const u=pe(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>V.forEach(c,f=>V.forEach(f.ki,g=>u.persistence.referenceDelegate.addReference(d,f.targetId,g)).next(()=>V.forEach(f.qi,g=>u.persistence.referenceDelegate.removeReference(d,f.targetId,g)))))}catch(d){if(!jl(d))throw d;X("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const g=u.Yi.get(f),p=g.snapshotVersion,E=g.withLastLimboFreeSnapshotVersion(p);u.Yi=u.Yi.insert(f,E)}}}(r.localStore,o))}async function Oj(t,e){const n=pe(t);if(!n.currentUser.isEqual(e)){X("SyncEngine","User change. New user:",e.toKey());const r=await CC(n.localStore,e);n.currentUser=e,function(o,s){o.pa.forEach(l=>{l.forEach(a=>{a.reject(new ie(j.CANCELLED,s))})}),o.pa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Ul(n,r.ns)}}function Mj(t,e){const n=pe(t),r=n.ma.get(e);if(r&&r.Ta)return Ee().add(r.key);{let i=Ee();const o=n.Aa.get(e);if(!o)return i;for(const s of o){const l=n.da.get(s);i=i.unionWith(l.view.sa)}return i}}function jj(t){const e=pe(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=LC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=Mj.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=bj.bind(null,e),e.Ea.i_=_j.bind(null,e.eventManager),e.Ea.ba=Ej.bind(null,e.eventManager),e}function Lj(t){const e=pe(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=xj.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=Dj.bind(null,e),e}class v_{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Ld(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return BM(this.persistence,new UM,e.initialUser,this.serializer)}createPersistence(e){return new FM(Lg.jr,this.serializer)}createSharedClientState(e){return new JM}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class Fj{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>g_(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Oj.bind(null,this.syncEngine),await pj(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new gj}()}createDatastore(e){const n=Ld(e.databaseInfo.databaseId),r=function(o){return new ZM(o)}(e.databaseInfo);return function(o,s,l,a){return new nj(o,s,l,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,o,s,l){return new ij(r,i,o,s,l)}(this.localStore,this.datastore,e.asyncQueue,n=>g_(this.syncEngine,n,0),function(){return f_.v()?new f_:new QM}())}createSyncEngine(e,n){return function(i,o,s,l,a,c,u){const d=new Pj(i,o,s,l,a,c);return u&&(d.wa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=pe(n);X("RemoteStore","RemoteStore shutting down."),r.w_.add(5),await Vl(r),r.b_.shutdown(),r.D_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vj{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ca(this.observer.next,e)}error(e){this.observer.error?this.Ca(this.observer.error,e):Br("Uncaught Error in snapshot listener:",e.toString())}Fa(){this.muted=!0}Ca(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Uj{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=Ht.UNAUTHENTICATED,this.clientId=Hw.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async o=>{X("FirestoreClient","Received user=",o.uid),await this.authCredentialListener(o),this.user=o}),this.appCheckCredentials.start(r,o=>(X("FirestoreClient","Received new app check token=",o),this.appCheckCredentialListener(o,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new ie(j.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new wi;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=zg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function zh(t,e){t.asyncQueue.verifyOperationInProgress(),X("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await CC(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function __(t,e){t.asyncQueue.verifyOperationInProgress();const n=await Bj(t);X("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>p_(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,o)=>p_(e.remoteStore,o)),t._onlineComponents=e}function $j(t){return t.name==="FirebaseError"?t.code===j.FAILED_PRECONDITION||t.code===j.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function Bj(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){X("FirestoreClient","Using user provided OfflineComponentProvider");try{await zh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!$j(n))throw n;us("Error using user provided cache. Falling back to memory cache: "+n),await zh(t,new v_)}}else X("FirestoreClient","Using default OfflineComponentProvider"),await zh(t,new v_);return t._offlineComponents}async function $C(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(X("FirestoreClient","Using user provided OnlineComponentProvider"),await __(t,t._uninitializedComponentsProvider._online)):(X("FirestoreClient","Using default OnlineComponentProvider"),await __(t,new Fj))),t._onlineComponents}function zj(t){return $C(t).then(e=>e.syncEngine)}async function qj(t){const e=await $C(t),n=e.eventManager;return n.onListen=Rj.bind(null,e.syncEngine),n.onUnlisten=Aj.bind(null,e.syncEngine),n}function Hj(t,e,n={}){const r=new wi;return t.asyncQueue.enqueueAndForget(async()=>function(o,s,l,a,c){const u=new Vj({next:f=>{s.enqueueAndForget(()=>vj(o,d));const g=f.docs.has(l);!g&&f.fromCache?c.reject(new ie(j.UNAVAILABLE,"Failed to get document because the client is offline.")):g&&f.fromCache&&a&&a.source==="server"?c.reject(new ie(j.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new Sj(xg(l.path),u,{includeMetadataChanges:!0,G_:!0});return yj(o,d)}(await qj(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const E_=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Wj(t,e,n){if(!n)throw new ie(j.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function Gj(t,e,n,r){if(e===!0&&r===!0)throw new ie(j.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function S_(t){if(!re.isDocumentKey(t))throw new ie(j.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function Wg(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":ue()}function cl(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new ie(j.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=Wg(t);throw new ie(j.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class T_{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new ie(j.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new ie(j.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}Gj("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=BC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(o){if(o.timeoutSeconds!==void 0){if(isNaN(o.timeoutSeconds))throw new ie(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (must not be NaN)`);if(o.timeoutSeconds<5)throw new ie(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (minimum allowed value is 5)`);if(o.timeoutSeconds>30)throw new ie(j.INVALID_ARGUMENT,`invalid long polling timeout: ${o.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class Gg{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new T_({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new ie(j.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new ie(j.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new T_(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new aO;switch(r.type){case"firstParty":return new dO(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new ie(j.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=E_.get(n);r&&(X("ComponentProvider","Removing Datastore"),E_.delete(n),r.terminate())}(this),Promise.resolve()}}function Kj(t,e,n,r={}){var i;const o=(t=cl(t,Gg))._getSettings(),s=`${e}:${n}`;if(o.host!=="firestore.googleapis.com"&&o.host!==s&&us("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},o),{host:s,ssl:!1})),r.mockUserToken){let l,a;if(typeof r.mockUserToken=="string")l=r.mockUserToken,a=Ht.MOCK_USER;else{l=Tb(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new ie(j.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new Ht(c)}t._authCredentials=new lO(new qw(l,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Kg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new Kg(this.firestore,e,this._query)}}class Mn{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new ul(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new Mn(this.firestore,e,this._key)}}class ul extends Kg{constructor(e,n,r){super(e,n,xg(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new Mn(this.firestore,null,new re(e))}withConverter(e){return new ul(this.firestore,e,this._path)}}function Op(t,e,...n){if(t=Vn(t),arguments.length===1&&(e=Hw.V()),Wj("doc","path",e),t instanceof Gg){const r=st.fromString(e,...n);return S_(r),new Mn(t,null,new re(r))}{if(!(t instanceof Mn||t instanceof ul))throw new ie(j.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(st.fromString(e,...n));return S_(r),new Mn(t.firestore,t instanceof ul?t.converter:null,new re(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Jj{constructor(){this.Ga=Promise.resolve(),this.za=[],this.ja=!1,this.Ha=[],this.Ja=null,this.Ya=!1,this.Za=!1,this.Xa=[],this.$o=new RC(this,"async_queue_retry"),this.eu=()=>{const n=Bh();n&&X("AsyncQueue","Visibility state changed to "+n.visibilityState),this.$o.Bo()};const e=Bh();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.eu)}get isShuttingDown(){return this.ja}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.tu(),this.nu(e)}enterRestrictedMode(e){if(!this.ja){this.ja=!0,this.Za=e||!1;const n=Bh();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.eu)}}enqueue(e){if(this.tu(),this.ja)return new Promise(()=>{});const n=new wi;return this.nu(()=>this.ja&&this.Za?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.za.push(e),this.ru()))}async ru(){if(this.za.length!==0){try{await this.za[0](),this.za.shift(),this.$o.reset()}catch(e){if(!jl(e))throw e;X("AsyncQueue","Operation failed with retryable error: "+e)}this.za.length>0&&this.$o.Oo(()=>this.ru())}}nu(e){const n=this.Ga.then(()=>(this.Ya=!0,e().catch(r=>{this.Ja=r,this.Ya=!1;const i=function(s){let l=s.message||"";return s.stack&&(l=s.stack.includes(s.message)?s.stack:s.message+`
`+s.stack),l}(r);throw Br("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ya=!1,r))));return this.Ga=n,n}enqueueAfterDelay(e,n,r){this.tu(),this.Xa.indexOf(e)>-1&&(n=0);const i=Bg.createAndSchedule(this,e,n,r,o=>this.iu(o));return this.Ha.push(i),i}tu(){this.Ja&&ue()}verifyOperationInProgress(){}async su(){let e;do e=this.Ga,await e;while(e!==this.Ga)}ou(e){for(const n of this.Ha)if(n.timerId===e)return!0;return!1}_u(e){return this.su().then(()=>{this.Ha.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ha)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.su()})}au(e){this.Xa.push(e)}iu(e){const n=this.Ha.indexOf(e);this.Ha.splice(n,1)}}class Jg extends Gg{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new Jj}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||qC(this),this._firestoreClient.terminate()}}function Mp(t,e){const n=typeof t=="object"?t:lT(),r=typeof t=="string"?t:e||"(default)",i=Wm(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const o=Eb("firestore");o&&Kj(i,...o)}return i}function zC(t){return t._firestoreClient||qC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function qC(t){var e,n,r;const i=t._freezeSettings(),o=function(l,a,c,u){return new wO(l,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,BC(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new Uj(t._authCredentials,t._appCheckCredentials,t._queue,o),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new gs(tn.fromBase64String(e))}catch(n){throw new ie(j.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new gs(tn.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qg{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new ie(j.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Kt(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new ie(j.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new ie(j.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return De(this._lat,e._lat)||De(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Qj=/^__.*__$/;class Yj{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new go(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ll(e,this.data,n,this.fieldTransforms)}}function WC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ue()}}class Xg{constructor(e,n,r,i,o,s){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,o===void 0&&this.uu(),this.fieldTransforms=o||[],this.fieldMask=s||[]}get path(){return this.settings.path}get cu(){return this.settings.cu}lu(e){return new Xg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}hu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.lu({path:r,Pu:!1});return i.Iu(e),i}Tu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.lu({path:r,Pu:!1});return i.uu(),i}Eu(e){return this.lu({path:void 0,Pu:!0})}du(e){return qu(e,this.settings.methodName,this.settings.Au||!1,this.path,this.settings.Ru)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}uu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Iu(this.path.get(e))}Iu(e){if(e.length===0)throw this.du("Document fields must not be empty");if(WC(this.cu)&&Qj.test(e))throw this.du('Document fields cannot begin and end with "__"')}}class Xj{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Ld(e)}Vu(e,n,r,i=!1){return new Xg({cu:e,methodName:n,Ru:r,path:Kt.emptyPath(),Pu:!1,Au:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function Zj(t){const e=t._freezeSettings(),n=Ld(t._databaseId);return new Xj(t._databaseId,!!e.ignoreUndefinedProperties,n)}function eL(t,e,n,r,i,o={}){const s=t.Vu(o.merge||o.mergeFields?2:0,e,n,i);QC("Data must be an object, but it was:",s,r);const l=KC(r,s);let a,c;if(o.merge)a=new Kn(s.fieldMask),c=s.fieldTransforms;else if(o.mergeFields){const u=[];for(const d of o.mergeFields){const f=tL(e,d,n);if(!s.contains(f))throw new ie(j.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);rL(u,f)||u.push(f)}a=new Kn(u),c=s.fieldTransforms.filter(d=>a.covers(d.field))}else a=null,c=s.fieldTransforms;return new Yj(new Dn(l),a,c)}function GC(t,e){if(JC(t=Vn(t)))return QC("Unsupported field value:",e,t),KC(t,e);if(t instanceof HC)return function(r,i){if(!WC(i.cu))throw i.du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.du(`${r._methodName}() is not currently supported inside arrays`);const o=r._toFieldTransform(i);o&&i.fieldTransforms.push(o)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Pu&&e.cu!==4)throw e.du("Nested arrays are not supported");return function(r,i){const o=[];let s=0;for(const l of r){let a=GC(l,i.Eu(s));a==null&&(a={nullValue:"NULL_VALUE"}),o.push(a),s++}return{arrayValue:{values:o}}}(t,e)}return function(r,i){if((r=Vn(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return GO(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const o=Ct.fromDate(r);return{timestampValue:Bu(i.serializer,o)}}if(r instanceof Ct){const o=new Ct(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Bu(i.serializer,o)}}if(r instanceof Yg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof gs)return{bytesValue:vC(i.serializer,r._byteString)};if(r instanceof Mn){const o=i.databaseId,s=r.firestore._databaseId;if(!s.isEqual(o))throw i.du(`Document reference is for database ${s.projectId}/${s.database} but should be for database ${o.projectId}/${o.database}`);return{referenceValue:Mg(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.du(`Unsupported field value: ${Wg(r)}`)}(t,e)}function KC(t,e){const n={};return Ww(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Is(t,(r,i)=>{const o=GC(i,e.hu(r));o!=null&&(n[r]=o)}),{mapValue:{fields:n}}}function JC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Ct||t instanceof Yg||t instanceof gs||t instanceof Mn||t instanceof HC)}function QC(t,e,n){if(!JC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=Wg(n);throw r==="an object"?e.du(t+" a custom object"):e.du(t+" "+r)}}function tL(t,e,n){if((e=Vn(e))instanceof Qg)return e._internalPath;if(typeof e=="string")return YC(t,e);throw qu("Field path arguments must be of type string or ",t,!1,void 0,n)}const nL=new RegExp("[~\\*/\\[\\]]");function YC(t,e,n){if(e.search(nL)>=0)throw qu(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new Qg(...e.split("."))._internalPath}catch{throw qu(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function qu(t,e,n,r,i){const o=r&&!r.isEmpty(),s=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(o||s)&&(a+=" (found",o&&(a+=` in field ${r}`),s&&(a+=` in document ${i}`),a+=")"),new ie(j.INVALID_ARGUMENT,l+t+a)}function rL(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XC{constructor(e,n,r,i,o){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=o}get id(){return this._key.path.lastSegment()}get ref(){return new Mn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new iL(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(ZC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class iL extends XC{data(){return super.data()}}function ZC(t,e){return typeof e=="string"?YC(t,e):e instanceof Qg?e._internalPath:e._delegate._internalPath}class oL{convertValue(e,n="none"){switch(co(e)){case 0:return null;case 1:return e.booleanValue;case 2:return yt(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(lo(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw ue()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return Is(e,(i,o)=>{r[i]=this.convertValue(o,n)}),r}convertGeoPoint(e){return new Yg(yt(e.latitude),yt(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=Ig(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(il(e));default:return null}}convertTimestamp(e){const n=Ii(e);return new Ct(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=st.fromString(e);Qe(wC(r));const i=new ol(r.get(1),r.get(3)),o=new re(r.popFirst(5));return i.isEqual(n)||Br(`Document ${o} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),o}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aL{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class eP extends XC{constructor(e,n,r,i,o,s){super(e,n,r,i,s),this._firestore=e,this._firestoreImpl=e,this.metadata=o}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new lL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(ZC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class lL extends eP{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function tP(t){t=cl(t,Mn);const e=cl(t.firestore,Jg);return Hj(zC(e),t._key).then(n=>hL(e,t,n))}class cL extends oL{constructor(e){super(),this.firestore=e}convertBytes(e){return new gs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new Mn(this.firestore,null,n)}}function uL(t,e,n){t=cl(t,Mn);const r=cl(t.firestore,Jg),i=sL(t.converter,e,n);return dL(r,[eL(Zj(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,Or.none())])}function dL(t,e){return function(r,i){const o=new wi;return r.asyncQueue.enqueueAndForget(async()=>kj(await zj(r),i,o)),o.promise}(zC(t),e)}function hL(t,e,n){const r=n.docs.get(e._key),i=new cL(t);return new eP(t,i,e._key,r,new aL(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Rs=i})(Ts),as(new ro("firestore",(r,{instanceIdentifier:i,options:o})=>{const s=r.getProvider("app").getImmediate(),l=new Jg(new cO(r.getProvider("auth-internal")),new fO(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new ie(j.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ol(c.options.projectId,u)}(s,i),s);return o=Object.assign({useFetchStreams:n},o),l._setSettings(o),l},"PUBLIC").setMultipleInstances(!0)),Ti(q0,"4.1.1",e),Ti(q0,"4.1.1","esm2017")})();function fL(t){const[e,n]=k.useState(!1);return h.jsx(h.Fragment,{children:t.currentUser===void 0?h.jsxs(h.Fragment,{children:[h.jsxs("nav",{className:"login",children:[h.jsx("button",{"data-selected":e===!1,onClick:()=>{n(!1)},children:"LOGIN"}),h.jsx("button",{"data-selected":e===!0,onClick:()=>{n(!0)},children:"REGISTER"})]}),h.jsx("br",{}),h.jsxs("main",{className:"login",children:[e?h.jsx("input",{id:"login-name",type:"text",placeholder:"name"}):h.jsx(h.Fragment,{}),h.jsx("input",{type:"text",id:"login-email",placeholder:"email"}),h.jsx("input",{type:"password",id:"login-password",placeholder:"password"}),h.jsxs("p",{children:["remember this account",h.jsx("input",{type:"checkbox",style:{display:"inline-block"},placeholder:"password",id:"rememberacc"})]})]}),h.jsxs("center",{children:[" ",h.jsx("button",{onClick:()=>{if(t.admin===void 0){alert("firebase couldnot connect");return}const r=ZD(t.admin),i=document.getElementById("login-email").value,o=document.getElementById("login-password").value;if(e){const s=document.getElementById("login-name").value;j2(r,i,o).then(l=>{V2(l.user,{displayName:s});const a=l.user.uid;if(document.userid=a,t.admin===void 0){alert("firebase couldnot connect");return}const c=Mp(t.admin),u={email:i,name:s,score:0,id:a};uL(Op(c,`Users/${a}`),u),u.id=a,t.onLogin(u,document.getElementById("rememberacc").checked??!1)}).catch(l=>{alert(l)})}else L2(r,i,o).then(s=>{const l=s.user.uid;document.userid=l,t.admin!==void 0?tP(Op(Mp(t.admin),`Users/${l}`)).then(a=>{const c=a.data();c.id=l,t.onLogin(c,document.getElementById("rememberacc").checked??!1)}).catch(a=>{alert(a)}):alert("couldnt connect to firebase")}).catch(s=>{alert(s)})},children:e?"register":"login"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"user-credentials",children:[h.jsxs("p",{children:[t.currentUser.name," ",h.jsxs("p",{style:{opacity:.5},children:["[",h.jsx("p",{style:{fontStyle:"italic"},children:t.currentUser.email}),"]"]})]}),h.jsx("button",{onClick:()=>{document.userid=void 0,t.onLogout()},children:"loggout"})]}),h.jsx("h2",{children:"User Statistics"}),h.jsx("table",{children:h.jsxs("tr",{children:[h.jsx("td",{children:"score"}),h.jsx("td",{children:t.currentUser.score})]})})]})})}function pL(t){const[e,n]=k.useState(t.deafultIndex??0);return h.jsxs("div",{className:"switcher-component",children:[h.jsx("button",{className:"switcher-component",onClick:()=>{var i;var r=e-1;r<0&&(r+=t.options.length),(i=t.onChange)==null||i.call(t,t.options[r],r),n(r)},children:"<"}),h.jsx("p",{className:"switcher-component",children:t.options[t.Value??e]}),h.jsx("button",{className:"switcher-component",onClick:()=>{var i;var r=e+1;r>=t.options.length&&(r-=t.options.length),(i=t.onChange)==null||i.call(t,t.options[r],r),n(r)},children:">"})]})}function mL(t){const e=["Recruit","Regular","Hardened","Veteran"],[n,r]=k.useState([1]);return k.useEffect(()=>{t.OnChange(n.map(i=>e[i]))},[n]),h.jsxs(h.Fragment,{children:[n.map((i,o)=>h.jsxs("div",{className:"bot-list-element",children:[h.jsx("p",{children:"Bot"}),h.jsx(pL,{options:e,Value:i,deafultIndex:i,onChange:(s,l)=>{const a=JSON.parse(JSON.stringify(n));a[o]=l,r(a)}}),h.jsx("img",{src:"trash.png",alt:"",onClick:()=>{const s=JSON.parse(JSON.stringify(n));s.splice(o,1),r(s)}})]},o)),n.length!==5?h.jsx("div",{className:"bot-list-add",onClick:()=>{n.length<=4&&r(i=>[...i,1])},children:h.jsx("p",{children:"add bot"})}):h.jsx(h.Fragment,{})]})}function gL(t){const[e,n]=k.useState(0);return h.jsxs(h.Fragment,{children:[h.jsxs("nav",{className:"join",children:[h.jsx("button",{"data-tooltip-hover":"online","data-select":e===0,onClick:()=>{n(0)},children:h.jsx("img",{src:"online.png",alt:""})}),h.jsx("button",{"data-tooltip-hover":"computer","data-select":e===1,onClick:()=>{n(1)},children:h.jsx("img",{src:"bot.png",alt:""})})]}),h.jsx("br",{}),e===1?h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("p",{children:"please enter your name:"}),t.fbUser===void 0?h.jsx("input",{type:"text",id:"name",onChange:r=>{t.SetName(r.currentTarget.value)},defaultValue:t.name,placeholder:"enter name"}):h.jsx("input",{type:"text",id:"name",disabled:!0,value:t.fbUser.name,placeholder:"enter name"})]},"bots-name"),h.jsx("p",{children:"bots settings:"}),h.jsx(mL,{OnChange:r=>{console.log(r)}}),h.jsx("center",{children:h.jsx("button",{onClick:()=>{},disabled:t.disabled,children:"start"})})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{children:[h.jsx("p",{children:"please enter your code:"}),h.jsx("input",{type:"text",id:"name",onChange:r=>t.SetAddress(r.currentTarget.value),defaultValue:t.addr,placeholder:"enter code"})]},"online-code"),h.jsxs("div",{children:[h.jsx("p",{children:"please enter your name:"}),t.fbUser===void 0?h.jsx("input",{type:"text",id:"name",onChange:r=>{t.SetName(r.currentTarget.value)},defaultValue:t.name,placeholder:"enter name"}):h.jsx("input",{type:"text",id:"name",disabled:!0,value:t.name,placeholder:"enter name"})]},"online-name"),h.jsx("center",{children:h.jsx("button",{onClick:()=>{t.joinViaCode()},disabled:t.disabled,children:"join"})})]})]})}const yL={apiKey:"AIzaSyAWWAOKvGp2rJg2LhVincjI2oPtC9uscds",authDomain:"monopoly-react.firebaseapp.com",projectId:"monopoly-react",storageBucket:"monopoly-react.appspot.com",messagingSenderId:"530562047914",appId:"1:530562047914:web:7c8a437bbff0abd89f55d3",measurementId:"G-PPJLPZZLZ0"},vL={url:"https://api.jsonbin.io/v3/b/64dff3e3b89b1e2299d2cfcf",masterKey:"$2b$10$Wolgp1Pl5jFGDnkTsivU/.pRmpFnK7gC00691IZleh4TplMzzo6bG",accessKey:"$2b$10$j9L0hVDvDISi4oZqAB.hwOhZpH9MdF6xD0d/X5gjLt/nYanpSzbbi"},lr={firebase:yL,JSONBin:vL};var _L="firebase",EL="10.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Ti(_L,EL,"app");function nP(t,e){return function(){return t.apply(e,arguments)}}const{toString:SL}=Object.prototype,{getPrototypeOf:Zg}=Object,Ud=(t=>e=>{const n=SL.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Tr=t=>(t=t.toLowerCase(),e=>Ud(e)===t),$d=t=>e=>typeof e===t,{isArray:bs}=Array,dl=$d("undefined");function TL(t){return t!==null&&!dl(t)&&t.constructor!==null&&!dl(t.constructor)&&jn(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const rP=Tr("ArrayBuffer");function wL(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&rP(t.buffer),e}const CL=$d("string"),jn=$d("function"),iP=$d("number"),Bd=t=>t!==null&&typeof t=="object",PL=t=>t===!0||t===!1,qc=t=>{if(Ud(t)!=="object")return!1;const e=Zg(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},RL=Tr("Date"),IL=Tr("File"),AL=Tr("Blob"),kL=Tr("FileList"),bL=t=>Bd(t)&&jn(t.pipe),xL=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||jn(t.append)&&((e=Ud(t))==="formdata"||e==="object"&&jn(t.toString)&&t.toString()==="[object FormData]"))},DL=Tr("URLSearchParams"),NL=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function $l(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),bs(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const o=n?Object.getOwnPropertyNames(t):Object.keys(t),s=o.length;let l;for(r=0;r<s;r++)l=o[r],e.call(null,t[l],l,t)}}function oP(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const sP=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),aP=t=>!dl(t)&&t!==sP;function jp(){const{caseless:t}=aP(this)&&this||{},e={},n=(r,i)=>{const o=t&&oP(e,i)||i;qc(e[o])&&qc(r)?e[o]=jp(e[o],r):qc(r)?e[o]=jp({},r):bs(r)?e[o]=r.slice():e[o]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&$l(arguments[r],n);return e}const OL=(t,e,n,{allOwnKeys:r}={})=>($l(e,(i,o)=>{n&&jn(i)?t[o]=nP(i,n):t[o]=i},{allOwnKeys:r}),t),ML=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),jL=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},LL=(t,e,n,r)=>{let i,o,s;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),o=i.length;o-- >0;)s=i[o],(!r||r(s,t,e))&&!l[s]&&(e[s]=t[s],l[s]=!0);t=n!==!1&&Zg(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},FL=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},VL=t=>{if(!t)return null;if(bs(t))return t;let e=t.length;if(!iP(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},UL=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&Zg(Uint8Array)),$L=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const o=i.value;e.call(t,o[0],o[1])}},BL=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},zL=Tr("HTMLFormElement"),qL=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),w_=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),HL=Tr("RegExp"),lP=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};$l(n,(i,o)=>{e(i,o,t)!==!1&&(r[o]=i)}),Object.defineProperties(t,r)},WL=t=>{lP(t,(e,n)=>{if(jn(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(jn(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},GL=(t,e)=>{const n={},r=i=>{i.forEach(o=>{n[o]=!0})};return bs(t)?r(t):r(String(t).split(e)),n},KL=()=>{},JL=(t,e)=>(t=+t,Number.isFinite(t)?t:e),qh="abcdefghijklmnopqrstuvwxyz",C_="0123456789",cP={DIGIT:C_,ALPHA:qh,ALPHA_DIGIT:qh+qh.toUpperCase()+C_},QL=(t=16,e=cP.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function YL(t){return!!(t&&jn(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const XL=t=>{const e=new Array(10),n=(r,i)=>{if(Bd(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const o=bs(r)?[]:{};return $l(r,(s,l)=>{const a=n(s,i+1);!dl(a)&&(o[l]=a)}),e[i]=void 0,o}}return r};return n(t,0)},ZL=Tr("AsyncFunction"),e5=t=>t&&(Bd(t)||jn(t))&&jn(t.then)&&jn(t.catch),x={isArray:bs,isArrayBuffer:rP,isBuffer:TL,isFormData:xL,isArrayBufferView:wL,isString:CL,isNumber:iP,isBoolean:PL,isObject:Bd,isPlainObject:qc,isUndefined:dl,isDate:RL,isFile:IL,isBlob:AL,isRegExp:HL,isFunction:jn,isStream:bL,isURLSearchParams:DL,isTypedArray:UL,isFileList:kL,forEach:$l,merge:jp,extend:OL,trim:NL,stripBOM:ML,inherits:jL,toFlatObject:LL,kindOf:Ud,kindOfTest:Tr,endsWith:FL,toArray:VL,forEachEntry:$L,matchAll:BL,isHTMLForm:zL,hasOwnProperty:w_,hasOwnProp:w_,reduceDescriptors:lP,freezeMethods:WL,toObjectSet:GL,toCamelCase:qL,noop:KL,toFiniteNumber:JL,findKey:oP,global:sP,isContextDefined:aP,ALPHABET:cP,generateString:QL,isSpecCompliantForm:YL,toJSONObject:XL,isAsyncFn:ZL,isThenable:e5};function Ae(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}x.inherits(Ae,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:x.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const uP=Ae.prototype,dP={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{dP[t]={value:t}});Object.defineProperties(Ae,dP);Object.defineProperty(uP,"isAxiosError",{value:!0});Ae.from=(t,e,n,r,i,o)=>{const s=Object.create(uP);return x.toFlatObject(t,s,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),Ae.call(s,t.message,e,n,r,i),s.cause=t,s.name=t.name,o&&Object.assign(s,o),s};const t5=null;function Lp(t){return x.isPlainObject(t)||x.isArray(t)}function hP(t){return x.endsWith(t,"[]")?t.slice(0,-2):t}function P_(t,e,n){return t?t.concat(e).map(function(i,o){return i=hP(i),!n&&o?"["+i+"]":i}).join(n?".":""):e}function n5(t){return x.isArray(t)&&!t.some(Lp)}const r5=x.toFlatObject(x,{},null,function(e){return/^is[A-Z]/.test(e)});function zd(t,e,n){if(!x.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=x.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(E,T){return!x.isUndefined(T[E])});const r=n.metaTokens,i=n.visitor||u,o=n.dots,s=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&x.isSpecCompliantForm(e);if(!x.isFunction(i))throw new TypeError("visitor must be a function");function c(p){if(p===null)return"";if(x.isDate(p))return p.toISOString();if(!a&&x.isBlob(p))throw new Ae("Blob is not supported. Use a Buffer instead.");return x.isArrayBuffer(p)||x.isTypedArray(p)?a&&typeof Blob=="function"?new Blob([p]):Buffer.from(p):p}function u(p,E,T){let v=p;if(p&&!T&&typeof p=="object"){if(x.endsWith(E,"{}"))E=r?E:E.slice(0,-2),p=JSON.stringify(p);else if(x.isArray(p)&&n5(p)||(x.isFileList(p)||x.endsWith(E,"[]"))&&(v=x.toArray(p)))return E=hP(E),v.forEach(function(S,_){!(x.isUndefined(S)||S===null)&&e.append(s===!0?P_([E],_,o):s===null?E:E+"[]",c(S))}),!1}return Lp(p)?!0:(e.append(P_(T,E,o),c(p)),!1)}const d=[],f=Object.assign(r5,{defaultVisitor:u,convertValue:c,isVisitable:Lp});function g(p,E){if(!x.isUndefined(p)){if(d.indexOf(p)!==-1)throw Error("Circular reference detected in "+E.join("."));d.push(p),x.forEach(p,function(v,m){(!(x.isUndefined(v)||v===null)&&i.call(e,v,x.isString(m)?m.trim():m,E,f))===!0&&g(v,E?E.concat(m):[m])}),d.pop()}}if(!x.isObject(t))throw new TypeError("data must be an object");return g(t),e}function R_(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function ey(t,e){this._pairs=[],t&&zd(t,this,e)}const fP=ey.prototype;fP.append=function(e,n){this._pairs.push([e,n])};fP.toString=function(e){const n=e?function(r){return e.call(this,r,R_)}:R_;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function i5(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function pP(t,e,n){if(!e)return t;const r=n&&n.encode||i5,i=n&&n.serialize;let o;if(i?o=i(e,n):o=x.isURLSearchParams(e)?e.toString():new ey(e,n).toString(r),o){const s=t.indexOf("#");s!==-1&&(t=t.slice(0,s)),t+=(t.indexOf("?")===-1?"?":"&")+o}return t}class o5{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){x.forEach(this.handlers,function(r){r!==null&&e(r)})}}const I_=o5,mP={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},s5=typeof URLSearchParams<"u"?URLSearchParams:ey,a5=typeof FormData<"u"?FormData:null,l5=typeof Blob<"u"?Blob:null,c5=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),u5=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),fr={isBrowser:!0,classes:{URLSearchParams:s5,FormData:a5,Blob:l5},isStandardBrowserEnv:c5,isStandardBrowserWebWorkerEnv:u5,protocols:["http","https","file","blob","url","data"]};function d5(t,e){return zd(t,new fr.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,o){return fr.isNode&&x.isBuffer(n)?(this.append(r,n.toString("base64")),!1):o.defaultVisitor.apply(this,arguments)}},e))}function h5(t){return x.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function f5(t){const e={},n=Object.keys(t);let r;const i=n.length;let o;for(r=0;r<i;r++)o=n[r],e[o]=t[o];return e}function gP(t){function e(n,r,i,o){let s=n[o++];const l=Number.isFinite(+s),a=o>=n.length;return s=!s&&x.isArray(i)?i.length:s,a?(x.hasOwnProp(i,s)?i[s]=[i[s],r]:i[s]=r,!l):((!i[s]||!x.isObject(i[s]))&&(i[s]=[]),e(n,r,i[s],o)&&x.isArray(i[s])&&(i[s]=f5(i[s])),!l)}if(x.isFormData(t)&&x.isFunction(t.entries)){const n={};return x.forEachEntry(t,(r,i)=>{e(h5(r),i,n,0)}),n}return null}const p5={"Content-Type":void 0};function m5(t,e,n){if(x.isString(t))try{return(e||JSON.parse)(t),x.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const qd={transitional:mP,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,o=x.isObject(e);if(o&&x.isHTMLForm(e)&&(e=new FormData(e)),x.isFormData(e))return i&&i?JSON.stringify(gP(e)):e;if(x.isArrayBuffer(e)||x.isBuffer(e)||x.isStream(e)||x.isFile(e)||x.isBlob(e))return e;if(x.isArrayBufferView(e))return e.buffer;if(x.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(o){if(r.indexOf("application/x-www-form-urlencoded")>-1)return d5(e,this.formSerializer).toString();if((l=x.isFileList(e))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return zd(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return o||i?(n.setContentType("application/json",!1),m5(e)):e}],transformResponse:[function(e){const n=this.transitional||qd.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&x.isString(e)&&(r&&!this.responseType||i)){const s=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(s)throw l.name==="SyntaxError"?Ae.from(l,Ae.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:fr.classes.FormData,Blob:fr.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};x.forEach(["delete","get","head"],function(e){qd.headers[e]={}});x.forEach(["post","put","patch"],function(e){qd.headers[e]=x.merge(p5)});const ty=qd,g5=x.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),y5=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(s){i=s.indexOf(":"),n=s.substring(0,i).trim().toLowerCase(),r=s.substring(i+1).trim(),!(!n||e[n]&&g5[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},A_=Symbol("internals");function Js(t){return t&&String(t).trim().toLowerCase()}function Hc(t){return t===!1||t==null?t:x.isArray(t)?t.map(Hc):String(t)}function v5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const _5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function Hh(t,e,n,r,i){if(x.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!x.isString(e)){if(x.isString(r))return e.indexOf(r)!==-1;if(x.isRegExp(r))return r.test(e)}}function E5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function S5(t,e){const n=x.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,o,s){return this[r].call(this,e,i,o,s)},configurable:!0})})}class Hd{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function o(l,a,c){const u=Js(a);if(!u)throw new Error("header name must be a non-empty string");const d=x.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||a]=Hc(l))}const s=(l,a)=>x.forEach(l,(c,u)=>o(c,u,a));return x.isPlainObject(e)||e instanceof this.constructor?s(e,n):x.isString(e)&&(e=e.trim())&&!_5(e)?s(y5(e),n):e!=null&&o(n,e,r),this}get(e,n){if(e=Js(e),e){const r=x.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return v5(i);if(x.isFunction(n))return n.call(this,i,r);if(x.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=Js(e),e){const r=x.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||Hh(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function o(s){if(s=Js(s),s){const l=x.findKey(r,s);l&&(!n||Hh(r,r[l],l,n))&&(delete r[l],i=!0)}}return x.isArray(e)?e.forEach(o):o(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const o=n[r];(!e||Hh(this,this[o],o,e,!0))&&(delete this[o],i=!0)}return i}normalize(e){const n=this,r={};return x.forEach(this,(i,o)=>{const s=x.findKey(r,o);if(s){n[s]=Hc(i),delete n[o];return}const l=e?E5(o):String(o).trim();l!==o&&delete n[o],n[l]=Hc(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return x.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&x.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[A_]=this[A_]={accessors:{}}).accessors,i=this.prototype;function o(s){const l=Js(s);r[l]||(S5(i,s),r[l]=!0)}return x.isArray(e)?e.forEach(o):o(e),this}}Hd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);x.freezeMethods(Hd.prototype);x.freezeMethods(Hd);const Mr=Hd;function Wh(t,e){const n=this||ty,r=e||n,i=Mr.from(r.headers);let o=r.data;return x.forEach(t,function(l){o=l.call(n,o,i.normalize(),e?e.status:void 0)}),i.normalize(),o}function yP(t){return!!(t&&t.__CANCEL__)}function Bl(t,e,n){Ae.call(this,t??"canceled",Ae.ERR_CANCELED,e,n),this.name="CanceledError"}x.inherits(Bl,Ae,{__CANCEL__:!0});function T5(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new Ae("Request failed with status code "+n.status,[Ae.ERR_BAD_REQUEST,Ae.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const w5=fr.isStandardBrowserEnv?function(){return{write:function(n,r,i,o,s,l){const a=[];a.push(n+"="+encodeURIComponent(r)),x.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),x.isString(o)&&a.push("path="+o),x.isString(s)&&a.push("domain="+s),l===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function C5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function P5(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function vP(t,e){return t&&!C5(e)?P5(t,e):e}const R5=fr.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(o){let s=o;return e&&(n.setAttribute("href",s),s=n.href),n.setAttribute("href",s),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(s){const l=x.isString(s)?i(s):s;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function I5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function A5(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,o=0,s;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),u=r[o];s||(s=c),n[i]=a,r[i]=c;let d=o,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===o&&(o=(o+1)%t),c-s<e)return;const g=u&&c-u;return g?Math.round(f*1e3/g):void 0}}function k_(t,e){let n=0;const r=A5(50,250);return i=>{const o=i.loaded,s=i.lengthComputable?i.total:void 0,l=o-n,a=r(l),c=o<=s;n=o;const u={loaded:o,total:s,progress:s?o/s:void 0,bytes:l,rate:a||void 0,estimated:a&&s&&c?(s-o)/a:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const k5=typeof XMLHttpRequest<"u",b5=k5&&function(t){return new Promise(function(n,r){let i=t.data;const o=Mr.from(t.headers).normalize(),s=t.responseType;let l;function a(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}x.isFormData(i)&&(fr.isStandardBrowserEnv||fr.isStandardBrowserWebWorkerEnv?o.setContentType(!1):o.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(t.auth){const g=t.auth.username||"",p=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";o.set("Authorization","Basic "+btoa(g+":"+p))}const u=vP(t.baseURL,t.url);c.open(t.method.toUpperCase(),pP(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function d(){if(!c)return;const g=Mr.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),E={data:!s||s==="text"||s==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:g,config:t,request:c};T5(function(v){n(v),a()},function(v){r(v),a()},E),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(r(new Ae("Request aborted",Ae.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new Ae("Network Error",Ae.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let p=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const E=t.transitional||mP;t.timeoutErrorMessage&&(p=t.timeoutErrorMessage),r(new Ae(p,E.clarifyTimeoutError?Ae.ETIMEDOUT:Ae.ECONNABORTED,t,c)),c=null},fr.isStandardBrowserEnv){const g=(t.withCredentials||R5(u))&&t.xsrfCookieName&&w5.read(t.xsrfCookieName);g&&o.set(t.xsrfHeaderName,g)}i===void 0&&o.setContentType(null),"setRequestHeader"in c&&x.forEach(o.toJSON(),function(p,E){c.setRequestHeader(E,p)}),x.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),s&&s!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",k_(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",k_(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=g=>{c&&(r(!g||g.type?new Bl(null,t,c):g),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const f=I5(u);if(f&&fr.protocols.indexOf(f)===-1){r(new Ae("Unsupported protocol "+f+":",Ae.ERR_BAD_REQUEST,t));return}c.send(i||null)})},Wc={http:t5,xhr:b5};x.forEach(Wc,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const x5={getAdapter:t=>{t=x.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=x.isString(n)?Wc[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new Ae(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(x.hasOwnProp(Wc,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!x.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:Wc};function Gh(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Bl(null,t)}function b_(t){return Gh(t),t.headers=Mr.from(t.headers),t.data=Wh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),x5.getAdapter(t.adapter||ty.adapter)(t).then(function(r){return Gh(t),r.data=Wh.call(t,t.transformResponse,r),r.headers=Mr.from(r.headers),r},function(r){return yP(r)||(Gh(t),r&&r.response&&(r.response.data=Wh.call(t,t.transformResponse,r.response),r.response.headers=Mr.from(r.response.headers))),Promise.reject(r)})}const x_=t=>t instanceof Mr?t.toJSON():t;function ys(t,e){e=e||{};const n={};function r(c,u,d){return x.isPlainObject(c)&&x.isPlainObject(u)?x.merge.call({caseless:d},c,u):x.isPlainObject(u)?x.merge({},u):x.isArray(u)?u.slice():u}function i(c,u,d){if(x.isUndefined(u)){if(!x.isUndefined(c))return r(void 0,c,d)}else return r(c,u,d)}function o(c,u){if(!x.isUndefined(u))return r(void 0,u)}function s(c,u){if(x.isUndefined(u)){if(!x.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function l(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const a={url:o,method:o,data:o,baseURL:s,transformRequest:s,transformResponse:s,paramsSerializer:s,timeout:s,timeoutMessage:s,withCredentials:s,adapter:s,responseType:s,xsrfCookieName:s,xsrfHeaderName:s,onUploadProgress:s,onDownloadProgress:s,decompress:s,maxContentLength:s,maxBodyLength:s,beforeRedirect:s,transport:s,httpAgent:s,httpsAgent:s,cancelToken:s,socketPath:s,responseEncoding:s,validateStatus:l,headers:(c,u)=>i(x_(c),x_(u),!0)};return x.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=a[u]||i,f=d(t[u],e[u],u);x.isUndefined(f)&&d!==l||(n[u]=f)}),n}const _P="1.4.0",ny={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{ny[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const D_={};ny.transitional=function(e,n,r){function i(o,s){return"[Axios v"+_P+"] Transitional option '"+o+"'"+s+(r?". "+r:"")}return(o,s,l)=>{if(e===!1)throw new Ae(i(s," has been removed"+(n?" in "+n:"")),Ae.ERR_DEPRECATED);return n&&!D_[s]&&(D_[s]=!0,console.warn(i(s," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(o,s,l):!0}};function D5(t,e,n){if(typeof t!="object")throw new Ae("options must be an object",Ae.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const o=r[i],s=e[o];if(s){const l=t[o],a=l===void 0||s(l,o,t);if(a!==!0)throw new Ae("option "+o+" must be "+a,Ae.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new Ae("Unknown option "+o,Ae.ERR_BAD_OPTION)}}const Fp={assertOptions:D5,validators:ny},ei=Fp.validators;class Hu{constructor(e){this.defaults=e,this.interceptors={request:new I_,response:new I_}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=ys(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:o}=n;r!==void 0&&Fp.assertOptions(r,{silentJSONParsing:ei.transitional(ei.boolean),forcedJSONParsing:ei.transitional(ei.boolean),clarifyTimeoutError:ei.transitional(ei.boolean)},!1),i!=null&&(x.isFunction(i)?n.paramsSerializer={serialize:i}:Fp.assertOptions(i,{encode:ei.function,serialize:ei.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let s;s=o&&x.merge(o.common,o[n.method]),s&&x.forEach(["delete","get","head","post","put","patch","common"],p=>{delete o[p]}),n.headers=Mr.concat(s,o);const l=[];let a=!0;this.interceptors.request.forEach(function(E){typeof E.runWhen=="function"&&E.runWhen(n)===!1||(a=a&&E.synchronous,l.unshift(E.fulfilled,E.rejected))});const c=[];this.interceptors.response.forEach(function(E){c.push(E.fulfilled,E.rejected)});let u,d=0,f;if(!a){const p=[b_.bind(this),void 0];for(p.unshift.apply(p,l),p.push.apply(p,c),f=p.length,u=Promise.resolve(n);d<f;)u=u.then(p[d++],p[d++]);return u}f=l.length;let g=n;for(d=0;d<f;){const p=l[d++],E=l[d++];try{g=p(g)}catch(T){E.call(this,T);break}}try{u=b_.call(this,g)}catch(p){return Promise.reject(p)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=ys(this.defaults,e);const n=vP(e.baseURL,e.url);return pP(n,e.params,e.paramsSerializer)}}x.forEach(["delete","get","head","options"],function(e){Hu.prototype[e]=function(n,r){return this.request(ys(r||{},{method:e,url:n,data:(r||{}).data}))}});x.forEach(["post","put","patch"],function(e){function n(r){return function(o,s,l){return this.request(ys(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:o,data:s}))}}Hu.prototype[e]=n(),Hu.prototype[e+"Form"]=n(!0)});const Gc=Hu;class ry{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(o){n=o});const r=this;this.promise.then(i=>{if(!r._listeners)return;let o=r._listeners.length;for(;o-- >0;)r._listeners[o](i);r._listeners=null}),this.promise.then=i=>{let o;const s=new Promise(l=>{r.subscribe(l),o=l}).then(i);return s.cancel=function(){r.unsubscribe(o)},s},e(function(o,s,l){r.reason||(r.reason=new Bl(o,s,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new ry(function(i){e=i}),cancel:e}}}const N5=ry;function O5(t){return function(n){return t.apply(null,n)}}function M5(t){return x.isObject(t)&&t.isAxiosError===!0}const Vp={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Vp).forEach(([t,e])=>{Vp[e]=t});const j5=Vp;function EP(t){const e=new Gc(t),n=nP(Gc.prototype.request,e);return x.extend(n,Gc.prototype,e,{allOwnKeys:!0}),x.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return EP(ys(t,i))},n}const Pt=EP(ty);Pt.Axios=Gc;Pt.CanceledError=Bl;Pt.CancelToken=N5;Pt.isCancel=yP;Pt.VERSION=_P;Pt.toFormData=zd;Pt.AxiosError=Ae;Pt.Cancel=Pt.CanceledError;Pt.all=function(e){return Promise.all(e)};Pt.spread=O5;Pt.isAxiosError=M5;Pt.mergeConfig=ys;Pt.AxiosHeaders=Mr;Pt.formToJSON=t=>gP(x.isHTMLForm(t)?new FormData(t):t);Pt.HttpStatusCode=j5;Pt.default=Pt;const N_=Pt;class L5{constructor(e,n,r){Le(this,"id");Le(this,"username");Le(this,"icon");Le(this,"position");Le(this,"balance");Le(this,"properties");Le(this,"isInJail");Le(this,"jailTurnsRemaining");Le(this,"getoutCards");this.id=e,this.username=n,this.icon=r,this.position=0,this.balance=1500,this.properties=[],this.isInJail=!1,this.jailTurnsRemaining=0,this.getoutCards=0}to_json(){return{id:this.id,username:this.username,icon:this.icon,position:this.position,balance:this.balance,properties:this.properties,isInJail:this.isInJail,jailTurnsRemaining:this.jailTurnsRemaining,getoutCards:this.getoutCards}}from_json(e){this.id==e.id&&(this.position=e.position,this.balance=e.balance,this.properties=e.properties,this.isInJail=e.isInJail,this.jailTurnsRemaining=e.jailTurnsRemaining,this.getoutCards=e.getoutCards)}}async function F5(t,e){const n=()=>{async function f(){try{return(await N_.get(`${lr.JSONBin.url}/latest`,{headers:{"X-Master-Key":lr.JSONBin.masterKey,"X-Access-Key":lr.JSONBin.accessKey}})).data.record}catch(v){console.error("Error reading data:",v)}}async function g(v){try{await N_.put(`${lr.JSONBin.url}`,v,{headers:{"Content-Type":"application/json","X-Master-Key":lr.JSONBin.masterKey,"X-Access-Key":lr.JSONBin.accessKey}})}catch(m){console.error("Error writing data:",m)}}async function p(v){const m=await f();Object.keys(m).includes(v)&&delete m[v],await g(m)}async function E(){await g({clear:new Date().toISOString()})}async function T(v){function m(R){const b="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let y="";for(let I=0;I<R;I++){const w=Math.floor(Math.random()*b.length);y+=b[w]}return y}var S=m(6);const _=await f();for(;Object.keys(_).includes(S);)S=m(6);const C=v;if(Object.values(_).includes(C))for(const R of Object.entries(_))R[1]===C&&delete _[R[0]];return _[S]=C,await g(_),S}return{Write:g,Read:f,Delete:p,Generate:T,Clear:E}},r=t>0?Math.min(t,6):6;console.log(`Max Players is ${r}...
`);const i=new Map,o=[];let s="",l=!1,a=0;function c(){const f=new Date,g=String(f.getHours()).padStart(2,"0"),p=String(f.getMinutes()).padStart(2,"0");return`${g}:${p}`}function u(f,g){for(const p of Array.from(i.values()))p.socket.emit(f,g)}function d(f,g,p){for(const E of Array.from(i.entries()))E[0]!=f&&E[1].socket.emit(g,p)}new hb(async(f,g)=>{var p=await n().Generate(f);return e==null||e(p,g),async()=>{await n().Delete(p)}},(f,g)=>{const p=l?1:i.size>=r?2:0;f.emit("state",p),p===0?(f.on("name",E=>{try{const T=new L5(f.id,E,Array.from(i.keys()).length);(s===""||!Array.from(i.keys()).includes(s))&&(s=f.id),i.set(f.id,{player:T,socket:f,ready:!1,positions:{x:0,y:0}}),g.logFunction(`{${c()}} [${f.id}] Player "${T.username}" has connected.`),o.push(`{${c()}} [${f.id}] Player "${T.username}" has connected.`);const v=[];for(const m of Array.from(i.values()))v.push(m.player.to_json());f.emit("initials",{turn_id:s,other_players:v}),d(f.id,"new-player",T.to_json()),f.on("unjail",m=>{try{u("unjail",{to:T.id,option:m})}catch(S){g.logFunction(S)}}),f.on("roll_dice",()=>{try{const S=Math.floor(Math.random()*6)+1,_=Math.floor(Math.random()*6)+1,C=`{${c()}} [${f.id}] Player "${T.username}" rolled a [${S},${_}].`;o.push(C),g.logFunction(C);const R=S+_;var m=(T.position+R)%40;u("dice_roll_result",{listOfNums:[S,_,m],turnId:s})}catch(S){g.logFunction(S)}}),f.on("chorch_roll",m=>{try{const S=m.is_chance?Nr.chance:Nr.communitychest,_=S[Math.floor(Math.random()*S.length)];u("chorch_result",{element:_,is_chance:m.is_chance,rolls:m.rolls,turnId:s})}catch(S){g.logFunction(S)}}),f.on("player_update",m=>{const S=i.get(m.playerId);S!==void 0&&(S.player.from_json(m.pJson),d(m.playerId,"player_update",m))}),f.on("finish-turn",m=>{try{if(T.from_json(m),s!=f.id)return;const _=Array.from(i.values()).filter(C=>C.player.balance>0).map(C=>C.player.id);var S=_.indexOf(f.id);S=(S+1)%_.length,s=_[S],u("turn-finished",{from:f.id,turnId:s,pJson:T.to_json()})}catch(_){g.logFunction(_)}}),f.on("message",m=>{var S;try{g.logFunction(`{${c()}} [${f.id}] Player "${(S=i.get(f.id))==null?void 0:S.player.username}" has messaged "${m}".`),u("message",{from:T.username,message:m})}catch(_){g.logFunction(_)}}),f.on("pay",m=>{var S,_;try{const C=(S=i.get(m.to))==null?void 0:S.player,R=(_=i.get(m.from))==null?void 0:_.player;if(C===void 0||(C.balance+=m.balance,R===void 0))return;R.balance-=m.balance,u("member_updating",{playerId:m.to,animation:"recieveMoney",additional_props:[m.from],pJson:[C.to_json(),R.to_json()]})}catch(C){g.logFunction(C)}}),f.on("mouse",m=>{const S=i.get(f.id);S!==void 0&&(S.positions=m,i.set(f.id,S),d(f.id,"mouse",{id:f.id,x:m.x,y:m.y}))})}catch(T){g.logFunction(T)}}),f.on("ready",E=>{try{const T=i.get(f.id);if(T===void 0)return;E.ready!==void 0&&(T.ready=E.ready),E.mode!==void 0&&(a=E.mode),i.set(f.id,T);const v=Array.from(i.values()).map(m=>m.ready);u("ready",{id:f.id,state:T.ready,selectedMode:a}),v.includes(!1)||(g.logFunction("Game has Started, No more Players can join the Server"),l=!0,g.whenCloseF(),u("start-game",{}))}catch(T){g.logFunction(T)}})):f.disconnect(),f.on("disconnect",()=>{var T,v;try{if(i.has(f.id)&&(g.logFunction(`{${c()}} [${f.id}] Player "${(T=i.get(f.id))==null?void 0:T.player.username}" has disconnected.`),o.push(`{${c()}} [${f.id}] Player "${(v=i.get(f.id))==null?void 0:v.player.username}" has disconnected.`)),i.delete(f.id),s===f.id){const m=Array.from(i.values()).filter(S=>S.player.balance>0).map(S=>S.player.id);var E=m.indexOf(f.id);E=(E+1)%m.length,s=m[E]}u("disconnected-player",{id:f.id,turn:s}),Array.from(i.keys()).length===0&&(l&&g.logFunction("Game has Ended. Server is currently Open to new Players"),l=!1)}catch(m){g.logFunction(m)}})})}function V5(){var t;try{t=JSON.parse(document.cookie)}catch{t={login:{remember:!1,id:""}},document.cookie=JSON.stringify(t)}const e=k.useRef(null),[n,r]=k.useState(),[i,o]=k.useState(""),[s,l]=k.useState(""),[a,c]=k.useState(),[u,d]=k.useState(t.login.remember),[f,g]=k.useState(),[p,E]=k.useState(!1),[T,v]=k.useState(!1),[m,S]=k.useState(0),[_,C]=k.useState(void 0),[R,b]=k.useState(6);k.useEffect(()=>{document.title="Monopoly";const I=aT(lr.firebase);c(I);var w;try{if(w=JSON.parse(document.cookie),w.login.remember&&w.login.id.length>0){const q=Mp(I);tP(Op(q,`Users/${w.login.id}`)).then(me=>{const ge=me.data();g(ge),o(ge.name)})}}catch{}},[]);const y=async()=>{var me,ge;async function I(){return(await(await fetch(`${lr.JSONBin.url}/latest`,{method:"GET",headers:{"X-Master-Key":lr.JSONBin.masterKey,"X-Access-Key":lr.JSONBin.accessKey}})).json()).record}if(i.replace(" ","").length===0){(me=e.current)==null||me.message("please add your name before joining","info",2);return}try{const Z=JSON.parse(document.cookie);if(f===void 0)throw Error("undefined");console.log(JSON.stringify(f)),Z.login={id:f.id,remember:u},document.cookie=JSON.stringify(Z)}catch{const Z={login:{id:"",remember:!1}};document.cookie=JSON.stringify(Z)}E(!0);const w=await I();if(!Object.keys(w).includes(s)){(ge=e.current)==null||ge.message("code isnt available on systems","info",2);return}const Y=w[s];console.log(Y);var q;q=await db(Y),q.on("state",Z=>{var ve,be,O;switch(Z){case 0:r(q),v(!0),E(!1);break;case 1:(ve=e.current)==null||ve.message("the game has already begun","error",2,()=>{E(!1)}),q.disconnect();break;case 2:(be=e.current)==null||be.message("too many players on the server","error",2,()=>{E(!1)}),q.disconnect();break;default:(O=e.current)==null||O.message("unkown error","error",2),q.disconnect(),E(!1);break}}),q.on("connect_error",()=>{var Z;(Z=e.current)==null||Z.message("the server does not exist or is unreachable","error",2,()=>{E(!1)}),q.disconnect()}),q.on("connect_timeout",()=>{var Z;(Z=e.current)==null||Z.message("the server took too long to respond","error",2,()=>{E(!1)}),q.disconnect()})};return k.useEffect(()=>{const I=new URLSearchParams(document.location.search);I.has("ip")&&l(I.get("ip")??"")},[]),n!==void 0&&T===!0?h.jsx(bk,{socket:n,name:i,server:_}):h.jsxs(h.Fragment,{children:[h.jsx(aS,{ref:e}),h.jsxs("div",{className:"entry",children:[h.jsxs("nav",{children:[h.jsx("button",{"data-select":m===0,onClick:()=>{S(0)},"data-tooltip-hover":"play",children:h.jsx("img",{src:"./icon.png",alt:""})}),h.jsx("button",{"data-select":m===1,onClick:()=>{S(1)},"data-tooltip-hover":"server",children:h.jsx("img",{src:"./server.png",alt:""})}),h.jsx("button",{"data-select":m===2,onClick:()=>{S(2)},"data-tooltip-hover":"account",children:h.jsx("img",{src:"./human.png",alt:""})}),h.jsx("br",{}),h.jsx("button",{"data-select":m===3,onClick:()=>{S(3)},"data-tooltip-hover":"credits",children:h.jsx("img",{src:"./credits.png",alt:""})}),h.jsx("button",{"data-select":m===4,onClick:()=>{S(4)},"data-tooltip-hover":"settings",children:h.jsx("img",{src:"./settings.png",alt:""})})]}),h.jsx("main",{children:m===4?h.jsx(sS,{}):m===3?h.jsxs(h.Fragment,{children:[h.jsx("p",{children:"This Project was made by Itay Layzerovich"}),h.jsxs("div",{style:{color:"white"},children:[h.jsx("p",{children:" As the developer of this Monopoly game project, it is essential to clarify the following legal aspects: "}),h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("i",{children:"Game Mechanics and Rules:"})," The game mechanics and rules of Monopoly have been widely known and played for many years. This project aims to offer a digital rendition of the classic Monopoly experience, utilizing original concepts that have become common knowledge."]}),h.jsxs("li",{children:[" ",h.jsx("i",{children:"Original Monopoly Intellectual Property:"}),"The Monopoly board game is a registered trademark and copyrighted property of Hasbro Inc. and its respective licensors. This project is not an official representation or product of Hasbro Inc., and no direct affiliation or endorsement is implied."]}),h.jsxs("li",{children:[h.jsx("i",{children:"License and Usage:"})," This Monopoly game project is developed with the intent of being an educational and personal project. It is offered as a free-to-use, open-source initiative for learning purposes, and no commercial use or distribution is intended."]}),h.jsxs("li",{children:[h.jsx("i",{children:"Fair Use and Transformative Work:"}),'This project may fall under the category of "fair use" as it is a transformative work that provides a unique digital experience based on the original Monopoly game. It is not intended to compete with or harm the commercial interests of the original trademark owner.']}),h.jsxs("li",{children:[h.jsx("i",{children:"No Warranty or Liability:"})," While efforts have been made to create an enjoyable and bug-free experience, this project is provided as-is without any warranty. The developer shall not be liable for any issues or damages arising from the use of this software."]}),h.jsxs("li",{children:[h.jsx("i",{children:"Attribution:"})," This project may include third-party libraries or assets that are appropriately credited and licensed under their respective terms. Any attributions and licenses should be preserved as required by the respective authors."]}),h.jsxs("li",{children:[h.jsx("i",{children:"Personal Responsibility:"})," As the developer, you are responsible for complying with all applicable laws, including intellectual property laws, and ensuring that your usage of this project is within legal boundaries."]})]})]})]}):m===2?h.jsxs(h.Fragment,{children:[h.jsxs("header",{children:[h.jsx("p",{style:{fontSize:12,marginBottom:0},children:"Account"}),h.jsx("h3",{children:"Login"})]}),h.jsx(fL,{admin:a,currentUser:f,onLogout:()=>{d(!1),g(void 0),o("")},onLogin:(I,w)=>{if(S(0),d(w),g(I),o(I.name),!!w)try{var Y=JSON.parse(document.cookie);Y.login={remember:!0,id:I.id},document.cookie=JSON.stringify(Y)}catch{var Y={login:{remember:!0,id:I.id}};document.cookie=JSON.stringify(Y)}}})]}):m===1?h.jsxs(h.Fragment,{children:[h.jsxs("header",{children:[h.jsx("p",{style:{fontSize:12,marginBottom:0},children:"peerjs hosting"}),h.jsx("h3",{children:"Run A Server"})]}),_!==void 0?h.jsx(h.Fragment,{children:h.jsxs("p",{children:["server is already running, check the console.",h.jsxs("center",{children:[" ",h.jsx("button",{style:{backgroundColor:"red"},onClick:()=>{_.stop(),C(void 0)},children:"Kill Server"})]})]})}):h.jsxs(h.Fragment,{children:[h.jsx("p",{children:"all the servers logs will can be seen in the console"}),h.jsx("table",{children:h.jsxs("tr",{children:[h.jsx("td",{children:"PlayersCount"}),h.jsx("td",{children:h.jsx(So,{onChange:I=>{b(parseInt(I.currentTarget.value))},max:6,min:1,defaultValue:R,step:1})})]})}),h.jsxs("center",{children:[" ",h.jsx("button",{onClick:I=>{I.currentTarget.disabled=!0,I.currentTarget.innerHTML="Starting Server",F5(R,(w,Y)=>{S(0),l(w),C(Y)})},children:"Run Server"})]})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("header",{children:[h.jsx("p",{style:{fontSize:9},children:"22.8.23 - Serverless"}),"Welcome to the ",h.jsx("h3",{children:"MONOPOLY"})," Game"]}),h.jsx(gL,{disabled:p,fbUser:f,joinBots:()=>{},joinViaCode:()=>{y()},SetAddress:l,SetName:o,addr:s,name:i})]})})]})]})}const U5=ik([{path:"Monopoly",element:h.jsx(V5,{})},{path:"Monopoly/gallery",element:h.jsx(ak,{})}]);function $5(){return h.jsx(ek,{router:U5})}document.title="Monopoly";Kh.createRoot(document.getElementById("root")).render(h.jsx($5,{}));
