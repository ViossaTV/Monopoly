var FC=Object.defineProperty;var UC=(t,e,n)=>e in t?FC(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n;var we=(t,e,n)=>(UC(t,typeof e!="symbol"?e+"":e,n),n);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();function Qf(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Q0={exports:{}},su={},Y0={exports:{}},le={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Ca=Symbol.for("react.element"),$C=Symbol.for("react.portal"),BC=Symbol.for("react.fragment"),zC=Symbol.for("react.strict_mode"),qC=Symbol.for("react.profiler"),HC=Symbol.for("react.provider"),WC=Symbol.for("react.context"),KC=Symbol.for("react.forward_ref"),GC=Symbol.for("react.suspense"),JC=Symbol.for("react.memo"),QC=Symbol.for("react.lazy"),Ig=Symbol.iterator;function YC(t){return t===null||typeof t!="object"?null:(t=Ig&&t[Ig]||t["@@iterator"],typeof t=="function"?t:null)}var X0={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Z0=Object.assign,e_={};function Ns(t,e,n){this.props=t,this.context=e,this.refs=e_,this.updater=n||X0}Ns.prototype.isReactComponent={};Ns.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Ns.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function t_(){}t_.prototype=Ns.prototype;function Yf(t,e,n){this.props=t,this.context=e,this.refs=e_,this.updater=n||X0}var Xf=Yf.prototype=new t_;Xf.constructor=Yf;Z0(Xf,Ns.prototype);Xf.isPureReactComponent=!0;var Ag=Array.isArray,n_=Object.prototype.hasOwnProperty,Zf={current:null},r_={key:!0,ref:!0,__self:!0,__source:!0};function i_(t,e,n){var r,i={},s=null,o=null;if(e!=null)for(r in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)n_.call(e,r)&&!r_.hasOwnProperty(r)&&(i[r]=e[r]);var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){for(var a=Array(l),c=0;c<l;c++)a[c]=arguments[c+2];i.children=a}if(t&&t.defaultProps)for(r in l=t.defaultProps,l)i[r]===void 0&&(i[r]=l[r]);return{$$typeof:Ca,type:t,key:s,ref:o,props:i,_owner:Zf.current}}function XC(t,e){return{$$typeof:Ca,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function ep(t){return typeof t=="object"&&t!==null&&t.$$typeof===Ca}function ZC(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var bg=/\/+/g;function id(t,e){return typeof t=="object"&&t!==null&&t.key!=null?ZC(""+t.key):e.toString(36)}function xl(t,e,n,r,i){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Ca:case $C:o=!0}}if(o)return o=t,i=i(o),t=r===""?"."+id(o,0):r,Ag(i)?(n="",t!=null&&(n=t.replace(bg,"$&/")+"/"),xl(i,e,n,"",function(c){return c})):i!=null&&(ep(i)&&(i=XC(i,n+(!i.key||o&&o.key===i.key?"":(""+i.key).replace(bg,"$&/")+"/")+t)),e.push(i)),1;if(o=0,r=r===""?".":r+":",Ag(t))for(var l=0;l<t.length;l++){s=t[l];var a=r+id(s,l);o+=xl(s,e,n,a,i)}else if(a=YC(t),typeof a=="function")for(t=a.call(t),l=0;!(s=t.next()).done;)s=s.value,a=r+id(s,l++),o+=xl(s,e,n,a,i);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Za(t,e,n){if(t==null)return t;var r=[],i=0;return xl(t,r,"","",function(s){return e.call(n,s,i++)}),r}function eP(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var Mt={current:null},Ol={transition:null},tP={ReactCurrentDispatcher:Mt,ReactCurrentBatchConfig:Ol,ReactCurrentOwner:Zf};le.Children={map:Za,forEach:function(t,e,n){Za(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return Za(t,function(){e++}),e},toArray:function(t){return Za(t,function(e){return e})||[]},only:function(t){if(!ep(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};le.Component=Ns;le.Fragment=BC;le.Profiler=qC;le.PureComponent=Yf;le.StrictMode=zC;le.Suspense=GC;le.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=tP;le.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var r=Z0({},t.props),i=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=Zf.current),e.key!==void 0&&(i=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(a in e)n_.call(e,a)&&!r_.hasOwnProperty(a)&&(r[a]=e[a]===void 0&&l!==void 0?l[a]:e[a])}var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){l=Array(a);for(var c=0;c<a;c++)l[c]=arguments[c+2];r.children=l}return{$$typeof:Ca,type:t.type,key:i,ref:s,props:r,_owner:o}};le.createContext=function(t){return t={$$typeof:WC,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:HC,_context:t},t.Consumer=t};le.createElement=i_;le.createFactory=function(t){var e=i_.bind(null,t);return e.type=t,e};le.createRef=function(){return{current:null}};le.forwardRef=function(t){return{$$typeof:KC,render:t}};le.isValidElement=ep;le.lazy=function(t){return{$$typeof:QC,_payload:{_status:-1,_result:t},_init:eP}};le.memo=function(t,e){return{$$typeof:JC,type:t,compare:e===void 0?null:e}};le.startTransition=function(t){var e=Ol.transition;Ol.transition={};try{t()}finally{Ol.transition=e}};le.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};le.useCallback=function(t,e){return Mt.current.useCallback(t,e)};le.useContext=function(t){return Mt.current.useContext(t)};le.useDebugValue=function(){};le.useDeferredValue=function(t){return Mt.current.useDeferredValue(t)};le.useEffect=function(t,e){return Mt.current.useEffect(t,e)};le.useId=function(){return Mt.current.useId()};le.useImperativeHandle=function(t,e,n){return Mt.current.useImperativeHandle(t,e,n)};le.useInsertionEffect=function(t,e){return Mt.current.useInsertionEffect(t,e)};le.useLayoutEffect=function(t,e){return Mt.current.useLayoutEffect(t,e)};le.useMemo=function(t,e){return Mt.current.useMemo(t,e)};le.useReducer=function(t,e,n){return Mt.current.useReducer(t,e,n)};le.useRef=function(t){return Mt.current.useRef(t)};le.useState=function(t){return Mt.current.useState(t)};le.useSyncExternalStore=function(t,e,n){return Mt.current.useSyncExternalStore(t,e,n)};le.useTransition=function(){return Mt.current.useTransition()};le.version="18.2.0";Y0.exports=le;var M=Y0.exports;/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var nP=M,rP=Symbol.for("react.element"),iP=Symbol.for("react.fragment"),sP=Object.prototype.hasOwnProperty,oP=nP.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,aP={key:!0,ref:!0,__self:!0,__source:!0};function s_(t,e,n){var r,i={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(r in e)sP.call(e,r)&&!aP.hasOwnProperty(r)&&(i[r]=e[r]);if(t&&t.defaultProps)for(r in e=t.defaultProps,e)i[r]===void 0&&(i[r]=e[r]);return{$$typeof:rP,type:t,key:s,ref:o,props:i,_owner:oP.current}}su.Fragment=iP;su.jsx=s_;su.jsxs=s_;Q0.exports=su;var h=Q0.exports,sh={},o_={exports:{}},Gt={},a_={exports:{}},l_={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(b,L){var F=b.length;b.push(L);e:for(;0<F;){var te=F-1>>>1,ie=b[te];if(0<i(ie,L))b[te]=L,b[F]=ie,F=te;else break e}}function n(b){return b.length===0?null:b[0]}function r(b){if(b.length===0)return null;var L=b[0],F=b.pop();if(F!==L){b[0]=F;e:for(var te=0,ie=b.length,se=ie>>>1;te<se;){var k=2*(te+1)-1,N=b[k],U=k+1,j=b[U];if(0>i(N,F))U<ie&&0>i(j,N)?(b[te]=j,b[U]=F,te=U):(b[te]=N,b[k]=F,te=k);else if(U<ie&&0>i(j,F))b[te]=j,b[U]=F,te=U;else break e}}return L}function i(b,L){var F=b.sortIndex-L.sortIndex;return F!==0?F:b.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var a=[],c=[],u=1,d=null,f=3,p=!1,y=!1,v=!1,C=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function E(b){for(var L=n(c);L!==null;){if(L.callback===null)r(c);else if(L.startTime<=b)r(c),L.sortIndex=L.expirationTime,e(a,L);else break;L=n(c)}}function T(b){if(v=!1,E(b),!y)if(n(a)!==null)y=!0,Te(_);else{var L=n(c);L!==null&&Pe(T,L.startTime-b)}}function _(b,L){y=!1,v&&(v=!1,m(w),w=-1),p=!0;var F=f;try{for(E(L),d=n(a);d!==null&&(!(d.expirationTime>L)||b&&!Q());){var te=d.callback;if(typeof te=="function"){d.callback=null,f=d.priorityLevel;var ie=te(d.expirationTime<=L);L=t.unstable_now(),typeof ie=="function"?d.callback=ie:d===n(a)&&r(a),E(L)}else r(a);d=n(a)}if(d!==null)var se=!0;else{var k=n(c);k!==null&&Pe(T,k.startTime-L),se=!1}return se}finally{d=null,f=F,p=!1}}var R=!1,I=null,w=-1,A=5,S=-1;function Q(){return!(t.unstable_now()-S<A)}function re(){if(I!==null){var b=t.unstable_now();S=b;var L=!0;try{L=I(!0,b)}finally{L?ye():(R=!1,I=null)}}else R=!1}var ye;if(typeof g=="function")ye=function(){g(re)};else if(typeof MessageChannel<"u"){var ce=new MessageChannel,K=ce.port2;ce.port1.onmessage=re,ye=function(){K.postMessage(null)}}else ye=function(){C(re,0)};function Te(b){I=b,R||(R=!0,ye())}function Pe(b,L){w=C(function(){b(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(b){b.callback=null},t.unstable_continueExecution=function(){y||p||(y=!0,Te(_))},t.unstable_forceFrameRate=function(b){0>b||125<b?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<b?Math.floor(1e3/b):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return n(a)},t.unstable_next=function(b){switch(f){case 1:case 2:case 3:var L=3;break;default:L=f}var F=f;f=L;try{return b()}finally{f=F}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(b,L){switch(b){case 1:case 2:case 3:case 4:case 5:break;default:b=3}var F=f;f=b;try{return L()}finally{f=F}},t.unstable_scheduleCallback=function(b,L,F){var te=t.unstable_now();switch(typeof F=="object"&&F!==null?(F=F.delay,F=typeof F=="number"&&0<F?te+F:te):F=te,b){case 1:var ie=-1;break;case 2:ie=250;break;case 5:ie=1073741823;break;case 4:ie=1e4;break;default:ie=5e3}return ie=F+ie,b={id:u++,callback:L,priorityLevel:b,startTime:F,expirationTime:ie,sortIndex:-1},F>te?(b.sortIndex=F,e(c,b),n(a)===null&&b===n(c)&&(v?(m(w),w=-1):v=!0,Pe(T,F-te))):(b.sortIndex=ie,e(a,b),y||p||(y=!0,Te(_))),b},t.unstable_shouldYield=Q,t.unstable_wrapCallback=function(b){var L=f;return function(){var F=f;f=L;try{return b.apply(this,arguments)}finally{f=F}}}})(l_);a_.exports=l_;var lP=a_.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var c_=M,Wt=lP;function O(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var u_=new Set,Uo={};function Ai(t,e){ms(t,e),ms(t+"Capture",e)}function ms(t,e){for(Uo[t]=e,t=0;t<e.length;t++)u_.add(e[t])}var or=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),oh=Object.prototype.hasOwnProperty,cP=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,xg={},Og={};function uP(t){return oh.call(Og,t)?!0:oh.call(xg,t)?!1:cP.test(t)?Og[t]=!0:(xg[t]=!0,!1)}function dP(t,e,n,r){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function hP(t,e,n,r){if(e===null||typeof e>"u"||dP(t,e,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Lt(t,e,n,r,i,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=r,this.attributeNamespace=i,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var dt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){dt[t]=new Lt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];dt[e]=new Lt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){dt[t]=new Lt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){dt[t]=new Lt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){dt[t]=new Lt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){dt[t]=new Lt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){dt[t]=new Lt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){dt[t]=new Lt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){dt[t]=new Lt(t,5,!1,t.toLowerCase(),null,!1,!1)});var tp=/[\-:]([a-z])/g;function np(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(tp,np);dt[e]=new Lt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(tp,np);dt[e]=new Lt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(tp,np);dt[e]=new Lt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){dt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!1,!1)});dt.xlinkHref=new Lt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){dt[t]=new Lt(t,1,!1,t.toLowerCase(),null,!0,!0)});function rp(t,e,n,r){var i=dt.hasOwnProperty(e)?dt[e]:null;(i!==null?i.type!==0:r||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(hP(e,n,i,r)&&(n=null),r||i===null?uP(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):i.mustUseProperty?t[i.propertyName]=n===null?i.type===3?!1:"":n:(e=i.attributeName,r=i.attributeNamespace,n===null?t.removeAttribute(e):(i=i.type,n=i===3||i===4&&n===!0?"":""+n,r?t.setAttributeNS(r,e,n):t.setAttribute(e,n))))}var mr=c_.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,el=Symbol.for("react.element"),Bi=Symbol.for("react.portal"),zi=Symbol.for("react.fragment"),ip=Symbol.for("react.strict_mode"),ah=Symbol.for("react.profiler"),d_=Symbol.for("react.provider"),h_=Symbol.for("react.context"),sp=Symbol.for("react.forward_ref"),lh=Symbol.for("react.suspense"),ch=Symbol.for("react.suspense_list"),op=Symbol.for("react.memo"),Er=Symbol.for("react.lazy"),f_=Symbol.for("react.offscreen"),Ng=Symbol.iterator;function Gs(t){return t===null||typeof t!="object"?null:(t=Ng&&t[Ng]||t["@@iterator"],typeof t=="function"?t:null)}var Le=Object.assign,sd;function lo(t){if(sd===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);sd=e&&e[1]||""}return`
`+sd+t}var od=!1;function ad(t,e){if(!t||od)return"";od=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(c){var r=c}Reflect.construct(t,[],e)}else{try{e.call()}catch(c){r=c}t.call(e.prototype)}else{try{throw Error()}catch(c){r=c}t()}}catch(c){if(c&&r&&typeof c.stack=="string"){for(var i=c.stack.split(`
`),s=r.stack.split(`
`),o=i.length-1,l=s.length-1;1<=o&&0<=l&&i[o]!==s[l];)l--;for(;1<=o&&0<=l;o--,l--)if(i[o]!==s[l]){if(o!==1||l!==1)do if(o--,l--,0>l||i[o]!==s[l]){var a=`
`+i[o].replace(" at new "," at ");return t.displayName&&a.includes("<anonymous>")&&(a=a.replace("<anonymous>",t.displayName)),a}while(1<=o&&0<=l);break}}}finally{od=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?lo(t):""}function fP(t){switch(t.tag){case 5:return lo(t.type);case 16:return lo("Lazy");case 13:return lo("Suspense");case 19:return lo("SuspenseList");case 0:case 2:case 15:return t=ad(t.type,!1),t;case 11:return t=ad(t.type.render,!1),t;case 1:return t=ad(t.type,!0),t;default:return""}}function uh(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case zi:return"Fragment";case Bi:return"Portal";case ah:return"Profiler";case ip:return"StrictMode";case lh:return"Suspense";case ch:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case h_:return(t.displayName||"Context")+".Consumer";case d_:return(t._context.displayName||"Context")+".Provider";case sp:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case op:return e=t.displayName||null,e!==null?e:uh(t.type)||"Memo";case Er:e=t._payload,t=t._init;try{return uh(t(e))}catch{}}return null}function pP(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return uh(e);case 8:return e===ip?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function qr(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function p_(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function mP(t){var e=p_(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),r=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var i=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return i.call(this)},set:function(o){r=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(o){r=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function tl(t){t._valueTracker||(t._valueTracker=mP(t))}function m_(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),r="";return t&&(r=p_(t)?t.checked?"true":"false":t.value),t=r,t!==n?(e.setValue(t),!0):!1}function lc(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function dh(t,e){var n=e.checked;return Le({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function Dg(t,e){var n=e.defaultValue==null?"":e.defaultValue,r=e.checked!=null?e.checked:e.defaultChecked;n=qr(e.value!=null?e.value:n),t._wrapperState={initialChecked:r,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function g_(t,e){e=e.checked,e!=null&&rp(t,"checked",e,!1)}function hh(t,e){g_(t,e);var n=qr(e.value),r=e.type;if(n!=null)r==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(r==="submit"||r==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?fh(t,e.type,n):e.hasOwnProperty("defaultValue")&&fh(t,e.type,qr(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Mg(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var r=e.type;if(!(r!=="submit"&&r!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function fh(t,e,n){(e!=="number"||lc(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var co=Array.isArray;function ns(t,e,n,r){if(t=t.options,e){e={};for(var i=0;i<n.length;i++)e["$"+n[i]]=!0;for(n=0;n<t.length;n++)i=e.hasOwnProperty("$"+t[n].value),t[n].selected!==i&&(t[n].selected=i),i&&r&&(t[n].defaultSelected=!0)}else{for(n=""+qr(n),e=null,i=0;i<t.length;i++){if(t[i].value===n){t[i].selected=!0,r&&(t[i].defaultSelected=!0);return}e!==null||t[i].disabled||(e=t[i])}e!==null&&(e.selected=!0)}}function ph(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(O(91));return Le({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Lg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(O(92));if(co(n)){if(1<n.length)throw Error(O(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:qr(n)}}function y_(t,e){var n=qr(e.value),r=qr(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),r!=null&&(t.defaultValue=""+r)}function jg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function v_(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function mh(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?v_(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var nl,__=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,r,i){MSApp.execUnsafeLocalFunction(function(){return t(e,n,r,i)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(nl=nl||document.createElement("div"),nl.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=nl.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function $o(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var wo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},gP=["Webkit","ms","Moz","O"];Object.keys(wo).forEach(function(t){gP.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),wo[e]=wo[t]})});function E_(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||wo.hasOwnProperty(t)&&wo[t]?(""+e).trim():e+"px"}function T_(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var r=n.indexOf("--")===0,i=E_(n,e[n],r);n==="float"&&(n="cssFloat"),r?t.setProperty(n,i):t[n]=i}}var yP=Le({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function gh(t,e){if(e){if(yP[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(O(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(O(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(O(61))}if(e.style!=null&&typeof e.style!="object")throw Error(O(62))}}function yh(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var vh=null;function ap(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _h=null,rs=null,is=null;function Vg(t){if(t=ka(t)){if(typeof _h!="function")throw Error(O(280));var e=t.stateNode;e&&(e=uu(e),_h(t.stateNode,t.type,e))}}function S_(t){rs?is?is.push(t):is=[t]:rs=t}function w_(){if(rs){var t=rs,e=is;if(is=rs=null,Vg(t),e)for(t=0;t<e.length;t++)Vg(e[t])}}function C_(t,e){return t(e)}function P_(){}var ld=!1;function R_(t,e,n){if(ld)return t(e,n);ld=!0;try{return C_(t,e,n)}finally{ld=!1,(rs!==null||is!==null)&&(P_(),w_())}}function Bo(t,e){var n=t.stateNode;if(n===null)return null;var r=uu(n);if(r===null)return null;n=r[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(t=t.type,r=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!r;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(O(231,e,typeof n));return n}var Eh=!1;if(or)try{var Js={};Object.defineProperty(Js,"passive",{get:function(){Eh=!0}}),window.addEventListener("test",Js,Js),window.removeEventListener("test",Js,Js)}catch{Eh=!1}function vP(t,e,n,r,i,s,o,l,a){var c=Array.prototype.slice.call(arguments,3);try{e.apply(n,c)}catch(u){this.onError(u)}}var Co=!1,cc=null,uc=!1,Th=null,_P={onError:function(t){Co=!0,cc=t}};function EP(t,e,n,r,i,s,o,l,a){Co=!1,cc=null,vP.apply(_P,arguments)}function TP(t,e,n,r,i,s,o,l,a){if(EP.apply(this,arguments),Co){if(Co){var c=cc;Co=!1,cc=null}else throw Error(O(198));uc||(uc=!0,Th=c)}}function bi(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function k_(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Fg(t){if(bi(t)!==t)throw Error(O(188))}function SP(t){var e=t.alternate;if(!e){if(e=bi(t),e===null)throw Error(O(188));return e!==t?null:t}for(var n=t,r=e;;){var i=n.return;if(i===null)break;var s=i.alternate;if(s===null){if(r=i.return,r!==null){n=r;continue}break}if(i.child===s.child){for(s=i.child;s;){if(s===n)return Fg(i),t;if(s===r)return Fg(i),e;s=s.sibling}throw Error(O(188))}if(n.return!==r.return)n=i,r=s;else{for(var o=!1,l=i.child;l;){if(l===n){o=!0,n=i,r=s;break}if(l===r){o=!0,r=i,n=s;break}l=l.sibling}if(!o){for(l=s.child;l;){if(l===n){o=!0,n=s,r=i;break}if(l===r){o=!0,r=s,n=i;break}l=l.sibling}if(!o)throw Error(O(189))}}if(n.alternate!==r)throw Error(O(190))}if(n.tag!==3)throw Error(O(188));return n.stateNode.current===n?t:e}function I_(t){return t=SP(t),t!==null?A_(t):null}function A_(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=A_(t);if(e!==null)return e;t=t.sibling}return null}var b_=Wt.unstable_scheduleCallback,Ug=Wt.unstable_cancelCallback,wP=Wt.unstable_shouldYield,CP=Wt.unstable_requestPaint,Be=Wt.unstable_now,PP=Wt.unstable_getCurrentPriorityLevel,lp=Wt.unstable_ImmediatePriority,x_=Wt.unstable_UserBlockingPriority,dc=Wt.unstable_NormalPriority,RP=Wt.unstable_LowPriority,O_=Wt.unstable_IdlePriority,ou=null,jn=null;function kP(t){if(jn&&typeof jn.onCommitFiberRoot=="function")try{jn.onCommitFiberRoot(ou,t,void 0,(t.current.flags&128)===128)}catch{}}var Sn=Math.clz32?Math.clz32:bP,IP=Math.log,AP=Math.LN2;function bP(t){return t>>>=0,t===0?32:31-(IP(t)/AP|0)|0}var rl=64,il=4194304;function uo(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function hc(t,e){var n=t.pendingLanes;if(n===0)return 0;var r=0,i=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var l=o&~i;l!==0?r=uo(l):(s&=o,s!==0&&(r=uo(s)))}else o=n&~i,o!==0?r=uo(o):s!==0&&(r=uo(s));if(r===0)return 0;if(e!==0&&e!==r&&!(e&i)&&(i=r&-r,s=e&-e,i>=s||i===16&&(s&4194240)!==0))return e;if(r&4&&(r|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=r;0<e;)n=31-Sn(e),i=1<<n,r|=t[n],e&=~i;return r}function xP(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OP(t,e){for(var n=t.suspendedLanes,r=t.pingedLanes,i=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-Sn(s),l=1<<o,a=i[o];a===-1?(!(l&n)||l&r)&&(i[o]=xP(l,e)):a<=e&&(t.expiredLanes|=l),s&=~l}}function Sh(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function N_(){var t=rl;return rl<<=1,!(rl&4194240)&&(rl=64),t}function cd(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Pa(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Sn(e),t[e]=n}function NP(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var r=t.eventTimes;for(t=t.expirationTimes;0<n;){var i=31-Sn(n),s=1<<i;e[i]=0,r[i]=-1,t[i]=-1,n&=~s}}function cp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var r=31-Sn(n),i=1<<r;i&e|t[r]&e&&(t[r]|=e),n&=~i}}var _e=0;function D_(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var M_,up,L_,j_,V_,wh=!1,sl=[],Or=null,Nr=null,Dr=null,zo=new Map,qo=new Map,Sr=[],DP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function $g(t,e){switch(t){case"focusin":case"focusout":Or=null;break;case"dragenter":case"dragleave":Nr=null;break;case"mouseover":case"mouseout":Dr=null;break;case"pointerover":case"pointerout":zo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":qo.delete(e.pointerId)}}function Qs(t,e,n,r,i,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:r,nativeEvent:s,targetContainers:[i]},e!==null&&(e=ka(e),e!==null&&up(e)),t):(t.eventSystemFlags|=r,e=t.targetContainers,i!==null&&e.indexOf(i)===-1&&e.push(i),t)}function MP(t,e,n,r,i){switch(e){case"focusin":return Or=Qs(Or,t,e,n,r,i),!0;case"dragenter":return Nr=Qs(Nr,t,e,n,r,i),!0;case"mouseover":return Dr=Qs(Dr,t,e,n,r,i),!0;case"pointerover":var s=i.pointerId;return zo.set(s,Qs(zo.get(s)||null,t,e,n,r,i)),!0;case"gotpointercapture":return s=i.pointerId,qo.set(s,Qs(qo.get(s)||null,t,e,n,r,i)),!0}return!1}function F_(t){var e=ai(t.target);if(e!==null){var n=bi(e);if(n!==null){if(e=n.tag,e===13){if(e=k_(n),e!==null){t.blockedOn=e,V_(t.priority,function(){L_(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Nl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=Ch(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var r=new n.constructor(n.type,n);vh=r,n.target.dispatchEvent(r),vh=null}else return e=ka(n),e!==null&&up(e),t.blockedOn=n,!1;e.shift()}return!0}function Bg(t,e,n){Nl(t)&&n.delete(e)}function LP(){wh=!1,Or!==null&&Nl(Or)&&(Or=null),Nr!==null&&Nl(Nr)&&(Nr=null),Dr!==null&&Nl(Dr)&&(Dr=null),zo.forEach(Bg),qo.forEach(Bg)}function Ys(t,e){t.blockedOn===e&&(t.blockedOn=null,wh||(wh=!0,Wt.unstable_scheduleCallback(Wt.unstable_NormalPriority,LP)))}function Ho(t){function e(i){return Ys(i,t)}if(0<sl.length){Ys(sl[0],t);for(var n=1;n<sl.length;n++){var r=sl[n];r.blockedOn===t&&(r.blockedOn=null)}}for(Or!==null&&Ys(Or,t),Nr!==null&&Ys(Nr,t),Dr!==null&&Ys(Dr,t),zo.forEach(e),qo.forEach(e),n=0;n<Sr.length;n++)r=Sr[n],r.blockedOn===t&&(r.blockedOn=null);for(;0<Sr.length&&(n=Sr[0],n.blockedOn===null);)F_(n),n.blockedOn===null&&Sr.shift()}var ss=mr.ReactCurrentBatchConfig,fc=!0;function jP(t,e,n,r){var i=_e,s=ss.transition;ss.transition=null;try{_e=1,dp(t,e,n,r)}finally{_e=i,ss.transition=s}}function VP(t,e,n,r){var i=_e,s=ss.transition;ss.transition=null;try{_e=4,dp(t,e,n,r)}finally{_e=i,ss.transition=s}}function dp(t,e,n,r){if(fc){var i=Ch(t,e,n,r);if(i===null)_d(t,e,r,pc,n),$g(t,r);else if(MP(i,t,e,n,r))r.stopPropagation();else if($g(t,r),e&4&&-1<DP.indexOf(t)){for(;i!==null;){var s=ka(i);if(s!==null&&M_(s),s=Ch(t,e,n,r),s===null&&_d(t,e,r,pc,n),s===i)break;i=s}i!==null&&r.stopPropagation()}else _d(t,e,r,null,n)}}var pc=null;function Ch(t,e,n,r){if(pc=null,t=ap(r),t=ai(t),t!==null)if(e=bi(t),e===null)t=null;else if(n=e.tag,n===13){if(t=k_(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return pc=t,null}function U_(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(PP()){case lp:return 1;case x_:return 4;case dc:case RP:return 16;case O_:return 536870912;default:return 16}default:return 16}}var Ar=null,hp=null,Dl=null;function $_(){if(Dl)return Dl;var t,e=hp,n=e.length,r,i="value"in Ar?Ar.value:Ar.textContent,s=i.length;for(t=0;t<n&&e[t]===i[t];t++);var o=n-t;for(r=1;r<=o&&e[n-r]===i[s-r];r++);return Dl=i.slice(t,1<r?1-r:void 0)}function Ml(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ol(){return!0}function zg(){return!1}function Jt(t){function e(n,r,i,s,o){this._reactName=n,this._targetInst=i,this.type=r,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(n=t[l],this[l]=n?n(s):s[l]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?ol:zg,this.isPropagationStopped=zg,this}return Le(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=ol)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=ol)},persist:function(){},isPersistent:ol}),e}var Ds={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fp=Jt(Ds),Ra=Le({},Ds,{view:0,detail:0}),FP=Jt(Ra),ud,dd,Xs,au=Le({},Ra,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pp,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Xs&&(Xs&&t.type==="mousemove"?(ud=t.screenX-Xs.screenX,dd=t.screenY-Xs.screenY):dd=ud=0,Xs=t),ud)},movementY:function(t){return"movementY"in t?t.movementY:dd}}),qg=Jt(au),UP=Le({},au,{dataTransfer:0}),$P=Jt(UP),BP=Le({},Ra,{relatedTarget:0}),hd=Jt(BP),zP=Le({},Ds,{animationName:0,elapsedTime:0,pseudoElement:0}),qP=Jt(zP),HP=Le({},Ds,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),WP=Jt(HP),KP=Le({},Ds,{data:0}),Hg=Jt(KP),GP={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},JP={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},QP={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function YP(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=QP[t])?!!e[t]:!1}function pp(){return YP}var XP=Le({},Ra,{key:function(t){if(t.key){var e=GP[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Ml(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?JP[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pp,charCode:function(t){return t.type==="keypress"?Ml(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Ml(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),ZP=Jt(XP),eR=Le({},au,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Wg=Jt(eR),tR=Le({},Ra,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pp}),nR=Jt(tR),rR=Le({},Ds,{propertyName:0,elapsedTime:0,pseudoElement:0}),iR=Jt(rR),sR=Le({},au,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),oR=Jt(sR),aR=[9,13,27,32],mp=or&&"CompositionEvent"in window,Po=null;or&&"documentMode"in document&&(Po=document.documentMode);var lR=or&&"TextEvent"in window&&!Po,B_=or&&(!mp||Po&&8<Po&&11>=Po),Kg=String.fromCharCode(32),Gg=!1;function z_(t,e){switch(t){case"keyup":return aR.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function q_(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var qi=!1;function cR(t,e){switch(t){case"compositionend":return q_(e);case"keypress":return e.which!==32?null:(Gg=!0,Kg);case"textInput":return t=e.data,t===Kg&&Gg?null:t;default:return null}}function uR(t,e){if(qi)return t==="compositionend"||!mp&&z_(t,e)?(t=$_(),Dl=hp=Ar=null,qi=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return B_&&e.locale!=="ko"?null:e.data;default:return null}}var dR={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Jg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!dR[t.type]:e==="textarea"}function H_(t,e,n,r){S_(r),e=mc(e,"onChange"),0<e.length&&(n=new fp("onChange","change",null,n,r),t.push({event:n,listeners:e}))}var Ro=null,Wo=null;function hR(t){nE(t,0)}function lu(t){var e=Ki(t);if(m_(e))return t}function fR(t,e){if(t==="change")return e}var W_=!1;if(or){var fd;if(or){var pd="oninput"in document;if(!pd){var Qg=document.createElement("div");Qg.setAttribute("oninput","return;"),pd=typeof Qg.oninput=="function"}fd=pd}else fd=!1;W_=fd&&(!document.documentMode||9<document.documentMode)}function Yg(){Ro&&(Ro.detachEvent("onpropertychange",K_),Wo=Ro=null)}function K_(t){if(t.propertyName==="value"&&lu(Wo)){var e=[];H_(e,Wo,t,ap(t)),R_(hR,e)}}function pR(t,e,n){t==="focusin"?(Yg(),Ro=e,Wo=n,Ro.attachEvent("onpropertychange",K_)):t==="focusout"&&Yg()}function mR(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return lu(Wo)}function gR(t,e){if(t==="click")return lu(e)}function yR(t,e){if(t==="input"||t==="change")return lu(e)}function vR(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Cn=typeof Object.is=="function"?Object.is:vR;function Ko(t,e){if(Cn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),r=Object.keys(e);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var i=n[r];if(!oh.call(e,i)||!Cn(t[i],e[i]))return!1}return!0}function Xg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Zg(t,e){var n=Xg(t);t=0;for(var r;n;){if(n.nodeType===3){if(r=t+n.textContent.length,t<=e&&r>=e)return{node:n,offset:e-t};t=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Xg(n)}}function G_(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?G_(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function J_(){for(var t=window,e=lc();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=lc(t.document)}return e}function gp(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function _R(t){var e=J_(),n=t.focusedElem,r=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&G_(n.ownerDocument.documentElement,n)){if(r!==null&&gp(n)){if(e=r.start,t=r.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var i=n.textContent.length,s=Math.min(r.start,i);r=r.end===void 0?s:Math.min(r.end,i),!t.extend&&s>r&&(i=r,r=s,s=i),i=Zg(n,s);var o=Zg(n,r);i&&o&&(t.rangeCount!==1||t.anchorNode!==i.node||t.anchorOffset!==i.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(i.node,i.offset),t.removeAllRanges(),s>r?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var ER=or&&"documentMode"in document&&11>=document.documentMode,Hi=null,Ph=null,ko=null,Rh=!1;function ey(t,e,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;Rh||Hi==null||Hi!==lc(r)||(r=Hi,"selectionStart"in r&&gp(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),ko&&Ko(ko,r)||(ko=r,r=mc(Ph,"onSelect"),0<r.length&&(e=new fp("onSelect","select",null,e,n),t.push({event:e,listeners:r}),e.target=Hi)))}function al(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var Wi={animationend:al("Animation","AnimationEnd"),animationiteration:al("Animation","AnimationIteration"),animationstart:al("Animation","AnimationStart"),transitionend:al("Transition","TransitionEnd")},md={},Q_={};or&&(Q_=document.createElement("div").style,"AnimationEvent"in window||(delete Wi.animationend.animation,delete Wi.animationiteration.animation,delete Wi.animationstart.animation),"TransitionEvent"in window||delete Wi.transitionend.transition);function cu(t){if(md[t])return md[t];if(!Wi[t])return t;var e=Wi[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Q_)return md[t]=e[n];return t}var Y_=cu("animationend"),X_=cu("animationiteration"),Z_=cu("animationstart"),eE=cu("transitionend"),tE=new Map,ty="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jr(t,e){tE.set(t,e),Ai(e,[t])}for(var gd=0;gd<ty.length;gd++){var yd=ty[gd],TR=yd.toLowerCase(),SR=yd[0].toUpperCase()+yd.slice(1);Jr(TR,"on"+SR)}Jr(Y_,"onAnimationEnd");Jr(X_,"onAnimationIteration");Jr(Z_,"onAnimationStart");Jr("dblclick","onDoubleClick");Jr("focusin","onFocus");Jr("focusout","onBlur");Jr(eE,"onTransitionEnd");ms("onMouseEnter",["mouseout","mouseover"]);ms("onMouseLeave",["mouseout","mouseover"]);ms("onPointerEnter",["pointerout","pointerover"]);ms("onPointerLeave",["pointerout","pointerover"]);Ai("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Ai("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Ai("onBeforeInput",["compositionend","keypress","textInput","paste"]);Ai("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Ai("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ho="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),wR=new Set("cancel close invalid load scroll toggle".split(" ").concat(ho));function ny(t,e,n){var r=t.type||"unknown-event";t.currentTarget=n,TP(r,e,void 0,t),t.currentTarget=null}function nE(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var r=t[n],i=r.event;r=r.listeners;e:{var s=void 0;if(e)for(var o=r.length-1;0<=o;o--){var l=r[o],a=l.instance,c=l.currentTarget;if(l=l.listener,a!==s&&i.isPropagationStopped())break e;ny(i,l,c),s=a}else for(o=0;o<r.length;o++){if(l=r[o],a=l.instance,c=l.currentTarget,l=l.listener,a!==s&&i.isPropagationStopped())break e;ny(i,l,c),s=a}}}if(uc)throw t=Th,uc=!1,Th=null,t}function Re(t,e){var n=e[xh];n===void 0&&(n=e[xh]=new Set);var r=t+"__bubble";n.has(r)||(rE(e,t,2,!1),n.add(r))}function vd(t,e,n){var r=0;e&&(r|=4),rE(n,t,r,e)}var ll="_reactListening"+Math.random().toString(36).slice(2);function Go(t){if(!t[ll]){t[ll]=!0,u_.forEach(function(n){n!=="selectionchange"&&(wR.has(n)||vd(n,!1,t),vd(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[ll]||(e[ll]=!0,vd("selectionchange",!1,e))}}function rE(t,e,n,r){switch(U_(e)){case 1:var i=jP;break;case 4:i=VP;break;default:i=dp}n=i.bind(null,e,n,t),i=void 0,!Eh||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(i=!0),r?i!==void 0?t.addEventListener(e,n,{capture:!0,passive:i}):t.addEventListener(e,n,!0):i!==void 0?t.addEventListener(e,n,{passive:i}):t.addEventListener(e,n,!1)}function _d(t,e,n,r,i){var s=r;if(!(e&1)&&!(e&2)&&r!==null)e:for(;;){if(r===null)return;var o=r.tag;if(o===3||o===4){var l=r.stateNode.containerInfo;if(l===i||l.nodeType===8&&l.parentNode===i)break;if(o===4)for(o=r.return;o!==null;){var a=o.tag;if((a===3||a===4)&&(a=o.stateNode.containerInfo,a===i||a.nodeType===8&&a.parentNode===i))return;o=o.return}for(;l!==null;){if(o=ai(l),o===null)return;if(a=o.tag,a===5||a===6){r=s=o;continue e}l=l.parentNode}}r=r.return}R_(function(){var c=s,u=ap(n),d=[];e:{var f=tE.get(t);if(f!==void 0){var p=fp,y=t;switch(t){case"keypress":if(Ml(n)===0)break e;case"keydown":case"keyup":p=ZP;break;case"focusin":y="focus",p=hd;break;case"focusout":y="blur",p=hd;break;case"beforeblur":case"afterblur":p=hd;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":p=qg;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":p=$P;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":p=nR;break;case Y_:case X_:case Z_:p=qP;break;case eE:p=iR;break;case"scroll":p=FP;break;case"wheel":p=oR;break;case"copy":case"cut":case"paste":p=WP;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":p=Wg}var v=(e&4)!==0,C=!v&&t==="scroll",m=v?f!==null?f+"Capture":null:f;v=[];for(var g=c,E;g!==null;){E=g;var T=E.stateNode;if(E.tag===5&&T!==null&&(E=T,m!==null&&(T=Bo(g,m),T!=null&&v.push(Jo(g,T,E)))),C)break;g=g.return}0<v.length&&(f=new p(f,y,null,n,u),d.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",p=t==="mouseout"||t==="pointerout",f&&n!==vh&&(y=n.relatedTarget||n.fromElement)&&(ai(y)||y[ar]))break e;if((p||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,p?(y=n.relatedTarget||n.toElement,p=c,y=y?ai(y):null,y!==null&&(C=bi(y),y!==C||y.tag!==5&&y.tag!==6)&&(y=null)):(p=null,y=c),p!==y)){if(v=qg,T="onMouseLeave",m="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(v=Wg,T="onPointerLeave",m="onPointerEnter",g="pointer"),C=p==null?f:Ki(p),E=y==null?f:Ki(y),f=new v(T,g+"leave",p,n,u),f.target=C,f.relatedTarget=E,T=null,ai(u)===c&&(v=new v(m,g+"enter",y,n,u),v.target=E,v.relatedTarget=C,T=v),C=T,p&&y)t:{for(v=p,m=y,g=0,E=v;E;E=ji(E))g++;for(E=0,T=m;T;T=ji(T))E++;for(;0<g-E;)v=ji(v),g--;for(;0<E-g;)m=ji(m),E--;for(;g--;){if(v===m||m!==null&&v===m.alternate)break t;v=ji(v),m=ji(m)}v=null}else v=null;p!==null&&ry(d,f,p,v,!1),y!==null&&C!==null&&ry(d,C,y,v,!0)}}e:{if(f=c?Ki(c):window,p=f.nodeName&&f.nodeName.toLowerCase(),p==="select"||p==="input"&&f.type==="file")var _=fR;else if(Jg(f))if(W_)_=yR;else{_=mR;var R=pR}else(p=f.nodeName)&&p.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=gR);if(_&&(_=_(t,c))){H_(d,_,n,u);break e}R&&R(t,f,c),t==="focusout"&&(R=f._wrapperState)&&R.controlled&&f.type==="number"&&fh(f,"number",f.value)}switch(R=c?Ki(c):window,t){case"focusin":(Jg(R)||R.contentEditable==="true")&&(Hi=R,Ph=c,ko=null);break;case"focusout":ko=Ph=Hi=null;break;case"mousedown":Rh=!0;break;case"contextmenu":case"mouseup":case"dragend":Rh=!1,ey(d,n,u);break;case"selectionchange":if(ER)break;case"keydown":case"keyup":ey(d,n,u)}var I;if(mp)e:{switch(t){case"compositionstart":var w="onCompositionStart";break e;case"compositionend":w="onCompositionEnd";break e;case"compositionupdate":w="onCompositionUpdate";break e}w=void 0}else qi?z_(t,n)&&(w="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(w="onCompositionStart");w&&(B_&&n.locale!=="ko"&&(qi||w!=="onCompositionStart"?w==="onCompositionEnd"&&qi&&(I=$_()):(Ar=u,hp="value"in Ar?Ar.value:Ar.textContent,qi=!0)),R=mc(c,w),0<R.length&&(w=new Hg(w,t,null,n,u),d.push({event:w,listeners:R}),I?w.data=I:(I=q_(n),I!==null&&(w.data=I)))),(I=lR?cR(t,n):uR(t,n))&&(c=mc(c,"onBeforeInput"),0<c.length&&(u=new Hg("onBeforeInput","beforeinput",null,n,u),d.push({event:u,listeners:c}),u.data=I))}nE(d,e)})}function Jo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function mc(t,e){for(var n=e+"Capture",r=[];t!==null;){var i=t,s=i.stateNode;i.tag===5&&s!==null&&(i=s,s=Bo(t,n),s!=null&&r.unshift(Jo(t,s,i)),s=Bo(t,e),s!=null&&r.push(Jo(t,s,i))),t=t.return}return r}function ji(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function ry(t,e,n,r,i){for(var s=e._reactName,o=[];n!==null&&n!==r;){var l=n,a=l.alternate,c=l.stateNode;if(a!==null&&a===r)break;l.tag===5&&c!==null&&(l=c,i?(a=Bo(n,s),a!=null&&o.unshift(Jo(n,a,l))):i||(a=Bo(n,s),a!=null&&o.push(Jo(n,a,l)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var CR=/\r\n?/g,PR=/\u0000|\uFFFD/g;function iy(t){return(typeof t=="string"?t:""+t).replace(CR,`
`).replace(PR,"")}function cl(t,e,n){if(e=iy(e),iy(t)!==e&&n)throw Error(O(425))}function gc(){}var kh=null,Ih=null;function Ah(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var bh=typeof setTimeout=="function"?setTimeout:void 0,RR=typeof clearTimeout=="function"?clearTimeout:void 0,sy=typeof Promise=="function"?Promise:void 0,kR=typeof queueMicrotask=="function"?queueMicrotask:typeof sy<"u"?function(t){return sy.resolve(null).then(t).catch(IR)}:bh;function IR(t){setTimeout(function(){throw t})}function Ed(t,e){var n=e,r=0;do{var i=n.nextSibling;if(t.removeChild(n),i&&i.nodeType===8)if(n=i.data,n==="/$"){if(r===0){t.removeChild(i),Ho(e);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=i}while(n);Ho(e)}function Mr(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function oy(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Ms=Math.random().toString(36).slice(2),On="__reactFiber$"+Ms,Qo="__reactProps$"+Ms,ar="__reactContainer$"+Ms,xh="__reactEvents$"+Ms,AR="__reactListeners$"+Ms,bR="__reactHandles$"+Ms;function ai(t){var e=t[On];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ar]||n[On]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=oy(t);t!==null;){if(n=t[On])return n;t=oy(t)}return e}t=n,n=t.parentNode}return null}function ka(t){return t=t[On]||t[ar],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Ki(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(O(33))}function uu(t){return t[Qo]||null}var Oh=[],Gi=-1;function Qr(t){return{current:t}}function Ie(t){0>Gi||(t.current=Oh[Gi],Oh[Gi]=null,Gi--)}function Ce(t,e){Gi++,Oh[Gi]=t.current,t.current=e}var Hr={},Rt=Qr(Hr),Ut=Qr(!1),yi=Hr;function gs(t,e){var n=t.type.contextTypes;if(!n)return Hr;var r=t.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===e)return r.__reactInternalMemoizedMaskedChildContext;var i={},s;for(s in n)i[s]=e[s];return r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=i),i}function $t(t){return t=t.childContextTypes,t!=null}function yc(){Ie(Ut),Ie(Rt)}function ay(t,e,n){if(Rt.current!==Hr)throw Error(O(168));Ce(Rt,e),Ce(Ut,n)}function iE(t,e,n){var r=t.stateNode;if(e=e.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var i in r)if(!(i in e))throw Error(O(108,pP(t)||"Unknown",i));return Le({},n,r)}function vc(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Hr,yi=Rt.current,Ce(Rt,t),Ce(Ut,Ut.current),!0}function ly(t,e,n){var r=t.stateNode;if(!r)throw Error(O(169));n?(t=iE(t,e,yi),r.__reactInternalMemoizedMergedChildContext=t,Ie(Ut),Ie(Rt),Ce(Rt,t)):Ie(Ut),Ce(Ut,n)}var Jn=null,du=!1,Td=!1;function sE(t){Jn===null?Jn=[t]:Jn.push(t)}function xR(t){du=!0,sE(t)}function Yr(){if(!Td&&Jn!==null){Td=!0;var t=0,e=_e;try{var n=Jn;for(_e=1;t<n.length;t++){var r=n[t];do r=r(!0);while(r!==null)}Jn=null,du=!1}catch(i){throw Jn!==null&&(Jn=Jn.slice(t+1)),b_(lp,Yr),i}finally{_e=e,Td=!1}}return null}var Ji=[],Qi=0,_c=null,Ec=0,Xt=[],Zt=0,vi=null,Qn=1,Yn="";function ii(t,e){Ji[Qi++]=Ec,Ji[Qi++]=_c,_c=t,Ec=e}function oE(t,e,n){Xt[Zt++]=Qn,Xt[Zt++]=Yn,Xt[Zt++]=vi,vi=t;var r=Qn;t=Yn;var i=32-Sn(r)-1;r&=~(1<<i),n+=1;var s=32-Sn(e)+i;if(30<s){var o=i-i%5;s=(r&(1<<o)-1).toString(32),r>>=o,i-=o,Qn=1<<32-Sn(e)+i|n<<i|r,Yn=s+t}else Qn=1<<s|n<<i|r,Yn=t}function yp(t){t.return!==null&&(ii(t,1),oE(t,1,0))}function vp(t){for(;t===_c;)_c=Ji[--Qi],Ji[Qi]=null,Ec=Ji[--Qi],Ji[Qi]=null;for(;t===vi;)vi=Xt[--Zt],Xt[Zt]=null,Yn=Xt[--Zt],Xt[Zt]=null,Qn=Xt[--Zt],Xt[Zt]=null}var Ht=null,qt=null,be=!1,_n=null;function aE(t,e){var n=rn(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function cy(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Ht=t,qt=Mr(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Ht=t,qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=vi!==null?{id:Qn,overflow:Yn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=rn(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Ht=t,qt=null,!0):!1;default:return!1}}function Nh(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Dh(t){if(be){var e=qt;if(e){var n=e;if(!cy(t,e)){if(Nh(t))throw Error(O(418));e=Mr(n.nextSibling);var r=Ht;e&&cy(t,e)?aE(r,n):(t.flags=t.flags&-4097|2,be=!1,Ht=t)}}else{if(Nh(t))throw Error(O(418));t.flags=t.flags&-4097|2,be=!1,Ht=t}}}function uy(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Ht=t}function ul(t){if(t!==Ht)return!1;if(!be)return uy(t),be=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ah(t.type,t.memoizedProps)),e&&(e=qt)){if(Nh(t))throw lE(),Error(O(418));for(;e;)aE(t,e),e=Mr(e.nextSibling)}if(uy(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(O(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){qt=Mr(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}qt=null}}else qt=Ht?Mr(t.stateNode.nextSibling):null;return!0}function lE(){for(var t=qt;t;)t=Mr(t.nextSibling)}function ys(){qt=Ht=null,be=!1}function _p(t){_n===null?_n=[t]:_n.push(t)}var OR=mr.ReactCurrentBatchConfig;function gn(t,e){if(t&&t.defaultProps){e=Le({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Tc=Qr(null),Sc=null,Yi=null,Ep=null;function Tp(){Ep=Yi=Sc=null}function Sp(t){var e=Tc.current;Ie(Tc),t._currentValue=e}function Mh(t,e,n){for(;t!==null;){var r=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,r!==null&&(r.childLanes|=e)):r!==null&&(r.childLanes&e)!==e&&(r.childLanes|=e),t===n)break;t=t.return}}function os(t,e){Sc=t,Ep=Yi=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ft=!0),t.firstContext=null)}function ln(t){var e=t._currentValue;if(Ep!==t)if(t={context:t,memoizedValue:e,next:null},Yi===null){if(Sc===null)throw Error(O(308));Yi=t,Sc.dependencies={lanes:0,firstContext:t}}else Yi=Yi.next=t;return e}var li=null;function wp(t){li===null?li=[t]:li.push(t)}function cE(t,e,n,r){var i=e.interleaved;return i===null?(n.next=n,wp(e)):(n.next=i.next,i.next=n),e.interleaved=n,lr(t,r)}function lr(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var Tr=!1;function Cp(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function uE(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function nr(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Lr(t,e,n){var r=t.updateQueue;if(r===null)return null;if(r=r.shared,fe&2){var i=r.pending;return i===null?e.next=e:(e.next=i.next,i.next=e),r.pending=e,lr(t,n)}return i=r.interleaved,i===null?(e.next=e,wp(r)):(e.next=i.next,i.next=e),r.interleaved=e,lr(t,n)}function Ll(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cp(t,n)}}function dy(t,e){var n=t.updateQueue,r=t.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var i=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?i=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?i=s=e:s=s.next=e}else i=s=e;n={baseState:r.baseState,firstBaseUpdate:i,lastBaseUpdate:s,shared:r.shared,effects:r.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function wc(t,e,n,r){var i=t.updateQueue;Tr=!1;var s=i.firstBaseUpdate,o=i.lastBaseUpdate,l=i.shared.pending;if(l!==null){i.shared.pending=null;var a=l,c=a.next;a.next=null,o===null?s=c:o.next=c,o=a;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=c:l.next=c,u.lastBaseUpdate=a))}if(s!==null){var d=i.baseState;o=0,u=c=a=null,l=s;do{var f=l.lane,p=l.eventTime;if((r&f)===f){u!==null&&(u=u.next={eventTime:p,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var y=t,v=l;switch(f=e,p=n,v.tag){case 1:if(y=v.payload,typeof y=="function"){d=y.call(p,d,f);break e}d=y;break e;case 3:y.flags=y.flags&-65537|128;case 0:if(y=v.payload,f=typeof y=="function"?y.call(p,d,f):y,f==null)break e;d=Le({},d,f);break e;case 2:Tr=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=i.effects,f===null?i.effects=[l]:f.push(l))}else p={eventTime:p,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(c=u=p,a=d):u=u.next=p,o|=f;if(l=l.next,l===null){if(l=i.shared.pending,l===null)break;f=l,l=f.next,f.next=null,i.lastBaseUpdate=f,i.shared.pending=null}}while(1);if(u===null&&(a=d),i.baseState=a,i.firstBaseUpdate=c,i.lastBaseUpdate=u,e=i.shared.interleaved,e!==null){i=e;do o|=i.lane,i=i.next;while(i!==e)}else s===null&&(i.shared.lanes=0);Ei|=o,t.lanes=o,t.memoizedState=d}}function hy(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var r=t[e],i=r.callback;if(i!==null){if(r.callback=null,r=n,typeof i!="function")throw Error(O(191,i));i.call(r)}}}var dE=new c_.Component().refs;function Lh(t,e,n,r){e=t.memoizedState,n=n(r,e),n=n==null?e:Le({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var hu={isMounted:function(t){return(t=t._reactInternals)?bi(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=Vr(t),s=nr(r,i);s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(wn(e,t,i,r),Ll(e,t,i))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var r=Nt(),i=Vr(t),s=nr(r,i);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Lr(t,s,i),e!==null&&(wn(e,t,i,r),Ll(e,t,i))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Nt(),r=Vr(t),i=nr(n,r);i.tag=2,e!=null&&(i.callback=e),e=Lr(t,i,r),e!==null&&(wn(e,t,r,n),Ll(e,t,r))}};function fy(t,e,n,r,i,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(r,s,o):e.prototype&&e.prototype.isPureReactComponent?!Ko(n,r)||!Ko(i,s):!0}function hE(t,e,n){var r=!1,i=Hr,s=e.contextType;return typeof s=="object"&&s!==null?s=ln(s):(i=$t(e)?yi:Rt.current,r=e.contextTypes,s=(r=r!=null)?gs(t,i):Hr),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=hu,t.stateNode=e,e._reactInternals=t,r&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=i,t.__reactInternalMemoizedMaskedChildContext=s),e}function py(t,e,n,r){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,r),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,r),e.state!==t&&hu.enqueueReplaceState(e,e.state,null)}function jh(t,e,n,r){var i=t.stateNode;i.props=n,i.state=t.memoizedState,i.refs=dE,Cp(t);var s=e.contextType;typeof s=="object"&&s!==null?i.context=ln(s):(s=$t(e)?yi:Rt.current,i.context=gs(t,s)),i.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Lh(t,e,s,n),i.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof i.getSnapshotBeforeUpdate=="function"||typeof i.UNSAFE_componentWillMount!="function"&&typeof i.componentWillMount!="function"||(e=i.state,typeof i.componentWillMount=="function"&&i.componentWillMount(),typeof i.UNSAFE_componentWillMount=="function"&&i.UNSAFE_componentWillMount(),e!==i.state&&hu.enqueueReplaceState(i,i.state,null),wc(t,n,i,r),i.state=t.memoizedState),typeof i.componentDidMount=="function"&&(t.flags|=4194308)}function Zs(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(O(309));var r=n.stateNode}if(!r)throw Error(O(147,t));var i=r,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var l=i.refs;l===dE&&(l=i.refs={}),o===null?delete l[s]:l[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(O(284));if(!n._owner)throw Error(O(290,t))}return t}function dl(t,e){throw t=Object.prototype.toString.call(e),Error(O(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function my(t){var e=t._init;return e(t._payload)}function fE(t){function e(m,g){if(t){var E=m.deletions;E===null?(m.deletions=[g],m.flags|=16):E.push(g)}}function n(m,g){if(!t)return null;for(;g!==null;)e(m,g),g=g.sibling;return null}function r(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function i(m,g){return m=Fr(m,g),m.index=0,m.sibling=null,m}function s(m,g,E){return m.index=E,t?(E=m.alternate,E!==null?(E=E.index,E<g?(m.flags|=2,g):E):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function l(m,g,E,T){return g===null||g.tag!==6?(g=Id(E,m.mode,T),g.return=m,g):(g=i(g,E),g.return=m,g)}function a(m,g,E,T){var _=E.type;return _===zi?u(m,g,E.props.children,T,E.key):g!==null&&(g.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Er&&my(_)===g.type)?(T=i(g,E.props),T.ref=Zs(m,g,E),T.return=m,T):(T=Bl(E.type,E.key,E.props,null,m.mode,T),T.ref=Zs(m,g,E),T.return=m,T)}function c(m,g,E,T){return g===null||g.tag!==4||g.stateNode.containerInfo!==E.containerInfo||g.stateNode.implementation!==E.implementation?(g=Ad(E,m.mode,T),g.return=m,g):(g=i(g,E.children||[]),g.return=m,g)}function u(m,g,E,T,_){return g===null||g.tag!==7?(g=pi(E,m.mode,T,_),g.return=m,g):(g=i(g,E),g.return=m,g)}function d(m,g,E){if(typeof g=="string"&&g!==""||typeof g=="number")return g=Id(""+g,m.mode,E),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case el:return E=Bl(g.type,g.key,g.props,null,m.mode,E),E.ref=Zs(m,null,g),E.return=m,E;case Bi:return g=Ad(g,m.mode,E),g.return=m,g;case Er:var T=g._init;return d(m,T(g._payload),E)}if(co(g)||Gs(g))return g=pi(g,m.mode,E,null),g.return=m,g;dl(m,g)}return null}function f(m,g,E,T){var _=g!==null?g.key:null;if(typeof E=="string"&&E!==""||typeof E=="number")return _!==null?null:l(m,g,""+E,T);if(typeof E=="object"&&E!==null){switch(E.$$typeof){case el:return E.key===_?a(m,g,E,T):null;case Bi:return E.key===_?c(m,g,E,T):null;case Er:return _=E._init,f(m,g,_(E._payload),T)}if(co(E)||Gs(E))return _!==null?null:u(m,g,E,T,null);dl(m,E)}return null}function p(m,g,E,T,_){if(typeof T=="string"&&T!==""||typeof T=="number")return m=m.get(E)||null,l(g,m,""+T,_);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case el:return m=m.get(T.key===null?E:T.key)||null,a(g,m,T,_);case Bi:return m=m.get(T.key===null?E:T.key)||null,c(g,m,T,_);case Er:var R=T._init;return p(m,g,E,R(T._payload),_)}if(co(T)||Gs(T))return m=m.get(E)||null,u(g,m,T,_,null);dl(g,T)}return null}function y(m,g,E,T){for(var _=null,R=null,I=g,w=g=0,A=null;I!==null&&w<E.length;w++){I.index>w?(A=I,I=null):A=I.sibling;var S=f(m,I,E[w],T);if(S===null){I===null&&(I=A);break}t&&I&&S.alternate===null&&e(m,I),g=s(S,g,w),R===null?_=S:R.sibling=S,R=S,I=A}if(w===E.length)return n(m,I),be&&ii(m,w),_;if(I===null){for(;w<E.length;w++)I=d(m,E[w],T),I!==null&&(g=s(I,g,w),R===null?_=I:R.sibling=I,R=I);return be&&ii(m,w),_}for(I=r(m,I);w<E.length;w++)A=p(I,m,w,E[w],T),A!==null&&(t&&A.alternate!==null&&I.delete(A.key===null?w:A.key),g=s(A,g,w),R===null?_=A:R.sibling=A,R=A);return t&&I.forEach(function(Q){return e(m,Q)}),be&&ii(m,w),_}function v(m,g,E,T){var _=Gs(E);if(typeof _!="function")throw Error(O(150));if(E=_.call(E),E==null)throw Error(O(151));for(var R=_=null,I=g,w=g=0,A=null,S=E.next();I!==null&&!S.done;w++,S=E.next()){I.index>w?(A=I,I=null):A=I.sibling;var Q=f(m,I,S.value,T);if(Q===null){I===null&&(I=A);break}t&&I&&Q.alternate===null&&e(m,I),g=s(Q,g,w),R===null?_=Q:R.sibling=Q,R=Q,I=A}if(S.done)return n(m,I),be&&ii(m,w),_;if(I===null){for(;!S.done;w++,S=E.next())S=d(m,S.value,T),S!==null&&(g=s(S,g,w),R===null?_=S:R.sibling=S,R=S);return be&&ii(m,w),_}for(I=r(m,I);!S.done;w++,S=E.next())S=p(I,m,w,S.value,T),S!==null&&(t&&S.alternate!==null&&I.delete(S.key===null?w:S.key),g=s(S,g,w),R===null?_=S:R.sibling=S,R=S);return t&&I.forEach(function(re){return e(m,re)}),be&&ii(m,w),_}function C(m,g,E,T){if(typeof E=="object"&&E!==null&&E.type===zi&&E.key===null&&(E=E.props.children),typeof E=="object"&&E!==null){switch(E.$$typeof){case el:e:{for(var _=E.key,R=g;R!==null;){if(R.key===_){if(_=E.type,_===zi){if(R.tag===7){n(m,R.sibling),g=i(R,E.props.children),g.return=m,m=g;break e}}else if(R.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Er&&my(_)===R.type){n(m,R.sibling),g=i(R,E.props),g.ref=Zs(m,R,E),g.return=m,m=g;break e}n(m,R);break}else e(m,R);R=R.sibling}E.type===zi?(g=pi(E.props.children,m.mode,T,E.key),g.return=m,m=g):(T=Bl(E.type,E.key,E.props,null,m.mode,T),T.ref=Zs(m,g,E),T.return=m,m=T)}return o(m);case Bi:e:{for(R=E.key;g!==null;){if(g.key===R)if(g.tag===4&&g.stateNode.containerInfo===E.containerInfo&&g.stateNode.implementation===E.implementation){n(m,g.sibling),g=i(g,E.children||[]),g.return=m,m=g;break e}else{n(m,g);break}else e(m,g);g=g.sibling}g=Ad(E,m.mode,T),g.return=m,m=g}return o(m);case Er:return R=E._init,C(m,g,R(E._payload),T)}if(co(E))return y(m,g,E,T);if(Gs(E))return v(m,g,E,T);dl(m,E)}return typeof E=="string"&&E!==""||typeof E=="number"?(E=""+E,g!==null&&g.tag===6?(n(m,g.sibling),g=i(g,E),g.return=m,m=g):(n(m,g),g=Id(E,m.mode,T),g.return=m,m=g),o(m)):n(m,g)}return C}var vs=fE(!0),pE=fE(!1),Ia={},Vn=Qr(Ia),Yo=Qr(Ia),Xo=Qr(Ia);function ci(t){if(t===Ia)throw Error(O(174));return t}function Pp(t,e){switch(Ce(Xo,e),Ce(Yo,t),Ce(Vn,Ia),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:mh(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=mh(e,t)}Ie(Vn),Ce(Vn,e)}function _s(){Ie(Vn),Ie(Yo),Ie(Xo)}function mE(t){ci(Xo.current);var e=ci(Vn.current),n=mh(e,t.type);e!==n&&(Ce(Yo,t),Ce(Vn,n))}function Rp(t){Yo.current===t&&(Ie(Vn),Ie(Yo))}var De=Qr(0);function Cc(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Sd=[];function kp(){for(var t=0;t<Sd.length;t++)Sd[t]._workInProgressVersionPrimary=null;Sd.length=0}var jl=mr.ReactCurrentDispatcher,wd=mr.ReactCurrentBatchConfig,_i=0,Me=null,Je=null,tt=null,Pc=!1,Io=!1,Zo=0,NR=0;function mt(){throw Error(O(321))}function Ip(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Cn(t[n],e[n]))return!1;return!0}function Ap(t,e,n,r,i,s){if(_i=s,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,jl.current=t===null||t.memoizedState===null?jR:VR,t=n(r,i),Io){s=0;do{if(Io=!1,Zo=0,25<=s)throw Error(O(301));s+=1,tt=Je=null,e.updateQueue=null,jl.current=FR,t=n(r,i)}while(Io)}if(jl.current=Rc,e=Je!==null&&Je.next!==null,_i=0,tt=Je=Me=null,Pc=!1,e)throw Error(O(300));return t}function bp(){var t=Zo!==0;return Zo=0,t}function bn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return tt===null?Me.memoizedState=tt=t:tt=tt.next=t,tt}function cn(){if(Je===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=Je.next;var e=tt===null?Me.memoizedState:tt.next;if(e!==null)tt=e,Je=t;else{if(t===null)throw Error(O(310));Je=t,t={memoizedState:Je.memoizedState,baseState:Je.baseState,baseQueue:Je.baseQueue,queue:Je.queue,next:null},tt===null?Me.memoizedState=tt=t:tt=tt.next=t}return tt}function ea(t,e){return typeof e=="function"?e(t):e}function Cd(t){var e=cn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=Je,i=r.baseQueue,s=n.pending;if(s!==null){if(i!==null){var o=i.next;i.next=s.next,s.next=o}r.baseQueue=i=s,n.pending=null}if(i!==null){s=i.next,r=r.baseState;var l=o=null,a=null,c=s;do{var u=c.lane;if((_i&u)===u)a!==null&&(a=a.next={lane:0,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null}),r=c.hasEagerState?c.eagerState:t(r,c.action);else{var d={lane:u,action:c.action,hasEagerState:c.hasEagerState,eagerState:c.eagerState,next:null};a===null?(l=a=d,o=r):a=a.next=d,Me.lanes|=u,Ei|=u}c=c.next}while(c!==null&&c!==s);a===null?o=r:a.next=l,Cn(r,e.memoizedState)||(Ft=!0),e.memoizedState=r,e.baseState=o,e.baseQueue=a,n.lastRenderedState=r}if(t=n.interleaved,t!==null){i=t;do s=i.lane,Me.lanes|=s,Ei|=s,i=i.next;while(i!==t)}else i===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Pd(t){var e=cn(),n=e.queue;if(n===null)throw Error(O(311));n.lastRenderedReducer=t;var r=n.dispatch,i=n.pending,s=e.memoizedState;if(i!==null){n.pending=null;var o=i=i.next;do s=t(s,o.action),o=o.next;while(o!==i);Cn(s,e.memoizedState)||(Ft=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,r]}function gE(){}function yE(t,e){var n=Me,r=cn(),i=e(),s=!Cn(r.memoizedState,i);if(s&&(r.memoizedState=i,Ft=!0),r=r.queue,xp(EE.bind(null,n,r,t),[t]),r.getSnapshot!==e||s||tt!==null&&tt.memoizedState.tag&1){if(n.flags|=2048,ta(9,_E.bind(null,n,r,i,e),void 0,null),nt===null)throw Error(O(349));_i&30||vE(n,e,i)}return i}function vE(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function _E(t,e,n,r){e.value=n,e.getSnapshot=r,TE(e)&&SE(t)}function EE(t,e,n){return n(function(){TE(e)&&SE(t)})}function TE(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Cn(t,n)}catch{return!0}}function SE(t){var e=lr(t,1);e!==null&&wn(e,t,1,-1)}function gy(t){var e=bn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:ea,lastRenderedState:t},e.queue=t,t=t.dispatch=LR.bind(null,Me,t),[e.memoizedState,t]}function ta(t,e,n,r){return t={tag:t,create:e,destroy:n,deps:r,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(r=n.next,n.next=t,t.next=r,e.lastEffect=t)),t}function wE(){return cn().memoizedState}function Vl(t,e,n,r){var i=bn();Me.flags|=t,i.memoizedState=ta(1|e,n,void 0,r===void 0?null:r)}function fu(t,e,n,r){var i=cn();r=r===void 0?null:r;var s=void 0;if(Je!==null){var o=Je.memoizedState;if(s=o.destroy,r!==null&&Ip(r,o.deps)){i.memoizedState=ta(e,n,s,r);return}}Me.flags|=t,i.memoizedState=ta(1|e,n,s,r)}function yy(t,e){return Vl(8390656,8,t,e)}function xp(t,e){return fu(2048,8,t,e)}function CE(t,e){return fu(4,2,t,e)}function PE(t,e){return fu(4,4,t,e)}function RE(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function kE(t,e,n){return n=n!=null?n.concat([t]):null,fu(4,4,RE.bind(null,e,t),n)}function Op(){}function IE(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ip(e,r[1])?r[0]:(n.memoizedState=[t,e],t)}function AE(t,e){var n=cn();e=e===void 0?null:e;var r=n.memoizedState;return r!==null&&e!==null&&Ip(e,r[1])?r[0]:(t=t(),n.memoizedState=[t,e],t)}function bE(t,e,n){return _i&21?(Cn(n,e)||(n=N_(),Me.lanes|=n,Ei|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ft=!0),t.memoizedState=n)}function DR(t,e){var n=_e;_e=n!==0&&4>n?n:4,t(!0);var r=wd.transition;wd.transition={};try{t(!1),e()}finally{_e=n,wd.transition=r}}function xE(){return cn().memoizedState}function MR(t,e,n){var r=Vr(t);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},OE(t))NE(e,n);else if(n=cE(t,e,n,r),n!==null){var i=Nt();wn(n,t,r,i),DE(n,e,r)}}function LR(t,e,n){var r=Vr(t),i={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(OE(t))NE(e,i);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,l=s(o,n);if(i.hasEagerState=!0,i.eagerState=l,Cn(l,o)){var a=e.interleaved;a===null?(i.next=i,wp(e)):(i.next=a.next,a.next=i),e.interleaved=i;return}}catch{}finally{}n=cE(t,e,i,r),n!==null&&(i=Nt(),wn(n,t,r,i),DE(n,e,r))}}function OE(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function NE(t,e){Io=Pc=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function DE(t,e,n){if(n&4194240){var r=e.lanes;r&=t.pendingLanes,n|=r,e.lanes=n,cp(t,n)}}var Rc={readContext:ln,useCallback:mt,useContext:mt,useEffect:mt,useImperativeHandle:mt,useInsertionEffect:mt,useLayoutEffect:mt,useMemo:mt,useReducer:mt,useRef:mt,useState:mt,useDebugValue:mt,useDeferredValue:mt,useTransition:mt,useMutableSource:mt,useSyncExternalStore:mt,useId:mt,unstable_isNewReconciler:!1},jR={readContext:ln,useCallback:function(t,e){return bn().memoizedState=[t,e===void 0?null:e],t},useContext:ln,useEffect:yy,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,Vl(4194308,4,RE.bind(null,e,t),n)},useLayoutEffect:function(t,e){return Vl(4194308,4,t,e)},useInsertionEffect:function(t,e){return Vl(4,2,t,e)},useMemo:function(t,e){var n=bn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var r=bn();return e=n!==void 0?n(e):e,r.memoizedState=r.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},r.queue=t,t=t.dispatch=MR.bind(null,Me,t),[r.memoizedState,t]},useRef:function(t){var e=bn();return t={current:t},e.memoizedState=t},useState:gy,useDebugValue:Op,useDeferredValue:function(t){return bn().memoizedState=t},useTransition:function(){var t=gy(!1),e=t[0];return t=DR.bind(null,t[1]),bn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var r=Me,i=bn();if(be){if(n===void 0)throw Error(O(407));n=n()}else{if(n=e(),nt===null)throw Error(O(349));_i&30||vE(r,e,n)}i.memoizedState=n;var s={value:n,getSnapshot:e};return i.queue=s,yy(EE.bind(null,r,s,t),[t]),r.flags|=2048,ta(9,_E.bind(null,r,s,n,e),void 0,null),n},useId:function(){var t=bn(),e=nt.identifierPrefix;if(be){var n=Yn,r=Qn;n=(r&~(1<<32-Sn(r)-1)).toString(32)+n,e=":"+e+"R"+n,n=Zo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=NR++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},VR={readContext:ln,useCallback:IE,useContext:ln,useEffect:xp,useImperativeHandle:kE,useInsertionEffect:CE,useLayoutEffect:PE,useMemo:AE,useReducer:Cd,useRef:wE,useState:function(){return Cd(ea)},useDebugValue:Op,useDeferredValue:function(t){var e=cn();return bE(e,Je.memoizedState,t)},useTransition:function(){var t=Cd(ea)[0],e=cn().memoizedState;return[t,e]},useMutableSource:gE,useSyncExternalStore:yE,useId:xE,unstable_isNewReconciler:!1},FR={readContext:ln,useCallback:IE,useContext:ln,useEffect:xp,useImperativeHandle:kE,useInsertionEffect:CE,useLayoutEffect:PE,useMemo:AE,useReducer:Pd,useRef:wE,useState:function(){return Pd(ea)},useDebugValue:Op,useDeferredValue:function(t){var e=cn();return Je===null?e.memoizedState=t:bE(e,Je.memoizedState,t)},useTransition:function(){var t=Pd(ea)[0],e=cn().memoizedState;return[t,e]},useMutableSource:gE,useSyncExternalStore:yE,useId:xE,unstable_isNewReconciler:!1};function Es(t,e){try{var n="",r=e;do n+=fP(r),r=r.return;while(r);var i=n}catch(s){i=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:i,digest:null}}function Rd(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Vh(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var UR=typeof WeakMap=="function"?WeakMap:Map;function ME(t,e,n){n=nr(-1,n),n.tag=3,n.payload={element:null};var r=e.value;return n.callback=function(){Ic||(Ic=!0,Gh=r),Vh(t,e)},n}function LE(t,e,n){n=nr(-1,n),n.tag=3;var r=t.type.getDerivedStateFromError;if(typeof r=="function"){var i=e.value;n.payload=function(){return r(i)},n.callback=function(){Vh(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Vh(t,e),typeof r!="function"&&(jr===null?jr=new Set([this]):jr.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function vy(t,e,n){var r=t.pingCache;if(r===null){r=t.pingCache=new UR;var i=new Set;r.set(e,i)}else i=r.get(e),i===void 0&&(i=new Set,r.set(e,i));i.has(n)||(i.add(n),t=ek.bind(null,t,e,n),e.then(t,t))}function _y(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ey(t,e,n,r,i){return t.mode&1?(t.flags|=65536,t.lanes=i,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=nr(-1,1),e.tag=2,Lr(n,e,1))),n.lanes|=1),t)}var $R=mr.ReactCurrentOwner,Ft=!1;function xt(t,e,n,r){e.child=t===null?pE(e,null,n,r):vs(e,t.child,n,r)}function Ty(t,e,n,r,i){n=n.render;var s=e.ref;return os(e,i),r=Ap(t,e,n,r,s,i),n=bp(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,cr(t,e,i)):(be&&n&&yp(e),e.flags|=1,xt(t,e,r,i),e.child)}function Sy(t,e,n,r,i){if(t===null){var s=n.type;return typeof s=="function"&&!Up(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,jE(t,e,s,r,i)):(t=Bl(n.type,null,r,e,e.mode,i),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&i)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Ko,n(o,r)&&t.ref===e.ref)return cr(t,e,i)}return e.flags|=1,t=Fr(s,r),t.ref=e.ref,t.return=e,e.child=t}function jE(t,e,n,r,i){if(t!==null){var s=t.memoizedProps;if(Ko(s,r)&&t.ref===e.ref)if(Ft=!1,e.pendingProps=r=s,(t.lanes&i)!==0)t.flags&131072&&(Ft=!0);else return e.lanes=t.lanes,cr(t,e,i)}return Fh(t,e,n,r,i)}function VE(t,e,n){var r=e.pendingProps,i=r.children,s=t!==null?t.memoizedState:null;if(r.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Ce(Zi,zt),zt|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Ce(Zi,zt),zt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=s!==null?s.baseLanes:n,Ce(Zi,zt),zt|=r}else s!==null?(r=s.baseLanes|n,e.memoizedState=null):r=n,Ce(Zi,zt),zt|=r;return xt(t,e,i,n),e.child}function FE(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Fh(t,e,n,r,i){var s=$t(n)?yi:Rt.current;return s=gs(e,s),os(e,i),n=Ap(t,e,n,r,s,i),r=bp(),t!==null&&!Ft?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~i,cr(t,e,i)):(be&&r&&yp(e),e.flags|=1,xt(t,e,n,i),e.child)}function wy(t,e,n,r,i){if($t(n)){var s=!0;vc(e)}else s=!1;if(os(e,i),e.stateNode===null)Fl(t,e),hE(e,n,r),jh(e,n,r,i),r=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var a=o.context,c=n.contextType;typeof c=="object"&&c!==null?c=ln(c):(c=$t(n)?yi:Rt.current,c=gs(e,c));var u=n.getDerivedStateFromProps,d=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";d||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==r||a!==c)&&py(e,o,r,c),Tr=!1;var f=e.memoizedState;o.state=f,wc(e,r,o,i),a=e.memoizedState,l!==r||f!==a||Ut.current||Tr?(typeof u=="function"&&(Lh(e,n,u,r),a=e.memoizedState),(l=Tr||fy(e,n,l,r,f,a,c))?(d||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=r,e.memoizedState=a),o.props=r,o.state=a,o.context=c,r=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),r=!1)}else{o=e.stateNode,uE(t,e),l=e.memoizedProps,c=e.type===e.elementType?l:gn(e.type,l),o.props=c,d=e.pendingProps,f=o.context,a=n.contextType,typeof a=="object"&&a!==null?a=ln(a):(a=$t(n)?yi:Rt.current,a=gs(e,a));var p=n.getDerivedStateFromProps;(u=typeof p=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==d||f!==a)&&py(e,o,r,a),Tr=!1,f=e.memoizedState,o.state=f,wc(e,r,o,i);var y=e.memoizedState;l!==d||f!==y||Ut.current||Tr?(typeof p=="function"&&(Lh(e,n,p,r),y=e.memoizedState),(c=Tr||fy(e,n,c,r,f,y,a)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(r,y,a),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(r,y,a)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=r,e.memoizedState=y),o.props=r,o.state=y,o.context=a,r=c):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),r=!1)}return Uh(t,e,n,r,s,i)}function Uh(t,e,n,r,i,s){FE(t,e);var o=(e.flags&128)!==0;if(!r&&!o)return i&&ly(e,n,!1),cr(t,e,s);r=e.stateNode,$R.current=e;var l=o&&typeof n.getDerivedStateFromError!="function"?null:r.render();return e.flags|=1,t!==null&&o?(e.child=vs(e,t.child,null,s),e.child=vs(e,null,l,s)):xt(t,e,l,s),e.memoizedState=r.state,i&&ly(e,n,!0),e.child}function UE(t){var e=t.stateNode;e.pendingContext?ay(t,e.pendingContext,e.pendingContext!==e.context):e.context&&ay(t,e.context,!1),Pp(t,e.containerInfo)}function Cy(t,e,n,r,i){return ys(),_p(i),e.flags|=256,xt(t,e,n,r),e.child}var $h={dehydrated:null,treeContext:null,retryLane:0};function Bh(t){return{baseLanes:t,cachePool:null,transitions:null}}function $E(t,e,n){var r=e.pendingProps,i=De.current,s=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(i&2)!==0),l?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(i|=1),Ce(De,i&1),t===null)return Dh(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=r.children,t=r.fallback,s?(r=e.mode,s=e.child,o={mode:"hidden",children:o},!(r&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=gu(o,r,0,null),t=pi(t,r,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Bh(n),e.memoizedState=$h,t):Np(e,o));if(i=t.memoizedState,i!==null&&(l=i.dehydrated,l!==null))return BR(t,e,o,r,l,i,n);if(s){s=r.fallback,o=e.mode,i=t.child,l=i.sibling;var a={mode:"hidden",children:r.children};return!(o&1)&&e.child!==i?(r=e.child,r.childLanes=0,r.pendingProps=a,e.deletions=null):(r=Fr(i,a),r.subtreeFlags=i.subtreeFlags&14680064),l!==null?s=Fr(l,s):(s=pi(s,o,n,null),s.flags|=2),s.return=e,r.return=e,r.sibling=s,e.child=r,r=s,s=e.child,o=t.child.memoizedState,o=o===null?Bh(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=$h,r}return s=t.child,t=s.sibling,r=Fr(s,{mode:"visible",children:r.children}),!(e.mode&1)&&(r.lanes=n),r.return=e,r.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=r,e.memoizedState=null,r}function Np(t,e){return e=gu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function hl(t,e,n,r){return r!==null&&_p(r),vs(e,t.child,null,n),t=Np(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function BR(t,e,n,r,i,s,o){if(n)return e.flags&256?(e.flags&=-257,r=Rd(Error(O(422))),hl(t,e,o,r)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=r.fallback,i=e.mode,r=gu({mode:"visible",children:r.children},i,0,null),s=pi(s,i,o,null),s.flags|=2,r.return=e,s.return=e,r.sibling=s,e.child=r,e.mode&1&&vs(e,t.child,null,o),e.child.memoizedState=Bh(o),e.memoizedState=$h,s);if(!(e.mode&1))return hl(t,e,o,null);if(i.data==="$!"){if(r=i.nextSibling&&i.nextSibling.dataset,r)var l=r.dgst;return r=l,s=Error(O(419)),r=Rd(s,r,void 0),hl(t,e,o,r)}if(l=(o&t.childLanes)!==0,Ft||l){if(r=nt,r!==null){switch(o&-o){case 4:i=2;break;case 16:i=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:i=32;break;case 536870912:i=268435456;break;default:i=0}i=i&(r.suspendedLanes|o)?0:i,i!==0&&i!==s.retryLane&&(s.retryLane=i,lr(t,i),wn(r,t,i,-1))}return Fp(),r=Rd(Error(O(421))),hl(t,e,o,r)}return i.data==="$?"?(e.flags|=128,e.child=t.child,e=tk.bind(null,t),i._reactRetry=e,null):(t=s.treeContext,qt=Mr(i.nextSibling),Ht=e,be=!0,_n=null,t!==null&&(Xt[Zt++]=Qn,Xt[Zt++]=Yn,Xt[Zt++]=vi,Qn=t.id,Yn=t.overflow,vi=e),e=Np(e,r.children),e.flags|=4096,e)}function Py(t,e,n){t.lanes|=e;var r=t.alternate;r!==null&&(r.lanes|=e),Mh(t.return,e,n)}function kd(t,e,n,r,i){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:i}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=r,s.tail=n,s.tailMode=i)}function BE(t,e,n){var r=e.pendingProps,i=r.revealOrder,s=r.tail;if(xt(t,e,r.children,n),r=De.current,r&2)r=r&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Py(t,n,e);else if(t.tag===19)Py(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}r&=1}if(Ce(De,r),!(e.mode&1))e.memoizedState=null;else switch(i){case"forwards":for(n=e.child,i=null;n!==null;)t=n.alternate,t!==null&&Cc(t)===null&&(i=n),n=n.sibling;n=i,n===null?(i=e.child,e.child=null):(i=n.sibling,n.sibling=null),kd(e,!1,i,n,s);break;case"backwards":for(n=null,i=e.child,e.child=null;i!==null;){if(t=i.alternate,t!==null&&Cc(t)===null){e.child=i;break}t=i.sibling,i.sibling=n,n=i,i=t}kd(e,!0,n,null,s);break;case"together":kd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Fl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function cr(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Ei|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(O(153));if(e.child!==null){for(t=e.child,n=Fr(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Fr(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function zR(t,e,n){switch(e.tag){case 3:UE(e),ys();break;case 5:mE(e);break;case 1:$t(e.type)&&vc(e);break;case 4:Pp(e,e.stateNode.containerInfo);break;case 10:var r=e.type._context,i=e.memoizedProps.value;Ce(Tc,r._currentValue),r._currentValue=i;break;case 13:if(r=e.memoizedState,r!==null)return r.dehydrated!==null?(Ce(De,De.current&1),e.flags|=128,null):n&e.child.childLanes?$E(t,e,n):(Ce(De,De.current&1),t=cr(t,e,n),t!==null?t.sibling:null);Ce(De,De.current&1);break;case 19:if(r=(n&e.childLanes)!==0,t.flags&128){if(r)return BE(t,e,n);e.flags|=128}if(i=e.memoizedState,i!==null&&(i.rendering=null,i.tail=null,i.lastEffect=null),Ce(De,De.current),r)break;return null;case 22:case 23:return e.lanes=0,VE(t,e,n)}return cr(t,e,n)}var zE,zh,qE,HE;zE=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};zh=function(){};qE=function(t,e,n,r){var i=t.memoizedProps;if(i!==r){t=e.stateNode,ci(Vn.current);var s=null;switch(n){case"input":i=dh(t,i),r=dh(t,r),s=[];break;case"select":i=Le({},i,{value:void 0}),r=Le({},r,{value:void 0}),s=[];break;case"textarea":i=ph(t,i),r=ph(t,r),s=[];break;default:typeof i.onClick!="function"&&typeof r.onClick=="function"&&(t.onclick=gc)}gh(n,r);var o;n=null;for(c in i)if(!r.hasOwnProperty(c)&&i.hasOwnProperty(c)&&i[c]!=null)if(c==="style"){var l=i[c];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else c!=="dangerouslySetInnerHTML"&&c!=="children"&&c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&c!=="autoFocus"&&(Uo.hasOwnProperty(c)?s||(s=[]):(s=s||[]).push(c,null));for(c in r){var a=r[c];if(l=i!=null?i[c]:void 0,r.hasOwnProperty(c)&&a!==l&&(a!=null||l!=null))if(c==="style")if(l){for(o in l)!l.hasOwnProperty(o)||a&&a.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in a)a.hasOwnProperty(o)&&l[o]!==a[o]&&(n||(n={}),n[o]=a[o])}else n||(s||(s=[]),s.push(c,n)),n=a;else c==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,l=l?l.__html:void 0,a!=null&&l!==a&&(s=s||[]).push(c,a)):c==="children"?typeof a!="string"&&typeof a!="number"||(s=s||[]).push(c,""+a):c!=="suppressContentEditableWarning"&&c!=="suppressHydrationWarning"&&(Uo.hasOwnProperty(c)?(a!=null&&c==="onScroll"&&Re("scroll",t),s||l===a||(s=[])):(s=s||[]).push(c,a))}n&&(s=s||[]).push("style",n);var c=s;(e.updateQueue=c)&&(e.flags|=4)}};HE=function(t,e,n,r){n!==r&&(e.flags|=4)};function eo(t,e){if(!be)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:r.sibling=null}}function gt(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,r=0;if(e)for(var i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags&14680064,r|=i.flags&14680064,i.return=t,i=i.sibling;else for(i=t.child;i!==null;)n|=i.lanes|i.childLanes,r|=i.subtreeFlags,r|=i.flags,i.return=t,i=i.sibling;return t.subtreeFlags|=r,t.childLanes=n,e}function qR(t,e,n){var r=e.pendingProps;switch(vp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return gt(e),null;case 1:return $t(e.type)&&yc(),gt(e),null;case 3:return r=e.stateNode,_s(),Ie(Ut),Ie(Rt),kp(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(t===null||t.child===null)&&(ul(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,_n!==null&&(Yh(_n),_n=null))),zh(t,e),gt(e),null;case 5:Rp(e);var i=ci(Xo.current);if(n=e.type,t!==null&&e.stateNode!=null)qE(t,e,n,r,i),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!r){if(e.stateNode===null)throw Error(O(166));return gt(e),null}if(t=ci(Vn.current),ul(e)){r=e.stateNode,n=e.type;var s=e.memoizedProps;switch(r[On]=e,r[Qo]=s,t=(e.mode&1)!==0,n){case"dialog":Re("cancel",r),Re("close",r);break;case"iframe":case"object":case"embed":Re("load",r);break;case"video":case"audio":for(i=0;i<ho.length;i++)Re(ho[i],r);break;case"source":Re("error",r);break;case"img":case"image":case"link":Re("error",r),Re("load",r);break;case"details":Re("toggle",r);break;case"input":Dg(r,s),Re("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!s.multiple},Re("invalid",r);break;case"textarea":Lg(r,s),Re("invalid",r)}gh(n,s),i=null;for(var o in s)if(s.hasOwnProperty(o)){var l=s[o];o==="children"?typeof l=="string"?r.textContent!==l&&(s.suppressHydrationWarning!==!0&&cl(r.textContent,l,t),i=["children",l]):typeof l=="number"&&r.textContent!==""+l&&(s.suppressHydrationWarning!==!0&&cl(r.textContent,l,t),i=["children",""+l]):Uo.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Re("scroll",r)}switch(n){case"input":tl(r),Mg(r,s,!0);break;case"textarea":tl(r),jg(r);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(r.onclick=gc)}r=i,e.updateQueue=r,r!==null&&(e.flags|=4)}else{o=i.nodeType===9?i:i.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=v_(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof r.is=="string"?t=o.createElement(n,{is:r.is}):(t=o.createElement(n),n==="select"&&(o=t,r.multiple?o.multiple=!0:r.size&&(o.size=r.size))):t=o.createElementNS(t,n),t[On]=e,t[Qo]=r,zE(t,e,!1,!1),e.stateNode=t;e:{switch(o=yh(n,r),n){case"dialog":Re("cancel",t),Re("close",t),i=r;break;case"iframe":case"object":case"embed":Re("load",t),i=r;break;case"video":case"audio":for(i=0;i<ho.length;i++)Re(ho[i],t);i=r;break;case"source":Re("error",t),i=r;break;case"img":case"image":case"link":Re("error",t),Re("load",t),i=r;break;case"details":Re("toggle",t),i=r;break;case"input":Dg(t,r),i=dh(t,r),Re("invalid",t);break;case"option":i=r;break;case"select":t._wrapperState={wasMultiple:!!r.multiple},i=Le({},r,{value:void 0}),Re("invalid",t);break;case"textarea":Lg(t,r),i=ph(t,r),Re("invalid",t);break;default:i=r}gh(n,i),l=i;for(s in l)if(l.hasOwnProperty(s)){var a=l[s];s==="style"?T_(t,a):s==="dangerouslySetInnerHTML"?(a=a?a.__html:void 0,a!=null&&__(t,a)):s==="children"?typeof a=="string"?(n!=="textarea"||a!=="")&&$o(t,a):typeof a=="number"&&$o(t,""+a):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(Uo.hasOwnProperty(s)?a!=null&&s==="onScroll"&&Re("scroll",t):a!=null&&rp(t,s,a,o))}switch(n){case"input":tl(t),Mg(t,r,!1);break;case"textarea":tl(t),jg(t);break;case"option":r.value!=null&&t.setAttribute("value",""+qr(r.value));break;case"select":t.multiple=!!r.multiple,s=r.value,s!=null?ns(t,!!r.multiple,s,!1):r.defaultValue!=null&&ns(t,!!r.multiple,r.defaultValue,!0);break;default:typeof i.onClick=="function"&&(t.onclick=gc)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return gt(e),null;case 6:if(t&&e.stateNode!=null)HE(t,e,t.memoizedProps,r);else{if(typeof r!="string"&&e.stateNode===null)throw Error(O(166));if(n=ci(Xo.current),ci(Vn.current),ul(e)){if(r=e.stateNode,n=e.memoizedProps,r[On]=e,(s=r.nodeValue!==n)&&(t=Ht,t!==null))switch(t.tag){case 3:cl(r.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&cl(r.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[On]=e,e.stateNode=r}return gt(e),null;case 13:if(Ie(De),r=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(be&&qt!==null&&e.mode&1&&!(e.flags&128))lE(),ys(),e.flags|=98560,s=!1;else if(s=ul(e),r!==null&&r.dehydrated!==null){if(t===null){if(!s)throw Error(O(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(O(317));s[On]=e}else ys(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;gt(e),s=!1}else _n!==null&&(Yh(_n),_n=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(r=r!==null,r!==(t!==null&&t.memoizedState!==null)&&r&&(e.child.flags|=8192,e.mode&1&&(t===null||De.current&1?Ye===0&&(Ye=3):Fp())),e.updateQueue!==null&&(e.flags|=4),gt(e),null);case 4:return _s(),zh(t,e),t===null&&Go(e.stateNode.containerInfo),gt(e),null;case 10:return Sp(e.type._context),gt(e),null;case 17:return $t(e.type)&&yc(),gt(e),null;case 19:if(Ie(De),s=e.memoizedState,s===null)return gt(e),null;if(r=(e.flags&128)!==0,o=s.rendering,o===null)if(r)eo(s,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Cc(t),o!==null){for(e.flags|=128,eo(s,!1),r=o.updateQueue,r!==null&&(e.updateQueue=r,e.flags|=4),e.subtreeFlags=0,r=n,n=e.child;n!==null;)s=n,t=r,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return Ce(De,De.current&1|2),e.child}t=t.sibling}s.tail!==null&&Be()>Ts&&(e.flags|=128,r=!0,eo(s,!1),e.lanes=4194304)}else{if(!r)if(t=Cc(o),t!==null){if(e.flags|=128,r=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),eo(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!be)return gt(e),null}else 2*Be()-s.renderingStartTime>Ts&&n!==1073741824&&(e.flags|=128,r=!0,eo(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=Be(),e.sibling=null,n=De.current,Ce(De,r?n&1|2:n&1),e):(gt(e),null);case 22:case 23:return Vp(),r=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==r&&(e.flags|=8192),r&&e.mode&1?zt&1073741824&&(gt(e),e.subtreeFlags&6&&(e.flags|=8192)):gt(e),null;case 24:return null;case 25:return null}throw Error(O(156,e.tag))}function HR(t,e){switch(vp(e),e.tag){case 1:return $t(e.type)&&yc(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return _s(),Ie(Ut),Ie(Rt),kp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Rp(e),null;case 13:if(Ie(De),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(O(340));ys()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(De),null;case 4:return _s(),null;case 10:return Sp(e.type._context),null;case 22:case 23:return Vp(),null;case 24:return null;default:return null}}var fl=!1,Et=!1,WR=typeof WeakSet=="function"?WeakSet:Set,$=null;function Xi(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Ve(t,e,r)}else n.current=null}function qh(t,e,n){try{n()}catch(r){Ve(t,e,r)}}var Ry=!1;function KR(t,e){if(kh=fc,t=J_(),gp(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var i=r.anchorOffset,s=r.focusNode;r=r.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,l=-1,a=-1,c=0,u=0,d=t,f=null;t:for(;;){for(var p;d!==n||i!==0&&d.nodeType!==3||(l=o+i),d!==s||r!==0&&d.nodeType!==3||(a=o+r),d.nodeType===3&&(o+=d.nodeValue.length),(p=d.firstChild)!==null;)f=d,d=p;for(;;){if(d===t)break t;if(f===n&&++c===i&&(l=o),f===s&&++u===r&&(a=o),(p=d.nextSibling)!==null)break;d=f,f=d.parentNode}d=p}n=l===-1||a===-1?null:{start:l,end:a}}else n=null}n=n||{start:0,end:0}}else n=null;for(Ih={focusedElem:t,selectionRange:n},fc=!1,$=e;$!==null;)if(e=$,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,$=t;else for(;$!==null;){e=$;try{var y=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(y!==null){var v=y.memoizedProps,C=y.memoizedState,m=e.stateNode,g=m.getSnapshotBeforeUpdate(e.elementType===e.type?v:gn(e.type,v),C);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var E=e.stateNode.containerInfo;E.nodeType===1?E.textContent="":E.nodeType===9&&E.documentElement&&E.removeChild(E.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(O(163))}}catch(T){Ve(e,e.return,T)}if(t=e.sibling,t!==null){t.return=e.return,$=t;break}$=e.return}return y=Ry,Ry=!1,y}function Ao(t,e,n){var r=e.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var s=i.destroy;i.destroy=void 0,s!==void 0&&qh(e,n,s)}i=i.next}while(i!==r)}}function pu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var r=n.create;n.destroy=r()}n=n.next}while(n!==e)}}function Hh(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function WE(t){var e=t.alternate;e!==null&&(t.alternate=null,WE(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[On],delete e[Qo],delete e[xh],delete e[AR],delete e[bR])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function KE(t){return t.tag===5||t.tag===3||t.tag===4}function ky(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||KE(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Wh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=gc));else if(r!==4&&(t=t.child,t!==null))for(Wh(t,e,n),t=t.sibling;t!==null;)Wh(t,e,n),t=t.sibling}function Kh(t,e,n){var r=t.tag;if(r===5||r===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(r!==4&&(t=t.child,t!==null))for(Kh(t,e,n),t=t.sibling;t!==null;)Kh(t,e,n),t=t.sibling}var st=null,yn=!1;function yr(t,e,n){for(n=n.child;n!==null;)GE(t,e,n),n=n.sibling}function GE(t,e,n){if(jn&&typeof jn.onCommitFiberUnmount=="function")try{jn.onCommitFiberUnmount(ou,n)}catch{}switch(n.tag){case 5:Et||Xi(n,e);case 6:var r=st,i=yn;st=null,yr(t,e,n),st=r,yn=i,st!==null&&(yn?(t=st,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):st.removeChild(n.stateNode));break;case 18:st!==null&&(yn?(t=st,n=n.stateNode,t.nodeType===8?Ed(t.parentNode,n):t.nodeType===1&&Ed(t,n),Ho(t)):Ed(st,n.stateNode));break;case 4:r=st,i=yn,st=n.stateNode.containerInfo,yn=!0,yr(t,e,n),st=r,yn=i;break;case 0:case 11:case 14:case 15:if(!Et&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){i=r=r.next;do{var s=i,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&qh(n,e,o),i=i.next}while(i!==r)}yr(t,e,n);break;case 1:if(!Et&&(Xi(n,e),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(l){Ve(n,e,l)}yr(t,e,n);break;case 21:yr(t,e,n);break;case 22:n.mode&1?(Et=(r=Et)||n.memoizedState!==null,yr(t,e,n),Et=r):yr(t,e,n);break;default:yr(t,e,n)}}function Iy(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new WR),e.forEach(function(r){var i=nk.bind(null,t,r);n.has(r)||(n.add(r),r.then(i,i))})}}function mn(t,e){var n=e.deletions;if(n!==null)for(var r=0;r<n.length;r++){var i=n[r];try{var s=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:st=l.stateNode,yn=!1;break e;case 3:st=l.stateNode.containerInfo,yn=!0;break e;case 4:st=l.stateNode.containerInfo,yn=!0;break e}l=l.return}if(st===null)throw Error(O(160));GE(s,o,i),st=null,yn=!1;var a=i.alternate;a!==null&&(a.return=null),i.return=null}catch(c){Ve(i,e,c)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)JE(e,t),e=e.sibling}function JE(t,e){var n=t.alternate,r=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(mn(e,t),An(t),r&4){try{Ao(3,t,t.return),pu(3,t)}catch(v){Ve(t,t.return,v)}try{Ao(5,t,t.return)}catch(v){Ve(t,t.return,v)}}break;case 1:mn(e,t),An(t),r&512&&n!==null&&Xi(n,n.return);break;case 5:if(mn(e,t),An(t),r&512&&n!==null&&Xi(n,n.return),t.flags&32){var i=t.stateNode;try{$o(i,"")}catch(v){Ve(t,t.return,v)}}if(r&4&&(i=t.stateNode,i!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,l=t.type,a=t.updateQueue;if(t.updateQueue=null,a!==null)try{l==="input"&&s.type==="radio"&&s.name!=null&&g_(i,s),yh(l,o);var c=yh(l,s);for(o=0;o<a.length;o+=2){var u=a[o],d=a[o+1];u==="style"?T_(i,d):u==="dangerouslySetInnerHTML"?__(i,d):u==="children"?$o(i,d):rp(i,u,d,c)}switch(l){case"input":hh(i,s);break;case"textarea":y_(i,s);break;case"select":var f=i._wrapperState.wasMultiple;i._wrapperState.wasMultiple=!!s.multiple;var p=s.value;p!=null?ns(i,!!s.multiple,p,!1):f!==!!s.multiple&&(s.defaultValue!=null?ns(i,!!s.multiple,s.defaultValue,!0):ns(i,!!s.multiple,s.multiple?[]:"",!1))}i[Qo]=s}catch(v){Ve(t,t.return,v)}}break;case 6:if(mn(e,t),An(t),r&4){if(t.stateNode===null)throw Error(O(162));i=t.stateNode,s=t.memoizedProps;try{i.nodeValue=s}catch(v){Ve(t,t.return,v)}}break;case 3:if(mn(e,t),An(t),r&4&&n!==null&&n.memoizedState.isDehydrated)try{Ho(e.containerInfo)}catch(v){Ve(t,t.return,v)}break;case 4:mn(e,t),An(t);break;case 13:mn(e,t),An(t),i=t.child,i.flags&8192&&(s=i.memoizedState!==null,i.stateNode.isHidden=s,!s||i.alternate!==null&&i.alternate.memoizedState!==null||(Lp=Be())),r&4&&Iy(t);break;case 22:if(u=n!==null&&n.memoizedState!==null,t.mode&1?(Et=(c=Et)||u,mn(e,t),Et=c):mn(e,t),An(t),r&8192){if(c=t.memoizedState!==null,(t.stateNode.isHidden=c)&&!u&&t.mode&1)for($=t,u=t.child;u!==null;){for(d=$=u;$!==null;){switch(f=$,p=f.child,f.tag){case 0:case 11:case 14:case 15:Ao(4,f,f.return);break;case 1:Xi(f,f.return);var y=f.stateNode;if(typeof y.componentWillUnmount=="function"){r=f,n=f.return;try{e=r,y.props=e.memoizedProps,y.state=e.memoizedState,y.componentWillUnmount()}catch(v){Ve(r,n,v)}}break;case 5:Xi(f,f.return);break;case 22:if(f.memoizedState!==null){by(d);continue}}p!==null?(p.return=f,$=p):by(d)}u=u.sibling}e:for(u=null,d=t;;){if(d.tag===5){if(u===null){u=d;try{i=d.stateNode,c?(s=i.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(l=d.stateNode,a=d.memoizedProps.style,o=a!=null&&a.hasOwnProperty("display")?a.display:null,l.style.display=E_("display",o))}catch(v){Ve(t,t.return,v)}}}else if(d.tag===6){if(u===null)try{d.stateNode.nodeValue=c?"":d.memoizedProps}catch(v){Ve(t,t.return,v)}}else if((d.tag!==22&&d.tag!==23||d.memoizedState===null||d===t)&&d.child!==null){d.child.return=d,d=d.child;continue}if(d===t)break e;for(;d.sibling===null;){if(d.return===null||d.return===t)break e;u===d&&(u=null),d=d.return}u===d&&(u=null),d.sibling.return=d.return,d=d.sibling}}break;case 19:mn(e,t),An(t),r&4&&Iy(t);break;case 21:break;default:mn(e,t),An(t)}}function An(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(KE(n)){var r=n;break e}n=n.return}throw Error(O(160))}switch(r.tag){case 5:var i=r.stateNode;r.flags&32&&($o(i,""),r.flags&=-33);var s=ky(t);Kh(t,s,i);break;case 3:case 4:var o=r.stateNode.containerInfo,l=ky(t);Wh(t,l,o);break;default:throw Error(O(161))}}catch(a){Ve(t,t.return,a)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function GR(t,e,n){$=t,QE(t)}function QE(t,e,n){for(var r=(t.mode&1)!==0;$!==null;){var i=$,s=i.child;if(i.tag===22&&r){var o=i.memoizedState!==null||fl;if(!o){var l=i.alternate,a=l!==null&&l.memoizedState!==null||Et;l=fl;var c=Et;if(fl=o,(Et=a)&&!c)for($=i;$!==null;)o=$,a=o.child,o.tag===22&&o.memoizedState!==null?xy(i):a!==null?(a.return=o,$=a):xy(i);for(;s!==null;)$=s,QE(s),s=s.sibling;$=i,fl=l,Et=c}Ay(t)}else i.subtreeFlags&8772&&s!==null?(s.return=i,$=s):Ay(t)}}function Ay(t){for(;$!==null;){var e=$;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Et||pu(5,e);break;case 1:var r=e.stateNode;if(e.flags&4&&!Et)if(n===null)r.componentDidMount();else{var i=e.elementType===e.type?n.memoizedProps:gn(e.type,n.memoizedProps);r.componentDidUpdate(i,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&hy(e,s,r);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}hy(e,o,n)}break;case 5:var l=e.stateNode;if(n===null&&e.flags&4){n=l;var a=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":a.autoFocus&&n.focus();break;case"img":a.src&&(n.src=a.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var c=e.alternate;if(c!==null){var u=c.memoizedState;if(u!==null){var d=u.dehydrated;d!==null&&Ho(d)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(O(163))}Et||e.flags&512&&Hh(e)}catch(f){Ve(e,e.return,f)}}if(e===t){$=null;break}if(n=e.sibling,n!==null){n.return=e.return,$=n;break}$=e.return}}function by(t){for(;$!==null;){var e=$;if(e===t){$=null;break}var n=e.sibling;if(n!==null){n.return=e.return,$=n;break}$=e.return}}function xy(t){for(;$!==null;){var e=$;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{pu(4,e)}catch(a){Ve(e,n,a)}break;case 1:var r=e.stateNode;if(typeof r.componentDidMount=="function"){var i=e.return;try{r.componentDidMount()}catch(a){Ve(e,i,a)}}var s=e.return;try{Hh(e)}catch(a){Ve(e,s,a)}break;case 5:var o=e.return;try{Hh(e)}catch(a){Ve(e,o,a)}}}catch(a){Ve(e,e.return,a)}if(e===t){$=null;break}var l=e.sibling;if(l!==null){l.return=e.return,$=l;break}$=e.return}}var JR=Math.ceil,kc=mr.ReactCurrentDispatcher,Dp=mr.ReactCurrentOwner,sn=mr.ReactCurrentBatchConfig,fe=0,nt=null,Ke=null,ct=0,zt=0,Zi=Qr(0),Ye=0,na=null,Ei=0,mu=0,Mp=0,bo=null,Vt=null,Lp=0,Ts=1/0,Kn=null,Ic=!1,Gh=null,jr=null,pl=!1,br=null,Ac=0,xo=0,Jh=null,Ul=-1,$l=0;function Nt(){return fe&6?Be():Ul!==-1?Ul:Ul=Be()}function Vr(t){return t.mode&1?fe&2&&ct!==0?ct&-ct:OR.transition!==null?($l===0&&($l=N_()),$l):(t=_e,t!==0||(t=window.event,t=t===void 0?16:U_(t.type)),t):1}function wn(t,e,n,r){if(50<xo)throw xo=0,Jh=null,Error(O(185));Pa(t,n,r),(!(fe&2)||t!==nt)&&(t===nt&&(!(fe&2)&&(mu|=n),Ye===4&&wr(t,ct)),Bt(t,r),n===1&&fe===0&&!(e.mode&1)&&(Ts=Be()+500,du&&Yr()))}function Bt(t,e){var n=t.callbackNode;OP(t,e);var r=hc(t,t===nt?ct:0);if(r===0)n!==null&&Ug(n),t.callbackNode=null,t.callbackPriority=0;else if(e=r&-r,t.callbackPriority!==e){if(n!=null&&Ug(n),e===1)t.tag===0?xR(Oy.bind(null,t)):sE(Oy.bind(null,t)),kR(function(){!(fe&6)&&Yr()}),n=null;else{switch(D_(r)){case 1:n=lp;break;case 4:n=x_;break;case 16:n=dc;break;case 536870912:n=O_;break;default:n=dc}n=i1(n,YE.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function YE(t,e){if(Ul=-1,$l=0,fe&6)throw Error(O(327));var n=t.callbackNode;if(as()&&t.callbackNode!==n)return null;var r=hc(t,t===nt?ct:0);if(r===0)return null;if(r&30||r&t.expiredLanes||e)e=bc(t,r);else{e=r;var i=fe;fe|=2;var s=ZE();(nt!==t||ct!==e)&&(Kn=null,Ts=Be()+500,fi(t,e));do try{XR();break}catch(l){XE(t,l)}while(1);Tp(),kc.current=s,fe=i,Ke!==null?e=0:(nt=null,ct=0,e=Ye)}if(e!==0){if(e===2&&(i=Sh(t),i!==0&&(r=i,e=Qh(t,i))),e===1)throw n=na,fi(t,0),wr(t,r),Bt(t,Be()),n;if(e===6)wr(t,r);else{if(i=t.current.alternate,!(r&30)&&!QR(i)&&(e=bc(t,r),e===2&&(s=Sh(t),s!==0&&(r=s,e=Qh(t,s))),e===1))throw n=na,fi(t,0),wr(t,r),Bt(t,Be()),n;switch(t.finishedWork=i,t.finishedLanes=r,e){case 0:case 1:throw Error(O(345));case 2:si(t,Vt,Kn);break;case 3:if(wr(t,r),(r&130023424)===r&&(e=Lp+500-Be(),10<e)){if(hc(t,0)!==0)break;if(i=t.suspendedLanes,(i&r)!==r){Nt(),t.pingedLanes|=t.suspendedLanes&i;break}t.timeoutHandle=bh(si.bind(null,t,Vt,Kn),e);break}si(t,Vt,Kn);break;case 4:if(wr(t,r),(r&4194240)===r)break;for(e=t.eventTimes,i=-1;0<r;){var o=31-Sn(r);s=1<<o,o=e[o],o>i&&(i=o),r&=~s}if(r=i,r=Be()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*JR(r/1960))-r,10<r){t.timeoutHandle=bh(si.bind(null,t,Vt,Kn),r);break}si(t,Vt,Kn);break;case 5:si(t,Vt,Kn);break;default:throw Error(O(329))}}}return Bt(t,Be()),t.callbackNode===n?YE.bind(null,t):null}function Qh(t,e){var n=bo;return t.current.memoizedState.isDehydrated&&(fi(t,e).flags|=256),t=bc(t,e),t!==2&&(e=Vt,Vt=n,e!==null&&Yh(e)),t}function Yh(t){Vt===null?Vt=t:Vt.push.apply(Vt,t)}function QR(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var i=n[r],s=i.getSnapshot;i=i.value;try{if(!Cn(s(),i))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function wr(t,e){for(e&=~Mp,e&=~mu,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Sn(e),r=1<<n;t[n]=-1,e&=~r}}function Oy(t){if(fe&6)throw Error(O(327));as();var e=hc(t,0);if(!(e&1))return Bt(t,Be()),null;var n=bc(t,e);if(t.tag!==0&&n===2){var r=Sh(t);r!==0&&(e=r,n=Qh(t,r))}if(n===1)throw n=na,fi(t,0),wr(t,e),Bt(t,Be()),n;if(n===6)throw Error(O(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,si(t,Vt,Kn),Bt(t,Be()),null}function jp(t,e){var n=fe;fe|=1;try{return t(e)}finally{fe=n,fe===0&&(Ts=Be()+500,du&&Yr())}}function Ti(t){br!==null&&br.tag===0&&!(fe&6)&&as();var e=fe;fe|=1;var n=sn.transition,r=_e;try{if(sn.transition=null,_e=1,t)return t()}finally{_e=r,sn.transition=n,fe=e,!(fe&6)&&Yr()}}function Vp(){zt=Zi.current,Ie(Zi)}function fi(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,RR(n)),Ke!==null)for(n=Ke.return;n!==null;){var r=n;switch(vp(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&yc();break;case 3:_s(),Ie(Ut),Ie(Rt),kp();break;case 5:Rp(r);break;case 4:_s();break;case 13:Ie(De);break;case 19:Ie(De);break;case 10:Sp(r.type._context);break;case 22:case 23:Vp()}n=n.return}if(nt=t,Ke=t=Fr(t.current,null),ct=zt=e,Ye=0,na=null,Mp=mu=Ei=0,Vt=bo=null,li!==null){for(e=0;e<li.length;e++)if(n=li[e],r=n.interleaved,r!==null){n.interleaved=null;var i=r.next,s=n.pending;if(s!==null){var o=s.next;s.next=i,r.next=o}n.pending=r}li=null}return t}function XE(t,e){do{var n=Ke;try{if(Tp(),jl.current=Rc,Pc){for(var r=Me.memoizedState;r!==null;){var i=r.queue;i!==null&&(i.pending=null),r=r.next}Pc=!1}if(_i=0,tt=Je=Me=null,Io=!1,Zo=0,Dp.current=null,n===null||n.return===null){Ye=1,na=e,Ke=null;break}e:{var s=t,o=n.return,l=n,a=e;if(e=ct,l.flags|=32768,a!==null&&typeof a=="object"&&typeof a.then=="function"){var c=a,u=l,d=u.tag;if(!(u.mode&1)&&(d===0||d===11||d===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var p=_y(o);if(p!==null){p.flags&=-257,Ey(p,o,l,s,e),p.mode&1&&vy(s,c,e),e=p,a=c;var y=e.updateQueue;if(y===null){var v=new Set;v.add(a),e.updateQueue=v}else y.add(a);break e}else{if(!(e&1)){vy(s,c,e),Fp();break e}a=Error(O(426))}}else if(be&&l.mode&1){var C=_y(o);if(C!==null){!(C.flags&65536)&&(C.flags|=256),Ey(C,o,l,s,e),_p(Es(a,l));break e}}s=a=Es(a,l),Ye!==4&&(Ye=2),bo===null?bo=[s]:bo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=ME(s,a,e);dy(s,m);break e;case 1:l=a;var g=s.type,E=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(jr===null||!jr.has(E)))){s.flags|=65536,e&=-e,s.lanes|=e;var T=LE(s,l,e);dy(s,T);break e}}s=s.return}while(s!==null)}t1(n)}catch(_){e=_,Ke===n&&n!==null&&(Ke=n=n.return);continue}break}while(1)}function ZE(){var t=kc.current;return kc.current=Rc,t===null?Rc:t}function Fp(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),nt===null||!(Ei&268435455)&&!(mu&268435455)||wr(nt,ct)}function bc(t,e){var n=fe;fe|=2;var r=ZE();(nt!==t||ct!==e)&&(Kn=null,fi(t,e));do try{YR();break}catch(i){XE(t,i)}while(1);if(Tp(),fe=n,kc.current=r,Ke!==null)throw Error(O(261));return nt=null,ct=0,Ye}function YR(){for(;Ke!==null;)e1(Ke)}function XR(){for(;Ke!==null&&!wP();)e1(Ke)}function e1(t){var e=r1(t.alternate,t,zt);t.memoizedProps=t.pendingProps,e===null?t1(t):Ke=e,Dp.current=null}function t1(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=HR(n,e),n!==null){n.flags&=32767,Ke=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,Ke=null;return}}else if(n=qR(n,e,zt),n!==null){Ke=n;return}if(e=e.sibling,e!==null){Ke=e;return}Ke=e=t}while(e!==null);Ye===0&&(Ye=5)}function si(t,e,n){var r=_e,i=sn.transition;try{sn.transition=null,_e=1,ZR(t,e,n,r)}finally{sn.transition=i,_e=r}return null}function ZR(t,e,n,r){do as();while(br!==null);if(fe&6)throw Error(O(327));n=t.finishedWork;var i=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(O(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(NP(t,s),t===nt&&(Ke=nt=null,ct=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||pl||(pl=!0,i1(dc,function(){return as(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=sn.transition,sn.transition=null;var o=_e;_e=1;var l=fe;fe|=4,Dp.current=null,KR(t,n),JE(n,t),_R(Ih),fc=!!kh,Ih=kh=null,t.current=n,GR(n),CP(),fe=l,_e=o,sn.transition=s}else t.current=n;if(pl&&(pl=!1,br=t,Ac=i),s=t.pendingLanes,s===0&&(jr=null),kP(n.stateNode),Bt(t,Be()),e!==null)for(r=t.onRecoverableError,n=0;n<e.length;n++)i=e[n],r(i.value,{componentStack:i.stack,digest:i.digest});if(Ic)throw Ic=!1,t=Gh,Gh=null,t;return Ac&1&&t.tag!==0&&as(),s=t.pendingLanes,s&1?t===Jh?xo++:(xo=0,Jh=t):xo=0,Yr(),null}function as(){if(br!==null){var t=D_(Ac),e=sn.transition,n=_e;try{if(sn.transition=null,_e=16>t?16:t,br===null)var r=!1;else{if(t=br,br=null,Ac=0,fe&6)throw Error(O(331));var i=fe;for(fe|=4,$=t.current;$!==null;){var s=$,o=s.child;if($.flags&16){var l=s.deletions;if(l!==null){for(var a=0;a<l.length;a++){var c=l[a];for($=c;$!==null;){var u=$;switch(u.tag){case 0:case 11:case 15:Ao(8,u,s)}var d=u.child;if(d!==null)d.return=u,$=d;else for(;$!==null;){u=$;var f=u.sibling,p=u.return;if(WE(u),u===c){$=null;break}if(f!==null){f.return=p,$=f;break}$=p}}}var y=s.alternate;if(y!==null){var v=y.child;if(v!==null){y.child=null;do{var C=v.sibling;v.sibling=null,v=C}while(v!==null)}}$=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,$=o;else e:for(;$!==null;){if(s=$,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Ao(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,$=m;break e}$=s.return}}var g=t.current;for($=g;$!==null;){o=$;var E=o.child;if(o.subtreeFlags&2064&&E!==null)E.return=o,$=E;else e:for(o=g;$!==null;){if(l=$,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:pu(9,l)}}catch(_){Ve(l,l.return,_)}if(l===o){$=null;break e}var T=l.sibling;if(T!==null){T.return=l.return,$=T;break e}$=l.return}}if(fe=i,Yr(),jn&&typeof jn.onPostCommitFiberRoot=="function")try{jn.onPostCommitFiberRoot(ou,t)}catch{}r=!0}return r}finally{_e=n,sn.transition=e}}return!1}function Ny(t,e,n){e=Es(n,e),e=ME(t,e,1),t=Lr(t,e,1),e=Nt(),t!==null&&(Pa(t,1,e),Bt(t,e))}function Ve(t,e,n){if(t.tag===3)Ny(t,t,n);else for(;e!==null;){if(e.tag===3){Ny(e,t,n);break}else if(e.tag===1){var r=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(jr===null||!jr.has(r))){t=Es(n,t),t=LE(e,t,1),e=Lr(e,t,1),t=Nt(),e!==null&&(Pa(e,1,t),Bt(e,t));break}}e=e.return}}function ek(t,e,n){var r=t.pingCache;r!==null&&r.delete(e),e=Nt(),t.pingedLanes|=t.suspendedLanes&n,nt===t&&(ct&n)===n&&(Ye===4||Ye===3&&(ct&130023424)===ct&&500>Be()-Lp?fi(t,0):Mp|=n),Bt(t,e)}function n1(t,e){e===0&&(t.mode&1?(e=il,il<<=1,!(il&130023424)&&(il=4194304)):e=1);var n=Nt();t=lr(t,e),t!==null&&(Pa(t,e,n),Bt(t,n))}function tk(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),n1(t,n)}function nk(t,e){var n=0;switch(t.tag){case 13:var r=t.stateNode,i=t.memoizedState;i!==null&&(n=i.retryLane);break;case 19:r=t.stateNode;break;default:throw Error(O(314))}r!==null&&r.delete(e),n1(t,n)}var r1;r1=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ut.current)Ft=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ft=!1,zR(t,e,n);Ft=!!(t.flags&131072)}else Ft=!1,be&&e.flags&1048576&&oE(e,Ec,e.index);switch(e.lanes=0,e.tag){case 2:var r=e.type;Fl(t,e),t=e.pendingProps;var i=gs(e,Rt.current);os(e,n),i=Ap(null,e,r,t,i,n);var s=bp();return e.flags|=1,typeof i=="object"&&i!==null&&typeof i.render=="function"&&i.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(r)?(s=!0,vc(e)):s=!1,e.memoizedState=i.state!==null&&i.state!==void 0?i.state:null,Cp(e),i.updater=hu,e.stateNode=i,i._reactInternals=e,jh(e,r,t,n),e=Uh(null,e,r,!0,s,n)):(e.tag=0,be&&s&&yp(e),xt(null,e,i,n),e=e.child),e;case 16:r=e.elementType;e:{switch(Fl(t,e),t=e.pendingProps,i=r._init,r=i(r._payload),e.type=r,i=e.tag=ik(r),t=gn(r,t),i){case 0:e=Fh(null,e,r,t,n);break e;case 1:e=wy(null,e,r,t,n);break e;case 11:e=Ty(null,e,r,t,n);break e;case 14:e=Sy(null,e,r,gn(r.type,t),n);break e}throw Error(O(306,r,""))}return e;case 0:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),Fh(t,e,r,i,n);case 1:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),wy(t,e,r,i,n);case 3:e:{if(UE(e),t===null)throw Error(O(387));r=e.pendingProps,s=e.memoizedState,i=s.element,uE(t,e),wc(e,r,null,n);var o=e.memoizedState;if(r=o.element,s.isDehydrated)if(s={element:r,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){i=Es(Error(O(423)),e),e=Cy(t,e,r,n,i);break e}else if(r!==i){i=Es(Error(O(424)),e),e=Cy(t,e,r,n,i);break e}else for(qt=Mr(e.stateNode.containerInfo.firstChild),Ht=e,be=!0,_n=null,n=pE(e,null,r,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ys(),r===i){e=cr(t,e,n);break e}xt(t,e,r,n)}e=e.child}return e;case 5:return mE(e),t===null&&Dh(e),r=e.type,i=e.pendingProps,s=t!==null?t.memoizedProps:null,o=i.children,Ah(r,i)?o=null:s!==null&&Ah(r,s)&&(e.flags|=32),FE(t,e),xt(t,e,o,n),e.child;case 6:return t===null&&Dh(e),null;case 13:return $E(t,e,n);case 4:return Pp(e,e.stateNode.containerInfo),r=e.pendingProps,t===null?e.child=vs(e,null,r,n):xt(t,e,r,n),e.child;case 11:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),Ty(t,e,r,i,n);case 7:return xt(t,e,e.pendingProps,n),e.child;case 8:return xt(t,e,e.pendingProps.children,n),e.child;case 12:return xt(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(r=e.type._context,i=e.pendingProps,s=e.memoizedProps,o=i.value,Ce(Tc,r._currentValue),r._currentValue=o,s!==null)if(Cn(s.value,o)){if(s.children===i.children&&!Ut.current){e=cr(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var l=s.dependencies;if(l!==null){o=s.child;for(var a=l.firstContext;a!==null;){if(a.context===r){if(s.tag===1){a=nr(-1,n&-n),a.tag=2;var c=s.updateQueue;if(c!==null){c=c.shared;var u=c.pending;u===null?a.next=a:(a.next=u.next,u.next=a),c.pending=a}}s.lanes|=n,a=s.alternate,a!==null&&(a.lanes|=n),Mh(s.return,n,e),l.lanes|=n;break}a=a.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(O(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),Mh(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}xt(t,e,i.children,n),e=e.child}return e;case 9:return i=e.type,r=e.pendingProps.children,os(e,n),i=ln(i),r=r(i),e.flags|=1,xt(t,e,r,n),e.child;case 14:return r=e.type,i=gn(r,e.pendingProps),i=gn(r.type,i),Sy(t,e,r,i,n);case 15:return jE(t,e,e.type,e.pendingProps,n);case 17:return r=e.type,i=e.pendingProps,i=e.elementType===r?i:gn(r,i),Fl(t,e),e.tag=1,$t(r)?(t=!0,vc(e)):t=!1,os(e,n),hE(e,r,i),jh(e,r,i,n),Uh(null,e,r,!0,t,n);case 19:return BE(t,e,n);case 22:return VE(t,e,n)}throw Error(O(156,e.tag))};function i1(t,e){return b_(t,e)}function rk(t,e,n,r){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function rn(t,e,n,r){return new rk(t,e,n,r)}function Up(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ik(t){if(typeof t=="function")return Up(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sp)return 11;if(t===op)return 14}return 2}function Fr(t,e){var n=t.alternate;return n===null?(n=rn(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function Bl(t,e,n,r,i,s){var o=2;if(r=t,typeof t=="function")Up(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case zi:return pi(n.children,i,s,e);case ip:o=8,i|=8;break;case ah:return t=rn(12,n,e,i|2),t.elementType=ah,t.lanes=s,t;case lh:return t=rn(13,n,e,i),t.elementType=lh,t.lanes=s,t;case ch:return t=rn(19,n,e,i),t.elementType=ch,t.lanes=s,t;case f_:return gu(n,i,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case d_:o=10;break e;case h_:o=9;break e;case sp:o=11;break e;case op:o=14;break e;case Er:o=16,r=null;break e}throw Error(O(130,t==null?t:typeof t,""))}return e=rn(o,n,e,i),e.elementType=t,e.type=r,e.lanes=s,e}function pi(t,e,n,r){return t=rn(7,t,r,e),t.lanes=n,t}function gu(t,e,n,r){return t=rn(22,t,r,e),t.elementType=f_,t.lanes=n,t.stateNode={isHidden:!1},t}function Id(t,e,n){return t=rn(6,t,null,e),t.lanes=n,t}function Ad(t,e,n){return e=rn(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function sk(t,e,n,r,i){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=cd(0),this.expirationTimes=cd(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=cd(0),this.identifierPrefix=r,this.onRecoverableError=i,this.mutableSourceEagerHydrationData=null}function $p(t,e,n,r,i,s,o,l,a){return t=new sk(t,e,n,l,a),e===1?(e=1,s===!0&&(e|=8)):e=0,s=rn(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Cp(s),t}function ok(t,e,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Bi,key:r==null?null:""+r,children:t,containerInfo:e,implementation:n}}function s1(t){if(!t)return Hr;t=t._reactInternals;e:{if(bi(t)!==t||t.tag!==1)throw Error(O(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(O(171))}if(t.tag===1){var n=t.type;if($t(n))return iE(t,n,e)}return e}function o1(t,e,n,r,i,s,o,l,a){return t=$p(n,r,!0,t,i,s,o,l,a),t.context=s1(null),n=t.current,r=Nt(),i=Vr(n),s=nr(r,i),s.callback=e??null,Lr(n,s,i),t.current.lanes=i,Pa(t,i,r),Bt(t,r),t}function yu(t,e,n,r){var i=e.current,s=Nt(),o=Vr(i);return n=s1(n),e.context===null?e.context=n:e.pendingContext=n,e=nr(s,o),e.payload={element:t},r=r===void 0?null:r,r!==null&&(e.callback=r),t=Lr(i,e,o),t!==null&&(wn(t,i,o,s),Ll(t,i,o)),o}function xc(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Dy(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function Bp(t,e){Dy(t,e),(t=t.alternate)&&Dy(t,e)}function ak(){return null}var a1=typeof reportError=="function"?reportError:function(t){console.error(t)};function zp(t){this._internalRoot=t}vu.prototype.render=zp.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(O(409));yu(t,e,null,null)};vu.prototype.unmount=zp.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Ti(function(){yu(null,t,null,null)}),e[ar]=null}};function vu(t){this._internalRoot=t}vu.prototype.unstable_scheduleHydration=function(t){if(t){var e=j_();t={blockedOn:null,target:t,priority:e};for(var n=0;n<Sr.length&&e!==0&&e<Sr[n].priority;n++);Sr.splice(n,0,t),n===0&&F_(t)}};function qp(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function _u(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function My(){}function lk(t,e,n,r,i){if(i){if(typeof r=="function"){var s=r;r=function(){var c=xc(o);s.call(c)}}var o=o1(e,r,t,0,null,!1,!1,"",My);return t._reactRootContainer=o,t[ar]=o.current,Go(t.nodeType===8?t.parentNode:t),Ti(),o}for(;i=t.lastChild;)t.removeChild(i);if(typeof r=="function"){var l=r;r=function(){var c=xc(a);l.call(c)}}var a=$p(t,0,!1,null,null,!1,!1,"",My);return t._reactRootContainer=a,t[ar]=a.current,Go(t.nodeType===8?t.parentNode:t),Ti(function(){yu(e,a,n,r)}),a}function Eu(t,e,n,r,i){var s=n._reactRootContainer;if(s){var o=s;if(typeof i=="function"){var l=i;i=function(){var a=xc(o);l.call(a)}}yu(e,o,t,i)}else o=lk(n,e,t,i,r);return xc(o)}M_=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=uo(e.pendingLanes);n!==0&&(cp(e,n|1),Bt(e,Be()),!(fe&6)&&(Ts=Be()+500,Yr()))}break;case 13:Ti(function(){var r=lr(t,1);if(r!==null){var i=Nt();wn(r,t,1,i)}}),Bp(t,1)}};up=function(t){if(t.tag===13){var e=lr(t,134217728);if(e!==null){var n=Nt();wn(e,t,134217728,n)}Bp(t,134217728)}};L_=function(t){if(t.tag===13){var e=Vr(t),n=lr(t,e);if(n!==null){var r=Nt();wn(n,t,e,r)}Bp(t,e)}};j_=function(){return _e};V_=function(t,e){var n=_e;try{return _e=t,e()}finally{_e=n}};_h=function(t,e,n){switch(e){case"input":if(hh(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var r=n[e];if(r!==t&&r.form===t.form){var i=uu(r);if(!i)throw Error(O(90));m_(r),hh(r,i)}}}break;case"textarea":y_(t,n);break;case"select":e=n.value,e!=null&&ns(t,!!n.multiple,e,!1)}};C_=jp;P_=Ti;var ck={usingClientEntryPoint:!1,Events:[ka,Ki,uu,S_,w_,jp]},to={findFiberByHostInstance:ai,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},uk={bundleType:to.bundleType,version:to.version,rendererPackageName:to.rendererPackageName,rendererConfig:to.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:mr.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=I_(t),t===null?null:t.stateNode},findFiberByHostInstance:to.findFiberByHostInstance||ak,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ml=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ml.isDisabled&&ml.supportsFiber)try{ou=ml.inject(uk),jn=ml}catch{}}Gt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=ck;Gt.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!qp(e))throw Error(O(200));return ok(t,e,null,n)};Gt.createRoot=function(t,e){if(!qp(t))throw Error(O(299));var n=!1,r="",i=a1;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(r=e.identifierPrefix),e.onRecoverableError!==void 0&&(i=e.onRecoverableError)),e=$p(t,1,!1,null,null,n,!1,r,i),t[ar]=e.current,Go(t.nodeType===8?t.parentNode:t),new zp(e)};Gt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(O(188)):(t=Object.keys(t).join(","),Error(O(268,t)));return t=I_(e),t=t===null?null:t.stateNode,t};Gt.flushSync=function(t){return Ti(t)};Gt.hydrate=function(t,e,n){if(!_u(e))throw Error(O(200));return Eu(null,t,e,!0,n)};Gt.hydrateRoot=function(t,e,n){if(!qp(t))throw Error(O(405));var r=n!=null&&n.hydratedSources||null,i=!1,s="",o=a1;if(n!=null&&(n.unstable_strictMode===!0&&(i=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=o1(e,null,t,1,n??null,i,!1,s,o),t[ar]=e.current,Go(t),r)for(t=0;t<r.length;t++)n=r[t],i=n._getVersion,i=i(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,i]:e.mutableSourceEagerHydrationData.push(n,i);return new vu(e)};Gt.render=function(t,e,n){if(!_u(e))throw Error(O(200));return Eu(null,t,e,!1,n)};Gt.unmountComponentAtNode=function(t){if(!_u(t))throw Error(O(40));return t._reactRootContainer?(Ti(function(){Eu(null,null,t,!1,function(){t._reactRootContainer=null,t[ar]=null})}),!0):!1};Gt.unstable_batchedUpdates=jp;Gt.unstable_renderSubtreeIntoContainer=function(t,e,n,r){if(!_u(n))throw Error(O(200));if(t==null||t._reactInternals===void 0)throw Error(O(38));return Eu(t,e,n,!1,r)};Gt.version="18.2.0-next-9e3b772b8-20220608";function l1(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(l1)}catch(t){console.error(t)}}l1(),o_.exports=Gt;var dk=o_.exports,Ly=dk;sh.createRoot=Ly.createRoot,sh.hydrateRoot=Ly.hydrateRoot;let jy=class{constructor(e,n){we(this,"id");we(this,"username");we(this,"icon");we(this,"position");we(this,"balance");we(this,"properties");we(this,"isInJail");we(this,"jailTurnsRemaining");we(this,"getoutCards");we(this,"ready");we(this,"positions");this.id=e,this.username=n,this.icon=-1,this.position=0,this.balance=1500,this.properties=[],this.isInJail=!1,this.jailTurnsRemaining=0,this.getoutCards=0,this.ready=!1,this.positions={x:0,y:0}}recieveJson(e){return this.username=e.username,this.position=e.position,this.icon=e.icon,this.balance=e.balance,this.properties=e.properties,this.isInJail=e.isInJail,this.jailTurnsRemaining=e.jailTurnsRemaining,this.getoutCards=e.getoutCards,this}toJson(){return{balance:this.balance,icon:this.icon,id:this.id,isInJail:this.isInJail,jailTurnsRemaining:this.jailTurnsRemaining,position:this.position,properties:this.properties,username:this.username,getoutCards:this.getoutCards}}get color(){switch(this.icon){case 0:return"#E0115F";case 1:return"#4169e1";case 2:return"#50C878";case 3:return"#FFC000";case 5:return"#FF7F50";case 4:default:return""}}};const hk="https://coder-1t45.github.io/Monopoly/assets/players-69e481c3.png",Vy="https://coder-1t45.github.io/Monopoly/assets/chat-98a8e3f3.png",fk="https://coder-1t45.github.io/Monopoly/assets/chat_new-733d0bcc.png",pk="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAMgAAADICAMAAACahl6sAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAjpQTFRFAAAA509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P509P/m/HAgAAAL50Uk5TABmAwNbYyZApXvX//H8BhTam5vvli0I8oud1DYTvgxQd+p4n/qwzukHITwLUXATfagnoeA/whhb3lB+hKq+9RMpRXwXhbQrqexDyiRj4liGkLLI5R81VA9liBuPrsdAONO0Hcodh/flD9OQg2xfDtZVxUPM1JKXs2s/CtIFvQKgM1x5GVxxokbniKEVWaX6Tp7gLEziInWQVVBIjIt6CWL96dO5OSUtmu7yrbhE9t5cajXfp0U0uJZySfGdSzLBMfx0AAATRSURBVHic7d35fxNFGAbwFxoK9AloFQtigUYDWCqI9aBYMAKCWiwoVpCzgEoFTzwIh1qqiOCJijfgfVRRvG//N7eNNWn2SrKTnbzv531+ntl5v712dnYmJdJoNKVkzNi6xDh7qR8/wYxjYgMsJzlpsgmHbcZQzovuGGP9+zGc8yNDxtom5NIYGVJnm5DLBZEhCduEXC6MDBlnm5BLUiEKqU4UEgCZclHT1FgyrcoQ4OLpl0S+bglprjoEmDFzloFKQxIHBGgY3xK91ODEAwFSl15moNqAxAUB0rPnGKjXN/FBnMy93MQzj3dihQCt89oMFO2VmCHAFfMXGCjbndghwJULrzJQeHEsQID2q68xUProWIEA1163yEDxhbEEAToWX2+g/HysQZwH0s4lBgAjsQhxsjT6ws1I7EKAGzKG7pG2IcCNy4zcI+1DgMTyFTIgwE0rV8mAADffcqsMCNC1+jYZEKB7zVoZEKeC2++QAXGy7k4hEKCup5J7ZA1CgLvWb5ABAe7euEkGBNgsBQKFKEQhCvHK9IKuWzhDphZ03coZ0rYt37XHp01vyXMfixDa3jHSs9OvSaaZA4QyO/5z7PRtgXs4QGjRvYnuLVv9fq6GIbiPAyQ0DmTXMiEQ9N0vBILdpSzTcoBgRwlr5ywg2POAEAgefEgIBNvCljW5QPBwyFozGwgeCX4BwAeCxsC3MowgeDRoKswJgplSINgrBYLlUiDJx4RA0NckBILHn7ALebK5ouxzj5L1PpIVF8T9pa04ezz39jCEYL/XVJgjBAc8dsGxhOCgeyrME4JDrqkwUwj2FU+FuUKwuGgqzBaCp6RA8LQUCCZKgSTnCYGg+xkhEHRtFwLBaiGQ/vyeJNaQuQUbkjhD6g8XDMAYMjDqrCRfyOZnRw3AFlL86M4V4nqvyBSSeq54AJ6Q9BHXADwhC90DsIRM8hiAI6T4KZcrpN/zFVxckOePVpQX3KMc897xzW41ftQEizFkwO/DKJhBjrf4teQFyb7o25IVJGjjFidI6qWAlowg6ZeDWjKCvBLYkg/k1eCWbCCvhWwu5wI5EXbynAnk9dAjdTwgrW+EtmQBSbwZ3pIDxH+CxQsSMMFiBdntsx2otiAn3+p/+53eIEgqU9qVrELePTTcL/uePyS9vsRr2YS8PzDS0/fUTiZ4glUjkPyusu4PfJr4Hr6qJcipgq5ryuxbU5CjBV1Pc4acKeia4gwRc+hYIQpRiEIUohCFKEQhClGIQhSiEIUoRCEKUYhCFKIQhZSdD8vL0pqFRIhCFFKlKOT/DIQPEkc6IkM+sk3IpT4y5GPbhFw+iQyZ9altw1DaA3Y6lZrPdtlWOL/qAZ/4W3o+b7ftyH5hwkF0+MvGrwbzOTCj0oIGK8rX35w143Dn2+8qg1SrngiZMzstA0K0ZFpSBoTo1Lk+GRCi739okAFxbpdnyvkTZrvawPT++JMMCNGqlcdlQIg2bdwvA0K04cjPMiBEk39plQFxKE2DMiBOTq4TAiH69UTA44vt4srLb7+nZECIWv7okAEZ+o80XTIgRGf/zMqAOA/Ie6fIgBDt/Ou0DAjRgvkJGRCitr//kQFxZi49B2VAKL98ZLsOA8ktH9muwkgmdCZlQIjWnrNdgUaj8c6/sjbbOODJyXwAAAAASUVORK5CYII=",mk="https://coder-1t45.github.io/Monopoly/assets/proprety-ed9394e1.png",gk="https://coder-1t45.github.io/Monopoly/assets/settings-ec1fd821.png",yk="https://coder-1t45.github.io/Monopoly/assets/icon-96ad3b33.png",Hp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOoAAADYCAMAAADS+I/aAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAGxQTFRFAAAAoM6mW7BnVK1hdLp+1enX7fbuRqdUL6BCOKJJNKFGHpw1qdOu6PPqPaRNI5054vDkKp8/KJ48mMqf0OfTvt3CkMeXuNq9isSSrdSyf7+IeryDbbd3YbJtMaFE3+/iyePNSapYrdWyxuHJWHk5egAAACR0Uk5TAP//////IP///////3D//9D/////////////////////////OqkGVgAABKFJREFUeJzt3dFW4jAUheGiAm3RFCqIjgIq7/+Og+OoUJImTXLaHdn/tXblW+iyx5SQZUy00dX1zXjoRfTRZJoXRTm7HXod8t2pQn1UjYZeiXTz8lP6+63jxZdUqfp+6NVItqzVUb/ZuqrUSfVDl+9WDkmtvGvrWXNl9WOHb0+I+lSdL23RwZoOdaSRHqx/nC+QDPWh1i/O3ZoK9c/CtLr8xvESiVCfc/PyXK1pUF9apM7WJKibbfsC8xeXq6RAvS5tK3SyJkCdWqVKbTf268BTJ9PCvkKlSrsVnXq3dZK6vK7g1J2r9PC6XlmuhU0d185SuxWa+qq97TVbr1uvhkxdGW57Pa3A1Kez8dRufWu5Hi511PU1tVlhqfc+UqWKqfGKqNRHP+nBalwuKNU8njpYJ/prYlJvWoc2m7XQWyGptqHNar3TXRWReuUwyrRbS50VkGofTx2s8wSoE5fx1MuKRr0rOtzgt1kXO3Dq3H1os1nzphWLerynGFzdeIgAirr0vUXStzi1IlE7D2226iUodd1tEHepOrbiUN/jSw+v6ysgVb+nGNxsD0e9l5Eefoa/rSBU7/HUwbqCogaMp+5WCGrQeOpgXcNQA8dTe7M1CPVKWnp4XZ8gqG8xhjZb1fvwVMc9xeCq26GpscZTe9XI5avkpLuyL+nB6vJFYtJx3p/ULSnpsvv+k3RC0ujjaYRkpOePvAIkIr2VGmWCkpB67ilKJyA1PfI6dPGlokNbSNGlwkNbQLGl7Y+8DlpkaQ9Dm3dxpRH2FOWKKo2ypyhWROjX+xRRiyeNt6coVDRp1D1FkWJJl6g3Dj9Fku4hb/BPiyMV2FOMXxSp7n2KeMWQCu0pxi6CFHVoaxYuhR3amgVLcYe2ZqFS4KGtWaA0+EHQHguTQg9tzYKk2ENbswDoBHxoa+Yvnfe2pxgpb+kOfmhr5isdp/NH5itP6Svi/pMlP2nzGJ0k8pKmMbQ1W9phZ2HuKVo7fqjWMdA9RXtVV6vgg6DS/TxU61Qy46mu74dqXUpnPNX2/0FTlxIaT/U5W5H3FB3796CpvaTGU1NO1rTGU2MfD9W219+DoNJVlpNq5z0+CCpd++mt+HuKXapbrAnsKXbKfHprCnuK3TJZk9hT7Jj+pFqR9ykOnu6k2kT2FDt3fqJpKnuK3WtaEx5PreXPx9LnX/ZX5rTjE02TH9os/VjF36c4eF8nmqa0e+rb9uVSpJ9WxLcFSVSvsseLeFGVKm4uh7rJ1r/6T+pP5eHGv6c3FQ9dtcuyuaq35pL6B0xhbvb5H4n9vbmHt1R+wPN8+mbs5VU/o5+2SuOuMXffvDC3T+F1reJ8QNkG//e1jPRxRyP8caA+OwjQr1t86sJw9iyppJKKFamkkkoqWKSSSiqpYJFKKqmkgkUqqaSSChappJJKKlikkkoqqWCRSiqppIJFKqmkkgoWqaSSSipYpJJKKqlgkUoqqaSCRSqppJIKFqmkkkoqWKSSSiqpYJFKKqmkgkUqqaSSChappJL6QcU/dTQWNYFDR8s40iyDp27PPvPDt32FfcDqdhpLmmXjTZG3HA09cErzmTWX3V/etxxj46OriAAAAABJRU5ErkJggg==",Wp="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAOoAAADYBAMAAAAXCGLbAAAAAXNSR0IB2cksfwAAAAlwSFlzAAALEwAACxMBAJqcGAAAAA9QTFRFAAAAswAAswAAswAAswAAZtGxUwAAAAV0Uk5TAP8gcNCNz+2CAAACfklEQVR4nO3di1HDQAyEYQwUEAUKgA5IB9B/U+QJse8hXbx7B5lVAfrmzxjM+Aw8PPyzmcz6o49mtumu7vZq99jnA9o91k7TF53Oat9Ys2qsJYNAp59t+ViO6q2jqNPVumwsRXX3MdRpti8Xy1D9hQR1WizMxBLUwEa8ukzNxeLVdGO6Eq6+Z9QkFq0+ZdB0J1rNokksWE0vpexSsFpAl7FYtZS63IpVi+giFqqWUxdroWoFncci1VrqfC9SraK25aj1VLM3iuqg9sJQvVSzD4LqovaKV3N3uOV8otX8Ha60G6V+hdTLtwqQ6l9Ks+UgNYheYjFqNPWyHaOG0XMsRI2nntdD1Ab0FItQW1JP+xFqE3qMBahtqUcAoDaih9j1amvqQVivNqP72NVqe+qeWKs+3oDaZq26u0XNTBN6y+e7XkWhTSostUmFoS0qLrVFxaENKjC1QQWicRWZGleRaFiFpoZVKBpVsalRFYsG1d0I9RmMxlQ0GlLBl1JQhaMRFZ8aUfFoQCWkBlQC6quMVF9loK5KSXVVCuqpnFRP5aCOGnkgC1fhd7iQykKrKulSclQaWlN5qTWVh1ZehCKmVmKZaDGWmlqM5aKFWHJq+K0v8ORi6anBF6Hgk8Z2SE1jY0eOa2cZGztyXD0DPl/z3yAhzYjUeWw39Dq2X+p1bEf0N7Znau3AnzojUstn4OQZkVo6FqbPiNT8SWmHkUpXR1xNxnskUJnNkC+d5AfUQQ8RGZdX4FeHxjwHvxd166NSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKlSpUqVKlWqVKl/UA39hfo7USMo/CPu/88dCvMNgwpEBhudalAAAAAASUVORK5CYII=",vk="https://coder-1t45.github.io/Monopoly/assets/rails-b5a8f288.png",_k="https://coder-1t45.github.io/Monopoly/assets/elects-0ca4f3b8.png",Ek="https://coder-1t45.github.io/Monopoly/assets/water-7bf83b59.png";function Oc(t){try{switch(t.toLowerCase()){case"red":return"#ED1B24";case"darkgreen":return"#1FB25A";case"darkblue":return"#0072BB";case"yellow":return"#FEF200";case"purple":return"#955436";case"lightgreen":return"#AAE0FA";case"orange":return"#F7941D";case"violet":return"#D93A96";default:return t.toLowerCase()}}catch{return t}}function ls({street:t,utility:e,railroad:n}){return t!==void 0?h.jsx(Tk,{args:t}):e!==void 0?h.jsx(wk,{args:e}):n!==void 0?h.jsx(Sk,{args:n}):h.jsx(h.Fragment,{})}function Tk({args:t}){const e=Oc(t.group);return h.jsxs("div",{className:"street-card",children:[h.jsxs("div",{style:{backgroundColor:e},children:[h.jsx("p",{children:"title dreed"}),h.jsx("h3",{children:t.title})]}),h.jsxs("div",{children:[h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("p",{children:"Rent"}),h.jsxs("p",{children:[t.rent,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with color set"}),h.jsxs("p",{children:[t.rentWithColorSet,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 1 house"}),h.jsxs("p",{children:[t.multpliedrent[0],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 2 houses"}),h.jsxs("p",{children:[t.multpliedrent[1],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 3 houses"}),h.jsxs("p",{children:[t.multpliedrent[2],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with 4 houses"}),h.jsxs("p",{children:[t.multpliedrent[3],"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Rent with hotel"}),h.jsxs("p",{children:[t.multpliedrent[4],"M"]})]})]}),h.jsx("hr",{}),h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("p",{children:"House cost"}),h.jsxs("p",{children:[t.housesCost,"M each"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"Hotels cost"}),h.jsxs("label",{children:[t.hotelsCost,"M each",h.jsx("br",{}),h.jsx("p",{style:{fontSize:12},children:"(plus 4 houses)"})]})]})]}),h.jsx("br",{}),h.jsx("hr",{}),h.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}function Sk({args:t}){return h.jsxs("div",{className:"street-card",children:[h.jsxs("div",{"data-clear":!0,children:[h.jsx("img",{"data-type":"rail",src:vk.replace("/public",""),alt:""}),h.jsx("h3",{children:t.title})]}),h.jsxs("div",{children:[h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("p",{children:"Rent"}),h.jsxs("p",{children:[25,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"If 2 stations are owned"}),h.jsxs("p",{children:[50,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"If 3 stations are owned"}),h.jsxs("p",{children:[100,"M"]})]}),h.jsxs("li",{children:[h.jsx("p",{children:"If 4 stations are owned"}),h.jsxs("p",{children:[200,"M"]})]})]}),h.jsx("h4",{children:"mortgage Value 100M"}),h.jsx("hr",{}),h.jsx("br",{}),h.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}function wk({args:t}){return h.jsxs("div",{className:"street-card",children:[h.jsxs("div",{"data-clear":!0,children:[h.jsx("center",{children:h.jsx("img",{"data-type":t.type,src:t.type==="electricity"?_k.replace("/public",""):Ek.replace("/public",""),alt:""})}),h.jsx("h3",{children:t.title})]}),h.jsxs("div",{children:[h.jsxs("p",{style:{lineHeight:1,paddingInline:10},children:["If one Utility is owned, rent is 4 times amount shown on dice.",h.jsx("br",{}),h.jsx("br",{}),"If both Utilities are owned, rent is 10 times amount shown on dice"]}),h.jsx("hr",{}),h.jsx("br",{}),h.jsxs("h4",{children:[t.cardCost,"M"]})]})]})}const Ck=[{name:"Mediterranean Avenue",id:"mediterraneanave",posistion:1,price:60,rent:2,multpliedrent:[10,30,90,160,250],housecost:50,group:"Purple",ownedby:-1,buildings:0,mortgaged:!1,probability:2.1314,rel:{Square:"Mediterranean Avenue","Probability % (Jail Short)":2.1314,Rank:36,"Probability % (Jail Long)":2.0073},ohousecost:50,oprice:60,averageProbability:2.06935},{name:"Baltic Avenue",id:"balticave",posistion:3,price:60,rent:4,multpliedrent:[20,60,180,320,450],housecost:50,group:"Purple",ownedby:-1,buildings:0,mortgaged:!1,probability:2.1624,rel:{Square:"Baltic Avenue","Probability % (Jail Short)":2.1624,Rank:35,"Probability % (Jail Long)":2.0369},ohousecost:50,oprice:60,averageProbability:2.09965},{name:"Oriental Avenue",id:"orientalave",posistion:6,price:100,rent:6,multpliedrent:[30,90,270,400,550],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Oriental Avenue","Probability % (Jail Short)":2.2621,Rank:32,"Probability % (Jail Long)":2.1317},ohousecost:50,oprice:100,averageProbability:2.1969000000000003},{name:"Vermont Avenue",id:"vermontave",posistion:8,price:100,rent:6,multpliedrent:[30,90,270,400,550],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Vermont Avenue","Probability % (Jail Short)":2.321,Rank:28,"Probability % (Jail Long)":2.1874},ohousecost:50,oprice:100,averageProbability:2.2542},{name:"Connecticut Avenue",id:"connecticutave",posistion:9,price:120,rent:8,multpliedrent:[40,100,300,450,600],housecost:50,group:"lightgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Connecticut Avenue","Probability % (Jail Short)":2.3003,Rank:30,"Probability % (Jail Long)":2.168},ohousecost:50,oprice:120,averageProbability:2.23415},{name:"St. Charles Place",id:"stcharlesplace",posistion:11,price:140,rent:10,multpliedrent:[50,150,450,625,750],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"St. Charles Place","Probability % (Jail Short)":2.7017,Rank:15,"Probability % (Jail Long)":2.556},ohousecost:100,oprice:140,averageProbability:2.62885},{name:"States Avenue",id:"statesave",posistion:13,price:140,rent:10,multpliedrent:[50,150,450,625,750],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"States Avenue","Probability % (Jail Short)":2.3721,Rank:29,"Probability % (Jail Long)":2.1741},ohousecost:100,oprice:140,averageProbability:2.2731000000000003},{name:"Virginia Avenue",id:"virginiaave",posistion:14,price:160,rent:12,multpliedrent:[60,180,500,700,900],housecost:100,group:"Violet",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Virginia Avenue","Probability % (Jail Short)":2.4649,Rank:22,"Probability % (Jail Long)":2.4255},ohousecost:100,oprice:160,averageProbability:2.4452},{name:"St. James Place",id:"stjamesplace",posistion:16,price:180,rent:14,multpliedrent:[70,200,550,750,950],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"St. James Place","Probability % (Jail Short)":2.7924,Rank:9,"Probability % (Jail Long)":2.6802},ohousecost:100,oprice:180,averageProbability:2.7363},{name:"Tennessee Avenue",id:"tennesseeave",posistion:18,price:180,rent:14,multpliedrent:[70,200,550,750,950],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Tennessee Avenue","Probability % (Jail Short)":2.9356,Rank:6,"Probability % (Jail Long)":2.821},ohousecost:100,oprice:180,averageProbability:2.8783000000000003},{name:"New York Avenue",id:"newyorkave",posistion:19,price:200,rent:16,multpliedrent:[80,220,600,800,1e3],housecost:100,group:"Orange",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"New York Avenue","Probability % (Jail Short)":3.0852,Rank:7,"Probability % (Jail Long)":2.8118},ohousecost:100,oprice:200,averageProbability:2.9485},{name:"Kentucky Avenue",id:"kentuckyave",posistion:21,price:220,rent:18,multpliedrent:[90,250,700,875,1050],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Kentucky Avenue","Probability % (Jail Short)":2.8358,Rank:12,"Probability % (Jail Long)":2.6143},ohousecost:150,oprice:220,averageProbability:2.72505},{name:"Indiana Avenue",id:"indianaave",posistion:23,price:220,rent:18,multpliedrent:[90,250,700,875,1050],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Indiana Avenue","Probability % (Jail Short)":2.7357,Rank:14,"Probability % (Jail Long)":2.5671},ohousecost:150,oprice:220,averageProbability:2.6513999999999998},{name:"Illinois Avenue",id:"illinoisave",posistion:24,price:240,rent:20,multpliedrent:[100,300,750,925,1100],housecost:150,group:"Red",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Illinois Avenue","Probability % (Jail Short)":3.1858,Rank:2,"Probability % (Jail Long)":2.9929},ohousecost:150,oprice:240,averageProbability:3.08935},{name:"Atlantic Avenue",id:"atlanticave",posistion:26,price:260,rent:22,multpliedrent:[110,330,800,975,1150],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Atlantic Avenue","Probability % (Jail Short)":2.7072,Rank:16,"Probability % (Jail Long)":2.537},ohousecost:150,oprice:260,averageProbability:2.6220999999999997},{name:"Ventnor Avenue",id:"ventnorave",posistion:27,price:260,rent:22,multpliedrent:[110,330,800,975,1150],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Ventnor Avenue","Probability % (Jail Short)":2.6789,Rank:18,"Probability % (Jail Long)":2.5191},ohousecost:150,oprice:260,averageProbability:2.599},{name:"Marvin Gardens",id:"marvingardens",posistion:29,price:280,rent:22,multpliedrent:[120,360,850,1025,1200],housecost:150,group:"Yellow",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Marvin Gardens","Probability % (Jail Short)":2.5861,Rank:21,"Probability % (Jail Long)":2.4381},ohousecost:150,oprice:280,averageProbability:2.5121},{name:"Pacific Avenue",id:"pacificave",posistion:31,price:300,rent:26,multpliedrent:[130,390,900,1100,1275],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Pacific Avenue","Probability % (Jail Short)":2.6774,Rank:17,"Probability % (Jail Long)":2.5236},ohousecost:200,oprice:300,averageProbability:2.6005000000000003},{name:"North Carolina Avenue",id:"northcarolinaave",posistion:32,price:300,rent:26,multpliedrent:[130,390,900,1100,1275],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"North Carolina Avenue","Probability % (Jail Short)":2.6252,Rank:20,"Probability % (Jail Long)":2.4721},ohousecost:200,oprice:300,averageProbability:2.5486500000000003},{name:"Pennsylvania Avenue",id:"pennsylvaniaave",posistion:34,price:320,rent:28,multpliedrent:[150,450,1e3,1200,1400],housecost:200,group:"darkgreen",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Pennsylvania Avenue","Probability % (Jail Short)":2.5006,Rank:23,"Probability % (Jail Long)":2.3531},ohousecost:200,oprice:320,averageProbability:2.42685},{name:"Park Place",id:"parkplace",posistion:37,price:350,rent:35,multpliedrent:[175,500,1100,1300,1500],housecost:200,group:"darkblue",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Park Place","Probability % (Jail Short)":2.1864,Rank:33,"Probability % (Jail Long)":2.0595},ohousecost:200,oprice:350,averageProbability:2.12295},{name:"Boardwalk",id:"boardwalk",posistion:39,price:400,rent:50,multpliedrent:[200,600,1400,1700,2e3],housecost:200,group:"darkblue",ownedby:-1,buildings:0,mortgaged:!1,rel:{Square:"Boardwalk","Probability % (Jail Short)":2.626,Rank:19,"Probability % (Jail Long)":2.4832},ohousecost:200,oprice:400,averageProbability:2.5545999999999998},{name:"Electric Company",id:"electriccompany",posistion:12,price:150,group:"Utilities",ownedby:-1,mortgaged:!1,rel:{Square:"Electric Company","Probability % (Jail Short)":2.604,Rank:13,"Probability % (Jail Long)":2.614},oprice:150,averageProbability:2.609},{name:"Water Works",id:"waterworks",posistion:28,price:150,group:"Utilities",ownedby:-1,mortgaged:!1,rel:{Square:"Water Works","Probability % (Jail Short)":2.8074,Rank:10,"Probability % (Jail Long)":2.6507},oprice:150,averageProbability:2.72905},{name:"Reading Railroad",id:"readingrailroad",posistion:5,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,probability:2.1314,rel:{Square:"Reading Railroad","Probability % (Jail Short)":2.9631,Rank:8,"Probability % (Jail Long)":2.801},oprice:200,averageProbability:2.88205},{name:"Pennsylvania Railroad",id:"pennsylvaniarailroad",posistion:15,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,rel:{Square:"Pennsylvania Railroad","Probability % (Jail Short)":2.92,Rank:11,"Probability % (Jail Long)":2.6354},oprice:200,averageProbability:2.7777000000000003},{name:"B. & O. Railroad",id:"borailroad",posistion:25,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,oprice:200,averageProbability:2.975},{name:"Short Line Railroad",id:"shortlinerailroad",posistion:35,price:200,group:"Railroad",ownedby:-1,mortgaged:!1,oprice:200,averageProbability:2.3609500000000003},{name:"Go",id:"go",posistion:0,group:"Special",rel:{Square:"Go","Probability % (Jail Short)":3.0961,Rank:3,"Probability % (Jail Long)":2.9143},averageProbability:3.0052},{name:"Income Tax",id:"incometax",group:"Special",posistion:4,rel:{Square:"Income Tax","Probability % (Jail Short)":2.3285,Rank:27,"Probability % (Jail Long)":2.1934},averageProbability:2.2609500000000002},{name:"Jail / Just Visiting",id:"jail",posistion:10,group:"Special",averageProbability:8.897},{name:"Chance",id:"chance",group:"Special",posistion:36,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Chance",id:"chance",group:"Special",posistion:7,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Chance",id:"chance",group:"Special",posistion:22,rel:{Square:"Chance","Probability % (Jail Short)":.865,Rank:40,"Probability % (Jail Long)":.8152},averageProbability:.8401000000000001},{name:"Free Parking",id:"freeparking",group:"Special",posistion:20,rel:{Square:"Free Parking","Probability % (Jail Short)":2.8836,Rank:5,"Probability % (Jail Long)":2.8253},averageProbability:2.85445},{name:"Community Chest",id:"communitychest",group:"Special",posistion:2,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Community Chest",id:"communitychest",group:"Special",posistion:33,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Community Chest",id:"communitychest",group:"Special",posistion:17,rel:{Square:"Community Chest","Probability % (Jail Short)":1.8849,Rank:37,"Probability % (Jail Long)":1.775},averageProbability:1.82995},{name:"Go To Jail",id:"gotojail",group:"Special",posistion:30,rel:{Square:"Go To Jail","Probability % (Jail Short)":0,Rank:41,"Probability % (Jail Long)":0},averageProbability:0},{name:"Luxury Tax",id:"luxerytax",group:"Special",posistion:38,averageProbability:2.116}],Pk=[{id:"go"},{id:"mediterraneanave"},{id:"communitychest"},{id:"balticave"},{id:"incometax"},{id:"readingrailroad"},{id:"orientalave"},{id:"chance"},{id:"vermontave"},{id:"connecticutave"},{id:"jail"},{id:"stcharlesplace"},{id:"electriccompany"},{id:"statesave"},{id:"virginiaave"},{id:"pennsylvaniarailroad"},{id:"stjamesplace"},{id:"communitychest"},{id:"tennesseeave"},{id:"newyorkave"},{id:"freeparking"},{id:"kentuckyave"},{id:"chance"},{id:"indianaave"},{id:"illinoisave"},{id:"borailroad"},{id:"atlanticave"},{id:"ventnorave"},{id:"waterworks"},{id:"marvingardens"},{id:"gotojail"},{id:"pacificave"},{id:"northcarolinaave"},{id:"communitychest"},{id:"pennsylvaniaave"},{id:"shortlinerailroad"},{id:"chance"},{id:"parkplace"},{id:"luxerytax"},{id:"boardwalk"}],Rk=[{title:"Advance to Go (Collect $200)",action:"move",tileid:"go"},{title:"Advance to Illinois Avenue - If you pass Go, collect $200",action:"move",tileid:"illinoisave"},{title:"Advance to St. Charles Place - If you pass Go, collect $200",action:"move",tileid:"stcharlesplace"},{title:"Advance token to nearest Utility. If unowned, you may buy it from the Bank. If owned, throw dice and pay owner a total ten times the amount thrown.",action:"movenearest",groupid:"utility",rentmultiplier:10},{title:"Advance token to the nearest Railroad and pay owner twice the rental to which he/she is otherwise entitled. If Railroad is unowned, you may buy it from the Bank.",action:"movenearest",groupid:"railroad",rentmultiplier:2},{title:"Bank pays you dividend of $50",action:"addfunds",amount:50},{title:"Get out of Jail Free - This card may be kept until needed, or traded/sold",action:"jail",subaction:"getout"},{title:"Go Back 3 Spaces",action:"move",count:-3},{title:"Go to Jail - Go directly to Jail - Do not pass Go, do not collect $200",action:"jail",subaction:"goto"},{title:"Make general repairs on all your property - For each house pay $25 - For each hotel $100",action:"propertycharges",buildings:25,hotels:100},{title:"Pay poor tax of $15",action:"removefunds",amount:15},{title:"Take a trip to Reading Railroad - If you pass Go, collect $200",action:"move",tileid:"readingrailroad"},{title:"Take a walk on the Boardwalk - Advance token to Boardwalk",action:"move",tileid:"boardwalk"},{title:"You have been elected Chairman of the Board - Pay each player $50",action:"removefundstoplayers",amount:50},{title:"Your building loan matures - Collect $150",action:"addfunds",amount:50}],kk=[{title:"Advance to Go (Collect $200)",action:"move",tileid:"go"},{title:"Bank error in your favor - Collect $200 ",action:"addfunds",amount:200},{title:"Doctor fee - Pay $50",action:"removefunds",amount:50},{title:"From sale of stock you get $50",action:"addfunds",amount:50},{title:"Get Out of Jail Free",action:"jail",subaction:"getout"},{title:"Go to Jail - Go directly to jail - Do not pass Go - Do not collect $200",action:"jail",subaction:"goto"},{title:"Grand Opera Night - Collect $50 from every player for opening night seats",action:"addfundsfromplayers",amount:50},{title:"Holiday Fund matures - Receive $100",action:"addfunds",amount:100},{title:"Income tax refund - Collect $20",action:"addfunds",amount:20},{title:"Life insurance matures - Collect $100",action:"addfunds",amount:100},{title:"Pay hospital fees of $100",action:"removefunds",amount:100},{title:"Pay school fees of $150",action:"removefunds",amount:150},{title:"Receive $25 consultancy fee",action:"addfunds",amount:25},{title:"You are assessed for street repairs - $40 per house - $115 per hotel",action:"propertycharges",buildings:40,hotels:115},{title:"You have won second prize in a beauty contest - Collect $10",action:"addfunds",amount:10},{title:"You inherit $100",action:"addfunds",amount:100}],rr={properties:Ck,tiles:Pk,chance:Rk,communitychest:kk};function Fy(t){const e=new Map(rr.properties.map(s=>[s.posistion??0,s]));let n={},r="Utilities";const i=e.get(t.posistion);if(i)return i.group==="Special"?h.jsx(h.Fragment,{}):(i.group==="Utilities"?(r="Utilities",n={cardCost:i.price??-1,title:i.name??"error",type:i.id.includes("water")?"water":"electricity"}):i.group==="Railroad"?(r="Railroad",n={cardCost:i.price??-1,title:i.name??"error"}):(r="Street",n={cardCost:i.price??-1,hotelsCost:i.ohousecost??-1,housesCost:i.housecost??-1,rent:i.rent??-1,multpliedrent:i.multpliedrent?[i.multpliedrent[0]??-1,i.multpliedrent[1]??-1,i.multpliedrent[2]??-1,i.multpliedrent[3]??-1,i.multpliedrent[4]??-1]:[-1,-1,-1,-1,-1],rentWithColorSet:i.rent?i.rent*2:-1,title:i.name??"error",group:i.group}),h.jsx("div",{style:t.style,onClick:t.OnClick,children:r==="Railroad"?h.jsx(ls,{railroad:n}):r==="Utilities"?h.jsx(ls,{utility:n}):h.jsx(ls,{street:n})}))}const Ik=M.forwardRef((t,e)=>{const n=new Map(rr.properties.map(p=>[p.posistion??0,p])),r=t.players.filter(p=>p.id===t.socket.id)[0];if(r===void 0)return h.jsx(h.Fragment,{children:"Could not read local player!"});M.useImperativeHandle(e,()=>({clickedOnBoard(p){d(-1),l(""),c([]),s(p)}}));const[i,s]=M.useState(-1),[o,l]=M.useState(""),[a,c]=M.useState([]),[u,d]=M.useState(-1);function f(){d(-1),s(-1);const p=Array.from(n.values()).filter(m=>m.group!="Special"),y=p.map(m=>[m.name,m.posistion]),v=p.map(m=>m.posistion.toString()),C=[];for(const m of v)m.includes(o)&&C.push(parseInt(m));for(const m of y)m[0].toLowerCase().includes(o.toLowerCase())&&C.push(m[1]);c(C)}return M.useEffect(f,[o]),h.jsxs(h.Fragment,{children:[h.jsx("h3",{style:{textAlign:"center"},children:"Propreties"}),h.jsx("input",{type:"text",onChange:p=>l(p.currentTarget.value),placeholder:"Search for global cards..."}),h.jsx("div",{className:"propertyList",style:{overflowY:"auto",position:"relative",flexGrow:1,cursor:"pointer"},children:o.length>0?a.map((p,y)=>{var v,C;return h.jsx(h.Fragment,{children:u===p?h.jsx("center",{children:h.jsx(Fy,{style:{cursor:"pointer",marginBottom:25,marginTop:10},posistion:p,OnClick:()=>{d(-1)}},y)}):h.jsxs("div",{onClick:()=>d(p),className:"proprety-nav",children:[h.jsx("i",{className:"box",style:{backgroundColor:Oc(((v=n.get(p))==null?void 0:v.group)??"")}}),h.jsx("h3",{children:((C=n.get(p))==null?void 0:C.name)??""})]},y)})}):i===-1?r.properties.map((p,y)=>{var v;return h.jsxs("div",{onClick:()=>s(p.posistion),className:"proprety-nav",children:[h.jsx("i",{className:"box",style:{backgroundColor:Oc(p.group)}}),h.jsx("h3",{children:((v=n.get(p.posistion))==null?void 0:v.name)??""}),h.jsx("div",{children:p.count=="h"?h.jsx("img",{src:Wp.replace("public/",""),alt:""}):typeof p.count=="number"&&p.count>0?h.jsxs(h.Fragment,{children:[h.jsx("p",{children:p.count}),h.jsx("img",{src:Hp.replace("public/",""),alt:""})]}):h.jsx(h.Fragment,{})})]},y)}):h.jsx("div",{children:h.jsx("center",{style:{transform:"scale(1) translateY(-50%) translateX(-50%)",position:"absolute",top:"50%",left:"50%"},children:h.jsx(Fy,{style:{transform:"scale(1.2)",filter:"drop-shadow(5px 5px 0px rgba(255,255,255,20%))"},posistion:i,OnClick:()=>{s(-1)}})})})})]})}),Xh="https://coder-1t45.github.io/Monopoly/assets/roll-893dc331.png",Ak=M.forwardRef((t,e)=>{const n=t.players.filter(a=>a.id===t.socket.id)[0],r=new Map(rr.properties.map(a=>[a.posistion??0,a])),[i,s]=M.useState(),[o,l]=M.useState();return M.useEffect(()=>{l(JSON.parse(document.cookie).settings)},[document.cookie]),M.useImperativeHandle(e,()=>({clickdOnPlayer(a){for(const c of t.players)c.id===a&&s(c)}})),h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:n!==void 0?"container-top":"",style:n===void 0?{height:"100%"}:{},children:[h.jsx("h3",{"data-clickable":i!==void 0,style:{textAlign:"center"},onClick:()=>{i!==void 0&&s(void 0)},children:"Players"}),i!=null?h.jsxs(h.Fragment,{children:[h.jsx("h4",{children:"Cards"}),h.jsx("h4",{children:"Propreties"}),i.properties.length===0?h.jsx("p",{children:"none"}):i.properties.map((a,c)=>{var u;return h.jsxs("div",{onClick:()=>{s(void 0),t.clickedOnPlayer(a.posistion)},className:"proprety-nav",children:[h.jsx("i",{className:"box",style:{backgroundColor:Oc(a.group)}}),h.jsx("h3",{children:((u=r.get(a.posistion))==null?void 0:u.name)??""}),h.jsx("div",{children:a.count=="h"?h.jsx("img",{src:Wp.replace("public/",""),alt:""}):typeof a.count=="number"&&a.count>0?h.jsxs(h.Fragment,{children:[h.jsx("p",{children:a.count}),h.jsx("img",{src:Hp.replace("public/",""),alt:""})]}):h.jsx(h.Fragment,{})})]},c)})]}):h.jsx("div",{className:"playersInfos",children:t.players.map((a,c)=>h.jsx(h.Fragment,{children:h.jsxs("div",{className:"playerInfo",style:o!==void 0&&o.accessibility[4]===!0?{backgroundColor:a.color}:{},onClick:()=>{const u=document.querySelector(`div.player[player-id="${a.id}"]`);u.style.animation="spin2 1s cubic-bezier(.21, 1.57, .55, 1) infinite",setTimeout(()=>{u.style.animation=""},1*1e3)},onDoubleClick:()=>{s(a)},children:[h.jsxs("p",{children:[o!=null&&o.accessibility[2]?`[${a.id}]`:""," ",a.username]}),a.id===t.currentTurn?h.jsx("img",{src:Xh.replace("public/","")}):h.jsx(h.Fragment,{}),a.getoutCards>0?h.jsx("p",{className:"orange",children:a.getoutCards}):h.jsx(h.Fragment,{}),h.jsx("p",{children:a.balance}),h.jsx("p",{children:a.properties.length})]},c)}))})]}),n!==void 0?h.jsx(h.Fragment,{children:h.jsx("div",{className:"container-bottom",style:{},children:h.jsxs("p",{style:{margin:0,marginTop:5},children:[" ",n.balance," M"]})})}):h.jsx(h.Fragment,{})]})});function Cr(t){const[e,n]=M.useState(t.defaultValue??0);return h.jsxs("div",{className:"slider-component",children:[h.jsx("input",{type:"range",onChange:r=>{var i;(i=t.onChange)==null||i.call(t,r),n(parseFloat(r.currentTarget.value))},defaultValue:t.defaultValue??50,step:t.step??1,max:t.max??100,min:t.min??0}),e.toFixed(t.fixedNum??0),t.suffix]})}function c1(){const t=JSON.parse(document.cookie),e={gameEngine:M.useState("2d"),numbers:[M.useState(t.settings?t.settings.accessibility[0]:45),M.useState(t.settings?t.settings.accessibility[1]:5),M.useState(t.settings?t.settings.audio[0]:100),M.useState(t.settings?t.settings.audio[1]:100),M.useState(t.settings?t.settings.audio[2]:25)],booleans:[M.useState(t.settings?t.settings.accessibility[2]:!1),M.useState(t.settings?t.settings.accessibility[3]:!1),M.useState(t.settings?t.settings.accessibility[4]:!1),M.useState(t.settings?t.settings.notifications:!1)]};return M.useEffect(()=>{const n=JSON.parse(document.cookie),r={gameEngine:e.gameEngine[0],accessibility:[e.numbers[0][0],e.numbers[1][0],e.booleans[0][0],e.booleans[1][0],e.booleans[2][0]],audio:[e.numbers[2][0],e.numbers[3][0],e.numbers[4][0]],notifications:e.booleans[3][0]};document.cookie=JSON.stringify({login:n.login,settings:r})},[e.gameEngine[0],...e.numbers.map(n=>n[0]),,...e.booleans.map(n=>n[0])]),h.jsxs(h.Fragment,{children:[h.jsx("h3",{style:{textAlign:"center"},children:"Settings"}),h.jsxs("div",{className:"scroll",children:[h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Game Engine "}),h.jsx("div",{children:h.jsxs("select",{name:"",id:"",children:[h.jsx("option",{children:"2D"}),h.jsx("option",{children:"3D"})]})})]}),h.jsxs("p",{style:{marginBlock:0,marginInline:10,fontSize:12,opacity:.5},children:["3d isnt developed yet"," "]}),h.jsx("br",{}),h.jsx("hr",{}),h.jsx("h2",{children:"Accessibility"}),h.jsxs("div",{children:[h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Rotation Speed "}),h.jsx(Cr,{step:90/8,min:0,max:180,defaultValue:e.numbers[0][0],onChange:n=>{e.numbers[0][1](parseFloat(n.currentTarget.value))},fixedNum:2,suffix:" deg"})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Scale Speed "}),h.jsx(Cr,{step:1,min:1,max:10,defaultValue:e.numbers[1][0],onChange:n=>{e.numbers[1][1](parseFloat(n.currentTarget.value))},fixedNum:0})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Show Users Id "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[0][0],type:"checkbox",onChange:n=>{e.booleans[0][1](n.currentTarget.checked)}})})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Show Users Mouse "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[1][0],type:"checkbox",onChange:n=>{e.booleans[1][1](n.currentTarget.checked)}})})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Add Colors to Users "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[2][0],type:"checkbox",onChange:n=>{e.booleans[2][1](n.currentTarget.checked)}})})]}),h.jsx("br",{}),h.jsx("hr",{})]}),h.jsx("h2",{children:"Audio"}),h.jsxs("div",{children:[h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Master Audio "}),h.jsx(Cr,{step:1,min:0,max:100,defaultValue:e.numbers[2][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[2][1](parseFloat(n.currentTarget.value))}})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"SFX Audio "}),h.jsx(Cr,{step:1,min:0,max:100,defaultValue:e.numbers[3][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[3][1](parseFloat(n.currentTarget.value))}})]}),h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Music Audio "}),h.jsx(Cr,{step:1,min:0,max:100,defaultValue:e.numbers[4][0],fixedNum:0,suffix:"%",onChange:n=>{e.numbers[4][1](parseFloat(n.currentTarget.value))}})]}),h.jsx("br",{}),h.jsx("hr",{})]}),h.jsx("h2",{children:"Notifications"}),h.jsx("div",{children:h.jsxs("div",{className:"settingsItem",children:[h.jsx("p",{children:"Notify Balance Movements "}),h.jsx("div",{children:h.jsx("input",{defaultChecked:e.booleans[3][0],type:"checkbox",onChange:n=>{e.booleans[3][1](n.currentTarget.checked)}})})]})})]})]})}const bk=M.forwardRef((t,e)=>{const[n,r]=M.useState(0),[i,s]=M.useState([]);function o(){a(t.players)}const[l,a]=M.useState(t.players);M.useImperativeHandle(e,()=>({addMessage(d){if(s(f=>[...f,d]),n!==2){const f=document.getElementById("chatIconChange"),p=f.querySelector("img");p.style.animation="spin3 2s cubic-bezier(.68,.05,.49,.95) infinite",p.src=fk.replace("/public",""),f.onclick=()=>{p.src=Vy.replace("/public",""),p.style.animation="",r(2),f.onclick=()=>{r(2)}}}},reRenderPlayerList:o,clickedOnBoard:d=>{r(1),requestAnimationFrame(()=>{var f;(f=c.current)==null||f.clickedOnBoard(d)})}}));const c=M.useRef(null),u=M.useRef(null);return M.useEffect(o,[t.players.map(d=>d.properties),t.players.map(d=>d.balance)]),M.useEffect(()=>{const d=f=>{const p=parseInt(f.key);if(!isNaN(p)){const y=document.activeElement;(y===null||y.tagName!=="INPUT")&&r(p-1)}};return document.addEventListener("keydown",d),()=>{document.removeEventListener("keydown",d)}},[]),h.jsxs("nav",{className:"main",children:[h.jsxs("nav",{className:"header",children:[h.jsx("img",{style:{marginTop:75},className:"header",src:yk.replace("public/","")}),h.jsxs("div",{className:"upper",children:[h.jsx("div",{"data-selected":n==0,onClick:()=>r(0),"data-tooltip-hover":"players",className:"button",children:h.jsx("img",{src:hk.replace("public/",""),alt:""})}),h.jsx("div",{"data-selected":n==1,onClick:()=>r(1),"data-tooltip-hover":"propreties",className:"button",children:h.jsx("img",{src:mk.replace("public/",""),alt:""})}),h.jsx("div",{"data-selected":n==2,onClick:()=>r(2),"data-tooltip-hover":"chat",className:"button",id:"chatIconChange",children:h.jsx("img",{src:Vy.replace("public/",""),alt:""})})]}),h.jsxs("div",{className:"lower",children:[h.jsx("div",{"data-selected":n==3,onClick:()=>r(3),"data-tooltip-hover":"settings",className:"button",children:h.jsx("img",{src:gk.replace("public/",""),alt:""})}),h.jsx("div",{"data-tooltip":"leave",className:"button color","data-tooltip-hover":"leave",onClick:()=>{document.location.reload()},children:h.jsx("img",{src:pk.replace("public/",""),alt:""})})]})]}),h.jsx("nav",{className:"content","data-index":n>3||n<0?0:n,children:n==1?h.jsx(Ik,{ref:c,players:l,socket:t.socket}):n==2?h.jsxs(h.Fragment,{children:[h.jsx("h3",{style:{textAlign:"center"},children:"Chat"}),h.jsxs("div",{className:"main-chat",children:[h.jsx("div",{className:"messages",children:i.map((d,f)=>h.jsxs("div",{className:"message",children:[h.jsxs("p",{children:[d.from,":"]}),h.jsx("p",{children:d.message})]},f))}),h.jsx("input",{placeholder:"Type Message Here...",type:"text",onKeyDown:d=>{if(d.which===13&&d.currentTarget.value.length>0){const f=d.currentTarget.value;t.socket.emit("message",f),d.currentTarget.value=""}}})]})]}):n==3?h.jsx(c1,{}):h.jsx(Ak,{ref:u,clickedOnPlayer:d=>{r(1),requestAnimationFrame(()=>{var f;(f=c.current)==null||f.clickedOnBoard(d)})},players:l,socket:t.socket,currentTurn:t.currentTurn})})]})});function Uy({chance:t,chest:e}){return t!==void 0?h.jsx(xk,{args:t}):e!==void 0?h.jsx(Ok,{args:e}):h.jsx(h.Fragment,{})}function xk({args:t}){return h.jsxs("div",{"data-b-image":"chance",className:"chance-card",children:[h.jsx("div",{}),h.jsx("div",{children:h.jsx("h3",{children:t.title})}),h.jsx("div",{})]})}function Ok({args:t}){return h.jsxs("div",{"data-b-image":"chest",className:"chance-card",children:[h.jsx("div",{}),h.jsx("div",{children:h.jsx("h3",{children:t.title})}),h.jsx("div",{})]})}const Nk=M.forwardRef((t,e)=>{const n=new Map(rr.properties.map(w=>[w.posistion??0,w])),[r,i]=M.useState(!1),[s,o]=M.useState(!1),[l,a]=M.useState(!1),[c,u]=M.useState(!1),[d,f]=M.useState(0),[p,y]=M.useState(1),[v,C]=M.useState();M.useEffect(()=>{const w=setInterval(()=>{C(JSON.parse(document.cookie).settings)},200);return()=>{clearInterval(w)}},[document.cookie]);const[m,g]=M.useState({cardCost:-1,hotelsCost:-1,housesCost:-1,multpliedrent:[-1,-1,-1,-1,-1],rent:-1,rentWithColorSet:-1,title:"deafult",type:"electricity"}),[E,T]=M.useState("Street");function _(w,A){const S=document.getElementById("dice-panel");var Q=!0;function re(){var ce="./c";const K=Math.floor(Math.random()*6)+1,Te=Math.floor(Math.random()*6)+1;S.innerHTML=`
                <img src="${ce}${K}.png" />
                <img src="${ce}${Te}.png" />
                
                `}function ye(){if(Q)re(),requestAnimationFrame(ye);else{var ce="./c";S.innerHTML=`
                <img src="${ce}${w}.png" />
                <img src="${ce}${A}.png" />
                `}}setTimeout(()=>{Q=!1},1e3),requestAnimationFrame(ye)}function R(w){const A=document.querySelector("img#moneyAnimations");if(A===null)return;const S=A;S.setAttribute("data-anim","0"),requestAnimationFrame(()=>{S.setAttribute("data-anim",w.toString()),setTimeout(()=>{S.setAttribute("data-anim","0")},1e3)})}function I(){const w=JSON.parse(document.cookie).settings;let A=new Audio("./card.mp3");A.volume=((w==null?void 0:w.audio[1])??100)/100*(((w==null?void 0:w.audio[0])??100)/100),A.loop=!1,A.play()}return M.useImperativeHandle(e,()=>({diceResults:w=>{_(...w.l),i(!0),setTimeout(()=>{i(!1),w.onDone()},w.time)},freeDice:()=>{const w=document.getElementById("dice-panel");w.innerHTML="",o(!1)},setStreet:w=>{const A=t.players.filter(ce=>ce.id===t.socket.id)[0],S=n.get(w.location);if(S&&w.location!==-1&&w.location<40&&w.location>=0){let ce=function(K,Te,Pe){function b(){const F=JSON.parse(document.cookie).settings;let te=new Audio("./click.mp3");te.volume=((F==null?void 0:F.audio[1])??100)/100*(((F==null?void 0:F.audio[0])??100)/100),te.loop=!1,te.play()}function L(){if(K){const F=document.querySelector("div#advanced-responses");if(F){let te=function(j){switch(j){case"h":return 5;default:return j}};const ie=n.get(Te);if(!ie)return;const se=F;for(;se.firstChild;)se.removeChild(se.firstChild);const k=Array.from(new Map(A.properties.map((j,H)=>[H,j])).entries()).filter(j=>j[1].posistion===w.location)[0][0],N=te(A.properties[k].count);for(let j=N+1;j<6;j++){const H=document.createElement("button");j===5?(H.innerHTML="buy hotel",H.disabled=j!==N+1||(ie.ohousecost??0)>(t.players.filter(oe=>oe.id===t.socket.id)[0].balance??0),H.onclick=()=>{w.onResponse("advance-buy",{state:j,money:1}),a(!1)}):(H.innerHTML=`buy ${j} house${j>1?"s":""}`,H.onclick=()=>{w.onResponse("advance-buy",{state:j,money:j-N}),a(!1)},H.disabled=(j-N)*(ie.housecost??0)>(t.players.filter(oe=>oe.id===t.socket.id)[0].balance??0)),se.appendChild(H)}const U=document.createElement("button");U.innerHTML="CONTINUE",U.onclick=()=>{b(),w.onResponse("nothing",{}),a(!1)},se.appendChild(U)}else requestAnimationFrame(L)}else{const F=document.querySelector("button#card-response-yes");F?(F.onclick=()=>{Pe!==void 0?w.onResponse("special_action",{rolls:Pe.rolls}):w.onResponse("buy",{}),a(!1)},document.querySelector("button#card-response-no").onclick=()=>{b(),w.onResponse("nothing",{}),a(!1)}):requestAnimationFrame(L)}}return L};var Q=!1,re=!1,ye=0;for(const K of A.properties)!Q&&K.posistion===w.location&&(Q=!0,ye=K.count);for(const K of t.players)for(const Te of K.properties)Te.posistion===w.location&&K.id!=A.id&&(re=!0);if(S.group==="Special")w.onResponse("nothing",{}),a(!1);else if(S.group==="Utilities")if(Q)w.onResponse("nothing",{});else if(re){w.onResponse("someones",{}),a(!1);return}else{T("Utilities");const K={cardCost:S.price??-1,title:S.name??"error",type:S.id.includes("water")?"water":"electricity"};g(K),u(!1),I(),a(!0),requestAnimationFrame(ce(!1,w.location,{rolls:w.rolls}))}else if(S.group==="Railroad")if(Q)w.onResponse("nothing",{});else if(re){w.onResponse("someones",{}),a(!1);return}else{T("Railroad");const K={cardCost:S.price??-1,title:S.name??"error"};g(K),I(),a(!0),requestAnimationFrame(ce(!1,w.location))}else{if(!Q&&A.balance-((S==null?void 0:S.price)??0)<0){a(!1),w.onResponse("nothing",{});return}if(!Q){if(re){w.onResponse("someones",{}),a(!1);return}}if(Q&&ye==="h"){a(!1),w.onResponse("nothing",{});return}T("Street");const K={cardCost:S.price??-1,hotelsCost:S.ohousecost??-1,housesCost:S.housecost??-1,rent:S.rent??-1,multpliedrent:S.multpliedrent?[S.multpliedrent[0]??-1,S.multpliedrent[1]??-1,S.multpliedrent[2]??-1,S.multpliedrent[3]??-1,S.multpliedrent[4]??-1]:[-1,-1,-1,-1,-1],rentWithColorSet:S.rent?S.rent*2:-1,title:S.name??"error",group:S.group};g(K),u(!!Q),I(),a(!0),requestAnimationFrame(ce(Q,w.location))}}else w.onResponse("nothing",{}),a(!1)},chorch(w,A,S){T(A?"Chance":"CommunityChest"),g({title:w.title}),I(),a(!0),setTimeout(()=>{a(!1)},S)},applyAnimation(w){R(w)},showJailsButtons:w=>{const A=document.querySelector('button.roll-button[data-button-type="pay"]'),S=document.querySelector('button.roll-button[data-button-type="card"]'),Q=document.querySelector('button.roll-button[data-button-type="roll"]');function re(){Q.onclick=()=>{o(!0),t.socket.emit("roll_dice"),console.warn("roll after return to normal")},o(!0),S.onclick=()=>{},S.style.translate="0px 0px",S.setAttribute("aria-disabled","true"),setTimeout(()=>{S.setAttribute("aria-disabled","true")},300),A.style.translate="0px 0px",A.onclick=()=>{},A.setAttribute("aria-disabled","true"),setTimeout(()=>{A.setAttribute("aria-disabled","true")},300)}if(A.setAttribute("aria-disabled","false"),A.style.translate="0px -80px",A.onclick=()=>{R(1),t.socket.emit("unjail","pay"),t.socket.emit("roll_dice"),console.warn("pay"),re()},w){const ye=S;ye.setAttribute("aria-disabled","false"),ye.style.translate="0px -160px",ye.style.backgroundColor="gold",ye.onclick=()=>{t.socket.emit("unjail","card"),t.socket.emit("roll_dice"),console.warn("card"),re()}}Q.onclick=()=>{t.socket.emit("roll_dice"),console.warn("roll when in jail"),re(),o(!0)}}})),M.useEffect(()=>{document.getElementById("locations").onwheel=A=>{A.shiftKey?y(S=>S+A.deltaY*(v!==void 0?v.accessibility[1]:5)/5e3):f(S=>S+A.deltaY*(v!==void 0?v.accessibility[0]:45)/100)};const w=Array.from(n.values()).filter(A=>A.group!="Special");for(const A of w){const S=document.getElementById("locations").querySelector(`div.street[data-position="${A.posistion}"]`);S.onclick=()=>{t.clickedOnBoard(A.posistion)},S.onmousemove=()=>{S.style.cursor="pointer",S.style.backgroundColor="rgba(0,0,0,15%)"},S.onmouseleave=()=>{S.style.cursor="unset",S.style.scale="1",S.style.backgroundColor="rgba(0,0,0,0%)"}}},[v]),M.useEffect(()=>{var w=!0,A=()=>{var Q,re,ye,ce;for(const K of t.players.filter(Te=>Te.balance>=0)){const Te=K.position,Pe=K.icon+1,b=K.isInJail,L=document.querySelector(`div.player[player-id="${K.id}"]`);if(L!==null){const F=L.querySelector("div");F.style.rotate=`${-d}deg`,F.style.aspectRatio="1",v!==void 0&&v.accessibility[4]===!0?F.setAttribute("data-tooltip-color",K.color):F.hasAttribute("data-tooltip-color")&&(F.querySelector("img").style.filter="",F.removeAttribute("data-tooltip-color"));const te=(Q=L.parentElement)==null?void 0:Q.getAttribute("data-position");if(parseInt(te)!==K.position&&((re=L.parentElement)==null||re.removeChild(L),(ye=document.querySelector(`div.street[data-position="${Te}"]`))==null||ye.appendChild(L)),!b&&L.querySelector("img.jailIcon")!=null){const ie=L.querySelector("img.jailIcon");L.removeChild(ie)}if(b&&L.querySelector("img.jailIcon")==null){for(;L.firstChild;)L.removeChild(L.firstChild);const ie=document.createElement("img");ie.src=`./p${Pe}.png`,L.appendChild(ie);const se=document.createElement("img");se.src="./jail.png",se.className="jailIcon",L.appendChild(se)}}else{const F=document.createElement("div");F.className="player",F.setAttribute("player-id",K.id),F.setAttribute("player-position",K.position.toString());const te=document.createElement("div");te.setAttribute("data-tooltip-hover",K.username);const ie=document.createElement("img");if(ie.src=`./p${Pe}.png`,te.appendChild(ie),F.appendChild(te),b){const se=document.createElement("img");se.src="./jail.png",se.className="jailIcon",F.appendChild(se)}(ce=document.querySelector(`div.street[data-position="${Te}"]`))==null||ce.appendChild(F)}}function S(){const K=document.getElementById("display-houses"),Te=Array.from(K.querySelectorAll("div.street-houses"));for(const b of Te){const L=b;for(;L.firstChild;)L.removeChild(L.firstChild);L.onclick=()=>{},L.style.cursor="unset",L.style.backgroundColor="rgba(0,0,0,0%)",L.style.padding="0px",L.innerHTML="",L.setAttribute("data-tooltip-hover",""),L.style.zIndex="unset",L.style.boxShadow=""}for(const b of t.players)for(const L of b.properties){const F=L.posistion,te=L.count,ie=K.querySelector(`div.street-houses[data-position="${F}"`);if(ie!=null){const se=ie;switch(se.setAttribute("data-tooltip-hover",b.username),se.onclick=()=>{const k=document.querySelector(`div.player[player-id="${b.id}"]`);k.style.animation="spin2 1s cubic-bezier(.21, 1.57, .55, 1) infinite",setTimeout(()=>{k.style.animation=""},1*1e3)},se.style.cursor="pointer",se.style.zIndex="5",te){case 0:se.style.backgroundColor="rgba(0,0,0,25%)",v!==void 0&&(v!=null&&v.accessibility[4])&&(se.style.backgroundColor=b.color,se.style.boxShadow="0px 0px 5px black");var Pe=0;if(L.group==="Railroad"){const N=b.properties.filter(H=>H.group==="Railroad").length;var Pe=[25,50,100,200][N]}else if(L.group==="Utilities"&&L.rent){const N=b.properties.filter(U=>U.group==="Utilities").length===2?10:4;Pe=L.rent*N}Pe!==0&&(se.innerHTML=`<p>${Pe}M</p>`,se.style.backgroundColor="rgba(0,0,0,75%)",v!==void 0&&(v!=null&&v.accessibility[4])&&(se.style.backgroundColor=`${b.color}`,se.style.boxShadow="0px 0px 5px black"));break;case 1:case 2:case 3:case 4:for(let N=0;N<te;N++){const U=document.createElement("img");U.src=Hp.replace("public/",""),se.appendChild(U)}break;case"h":const k=document.createElement("img");k.src=Wp.replace("public/",""),se.appendChild(k);break}}}}S(),w&&requestAnimationFrame(A)};return requestAnimationFrame(A),()=>{w=!1}},[t.players,d]),M.useEffect(()=>{const w=document.querySelector('button.roll-button[data-button-type="roll"]');w.onclick=()=>{o(!0),t.socket.emit("roll_dice"),console.warn("first roll")}},[]),h.jsx(h.Fragment,{children:h.jsxs("div",{className:"game",children:[h.jsx("div",{id:"dice-panel","data-show":r}),h.jsxs("div",{className:"board",style:{transform:`translateX(-50%) translateY(-50%) rotate(${d}deg) scale(${p})`},id:"locations",children:[h.jsxs("div",{id:"display-houses",children:[h.jsx("div",{"data-position":"39","data-rotate":"4",className:"street-houses",style:{top:"83%",left:"93.5%"}}),h.jsx("div",{"data-position":"37","data-rotate":"4",className:"street-houses",style:{top:"66.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"35","data-rotate":"4",className:"street-houses",style:{top:"50%",left:"93.5%"}}),h.jsx("div",{"data-position":"34","data-rotate":"4",className:"street-houses",style:{top:"41.75%",left:"93.5%"}}),h.jsx("div",{"data-position":"32","data-rotate":"4",className:"street-houses",style:{top:"25.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"31","data-rotate":"4",className:"street-houses",style:{top:"17.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"29","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"83%"}}),h.jsx("div",{"data-position":"28","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"74.75%"}}),h.jsx("div",{"data-position":"27","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"26","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"58.25%"}}),h.jsx("div",{"data-position":"25","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"50%"}}),h.jsx("div",{"data-position":"24","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"23","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"33.5%"}}),h.jsx("div",{"data-position":"21","data-rotate":"3",className:"street-houses",style:{top:"6.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"19","data-rotate":"2",className:"street-houses",style:{top:"17.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"18","data-rotate":"2",className:"street-houses",style:{top:"25.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"16","data-rotate":"2",className:"street-houses",style:{top:"41.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"15","data-rotate":"2",className:"street-houses",style:{top:"50%",left:"6.5%"}}),h.jsx("div",{"data-position":"14","data-rotate":"2",className:"street-houses",style:{top:"58.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"13","data-rotate":"2",className:"street-houses",style:{top:"66.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"12","data-rotate":"2",className:"street-houses",style:{top:"74.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"11","data-rotate":"2",className:"street-houses",style:{top:"83%",left:"6.5%"}}),h.jsx("div",{"data-position":"9","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"8","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"25.5%"}}),h.jsx("div",{"data-position":"6","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"5","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"50%"}}),h.jsx("div",{"data-position":"3","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"1","data-rotate":"1",className:"street-houses",style:{top:"93.5%",left:"83%"}})]}),h.jsxs("div",{id:"display-streets",children:[h.jsx("div",{"data-position":"39",className:"street",style:{width:120,height:75,top:"83%",left:"93.5%"}}),h.jsx("div",{"data-position":"38",className:"street",style:{width:120,height:75,top:"74.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"37",className:"street",style:{width:120,height:75,top:"66.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"36",className:"street",style:{width:120,height:75,top:"58.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"35",className:"street",style:{width:120,height:75,top:"50%",left:"93.5%"}}),h.jsx("div",{"data-position":"34",className:"street",style:{width:120,height:75,top:"41.75%",left:"93.5%"}}),h.jsx("div",{"data-position":"33",className:"street",style:{width:120,height:75,top:"33.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"32",className:"street",style:{width:120,height:75,top:"25.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"31",className:"street",style:{width:120,height:75,top:"17.25%",left:"93.5%"}}),h.jsx("div",{"data-position":"30",className:"street",style:{width:120,height:120,top:"6.5%",left:"93.5%"}}),h.jsx("div",{"data-position":"29",className:"street",style:{width:75,height:120,top:"6.5%",left:"83%"}}),h.jsx("div",{"data-position":"28",className:"street",style:{width:75,height:120,top:"6.5%",left:"74.75%"}}),h.jsx("div",{"data-position":"27",className:"street",style:{width:75,height:120,top:"6.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"26",className:"street",style:{width:75,height:120,top:"6.5%",left:"58.25%"}}),h.jsx("div",{"data-position":"25",className:"street",style:{width:75,height:120,top:"6.5%",left:"50%"}}),h.jsx("div",{"data-position":"24",className:"street",style:{width:75,height:120,top:"6.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"23",className:"street",style:{width:75,height:120,top:"6.5%",left:"33.5%"}}),h.jsx("div",{"data-position":"22",className:"street",style:{width:75,height:120,top:"6.5%",left:"25.5%"}}),h.jsx("div",{"data-position":"21",className:"street",style:{width:75,height:120,top:"6.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"20",className:"street",style:{width:120,height:120,top:"6.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"19",className:"street",style:{width:120,height:75,top:"17.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"18",className:"street",style:{width:120,height:75,top:"25.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"17",className:"street",style:{width:120,height:75,top:"33.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"16",className:"street",style:{width:120,height:75,top:"41.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"15",className:"street",style:{width:120,height:75,top:"50%",left:"6.5%"}}),h.jsx("div",{"data-position":"14",className:"street",style:{width:120,height:75,top:"58.25%",left:"6.5%"}}),h.jsx("div",{"data-position":"13",className:"street",style:{width:120,height:75,top:"66.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"12",className:"street",style:{width:120,height:75,top:"74.75%",left:"6.5%"}}),h.jsx("div",{"data-position":"11",className:"street",style:{width:120,height:75,top:"83%",left:"6.5%"}}),h.jsx("div",{className:"street","data-position":"10",style:{width:120,height:120,top:"93.5%",left:"6.5%"}}),h.jsx("div",{"data-position":"9",className:"street",style:{width:75,height:120,top:"93.5%",left:"17.25%"}}),h.jsx("div",{"data-position":"8",className:"street",style:{width:75,height:120,top:"93.5%",left:"25.5%"}}),h.jsx("div",{"data-position":"7",className:"street",style:{width:75,height:120,top:"93.5%",left:"33.5%"}}),h.jsx("div",{"data-position":"6",className:"street",style:{width:75,height:120,top:"93.5%",left:"41.75%"}}),h.jsx("div",{"data-position":"5",className:"street",style:{width:75,height:120,top:"93.5%",left:"50%"}}),h.jsx("div",{"data-position":"4",className:"street",style:{width:75,height:120,top:"93.5%",left:"58.25%"}}),h.jsx("div",{"data-position":"3",className:"street",style:{width:75,height:120,top:"93.5%",left:"66.5%"}}),h.jsx("div",{"data-position":"2",className:"street",style:{width:75,height:120,top:"93.5%",left:"74.75%"}}),h.jsx("div",{"data-position":"1",className:"street",style:{width:75,height:120,top:"93.5%",left:"83%"}}),h.jsx("div",{"data-position":"0",className:"street",style:{width:120,height:120,top:"93.5%",left:"93.5%"}})]})]}),h.jsxs("div",{className:"roll-panel",children:[h.jsx("button",{className:"roll-button","data-button-type":"card","aria-disabled":!0,style:t.myTurn&&!s?{}:{translate:"0px 20vh"},children:h.jsx("p",{children:"CARD"})}),h.jsx("button",{className:"roll-button","data-button-type":"pay","aria-disabled":!0,style:t.myTurn&&!s?{}:{translate:"0px 20vh"},children:h.jsx("p",{children:"PAY"})}),h.jsxs("button",{className:"roll-button","data-button-type":"roll","aria-disabled":!1,style:t.myTurn&&!s?{}:{translate:"0px 20vh"},children:[h.jsx("img",{src:Xh.replace("public/","")}),h.jsx("p",{children:"ROLL THE DICE"})," ",h.jsx("img",{src:Xh.replace("public/","")})]})]}),h.jsx("div",{className:E==="Chance"||E==="CommunityChest"?"chance-display-actions":"card-display-actions",style:l?{}:{transform:"translateY(-50%) translateX(-70vw)"},children:E==="Chance"||E==="CommunityChest"?h.jsx(h.Fragment,{children:E==="Chance"?h.jsx(Uy,{chance:m}):E==="CommunityChest"?h.jsx(Uy,{chance:m}):h.jsx(h.Fragment,{})}):h.jsxs(h.Fragment,{children:[h.jsx("h3",{children:c?"would you like to buy this card?":"you can buy houses and hotels"}),E==="Railroad"?h.jsx(ls,{railroad:m}):E==="Utilities"?h.jsx(ls,{utility:m}):h.jsx(ls,{street:m}),h.jsx("div",{children:h.jsx("center",{children:c?h.jsx("div",{id:"advanced-responses"}):h.jsxs(h.Fragment,{children:[h.jsx("button",{id:"card-response-yes",children:"YES"}),h.jsx("button",{id:"card-response-no",children:"NO"})]})})})]})}),h.jsx("img",{"data-anim":"0",id:"moneyAnimations",alt:""})]})})}),u1=M.forwardRef((t,e)=>(M.useImperativeHandle(e,()=>({message(n,r,i,s,o){const l=document.querySelector("div.notify"),a=document.createElement("div");a.className="notification",a.innerHTML=n,a.setAttribute("data-notif-type",r??"info"),l.appendChild(a);var c=!1,u="popoff .7s cubic-bezier(.62,.25,1,-0.73)";if(a.onclick=()=>{c=!0,a.style.animation=u,setTimeout(()=>{l.removeChild(a),a.remove(),s&&s()},700)},setTimeout(()=>{c||(a.style.animation=u,setTimeout(()=>{l.removeChild(a),a.remove(),s&&s()},700))},(i??2)*1e3),o===void 0||o!==void 0&&o===!0){const d=JSON.parse(document.cookie).settings;let f=new Audio("./notifications.mp3");f.volume=((d==null?void 0:d.audio[1])??100)/100*(((d==null?void 0:d.audio[0])??100)/100),f.play()}},dialog(n,r){const i=document.querySelector("div.dialog-screen"),s=document.querySelector("div.dialog-box"),o=s.querySelector("div.texts"),l=s.querySelector("div.buttons"),a=n(()=>{i.setAttribute("data-show","false"),s.setAttribute("data-show","false"),s.style.animation="dialogout 1s cubic-bezier(.5,0,1,.5)",setTimeout(()=>{s.style.animation="",o.innerHTML="",l.innerHTML=""},1e3)},(d,f)=>{const p=document.createElement("button");return p.onclick=f,p.innerHTML=d,p});s.setAttribute("data-show","true"),i.setAttribute("data-show","true"),o.innerHTML=a.innerHTML;for(const d of a.buttons)l.appendChild(d);const c=JSON.parse(document.cookie).settings;switch(r){case"loosing":var u=new Audio("./dying.mp3");u.volume=.16*(((c==null?void 0:c.audio[1])??100)/100)*(((c==null?void 0:c.audio[0])??100)/100),u.loop=!1,u.play();break;case"winning":var u=new Audio("./winning.mp3");u.volume=((c==null?void 0:c.audio[1])??100)/100*(((c==null?void 0:c.audio[0])??100)/100),u.loop=!1,u.play();break}}})),h.jsxs(h.Fragment,{children:[" ",h.jsx("div",{className:"notify"}),h.jsx("div",{className:"dialog-screen","data-show":!1}),h.jsxs("div",{className:"dialog-box","data-show":!1,children:[h.jsx("div",{className:"texts"}),h.jsx("div",{className:"buttons"})]})]})));function Dk({socket:t,name:e}){const[n,r]=M.useState(new Map),i=Array.from(n.values()),[s,o]=M.useState(""),[l,a]=M.useState(!1),[c,u]=M.useState(!1),[d,f]=M.useState(0),[p,y]=M.useState(),[v,C]=M.useState(new Audio("./main-theme.mp3"));M.useEffect(()=>{l&&(v.loop=!0,v.play(),v.volume=.25,p!==void 0&&(v.volume=p.audio[0]/100*(p.audio[2]/100)),C(v))},[l]),M.useEffect(()=>{const _=setInterval(()=>{const R=JSON.parse(document.cookie).settings;y(R)},1e3);return()=>{clearInterval(_)}},[document.cookie]),M.useEffect(()=>{p!==void 0&&(v.volume=p.audio[0]/100*(p.audio[2]/100))},[p]);const m=M.useRef(null),g=M.useRef(null),E=M.useRef(null),T=new Map(rr.properties.map(_=>[_.posistion??0,_]));return M.useEffect(()=>{let _;const R=setInterval(()=>{_=JSON.parse(document.cookie).settings},1e3);function I(k){const N={x:k.clientX,y:k.clientY},U=n.get(t.id);t.emit("mouse",N),U&&(U.positions=N)}function w(k){function N(){n.delete(k),r(new Map(n)),requestAnimationFrame(()=>{n.has(k)&&requestAnimationFrame(N)})}N();function U(){const j=document.querySelector(`div.player[player-id="${k}"]`);j!==null&&(j.parentElement&&j.parentElement.removeChild(j),j.remove(),requestAnimationFrame(()=>{document.querySelector(`div.player[player-id="${k}"]`)!==null&&requestAnimationFrame(U)}))}U()}function A(k,N,U=!0,j,H=!0){var oe=(k-N.position)%40;(k<N.position||oe<0)&&H&&(oe=40-N.position+k),H||(oe=N.position-k,oe<0&&(oe+=40));const xe=.35*1e3*oe;console.log(`${new Date().toTimeString()} generator ${Math.random()} target ${k} time ${xe} current ${N.position}`);function z(){var Qt=0,Oe=!1,ze=0;const qe=document.querySelector(`div.player[player-id="${N.id}"]`);Qt=N.position,N.position+=1;var dn=new Audio("./step2.mp3");dn.volume=.1*(((_==null?void 0:_.audio[1])??100)/100)*(((_==null?void 0:_.audio[0])??100)/100),dn.loop=!1,dn.play(),qe.style.animation="jumpstreet 0.35s cubic-bezier(.26,1.5,.65,1.02)";const pe=()=>{var pt,kn,hn,fn;if(ze<oe){ze+=1;var Ne=new Audio("./step2.mp3");if(Ne.volume=1*(((_==null?void 0:_.audio[1])??100)/100)*(((_==null?void 0:_.audio[0])??100)/100),Ne.loop=!1,Ne.play(),N.position=(N.position+(H?1:-1))%40,N.position==0&&U){N.balance+=200;var Ne=new Audio("./moneyplus.mp3");Ne.volume=1*(((_==null?void 0:_.audio[1])??100)/100)*(((_==null?void 0:_.audio[0])??100)/100),Ne.loop=!1,Ne.play(),N.id===t.id&&(_!==void 0&&_.notifications===!0&&((pt=E.current)==null||pt.message("200 of money is added to the account","info",2,()=>{},!1)),(kn=m.current)==null||kn.applyAnimation(2)),Oe=!0,r(new Map(n.set(N.id,N)))}if(ze==oe-1){if(N.position=k,qe.style.animation="part 0.9s cubic-bezier(0,.7,.57,1)",setTimeout(()=>{qe.style.animation=""},900),!Oe&&Qt>N.position&&U){var Ne=new Audio("./moneyplus.mp3");Ne.volume=1*(((_==null?void 0:_.audio[1])??100)/100)*(((_==null?void 0:_.audio[0])??100)/100),Ne.loop=!1,Ne.play(),N.balance+=200,N.id===t.id&&(_!==void 0&&_.notifications===!0&&((hn=E.current)==null||hn.message("200 of money is added to the account","info",2,()=>{},!1)),(fn=m.current)==null||fn.applyAnimation(2)),Oe=!0,r(new Map(n.set(N.id,N)))}j&&j()}else qe.style.animation="jumpstreet 0.35s cubic-bezier(.26,1.5,.65,1.02)",setTimeout(pe,.35*1e3)}};setTimeout(pe,.35*1e3)}return{func:z,time:xe}}const S=k=>{o(k.turn_id.toString());for(const N of k.other_players)r(n.set(N.id,new jy(N.id,N.username).recieveJson(N)))},Q=k=>{r(new Map(n.set(k.id,new jy(k.id,k.username).recieveJson(k))))},re=k=>{const N=n.get(k.id);N!==void 0&&(N.ready=k.state,r(new Map(n.set(N.id,N))),f(k.selectedMode))},ye=()=>{a(!0)},ce=k=>{var N,U,j;if(o(k.turn),n.size>2){const H=((N=n.get(k.id))==null?void 0:N.username)??"player";(U=E.current)==null||U.message(`${H} disconected`,"error")}else v.pause(),(j=E.current)==null||j.dialog((H,oe)=>{var xe;return{innerHTML:`<h3> YOU WON! </h3> <p> your the only left player with the balance of ${((xe=n.get(t.id))==null?void 0:xe.balance)??0} </p>`,buttons:[oe("PLAY ANOTHER GAME",()=>{H(),document.location.reload()})]}},"winning");w(k.id)},K=k=>{var j,H,oe,xe,z,Qt;const N=n.get(k.from);if(N!==void 0&&JSON.stringify(N.properties)!=JSON.stringify(k.pJson.properties)){var U=new Audio("./buying1.mp3");U.volume=.5*(((_==null?void 0:_.audio[1])??100)/100)*(((_==null?void 0:_.audio[0])??100)/100),U.loop=!1,U.play()}if(k.from!==t.id&&N&&(N.recieveJson(k.pJson),r(new Map(n.set(k.from,N)))),k.pJson.balance<0){if(k.pJson.id!==t.id)if(n.size>2){const Oe=k.pJson.username;(j=E.current)==null||j.message(`${Oe} lost`,"info")}else if(n.has(t.id))v.pause(),(H=E.current)==null||H.dialog((Oe,ze)=>{var qe;return{innerHTML:`<h3> YOU WON! </h3> <p> your the only left player with the balance of ${((qe=n.get(t.id))==null?void 0:qe.balance)??0} </p>`,buttons:[ze("PLAY ANOTHER GAME",()=>{Oe(),document.location.reload()})]}},"winning");else{const ze=Array.from(n.values()).filter(qe=>qe.id!==k.pJson.id)[0].username??0;v.pause(),(oe=E.current)==null||oe.dialog((qe,dn)=>{var pe;return{innerHTML:`<h3> ${ze} WON! </h3> <p> ${ze} won with the balance of ${((pe=n.get(t.id))==null?void 0:pe.balance)??0} </p>`,buttons:[dn("PLAY ANOTHER GAME",()=>{qe(),document.location.reload()})]}},"winning")}else v.pause(),(xe=E.current)==null||xe.dialog((Oe,ze)=>{var qe;return{innerHTML:`<h3> YOU LOST! </h3> <p> you lost your money and lost the monopol with a wanted balance of ${-(((qe=n.get(t.id))==null?void 0:qe.balance)??0)} </p>`,buttons:[ze("CONTINUE WATCHING",()=>{Oe()}),ze("PLAY ANOTHER GAME",()=>{Oe(),document.location.reload()})]}},"loosing");w(k.pJson.id)}if(o(k.turnId),k.turnId===t.id){const Oe=n.get(k.turnId);Oe&&Oe.isInJail&&((z=m.current)==null||z.showJailsButtons(((Oe==null?void 0:Oe.getoutCards)??-1)>0))}(Qt=g.current)==null||Qt.reRenderPlayerList()},Te=k=>{var N;(N=g.current)==null||N.addMessage(k)},Pe=k=>{var oe;var N=new Audio("./rolling.mp3");N.volume=((_==null?void 0:_.audio[1])??100)/100*(((_==null?void 0:_.audio[0])??100)/100),N.loop=!1,N.play();const U=n.get(t.id),j=n.get(k.turnId),H=A(k.listOfNums[2],j,!0,()=>{k.turnId!=t.id&&k.listOfNums[2]===30&&setTimeout(()=>{A(10,j,!1,()=>{j.position=10,j.isInJail=!0;var z=new Audio("./jail.mp3");z.volume=.5*(((_==null?void 0:_.audio[1])??100)/100)*(((_==null?void 0:_.audio[0])??100)/100),z.loop=!1,z.play(),j.jailTurnsRemaining=3}).func()},800)});(oe=m.current)==null||oe.diceResults({l:[k.listOfNums[0],k.listOfNums[1]],time:U.isInJail?2e3:H.time+2e3+800,onDone:()=>{var Qt,Oe;if(t.id!==k.turnId)return;const xe=((Qt=n.get(t.id))==null?void 0:Qt.position)??-1,z=T.get(xe);z!=null&&(z.id==="communitychest"||z.id==="chance"?t.emit("chorch_roll",z.id==="chance"):(Oe=m.current)==null||Oe.setStreet({location:xe,rolls:k.listOfNums[1]+k.listOfNums[0],onResponse:(ze,qe)=>{var pt,kn,hn,fn,Se,pn,Yt,ti,vg,_g,Eg,Tg,Sg,wg,Cg,Pg,Rg;var dn=0;if(ze==="buy"){_!==void 0&&_.notifications===!0&&((pt=E.current)==null||pt.message(`${((z==null?void 0:z.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1)),U.balance-=((z==null?void 0:z.price)??0)*1,(kn=m.current)==null||kn.applyAnimation(1),U.properties.push({posistion:U.position,count:0,group:((hn=T.get(U.position))==null?void 0:hn.group)??""});var pe=new Audio("./buying1.mp3");pe.volume=.5*(((_==null?void 0:_.audio[1])??100)/100)*(((_==null?void 0:_.audio[0])??100)/100),pe.loop=!1,pe.play()}else if(ze==="advance-buy"){var pe=new Audio("./buying1.mp3");pe.volume=.5*(((_==null?void 0:_.audio[1])??100)/100)*(((_==null?void 0:_.audio[0])??100)/100),pe.loop=!1,pe.play();const In=Array.from(new Map(U.properties.map((rd,Ks)=>[Ks,rd])).entries()).filter(rd=>rd[1].posistion===xe)[0][0],bt=qe;U.properties[In].count=bt.state===5?"h":bt.state,bt.state===5?(_!==void 0&&_.notifications===!0&&((fn=E.current)==null||fn.message(`${z.ohousecost??0} of money is deducted from the account`,"info",2,()=>{},!1)),U.balance-=z.ohousecost??0,(Se=m.current)==null||Se.applyAnimation(1)):(_!==void 0&&_.notifications===!0&&((pn=E.current)==null||pn.message(`${z.housecost??0} of money is deducted from the account`,"info",2,()=>{},!1)),U.balance-=(z.housecost??0)*bt.money,(Yt=m.current)==null||Yt.applyAnimation(1))}else if(ze==="someones"){const Li=Array.from(n.values());for(const In of Li)for(const bt of In.properties)if(bt.posistion===xe){var Ne=0;if(z.group==="Utilities"&&bt.rent){const Ks=In.properties.filter(kg=>kg.group==="Utilities").length===2?10:4;Ne=bt.rent*Ks}else if(z.group==="Railroad"){const Ks=In.properties.filter(VC=>VC.group==="Railroad").length;Ne=[25,50,100,200][Ks]}else bt.count===0?Ne=(z==null?void 0:z.rent)??0:typeof bt.count=="number"&&bt.count>0?Ne=((z==null?void 0:z.multpliedrent)??[0,0,0,0])[bt.count-1]??0:bt.count==="h"&&(Ne=((z==null?void 0:z.multpliedrent)??[0,0,0,0,0])[4]??0);_!==void 0&&_.notifications===!0&&((ti=E.current)==null||ti.message(`${Ne} of money is deducted from the account`,"info",2,()=>{},!1));var pe=new Audio("./moneyminus.mp3");pe.volume=((_==null?void 0:_.audio[1])??100)/100*(((_==null?void 0:_.audio[0])??100)/100),pe.loop=!1,pe.play(),U.balance-=Ne,(vg=m.current)==null||vg.applyAnimation(1),t.emit("pay",{balance:Ne,from:t.id,to:In.id}),(_g=m.current)==null||_g.applyAnimation(1)}}else if(ze==="nothing"){if(((z==null?void 0:z.id)??"")=="gotojail"){const Li=A(10,j,!1,()=>{j.position=10,j.isInJail=!0,j.jailTurnsRemaining=3});dn=Li.time,Li.func()}if((z==null?void 0:z.id)==="incometax"){U.balance-=200,_!==void 0&&_.notifications===!0&&((Eg=E.current)==null||Eg.message("200 of money is deducted from the account","info",2,()=>{},!1));var pe=new Audio("./moneyminus.mp3");pe.volume=((_==null?void 0:_.audio[1])??100)/100*(((_==null?void 0:_.audio[0])??100)/100),pe.loop=!1,pe.play(),(Tg=m.current)==null||Tg.applyAnimation(1)}if((z==null?void 0:z.id)==="luxerytax"){U.balance-=100,_!==void 0&&_.notifications===!0&&((Sg=E.current)==null||Sg.message("100 of money is deducted from the account","info",2,()=>{},!1));var pe=new Audio("./moneyminus.mp3");pe.volume=((_==null?void 0:_.audio[1])??100)/100*(((_==null?void 0:_.audio[0])??100)/100),pe.loop=!1,pe.play(),(wg=m.current)==null||wg.applyAnimation(1)}}else if(ze==="special_action"){_!==void 0&&_.notifications===!0&&((Cg=E.current)==null||Cg.message(`${((z==null?void 0:z.price)??0)*1} of money is deducted from the account`,"info",2,()=>{},!1));var pe=new Audio("./buying1.mp3");pe.volume=.5*(((_==null?void 0:_.audio[1])??100)/100)*(((_==null?void 0:_.audio[0])??100)/100),pe.loop=!1,pe.play(),U.balance-=((z==null?void 0:z.price)??0)*1,(Pg=m.current)==null||Pg.applyAnimation(1);const bt=qe.rolls;U.properties.push({posistion:U.position,count:0,rent:bt,group:((Rg=T.get(U.position))==null?void 0:Rg.group)??""})}setTimeout(()=>{var In;r(new Map(n.set(t.id,U))),(In=m.current)==null||In.freeDice();const Li=n.get(t.id).toJson();t.emit("finish-turn",Li)},dn)}}))}}),j.isInJail?setTimeout(()=>{k.listOfNums[0]==k.listOfNums[1]?(j.isInJail=!1,setTimeout(()=>{H.func()},2e3)):j.jailTurnsRemaining>0&&(j.jailTurnsRemaining-=1,j.jailTurnsRemaining===0&&(j.isInJail=!1)),r(new Map(n.set(k.turnId,j)))},1500):setTimeout(()=>{H.func()},2e3)},b=k=>{var j;const N=n.get(k.to);if(N){if(k.option==="card")N.getoutCards-=1;else{N.balance-=50,N.id===t.id&&_!==void 0&&_.notifications===!0&&((j=E.current)==null||j.message("50 of money is deducted from the account","info",2,()=>{},!1));var U=new Audio("./moneyminus.mp3");U.volume=((_==null?void 0:_.audio[1])??100)/100*(((_==null?void 0:_.audio[0])??100)/100),U.loop=!1,U.play()}N.isInJail=!1,N.jailTurnsRemaining=0,r(new Map(n.set(k.to,N)))}},L=k=>{var N;for(const U of k.pJson){const j=n.get(U.id);j==null||j.recieveJson(U)}t.id===k.playerId&&((N=m.current)==null||N.applyAnimation(2))},F=k=>{var U;(U=m.current)==null||U.chorch(k.element,k.is_chance,3e3),setTimeout(()=>{var Oe,ze,qe,dn,pe,Ne;const j=k.element,H=n.get(k.turnId);if(H===void 0)return;function oe(pt){var fn;if(H===void 0)return 0;const kn=Array.from(n.values()).filter(Se=>Se.id!==H.id);for(const Se of kn){if(Se.balance+=pt,Se.id===t.id&&_!==void 0&&_.notifications===!0){(fn=E.current)==null||fn.message(`${pt} of money is added to the account`,"info",2,()=>{},!1);var hn=new Audio("./moneyplus.mp3");hn.volume=((_==null?void 0:_.audio[1])??100)/100*(((_==null?void 0:_.audio[0])??100)/100),hn.loop=!1,hn.play()}r(new Map(n.set(Se.id,Se))),H.id===t.id&&(pt>0?t.emit("pay",{balance:pt,from:t.id,to:H.id}):t.emit("pay",{balance:pt,from:H.id,to:t.id}))}return kn.length}var xe=0;switch(j.action){case"move":if(j.tileid){const pn=(Oe=new Map(rr.properties.map(ti=>[ti.id,ti])).get(j.tileid))==null?void 0:Oe.posistion;if(pn===void 0)break;const Yt=A(pn,H);xe=Yt.time,Yt.func()}else if(j.count){const Se=A((H.position+j.count)%40,H,!0,()=>{},j.count>=0);xe=Se.time,Se.func()}break;case"addfunds":if(H.balance+=j.amount??0,H.id===t.id){_!==void 0&&_.notifications===!0&&((ze=E.current)==null||ze.message(`${j.amount??0} of money is added to the account`,"info",2,()=>{},!1));var z=new Audio("./moneyplus.mp3");z.volume=((_==null?void 0:_.audio[1])??100)/100*(((_==null?void 0:_.audio[0])??100)/100),z.loop=!1,z.play(),(qe=m.current)==null||qe.applyAnimation(2)}break;case"jail":if(j.subaction!==void 0){switch(j.subaction){case"getout":H.getoutCards+=1;break;case"goto":const Se=A(10,H,!1,()=>{H.position=10,H.isInJail=!0;var pn=new Audio("./jail.mp3");pn.volume=.5*(((_==null?void 0:_.audio[1])??100)/100)*(((_==null?void 0:_.audio[0])??100)/100),pn.loop=!1,pn.play(),H.jailTurnsRemaining=3});xe=Se.time,Se.func();break}r(new Map(n.set(H.id,H)))}break;case"removefunds":if(H.balance-=j.amount??0,H.id===t.id){(dn=m.current)==null||dn.applyAnimation(1),_!==void 0&&_.notifications===!0&&((pe=E.current)==null||pe.message(`${j.amount??0} of money is deducted from the account`,"info",2,()=>{},!1));var z=new Audio("./moneyminus.mp3");z.volume=((_==null?void 0:_.audio[1])??100)/100*(((_==null?void 0:_.audio[0])??100)/100),z.loop=!1,z.play()}break;case"removefundstoplayers":oe(j.amount??0),H.id===t.id&&((Ne=m.current)==null||Ne.applyAnimation(1));break;case"addfundsfromplayers":oe(-(j.amount??0));break;case"movenearest":let pt=function(Se,pn){Se.sort((Yt,ti)=>Yt-ti);for(let Yt=0;Yt<Se.length;Yt++)if(Se[Yt]>pn)return Se[Yt];return Se[0]};if(!j.groupid)return;var Qt="";j.groupid==="utility"?Qt="Utilities":Qt="Railroad";const kn=rr.properties.filter(Se=>Se.group===Qt).map(Se=>Se.posistion),hn=pt(kn,H.position),fn=A(hn,H);xe=fn.time,fn.func();break}setTimeout(()=>{var pt;r(new Map(n.set(H.id,H))),H.id===t.id&&((pt=m.current)==null||pt.freeDice(),t.emit("finish-turn",n.get(t.id).toJson()))},xe)},3e3)};function te(k){const N=n.get(k.id);N!==void 0&&(N.positions={x:k.x,y:k.y},n.set(k.id,N))}function ie(){var k;v.pause(),(k=E.current)==null||k.dialog((N,U)=>({innerHTML:"<h3> LOST CONNECTION </h3> <p> you were disconnected from the game </p>",buttons:[U("PLAY ANOTHER GAME",()=>{N(),document.location.reload()})]}),"loosing")}document.addEventListener("mousemove",I),t.on("initials",S),t.on("new-player",Q),t.on("ready",re),t.on("start-game",ye),t.on("disconnected-player",ce),t.on("turn-finished",K),t.on("message",Te),t.on("dice_roll_result",Pe),t.on("unjail",b),t.on("member_updating",L),t.on("chorch_result",F),t.on("mouse",te),t.on("disconnect",ie);var se=!0;return se&&t.emit("name",e),()=>{se=!1,clearInterval(R),document.removeEventListener("mousemove",I)}},[t]),M.useEffect(()=>{var _;(_=g.current)==null||_.reRenderPlayerList()},[n]),l?h.jsxs(h.Fragment,{children:[p!==void 0&&p.accessibility[3]?h.jsx("div",{className:"cursors",children:Array.from(n.values()).filter(_=>_.id!==t.id).map((_,R)=>h.jsx("img",{src:"./cursor.png",style:{translate:`${_.positions.x}px ${_.positions.y}px`},className:"cursor"},R))}):h.jsx(h.Fragment,{}),h.jsxs("main",{children:[h.jsx(bk,{currentTurn:s,ref:g,name:e,socket:t,players:i}),h.jsx(Nk,{clickedOnBoard:_=>{var R;(R=g.current)==null||R.clickedOnBoard(_)},ref:m,socket:t,players:Array.from(n.values()),myTurn:s===t.id})]}),h.jsx(u1,{ref:E})]}):h.jsxs("div",{className:"lobby",children:[h.jsxs("h3",{children:["Hello there ",e]}),"the players that are currently in the lobby are",h.jsx("div",{children:Array.from(n.values()).map((_,R)=>h.jsx("p",{style:_.ready?{backgroundColor:"#32a852"}:{},className:"lobby-players",children:_.username},R))}),h.jsx("br",{}),"choose the game mode that you desire",h.jsx("div",{className:"modes",children:["Monopoly","Ronopoly"].map((_,R)=>h.jsx("p",{"data-select":R===d,onClick:()=>{t.emit("ready",{mode:R})},children:_},R))}),h.jsx("center",{children:h.jsx("button",{onClick:()=>{t.emit("ready",{ready:!c}),u(!c)},children:c?"Not Ready":"Ready"})})]})}const Bn=Object.create(null);Bn.open="0";Bn.close="1";Bn.ping="2";Bn.pong="3";Bn.message="4";Bn.upgrade="5";Bn.noop="6";const zl=Object.create(null);Object.keys(Bn).forEach(t=>{zl[Bn[t]]=t});const Mk={type:"error",data:"parser error"},d1=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",h1=typeof ArrayBuffer=="function",f1=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t&&t.buffer instanceof ArrayBuffer,Kp=({type:t,data:e},n,r)=>d1&&e instanceof Blob?n?r(e):$y(e,r):h1&&(e instanceof ArrayBuffer||f1(e))?n?r(e):$y(new Blob([e]),r):r(Bn[t]+(e||"")),$y=(t,e)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];e("b"+(r||""))},n.readAsDataURL(t)};function By(t){return t instanceof Uint8Array?t:t instanceof ArrayBuffer?new Uint8Array(t):new Uint8Array(t.buffer,t.byteOffset,t.byteLength)}let bd;function Lk(t,e){if(d1&&t.data instanceof Blob)return t.data.arrayBuffer().then(By).then(e);if(h1&&(t.data instanceof ArrayBuffer||f1(t.data)))return e(By(t.data));Kp(t,!1,n=>{bd||(bd=new TextEncoder),e(bd.encode(n))})}const zy="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",fo=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let t=0;t<zy.length;t++)fo[zy.charCodeAt(t)]=t;const jk=t=>{let e=t.length*.75,n=t.length,r,i=0,s,o,l,a;t[t.length-1]==="="&&(e--,t[t.length-2]==="="&&e--);const c=new ArrayBuffer(e),u=new Uint8Array(c);for(r=0;r<n;r+=4)s=fo[t.charCodeAt(r)],o=fo[t.charCodeAt(r+1)],l=fo[t.charCodeAt(r+2)],a=fo[t.charCodeAt(r+3)],u[i++]=s<<2|o>>4,u[i++]=(o&15)<<4|l>>2,u[i++]=(l&3)<<6|a&63;return c},Vk=typeof ArrayBuffer=="function",Gp=(t,e)=>{if(typeof t!="string")return{type:"message",data:p1(t,e)};const n=t.charAt(0);return n==="b"?{type:"message",data:Fk(t.substring(1),e)}:zl[n]?t.length>1?{type:zl[n],data:t.substring(1)}:{type:zl[n]}:Mk},Fk=(t,e)=>{if(Vk){const n=jk(t);return p1(n,e)}else return{base64:!0,data:t}},p1=(t,e)=>{switch(e){case"blob":return t instanceof Blob?t:new Blob([t]);case"arraybuffer":default:return t instanceof ArrayBuffer?t:t.buffer}},m1=String.fromCharCode(30),Uk=(t,e)=>{const n=t.length,r=new Array(n);let i=0;t.forEach((s,o)=>{Kp(s,!1,l=>{r[o]=l,++i===n&&e(r.join(m1))})})},$k=(t,e)=>{const n=t.split(m1),r=[];for(let i=0;i<n.length;i++){const s=Gp(n[i],e);if(r.push(s),s.type==="error")break}return r};let xd;function Bk(t,e,n){xd||(xd=new TextDecoder);const r=e||t[0]<48||t[0]>54;return Gp(r?t:xd.decode(t),n)}const g1=4;function Ge(t){if(t)return zk(t)}function zk(t){for(var e in Ge.prototype)t[e]=Ge.prototype[e];return t}Ge.prototype.on=Ge.prototype.addEventListener=function(t,e){return this._callbacks=this._callbacks||{},(this._callbacks["$"+t]=this._callbacks["$"+t]||[]).push(e),this};Ge.prototype.once=function(t,e){function n(){this.off(t,n),e.apply(this,arguments)}return n.fn=e,this.on(t,n),this};Ge.prototype.off=Ge.prototype.removeListener=Ge.prototype.removeAllListeners=Ge.prototype.removeEventListener=function(t,e){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+t];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+t],this;for(var r,i=0;i<n.length;i++)if(r=n[i],r===e||r.fn===e){n.splice(i,1);break}return n.length===0&&delete this._callbacks["$"+t],this};Ge.prototype.emit=function(t){this._callbacks=this._callbacks||{};for(var e=new Array(arguments.length-1),n=this._callbacks["$"+t],r=1;r<arguments.length;r++)e[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,i=n.length;r<i;++r)n[r].apply(this,e)}return this};Ge.prototype.emitReserved=Ge.prototype.emit;Ge.prototype.listeners=function(t){return this._callbacks=this._callbacks||{},this._callbacks["$"+t]||[]};Ge.prototype.hasListeners=function(t){return!!this.listeners(t).length};const en=(()=>typeof self<"u"?self:typeof window<"u"?window:Function("return this")())();function y1(t,...e){return e.reduce((n,r)=>(t.hasOwnProperty(r)&&(n[r]=t[r]),n),{})}const qk=en.setTimeout,Hk=en.clearTimeout;function Tu(t,e){e.useNativeTimers?(t.setTimeoutFn=qk.bind(en),t.clearTimeoutFn=Hk.bind(en)):(t.setTimeoutFn=en.setTimeout.bind(en),t.clearTimeoutFn=en.clearTimeout.bind(en))}const Wk=1.33;function Kk(t){return typeof t=="string"?Gk(t):Math.ceil((t.byteLength||t.size)*Wk)}function Gk(t){let e=0,n=0;for(let r=0,i=t.length;r<i;r++)e=t.charCodeAt(r),e<128?n+=1:e<2048?n+=2:e<55296||e>=57344?n+=3:(r++,n+=4);return n}function Jk(t){let e="";for(let n in t)t.hasOwnProperty(n)&&(e.length&&(e+="&"),e+=encodeURIComponent(n)+"="+encodeURIComponent(t[n]));return e}function Qk(t){let e={},n=t.split("&");for(let r=0,i=n.length;r<i;r++){let s=n[r].split("=");e[decodeURIComponent(s[0])]=decodeURIComponent(s[1])}return e}class Yk extends Error{constructor(e,n,r){super(e),this.description=n,this.context=r,this.type="TransportError"}}class Jp extends Ge{constructor(e){super(),this.writable=!1,Tu(this,e),this.opts=e,this.query=e.query,this.socket=e.socket}onError(e,n,r){return super.emitReserved("error",new Yk(e,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(e){this.readyState==="open"&&this.write(e)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(e){const n=Gp(e,this.socket.binaryType);this.onPacket(n)}onPacket(e){super.emitReserved("packet",e)}onClose(e){this.readyState="closed",super.emitReserved("close",e)}pause(e){}createUri(e,n={}){return e+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const e=this.opts.hostname;return e.indexOf(":")===-1?e:"["+e+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(e){const n=Jk(e);return n.length?"?"+n:""}}const v1="0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz-_".split(""),Zh=64,Xk={};let qy=0,gl=0,Hy;function Wy(t){let e="";do e=v1[t%Zh]+e,t=Math.floor(t/Zh);while(t>0);return e}function _1(){const t=Wy(+new Date);return t!==Hy?(qy=0,Hy=t):t+"."+Wy(qy++)}for(;gl<Zh;gl++)Xk[v1[gl]]=gl;let E1=!1;try{E1=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const Zk=E1;function T1(t){const e=t.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!e||Zk))return new XMLHttpRequest}catch{}if(!e)try{return new en[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}function eI(){}const tI=function(){return new T1({xdomain:!1}).responseType!=null}();class nI extends Jp{constructor(e){if(super(e),this.polling=!1,typeof location<"u"){const r=location.protocol==="https:";let i=location.port;i||(i=r?"443":"80"),this.xd=typeof location<"u"&&e.hostname!==location.hostname||i!==e.port}const n=e&&e.forceBase64;this.supportsBinary=tI&&!n,this.opts.withCredentials&&(this.cookieJar=void 0)}get name(){return"polling"}doOpen(){this.poll()}pause(e){this.readyState="pausing";const n=()=>{this.readyState="paused",e()};if(this.polling||!this.writable){let r=0;this.polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}poll(){this.polling=!0,this.doPoll(),this.emitReserved("poll")}onData(e){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};$k(e,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this.polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this.poll())}doClose(){const e=()=>{this.write([{type:"close"}])};this.readyState==="open"?e():this.once("open",e)}write(e){this.writable=!1,Uk(e,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const e=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=_1()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(e,n)}request(e={}){return Object.assign(e,{xd:this.xd,cookieJar:this.cookieJar},this.opts),new cs(this.uri(),e)}doWrite(e,n){const r=this.request({method:"POST",data:e});r.on("success",n),r.on("error",(i,s)=>{this.onError("xhr post error",i,s)})}doPoll(){const e=this.request();e.on("data",this.onData.bind(this)),e.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=e}}let cs=class ql extends Ge{constructor(e,n){super(),Tu(this,n),this.opts=n,this.method=n.method||"GET",this.uri=e,this.data=n.data!==void 0?n.data:null,this.create()}create(){var e;const n=y1(this.opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this.opts.xd;const r=this.xhr=new T1(n);try{r.open(this.method,this.uri,!0);try{if(this.opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let i in this.opts.extraHeaders)this.opts.extraHeaders.hasOwnProperty(i)&&r.setRequestHeader(i,this.opts.extraHeaders[i])}}catch{}if(this.method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(e=this.opts.cookieJar)===null||e===void 0||e.addCookies(r),"withCredentials"in r&&(r.withCredentials=this.opts.withCredentials),this.opts.requestTimeout&&(r.timeout=this.opts.requestTimeout),r.onreadystatechange=()=>{var i;r.readyState===3&&((i=this.opts.cookieJar)===null||i===void 0||i.parseCookies(r)),r.readyState===4&&(r.status===200||r.status===1223?this.onLoad():this.setTimeoutFn(()=>{this.onError(typeof r.status=="number"?r.status:0)},0))},r.send(this.data)}catch(i){this.setTimeoutFn(()=>{this.onError(i)},0);return}typeof document<"u"&&(this.index=ql.requestsCount++,ql.requests[this.index]=this)}onError(e){this.emitReserved("error",e,this.xhr),this.cleanup(!0)}cleanup(e){if(!(typeof this.xhr>"u"||this.xhr===null)){if(this.xhr.onreadystatechange=eI,e)try{this.xhr.abort()}catch{}typeof document<"u"&&delete ql.requests[this.index],this.xhr=null}}onLoad(){const e=this.xhr.responseText;e!==null&&(this.emitReserved("data",e),this.emitReserved("success"),this.cleanup())}abort(){this.cleanup()}};cs.requestsCount=0;cs.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Ky);else if(typeof addEventListener=="function"){const t="onpagehide"in en?"pagehide":"unload";addEventListener(t,Ky,!1)}}function Ky(){for(let t in cs.requests)cs.requests.hasOwnProperty(t)&&cs.requests[t].abort()}const Qp=(()=>typeof Promise=="function"&&typeof Promise.resolve=="function"?e=>Promise.resolve().then(e):(e,n)=>n(e,0))(),yl=en.WebSocket||en.MozWebSocket,Gy=!0,rI="arraybuffer",Jy=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class iI extends Jp{constructor(e){super(e),this.supportsBinary=!e.forceBase64}get name(){return"websocket"}doOpen(){if(!this.check())return;const e=this.uri(),n=this.opts.protocols,r=Jy?{}:y1(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=Gy&&!Jy?n?new yl(e,n):new yl(e):new yl(e,n,r)}catch(i){return this.emitReserved("error",i)}this.ws.binaryType=this.socket.binaryType||rI,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=e=>this.onClose({description:"websocket connection closed",context:e}),this.ws.onmessage=e=>this.onData(e.data),this.ws.onerror=e=>this.onError("websocket error",e)}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Kp(r,this.supportsBinary,s=>{const o={};try{Gy&&this.ws.send(s)}catch{}i&&Qp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.close(),this.ws=null)}uri(){const e=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=_1()),this.supportsBinary||(n.b64=1),this.createUri(e,n)}check(){return!!yl}}function sI(t,e){return t.type==="message"&&typeof t.data!="string"&&e[0]>=48&&e[0]<=54}class oI extends Jp{get name(){return"webtransport"}doOpen(){typeof WebTransport=="function"&&(this.transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name]),this.transport.closed.then(()=>{this.onClose()}).catch(e=>{this.onError("webtransport error",e)}),this.transport.ready.then(()=>{this.transport.createBidirectionalStream().then(e=>{const n=e.readable.getReader();this.writer=e.writable.getWriter();let r;const i=()=>{n.read().then(({done:o,value:l})=>{o||(!r&&l.byteLength===1&&l[0]===54?r=!0:(this.onPacket(Bk(l,r,"arraybuffer")),r=!1),i())}).catch(o=>{})};i();const s=this.query.sid?`0{"sid":"${this.query.sid}"}`:"0";this.writer.write(new TextEncoder().encode(s)).then(()=>this.onOpen())})}))}write(e){this.writable=!1;for(let n=0;n<e.length;n++){const r=e[n],i=n===e.length-1;Lk(r,s=>{sI(r,s)&&this.writer.write(Uint8Array.of(54)),this.writer.write(s).then(()=>{i&&Qp(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})})}}doClose(){var e;(e=this.transport)===null||e===void 0||e.close()}}const aI={websocket:iI,webtransport:oI,polling:nI},lI=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,cI=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function ef(t){const e=t,n=t.indexOf("["),r=t.indexOf("]");n!=-1&&r!=-1&&(t=t.substring(0,n)+t.substring(n,r).replace(/:/g,";")+t.substring(r,t.length));let i=lI.exec(t||""),s={},o=14;for(;o--;)s[cI[o]]=i[o]||"";return n!=-1&&r!=-1&&(s.source=e,s.host=s.host.substring(1,s.host.length-1).replace(/;/g,":"),s.authority=s.authority.replace("[","").replace("]","").replace(/;/g,":"),s.ipv6uri=!0),s.pathNames=uI(s,s.path),s.queryKey=dI(s,s.query),s}function uI(t,e){const n=/\/{2,9}/g,r=e.replace(n,"/").split("/");return(e.slice(0,1)=="/"||e.length===0)&&r.splice(0,1),e.slice(-1)=="/"&&r.splice(r.length-1,1),r}function dI(t,e){const n={};return e.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,i,s){i&&(n[i]=s)}),n}let S1=class Fi extends Ge{constructor(e,n={}){super(),this.writeBuffer=[],e&&typeof e=="object"&&(n=e,e=null),e?(e=ef(e),n.hostname=e.host,n.secure=e.protocol==="https"||e.protocol==="wss",n.port=e.port,e.query&&(n.query=e.query)):n.host&&(n.hostname=ef(n.host).host),Tu(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=n.transports||["polling","websocket","webtransport"],this.writeBuffer=[],this.prevBufferLen=0,this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=Qk(this.opts.query)),this.id=null,this.upgrades=null,this.pingInterval=null,this.pingTimeout=null,this.pingTimeoutTimer=null,typeof addEventListener=="function"&&(this.opts.closeOnBeforeunload&&(this.beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this.beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this.offlineEventListener=()=>{this.onClose("transport close",{description:"network connection lost"})},addEventListener("offline",this.offlineEventListener,!1))),this.open()}createTransport(e){const n=Object.assign({},this.opts.query);n.EIO=g1,n.transport=e,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[e]);return new aI[e](r)}open(){let e;if(this.opts.rememberUpgrade&&Fi.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1)e="websocket";else if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}else e=this.transports[0];this.readyState="opening";try{e=this.createTransport(e)}catch{this.transports.shift(),this.open();return}e.open(),this.setTransport(e)}setTransport(e){this.transport&&this.transport.removeAllListeners(),this.transport=e,e.on("drain",this.onDrain.bind(this)).on("packet",this.onPacket.bind(this)).on("error",this.onError.bind(this)).on("close",n=>this.onClose("transport close",n))}probe(e){let n=this.createTransport(e),r=!1;Fi.priorWebsocketSuccess=!1;const i=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",d=>{if(!r)if(d.type==="pong"&&d.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Fi.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(u(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const f=new Error("probe error");f.transport=n.name,this.emitReserved("upgradeError",f)}}))};function s(){r||(r=!0,u(),n.close(),n=null)}const o=d=>{const f=new Error("probe error: "+d);f.transport=n.name,s(),this.emitReserved("upgradeError",f)};function l(){o("transport closed")}function a(){o("socket closed")}function c(d){n&&d.name!==n.name&&s()}const u=()=>{n.removeListener("open",i),n.removeListener("error",o),n.removeListener("close",l),this.off("close",a),this.off("upgrading",c)};n.once("open",i),n.once("error",o),n.once("close",l),this.once("close",a),this.once("upgrading",c),this.upgrades.indexOf("webtransport")!==-1&&e!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onOpen(){if(this.readyState="open",Fi.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush(),this.readyState==="open"&&this.opts.upgrade){let e=0;const n=this.upgrades.length;for(;e<n;e++)this.probe(this.upgrades[e])}}onPacket(e){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",e),this.emitReserved("heartbeat"),e.type){case"open":this.onHandshake(JSON.parse(e.data));break;case"ping":this.resetPingTimeout(),this.sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong");break;case"error":const n=new Error("server error");n.code=e.data,this.onError(n);break;case"message":this.emitReserved("data",e.data),this.emitReserved("message",e.data);break}}onHandshake(e){this.emitReserved("handshake",e),this.id=e.sid,this.transport.query.sid=e.sid,this.upgrades=this.filterUpgrades(e.upgrades),this.pingInterval=e.pingInterval,this.pingTimeout=e.pingTimeout,this.maxPayload=e.maxPayload,this.onOpen(),this.readyState!=="closed"&&this.resetPingTimeout()}resetPingTimeout(){this.clearTimeoutFn(this.pingTimeoutTimer),this.pingTimeoutTimer=this.setTimeoutFn(()=>{this.onClose("ping timeout")},this.pingInterval+this.pingTimeout),this.opts.autoUnref&&this.pingTimeoutTimer.unref()}onDrain(){this.writeBuffer.splice(0,this.prevBufferLen),this.prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const e=this.getWritablePackets();this.transport.send(e),this.prevBufferLen=e.length,this.emitReserved("flush")}}getWritablePackets(){if(!(this.maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const i=this.writeBuffer[r].data;if(i&&(n+=Kk(i)),r>0&&n>this.maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}write(e,n,r){return this.sendPacket("message",e,n,r),this}send(e,n,r){return this.sendPacket("message",e,n,r),this}sendPacket(e,n,r,i){if(typeof n=="function"&&(i=n,n=void 0),typeof r=="function"&&(i=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const s={type:e,data:n,options:r};this.emitReserved("packetCreate",s),this.writeBuffer.push(s),i&&this.once("flush",i),this.flush()}close(){const e=()=>{this.onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),e()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():e()}):this.upgrading?r():e()),this}onError(e){Fi.priorWebsocketSuccess=!1,this.emitReserved("error",e),this.onClose("transport error",e)}onClose(e,n){(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")&&(this.clearTimeoutFn(this.pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),typeof removeEventListener=="function"&&(removeEventListener("beforeunload",this.beforeunloadEventListener,!1),removeEventListener("offline",this.offlineEventListener,!1)),this.readyState="closed",this.id=null,this.emitReserved("close",e,n),this.writeBuffer=[],this.prevBufferLen=0)}filterUpgrades(e){const n=[];let r=0;const i=e.length;for(;r<i;r++)~this.transports.indexOf(e[r])&&n.push(e[r]);return n}};S1.protocol=g1;function hI(t,e="",n){let r=t;n=n||typeof location<"u"&&location,t==null&&(t=n.protocol+"//"+n.host),typeof t=="string"&&(t.charAt(0)==="/"&&(t.charAt(1)==="/"?t=n.protocol+t:t=n.host+t),/^(https?|wss?):\/\//.test(t)||(typeof n<"u"?t=n.protocol+"//"+t:t="https://"+t),r=ef(t)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const s=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+s+":"+r.port+e,r.href=r.protocol+"://"+s+(n&&n.port===r.port?"":":"+r.port),r}const fI=typeof ArrayBuffer=="function",pI=t=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(t):t.buffer instanceof ArrayBuffer,w1=Object.prototype.toString,mI=typeof Blob=="function"||typeof Blob<"u"&&w1.call(Blob)==="[object BlobConstructor]",gI=typeof File=="function"||typeof File<"u"&&w1.call(File)==="[object FileConstructor]";function Yp(t){return fI&&(t instanceof ArrayBuffer||pI(t))||mI&&t instanceof Blob||gI&&t instanceof File}function Hl(t,e){if(!t||typeof t!="object")return!1;if(Array.isArray(t)){for(let n=0,r=t.length;n<r;n++)if(Hl(t[n]))return!0;return!1}if(Yp(t))return!0;if(t.toJSON&&typeof t.toJSON=="function"&&arguments.length===1)return Hl(t.toJSON(),!0);for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)&&Hl(t[n]))return!0;return!1}function yI(t){const e=[],n=t.data,r=t;return r.data=tf(n,e),r.attachments=e.length,{packet:r,buffers:e}}function tf(t,e){if(!t)return t;if(Yp(t)){const n={_placeholder:!0,num:e.length};return e.push(t),n}else if(Array.isArray(t)){const n=new Array(t.length);for(let r=0;r<t.length;r++)n[r]=tf(t[r],e);return n}else if(typeof t=="object"&&!(t instanceof Date)){const n={};for(const r in t)Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=tf(t[r],e));return n}return t}function vI(t,e){return t.data=nf(t.data,e),delete t.attachments,t}function nf(t,e){if(!t)return t;if(t&&t._placeholder===!0){if(typeof t.num=="number"&&t.num>=0&&t.num<e.length)return e[t.num];throw new Error("illegal attachments")}else if(Array.isArray(t))for(let n=0;n<t.length;n++)t[n]=nf(t[n],e);else if(typeof t=="object")for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&(t[n]=nf(t[n],e));return t}const _I=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],EI=5;var ue;(function(t){t[t.CONNECT=0]="CONNECT",t[t.DISCONNECT=1]="DISCONNECT",t[t.EVENT=2]="EVENT",t[t.ACK=3]="ACK",t[t.CONNECT_ERROR=4]="CONNECT_ERROR",t[t.BINARY_EVENT=5]="BINARY_EVENT",t[t.BINARY_ACK=6]="BINARY_ACK"})(ue||(ue={}));class TI{constructor(e){this.replacer=e}encode(e){return(e.type===ue.EVENT||e.type===ue.ACK)&&Hl(e)?this.encodeAsBinary({type:e.type===ue.EVENT?ue.BINARY_EVENT:ue.BINARY_ACK,nsp:e.nsp,data:e.data,id:e.id}):[this.encodeAsString(e)]}encodeAsString(e){let n=""+e.type;return(e.type===ue.BINARY_EVENT||e.type===ue.BINARY_ACK)&&(n+=e.attachments+"-"),e.nsp&&e.nsp!=="/"&&(n+=e.nsp+","),e.id!=null&&(n+=e.id),e.data!=null&&(n+=JSON.stringify(e.data,this.replacer)),n}encodeAsBinary(e){const n=yI(e),r=this.encodeAsString(n.packet),i=n.buffers;return i.unshift(r),i}}function Qy(t){return Object.prototype.toString.call(t)==="[object Object]"}class Xp extends Ge{constructor(e){super(),this.reviver=e}add(e){let n;if(typeof e=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(e);const r=n.type===ue.BINARY_EVENT;r||n.type===ue.BINARY_ACK?(n.type=r?ue.EVENT:ue.ACK,this.reconstructor=new SI(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(Yp(e)||e.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(e),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+e)}decodeString(e){let n=0;const r={type:Number(e.charAt(0))};if(ue[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===ue.BINARY_EVENT||r.type===ue.BINARY_ACK){const s=n+1;for(;e.charAt(++n)!=="-"&&n!=e.length;);const o=e.substring(s,n);if(o!=Number(o)||e.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(o)}if(e.charAt(n+1)==="/"){const s=n+1;for(;++n&&!(e.charAt(n)===","||n===e.length););r.nsp=e.substring(s,n)}else r.nsp="/";const i=e.charAt(n+1);if(i!==""&&Number(i)==i){const s=n+1;for(;++n;){const o=e.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===e.length)break}r.id=Number(e.substring(s,n+1))}if(e.charAt(++n)){const s=this.tryParse(e.substr(n));if(Xp.isPayloadValid(r.type,s))r.data=s;else throw new Error("invalid payload")}return r}tryParse(e){try{return JSON.parse(e,this.reviver)}catch{return!1}}static isPayloadValid(e,n){switch(e){case ue.CONNECT:return Qy(n);case ue.DISCONNECT:return n===void 0;case ue.CONNECT_ERROR:return typeof n=="string"||Qy(n);case ue.EVENT:case ue.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&_I.indexOf(n[0])===-1);case ue.ACK:case ue.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class SI{constructor(e){this.packet=e,this.buffers=[],this.reconPack=e}takeBinaryData(e){if(this.buffers.push(e),this.buffers.length===this.reconPack.attachments){const n=vI(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const wI=Object.freeze(Object.defineProperty({__proto__:null,Decoder:Xp,Encoder:TI,get PacketType(){return ue},protocol:EI},Symbol.toStringTag,{value:"Module"}));function vn(t,e,n){return t.on(e,n),function(){t.off(e,n)}}const CI=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});let C1=class extends Ge{constructor(e,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=e,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const e=this.io;this.subs=[vn(e,"open",this.onopen.bind(this)),vn(e,"packet",this.onpacket.bind(this)),vn(e,"error",this.onerror.bind(this)),vn(e,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...e){return e.unshift("message"),this.emit.apply(this,e),this}emit(e,...n){if(CI.hasOwnProperty(e))throw new Error('"'+e.toString()+'" is a reserved event name');if(n.unshift(e),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const r={type:ue.EVENT,data:n};if(r.options={},r.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const o=this.ids++,l=n.pop();this._registerAckCallback(o,l),r.id=o}const i=this.io.engine&&this.io.engine.transport&&this.io.engine.transport.writable;return this.flags.volatile&&(!i||!this.connected)||(this.connected?(this.notifyOutgoingListeners(r),this.packet(r)):this.sendBuffer.push(r)),this.flags={},this}_registerAckCallback(e,n){var r;const i=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(i===void 0){this.acks[e]=n;return}const s=this.io.setTimeoutFn(()=>{delete this.acks[e];for(let o=0;o<this.sendBuffer.length;o++)this.sendBuffer[o].id===e&&this.sendBuffer.splice(o,1);n.call(this,new Error("operation has timed out"))},i);this.acks[e]=(...o)=>{this.io.clearTimeoutFn(s),n.apply(this,[null,...o])}}emitWithAck(e,...n){const r=this.flags.timeout!==void 0||this._opts.ackTimeout!==void 0;return new Promise((i,s)=>{n.push((o,l)=>r?o?s(o):i(l):i(o)),this.emit(e,...n)})}_addToQueue(e){let n;typeof e[e.length-1]=="function"&&(n=e.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:e,flags:Object.assign({fromQueue:!0},this.flags)};e.push((i,...s)=>r!==this._queue[0]?void 0:(i!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(i)):(this._queue.shift(),n&&n(null,...s)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(e=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!e||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(e){e.nsp=this.nsp,this.io._packet(e)}onopen(){typeof this.auth=="function"?this.auth(e=>{this._sendConnectPacket(e)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(e){this.packet({type:ue.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},e):e})}onerror(e){this.connected||this.emitReserved("connect_error",e)}onclose(e,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",e,n)}onpacket(e){if(e.nsp===this.nsp)switch(e.type){case ue.CONNECT:e.data&&e.data.sid?this.onconnect(e.data.sid,e.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case ue.EVENT:case ue.BINARY_EVENT:this.onevent(e);break;case ue.ACK:case ue.BINARY_ACK:this.onack(e);break;case ue.DISCONNECT:this.ondisconnect();break;case ue.CONNECT_ERROR:this.destroy();const r=new Error(e.data.message);r.data=e.data.data,this.emitReserved("connect_error",r);break}}onevent(e){const n=e.data||[];e.id!=null&&n.push(this.ack(e.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(e){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,e)}super.emit.apply(this,e),this._pid&&e.length&&typeof e[e.length-1]=="string"&&(this._lastOffset=e[e.length-1])}ack(e){const n=this;let r=!1;return function(...i){r||(r=!0,n.packet({type:ue.ACK,id:e,data:i}))}}onack(e){const n=this.acks[e.id];typeof n=="function"&&(n.apply(this,e.data),delete this.acks[e.id])}onconnect(e,n){this.id=e,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(e=>this.emitEvent(e)),this.receiveBuffer=[],this.sendBuffer.forEach(e=>{this.notifyOutgoingListeners(e),this.packet(e)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(e=>e()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:ue.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(e){return this.flags.compress=e,this}get volatile(){return this.flags.volatile=!0,this}timeout(e){return this.flags.timeout=e,this}onAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(e),this}prependAny(e){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(e),this}offAny(e){if(!this._anyListeners)return this;if(e){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(e),this}prependAnyOutgoing(e){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(e),this}offAnyOutgoing(e){if(!this._anyOutgoingListeners)return this;if(e){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(e===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(e){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,e.data)}}};function Ls(t){t=t||{},this.ms=t.min||100,this.max=t.max||1e4,this.factor=t.factor||2,this.jitter=t.jitter>0&&t.jitter<=1?t.jitter:0,this.attempts=0}Ls.prototype.duration=function(){var t=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var e=Math.random(),n=Math.floor(e*this.jitter*t);t=Math.floor(e*10)&1?t+n:t-n}return Math.min(t,this.max)|0};Ls.prototype.reset=function(){this.attempts=0};Ls.prototype.setMin=function(t){this.ms=t};Ls.prototype.setMax=function(t){this.max=t};Ls.prototype.setJitter=function(t){this.jitter=t};class rf extends Ge{constructor(e,n){var r;super(),this.nsps={},this.subs=[],e&&typeof e=="object"&&(n=e,e=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,Tu(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new Ls({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=e;const i=n.parser||wI;this.encoder=new i.Encoder,this.decoder=new i.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(e){return arguments.length?(this._reconnection=!!e,this):this._reconnection}reconnectionAttempts(e){return e===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=e,this)}reconnectionDelay(e){var n;return e===void 0?this._reconnectionDelay:(this._reconnectionDelay=e,(n=this.backoff)===null||n===void 0||n.setMin(e),this)}randomizationFactor(e){var n;return e===void 0?this._randomizationFactor:(this._randomizationFactor=e,(n=this.backoff)===null||n===void 0||n.setJitter(e),this)}reconnectionDelayMax(e){var n;return e===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=e,(n=this.backoff)===null||n===void 0||n.setMax(e),this)}timeout(e){return arguments.length?(this._timeout=e,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(e){if(~this._readyState.indexOf("open"))return this;this.engine=new S1(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const i=vn(n,"open",function(){r.onopen(),e&&e()}),s=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),e?e(l):this.maybeReconnectOnOpen()},o=vn(n,"error",s);if(this._timeout!==!1){const l=this._timeout,a=this.setTimeoutFn(()=>{i(),s(new Error("timeout")),n.close()},l);this.opts.autoUnref&&a.unref(),this.subs.push(()=>{this.clearTimeoutFn(a)})}return this.subs.push(i),this.subs.push(o),this}connect(e){return this.open(e)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const e=this.engine;this.subs.push(vn(e,"ping",this.onping.bind(this)),vn(e,"data",this.ondata.bind(this)),vn(e,"error",this.onerror.bind(this)),vn(e,"close",this.onclose.bind(this)),vn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(e){try{this.decoder.add(e)}catch(n){this.onclose("parse error",n)}}ondecoded(e){Qp(()=>{this.emitReserved("packet",e)},this.setTimeoutFn)}onerror(e){this.emitReserved("error",e)}socket(e,n){let r=this.nsps[e];return r?this._autoConnect&&!r.active&&r.connect():(r=new C1(this,e,n),this.nsps[e]=r),r}_destroy(e){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(e){const n=this.encoder.encode(e);for(let r=0;r<n.length;r++)this.engine.write(n[r],e.options)}cleanup(){this.subs.forEach(e=>e()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close"),this.engine&&this.engine.close()}disconnect(){return this._close()}onclose(e,n){this.cleanup(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",e,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const e=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{e.skipReconnect||(this.emitReserved("reconnect_attempt",e.backoff.attempts),!e.skipReconnect&&e.open(i=>{i?(e._reconnecting=!1,e.reconnect(),this.emitReserved("reconnect_error",i)):e.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const e=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",e)}}const no={};function Wl(t,e){typeof t=="object"&&(e=t,t=void 0),e=e||{};const n=hI(t,e.path||"/socket.io"),r=n.source,i=n.id,s=n.path,o=no[i]&&s in no[i].nsps,l=e.forceNew||e["force new connection"]||e.multiplex===!1||o;let a;return l?a=new rf(r,e):(no[i]||(no[i]=new rf(r,e)),a=no[i]),n.query&&!e.query&&(e.query=n.queryKey),a.socket(n.path,e)}Object.assign(Wl,{Manager:rf,Socket:C1,io:Wl,connect:Wl});var P1={exports:{}};(function(t){var e={};e.useBlobBuilder=function(){try{return new Blob([]),!1}catch{return!0}}(),e.useArrayBufferView=!e.useBlobBuilder&&function(){try{return new Blob([new Uint8Array([])]).size===0}catch{return!0}}(),t.exports.binaryFeatures=e;var n=t.exports.BlobBuilder;typeof window<"u"&&(n=t.exports.BlobBuilder=window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder||window.BlobBuilder);function r(){this._pieces=[],this._parts=[]}r.prototype.append=function(i){typeof i=="number"?this._pieces.push(i):(this.flush(),this._parts.push(i))},r.prototype.flush=function(){if(this._pieces.length>0){var i=new Uint8Array(this._pieces);e.useArrayBufferView||(i=i.buffer),this._parts.push(i),this._pieces=[]}},r.prototype.getBuffer=function(){if(this.flush(),e.useBlobBuilder){for(var i=new n,s=0,o=this._parts.length;s<o;s++)i.append(this._parts[s]);return i.getBlob()}else return new Blob(this._parts)},t.exports.BufferBuilder=r})(P1);var R1=P1.exports,PI=R1.BufferBuilder,Yy=R1.binaryFeatures,RI={unpack:function(t){var e=new ht(t);return e.unpack()},pack:function(t){var e=new ft;e.pack(t);var n=e.getBuffer();return n}},kI=RI;function ht(t){this.index=0,this.dataBuffer=t,this.dataView=new Uint8Array(this.dataBuffer),this.length=this.dataBuffer.byteLength}ht.prototype.unpack=function(){var t=this.unpack_uint8();if(t<128)return t;if((t^224)<32)return(t^224)-32;var e;if((e=t^160)<=15)return this.unpack_raw(e);if((e=t^176)<=15)return this.unpack_string(e);if((e=t^144)<=15)return this.unpack_array(e);if((e=t^128)<=15)return this.unpack_map(e);switch(t){case 192:return null;case 193:return;case 194:return!1;case 195:return!0;case 202:return this.unpack_float();case 203:return this.unpack_double();case 204:return this.unpack_uint8();case 205:return this.unpack_uint16();case 206:return this.unpack_uint32();case 207:return this.unpack_uint64();case 208:return this.unpack_int8();case 209:return this.unpack_int16();case 210:return this.unpack_int32();case 211:return this.unpack_int64();case 212:return;case 213:return;case 214:return;case 215:return;case 216:return e=this.unpack_uint16(),this.unpack_string(e);case 217:return e=this.unpack_uint32(),this.unpack_string(e);case 218:return e=this.unpack_uint16(),this.unpack_raw(e);case 219:return e=this.unpack_uint32(),this.unpack_raw(e);case 220:return e=this.unpack_uint16(),this.unpack_array(e);case 221:return e=this.unpack_uint32(),this.unpack_array(e);case 222:return e=this.unpack_uint16(),this.unpack_map(e);case 223:return e=this.unpack_uint32(),this.unpack_map(e)}};ht.prototype.unpack_uint8=function(){var t=this.dataView[this.index]&255;return this.index++,t};ht.prototype.unpack_uint16=function(){var t=this.read(2),e=(t[0]&255)*256+(t[1]&255);return this.index+=2,e};ht.prototype.unpack_uint32=function(){var t=this.read(4),e=((t[0]*256+t[1])*256+t[2])*256+t[3];return this.index+=4,e};ht.prototype.unpack_uint64=function(){var t=this.read(8),e=((((((t[0]*256+t[1])*256+t[2])*256+t[3])*256+t[4])*256+t[5])*256+t[6])*256+t[7];return this.index+=8,e};ht.prototype.unpack_int8=function(){var t=this.unpack_uint8();return t<128?t:t-256};ht.prototype.unpack_int16=function(){var t=this.unpack_uint16();return t<32768?t:t-65536};ht.prototype.unpack_int32=function(){var t=this.unpack_uint32();return t<Math.pow(2,31)?t:t-Math.pow(2,32)};ht.prototype.unpack_int64=function(){var t=this.unpack_uint64();return t<Math.pow(2,63)?t:t-Math.pow(2,64)};ht.prototype.unpack_raw=function(t){if(this.length<this.index+t)throw new Error("BinaryPackFailure: index is out of range "+this.index+" "+t+" "+this.length);var e=this.dataBuffer.slice(this.index,this.index+t);return this.index+=t,e};ht.prototype.unpack_string=function(t){for(var e=this.read(t),n=0,r="",i,s;n<t;)i=e[n],i<128?(r+=String.fromCharCode(i),n++):(i^192)<32?(s=(i^192)<<6|e[n+1]&63,r+=String.fromCharCode(s),n+=2):(s=(i&15)<<12|(e[n+1]&63)<<6|e[n+2]&63,r+=String.fromCharCode(s),n+=3);return this.index+=t,r};ht.prototype.unpack_array=function(t){for(var e=new Array(t),n=0;n<t;n++)e[n]=this.unpack();return e};ht.prototype.unpack_map=function(t){for(var e={},n=0;n<t;n++){var r=this.unpack(),i=this.unpack();e[r]=i}return e};ht.prototype.unpack_float=function(){var t=this.unpack_uint32(),e=t>>31,n=(t>>23&255)-127,r=t&8388607|8388608;return(e===0?1:-1)*r*Math.pow(2,n-23)};ht.prototype.unpack_double=function(){var t=this.unpack_uint32(),e=this.unpack_uint32(),n=t>>31,r=(t>>20&2047)-1023,i=t&1048575|1048576,s=i*Math.pow(2,r-20)+e*Math.pow(2,r-52);return(n===0?1:-1)*s};ht.prototype.read=function(t){var e=this.index;if(e+t<=this.length)return this.dataView.subarray(e,e+t);throw new Error("BinaryPackFailure: read index out of range")};function ft(){this.bufferBuilder=new PI}ft.prototype.getBuffer=function(){return this.bufferBuilder.getBuffer()};ft.prototype.pack=function(t){var e=typeof t;if(e==="string")this.pack_string(t);else if(e==="number")Math.floor(t)===t?this.pack_integer(t):this.pack_double(t);else if(e==="boolean")t===!0?this.bufferBuilder.append(195):t===!1&&this.bufferBuilder.append(194);else if(e==="undefined")this.bufferBuilder.append(192);else if(e==="object")if(t===null)this.bufferBuilder.append(192);else{var n=t.constructor;if(n==Array)this.pack_array(t);else if(n==Blob||n==File||t instanceof Blob||t instanceof File)this.pack_bin(t);else if(n==ArrayBuffer)Yy.useArrayBufferView?this.pack_bin(new Uint8Array(t)):this.pack_bin(t);else if("BYTES_PER_ELEMENT"in t)Yy.useArrayBufferView?this.pack_bin(new Uint8Array(t.buffer)):this.pack_bin(t.buffer);else if(n==Object||n.toString().startsWith("class"))this.pack_object(t);else if(n==Date)this.pack_string(t.toString());else if(typeof t.toBinaryPack=="function")this.bufferBuilder.append(t.toBinaryPack());else throw new Error('Type "'+n.toString()+'" not yet supported')}else throw new Error('Type "'+e+'" not yet supported');this.bufferBuilder.flush()};ft.prototype.pack_bin=function(t){var e=t.length||t.byteLength||t.size;if(e<=15)this.pack_uint8(160+e);else if(e<=65535)this.bufferBuilder.append(218),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(219),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};ft.prototype.pack_string=function(t){var e=AI(t);if(e<=15)this.pack_uint8(176+e);else if(e<=65535)this.bufferBuilder.append(216),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(217),this.pack_uint32(e);else throw new Error("Invalid length");this.bufferBuilder.append(t)};ft.prototype.pack_array=function(t){var e=t.length;if(e<=15)this.pack_uint8(144+e);else if(e<=65535)this.bufferBuilder.append(220),this.pack_uint16(e);else if(e<=4294967295)this.bufferBuilder.append(221),this.pack_uint32(e);else throw new Error("Invalid length");for(var n=0;n<e;n++)this.pack(t[n])};ft.prototype.pack_integer=function(t){if(t>=-32&&t<=127)this.bufferBuilder.append(t&255);else if(t>=0&&t<=255)this.bufferBuilder.append(204),this.pack_uint8(t);else if(t>=-128&&t<=127)this.bufferBuilder.append(208),this.pack_int8(t);else if(t>=0&&t<=65535)this.bufferBuilder.append(205),this.pack_uint16(t);else if(t>=-32768&&t<=32767)this.bufferBuilder.append(209),this.pack_int16(t);else if(t>=0&&t<=4294967295)this.bufferBuilder.append(206),this.pack_uint32(t);else if(t>=-2147483648&&t<=2147483647)this.bufferBuilder.append(210),this.pack_int32(t);else if(t>=-9223372036854776e3&&t<=9223372036854776e3)this.bufferBuilder.append(211),this.pack_int64(t);else if(t>=0&&t<=18446744073709552e3)this.bufferBuilder.append(207),this.pack_uint64(t);else throw new Error("Invalid integer")};ft.prototype.pack_double=function(t){var e=0;t<0&&(e=1,t=-t);var n=Math.floor(Math.log(t)/Math.LN2),r=t/Math.pow(2,n)-1,i=Math.floor(r*Math.pow(2,52)),s=Math.pow(2,32),o=e<<31|n+1023<<20|i/s&1048575,l=i%s;this.bufferBuilder.append(203),this.pack_int32(o),this.pack_int32(l)};ft.prototype.pack_object=function(t){var e=Object.keys(t),n=e.length;if(n<=15)this.pack_uint8(128+n);else if(n<=65535)this.bufferBuilder.append(222),this.pack_uint16(n);else if(n<=4294967295)this.bufferBuilder.append(223),this.pack_uint32(n);else throw new Error("Invalid length");for(var r in t)t.hasOwnProperty(r)&&(this.pack(r),this.pack(t[r]))};ft.prototype.pack_uint8=function(t){this.bufferBuilder.append(t)};ft.prototype.pack_uint16=function(t){this.bufferBuilder.append(t>>8),this.bufferBuilder.append(t&255)};ft.prototype.pack_uint32=function(t){var e=t&4294967295;this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255)};ft.prototype.pack_uint64=function(t){var e=t/Math.pow(2,32),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};ft.prototype.pack_int8=function(t){this.bufferBuilder.append(t&255)};ft.prototype.pack_int16=function(t){this.bufferBuilder.append((t&65280)>>8),this.bufferBuilder.append(t&255)};ft.prototype.pack_int32=function(t){this.bufferBuilder.append(t>>>24&255),this.bufferBuilder.append((t&16711680)>>>16),this.bufferBuilder.append((t&65280)>>>8),this.bufferBuilder.append(t&255)};ft.prototype.pack_int64=function(t){var e=Math.floor(t/Math.pow(2,32)),n=t%Math.pow(2,32);this.bufferBuilder.append((e&4278190080)>>>24),this.bufferBuilder.append((e&16711680)>>>16),this.bufferBuilder.append((e&65280)>>>8),this.bufferBuilder.append(e&255),this.bufferBuilder.append((n&4278190080)>>>24),this.bufferBuilder.append((n&16711680)>>>16),this.bufferBuilder.append((n&65280)>>>8),this.bufferBuilder.append(n&255)};function II(t){var e=t.charCodeAt(0);return e<=2047?"00":e<=65535?"000":e<=2097151?"0000":e<=67108863?"00000":"000000"}function AI(t){return t.length>600?new Blob([t]).size:t.replace(/[^\u0000-\u007F]/g,II).length}const Xy=Qf(kI);let k1=!0,I1=!0;function po(t,e,n){const r=t.match(e);return r&&r.length>=n&&parseInt(r[n],10)}function js(t,e,n){if(!t.RTCPeerConnection)return;const r=t.RTCPeerConnection.prototype,i=r.addEventListener;r.addEventListener=function(o,l){if(o!==e)return i.apply(this,arguments);const a=c=>{const u=n(c);u&&(l.handleEvent?l.handleEvent(u):l(u))};return this._eventMap=this._eventMap||{},this._eventMap[e]||(this._eventMap[e]=new Map),this._eventMap[e].set(l,a),i.apply(this,[o,a])};const s=r.removeEventListener;r.removeEventListener=function(o,l){if(o!==e||!this._eventMap||!this._eventMap[e])return s.apply(this,arguments);if(!this._eventMap[e].has(l))return s.apply(this,arguments);const a=this._eventMap[e].get(l);return this._eventMap[e].delete(l),this._eventMap[e].size===0&&delete this._eventMap[e],Object.keys(this._eventMap).length===0&&delete this._eventMap,s.apply(this,[o,a])},Object.defineProperty(r,"on"+e,{get(){return this["_on"+e]},set(o){this["_on"+e]&&(this.removeEventListener(e,this["_on"+e]),delete this["_on"+e]),o&&this.addEventListener(e,this["_on"+e]=o)},enumerable:!0,configurable:!0})}function bI(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(k1=t,t?"adapter.js logging disabled":"adapter.js logging enabled")}function xI(t){return typeof t!="boolean"?new Error("Argument type: "+typeof t+". Please use a boolean."):(I1=!t,"adapter.js deprecation warnings "+(t?"disabled":"enabled"))}function Zp(){if(typeof window=="object"){if(k1)return;typeof console<"u"&&typeof console.log=="function"&&console.log.apply(console,arguments)}}function Su(t,e){I1&&console.warn(t+" is deprecated, please use "+e+" instead.")}function OI(t){const e={browser:null,version:null};if(typeof t>"u"||!t.navigator)return e.browser="Not a browser.",e;const{navigator:n}=t;if(n.mozGetUserMedia)e.browser="firefox",e.version=po(n.userAgent,/Firefox\/(\d+)\./,1);else if(n.webkitGetUserMedia||t.isSecureContext===!1&&t.webkitRTCPeerConnection&&!t.RTCIceGatherer)e.browser="chrome",e.version=po(n.userAgent,/Chrom(e|ium)\/(\d+)\./,2);else if(n.mediaDevices&&n.userAgent.match(/Edge\/(\d+).(\d+)$/))e.browser="edge",e.version=po(n.userAgent,/Edge\/(\d+).(\d+)$/,2);else if(t.RTCPeerConnection&&n.userAgent.match(/AppleWebKit\/(\d+)\./))e.browser="safari",e.version=po(n.userAgent,/AppleWebKit\/(\d+)\./,1),e.supportsUnifiedPlan=t.RTCRtpTransceiver&&"currentDirection"in t.RTCRtpTransceiver.prototype;else return e.browser="Not a supported browser.",e;return e}function Zy(t){return Object.prototype.toString.call(t)==="[object Object]"}function A1(t){return Zy(t)?Object.keys(t).reduce(function(e,n){const r=Zy(t[n]),i=r?A1(t[n]):t[n],s=r&&!Object.keys(i).length;return i===void 0||s?e:Object.assign(e,{[n]:i})},{}):t}function sf(t,e,n){!e||n.has(e.id)||(n.set(e.id,e),Object.keys(e).forEach(r=>{r.endsWith("Id")?sf(t,t.get(e[r]),n):r.endsWith("Ids")&&e[r].forEach(i=>{sf(t,t.get(i),n)})}))}function ev(t,e,n){const r=n?"outbound-rtp":"inbound-rtp",i=new Map;if(e===null)return i;const s=[];return t.forEach(o=>{o.type==="track"&&o.trackIdentifier===e.id&&s.push(o)}),s.forEach(o=>{t.forEach(l=>{l.type===r&&l.trackId===o.id&&sf(t,l,i)})}),i}const tv=Zp;function b1(t,e){const n=t&&t.navigator;if(!n.mediaDevices)return;const r=function(l){if(typeof l!="object"||l.mandatory||l.optional)return l;const a={};return Object.keys(l).forEach(c=>{if(c==="require"||c==="advanced"||c==="mediaSource")return;const u=typeof l[c]=="object"?l[c]:{ideal:l[c]};u.exact!==void 0&&typeof u.exact=="number"&&(u.min=u.max=u.exact);const d=function(f,p){return f?f+p.charAt(0).toUpperCase()+p.slice(1):p==="deviceId"?"sourceId":p};if(u.ideal!==void 0){a.optional=a.optional||[];let f={};typeof u.ideal=="number"?(f[d("min",c)]=u.ideal,a.optional.push(f),f={},f[d("max",c)]=u.ideal,a.optional.push(f)):(f[d("",c)]=u.ideal,a.optional.push(f))}u.exact!==void 0&&typeof u.exact!="number"?(a.mandatory=a.mandatory||{},a.mandatory[d("",c)]=u.exact):["min","max"].forEach(f=>{u[f]!==void 0&&(a.mandatory=a.mandatory||{},a.mandatory[d(f,c)]=u[f])})}),l.advanced&&(a.optional=(a.optional||[]).concat(l.advanced)),a},i=function(l,a){if(e.version>=61)return a(l);if(l=JSON.parse(JSON.stringify(l)),l&&typeof l.audio=="object"){const c=function(u,d,f){d in u&&!(f in u)&&(u[f]=u[d],delete u[d])};l=JSON.parse(JSON.stringify(l)),c(l.audio,"autoGainControl","googAutoGainControl"),c(l.audio,"noiseSuppression","googNoiseSuppression"),l.audio=r(l.audio)}if(l&&typeof l.video=="object"){let c=l.video.facingMode;c=c&&(typeof c=="object"?c:{ideal:c});const u=e.version<66;if(c&&(c.exact==="user"||c.exact==="environment"||c.ideal==="user"||c.ideal==="environment")&&!(n.mediaDevices.getSupportedConstraints&&n.mediaDevices.getSupportedConstraints().facingMode&&!u)){delete l.video.facingMode;let d;if(c.exact==="environment"||c.ideal==="environment"?d=["back","rear"]:(c.exact==="user"||c.ideal==="user")&&(d=["front"]),d)return n.mediaDevices.enumerateDevices().then(f=>{f=f.filter(y=>y.kind==="videoinput");let p=f.find(y=>d.some(v=>y.label.toLowerCase().includes(v)));return!p&&f.length&&d.includes("back")&&(p=f[f.length-1]),p&&(l.video.deviceId=c.exact?{exact:p.deviceId}:{ideal:p.deviceId}),l.video=r(l.video),tv("chrome: "+JSON.stringify(l)),a(l)})}l.video=r(l.video)}return tv("chrome: "+JSON.stringify(l)),a(l)},s=function(l){return e.version>=64?l:{name:{PermissionDeniedError:"NotAllowedError",PermissionDismissedError:"NotAllowedError",InvalidStateError:"NotAllowedError",DevicesNotFoundError:"NotFoundError",ConstraintNotSatisfiedError:"OverconstrainedError",TrackStartError:"NotReadableError",MediaDeviceFailedDueToShutdown:"NotAllowedError",MediaDeviceKillSwitchOn:"NotAllowedError",TabCaptureError:"AbortError",ScreenCaptureError:"AbortError",DeviceCaptureError:"AbortError"}[l.name]||l.name,message:l.message,constraint:l.constraint||l.constraintName,toString(){return this.name+(this.message&&": ")+this.message}}},o=function(l,a,c){i(l,u=>{n.webkitGetUserMedia(u,a,d=>{c&&c(s(d))})})};if(n.getUserMedia=o.bind(n),n.mediaDevices.getUserMedia){const l=n.mediaDevices.getUserMedia.bind(n.mediaDevices);n.mediaDevices.getUserMedia=function(a){return i(a,c=>l(c).then(u=>{if(c.audio&&!u.getAudioTracks().length||c.video&&!u.getVideoTracks().length)throw u.getTracks().forEach(d=>{d.stop()}),new DOMException("","NotFoundError");return u},u=>Promise.reject(s(u))))}}}function NI(t,e){if(!(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices)&&t.navigator.mediaDevices){if(typeof e!="function"){console.error("shimGetDisplayMedia: getSourceId argument is not a function");return}t.navigator.mediaDevices.getDisplayMedia=function(r){return e(r).then(i=>{const s=r.video&&r.video.width,o=r.video&&r.video.height,l=r.video&&r.video.frameRate;return r.video={mandatory:{chromeMediaSource:"desktop",chromeMediaSourceId:i,maxFrameRate:l||3}},s&&(r.video.mandatory.maxWidth=s),o&&(r.video.mandatory.maxHeight=o),t.navigator.mediaDevices.getUserMedia(r)})}}}function x1(t){t.MediaStream=t.MediaStream||t.webkitMediaStream}function O1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("ontrack"in t.RTCPeerConnection.prototype)){Object.defineProperty(t.RTCPeerConnection.prototype,"ontrack",{get(){return this._ontrack},set(n){this._ontrack&&this.removeEventListener("track",this._ontrack),this.addEventListener("track",this._ontrack=n)},enumerable:!0,configurable:!0});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){return this._ontrackpoly||(this._ontrackpoly=r=>{r.stream.addEventListener("addtrack",i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===i.track.id):s={track:i.track};const o=new Event("track");o.track=i.track,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)}),r.stream.getTracks().forEach(i=>{let s;t.RTCPeerConnection.prototype.getReceivers?s=this.getReceivers().find(l=>l.track&&l.track.id===i.id):s={track:i};const o=new Event("track");o.track=i,o.receiver=s,o.transceiver={receiver:s},o.streams=[r.stream],this.dispatchEvent(o)})},this.addEventListener("addstream",this._ontrackpoly)),e.apply(this,arguments)}}else js(t,"track",e=>(e.transceiver||Object.defineProperty(e,"transceiver",{value:{receiver:e.receiver}}),e))}function N1(t){if(typeof t=="object"&&t.RTCPeerConnection&&!("getSenders"in t.RTCPeerConnection.prototype)&&"createDTMFSender"in t.RTCPeerConnection.prototype){const e=function(i,s){return{track:s,get dtmf(){return this._dtmf===void 0&&(s.kind==="audio"?this._dtmf=i.createDTMFSender(s):this._dtmf=null),this._dtmf},_pc:i}};if(!t.RTCPeerConnection.prototype.getSenders){t.RTCPeerConnection.prototype.getSenders=function(){return this._senders=this._senders||[],this._senders.slice()};const i=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(l,a){let c=i.apply(this,arguments);return c||(c=e(this,l),this._senders.push(c)),c};const s=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(l){s.apply(this,arguments);const a=this._senders.indexOf(l);a!==-1&&this._senders.splice(a,1)}}const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(s){this._senders=this._senders||[],n.apply(this,[s]),s.getTracks().forEach(o=>{this._senders.push(e(this,o))})};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(s){this._senders=this._senders||[],r.apply(this,[s]),s.getTracks().forEach(o=>{const l=this._senders.find(a=>a.track===o);l&&this._senders.splice(this._senders.indexOf(l),1)})}}else if(typeof t=="object"&&t.RTCPeerConnection&&"getSenders"in t.RTCPeerConnection.prototype&&"createDTMFSender"in t.RTCPeerConnection.prototype&&t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)){const e=t.RTCPeerConnection.prototype.getSenders;t.RTCPeerConnection.prototype.getSenders=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r},Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=this._pc.createDTMFSender(this.track):this._dtmf=null),this._dtmf}})}}function D1(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[r,i,s]=arguments;if(arguments.length>0&&typeof r=="function")return e.apply(this,arguments);if(e.length===0&&(arguments.length===0||typeof r!="function"))return e.apply(this,[]);const o=function(a){const c={};return a.result().forEach(d=>{const f={id:d.id,timestamp:d.timestamp,type:{localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[d.type]||d.type};d.names().forEach(p=>{f[p]=d.stat(p)}),c[f.id]=f}),c},l=function(a){return new Map(Object.keys(a).map(c=>[c,a[c]]))};if(arguments.length>=2){const a=function(c){i(l(o(c)))};return e.apply(this,[a,r])}return new Promise((a,c)=>{e.apply(this,[function(u){a(l(o(u)))},c])}).then(i,s)}}function M1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender&&t.RTCRtpReceiver))return;if(!("getStats"in t.RTCRtpSender.prototype)){const n=t.RTCPeerConnection.prototype.getSenders;n&&(t.RTCPeerConnection.prototype.getSenders=function(){const s=n.apply(this,[]);return s.forEach(o=>o._pc=this),s});const r=t.RTCPeerConnection.prototype.addTrack;r&&(t.RTCPeerConnection.prototype.addTrack=function(){const s=r.apply(this,arguments);return s._pc=this,s}),t.RTCRtpSender.prototype.getStats=function(){const s=this;return this._pc.getStats().then(o=>ev(o,s.track,!0))}}if(!("getStats"in t.RTCRtpReceiver.prototype)){const n=t.RTCPeerConnection.prototype.getReceivers;n&&(t.RTCPeerConnection.prototype.getReceivers=function(){const i=n.apply(this,[]);return i.forEach(s=>s._pc=this),i}),js(t,"track",r=>(r.receiver._pc=r.srcElement,r)),t.RTCRtpReceiver.prototype.getStats=function(){const i=this;return this._pc.getStats().then(s=>ev(s,i.track,!1))}}if(!("getStats"in t.RTCRtpSender.prototype&&"getStats"in t.RTCRtpReceiver.prototype))return;const e=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){if(arguments.length>0&&arguments[0]instanceof t.MediaStreamTrack){const r=arguments[0];let i,s,o;return this.getSenders().forEach(l=>{l.track===r&&(i?o=!0:i=l)}),this.getReceivers().forEach(l=>(l.track===r&&(s?o=!0:s=l),l.track===r)),o||i&&s?Promise.reject(new DOMException("There are more than one sender or receiver for the track.","InvalidAccessError")):i?i.getStats():s?s.getStats():Promise.reject(new DOMException("There is no sender or receiver for the track.","InvalidAccessError"))}return e.apply(this,arguments)}}function L1(t){t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},Object.keys(this._shimmedLocalStreams).map(o=>this._shimmedLocalStreams[o][0])};const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addTrack=function(o,l){if(!l)return e.apply(this,arguments);this._shimmedLocalStreams=this._shimmedLocalStreams||{};const a=e.apply(this,arguments);return this._shimmedLocalStreams[l.id]?this._shimmedLocalStreams[l.id].indexOf(a)===-1&&this._shimmedLocalStreams[l.id].push(a):this._shimmedLocalStreams[l.id]=[l,a],a};const n=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(o){this._shimmedLocalStreams=this._shimmedLocalStreams||{},o.getTracks().forEach(c=>{if(this.getSenders().find(d=>d.track===c))throw new DOMException("Track already exists.","InvalidAccessError")});const l=this.getSenders();n.apply(this,arguments);const a=this.getSenders().filter(c=>l.indexOf(c)===-1);this._shimmedLocalStreams[o.id]=[o].concat(a)};const r=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},delete this._shimmedLocalStreams[o.id],r.apply(this,arguments)};const i=t.RTCPeerConnection.prototype.removeTrack;t.RTCPeerConnection.prototype.removeTrack=function(o){return this._shimmedLocalStreams=this._shimmedLocalStreams||{},o&&Object.keys(this._shimmedLocalStreams).forEach(l=>{const a=this._shimmedLocalStreams[l].indexOf(o);a!==-1&&this._shimmedLocalStreams[l].splice(a,1),this._shimmedLocalStreams[l].length===1&&delete this._shimmedLocalStreams[l]}),i.apply(this,arguments)}}function j1(t,e){if(!t.RTCPeerConnection)return;if(t.RTCPeerConnection.prototype.addTrack&&e.version>=65)return L1(t);const n=t.RTCPeerConnection.prototype.getLocalStreams;t.RTCPeerConnection.prototype.getLocalStreams=function(){const u=n.apply(this);return this._reverseStreams=this._reverseStreams||{},u.map(d=>this._reverseStreams[d.id])};const r=t.RTCPeerConnection.prototype.addStream;t.RTCPeerConnection.prototype.addStream=function(u){if(this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},u.getTracks().forEach(d=>{if(this.getSenders().find(p=>p.track===d))throw new DOMException("Track already exists.","InvalidAccessError")}),!this._reverseStreams[u.id]){const d=new t.MediaStream(u.getTracks());this._streams[u.id]=d,this._reverseStreams[d.id]=u,u=d}r.apply(this,[u])};const i=t.RTCPeerConnection.prototype.removeStream;t.RTCPeerConnection.prototype.removeStream=function(u){this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{},i.apply(this,[this._streams[u.id]||u]),delete this._reverseStreams[this._streams[u.id]?this._streams[u.id].id:u.id],delete this._streams[u.id]},t.RTCPeerConnection.prototype.addTrack=function(u,d){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");const f=[].slice.call(arguments,1);if(f.length!==1||!f[0].getTracks().find(v=>v===u))throw new DOMException("The adapter.js addTrack polyfill only supports a single  stream which is associated with the specified track.","NotSupportedError");if(this.getSenders().find(v=>v.track===u))throw new DOMException("Track already exists.","InvalidAccessError");this._streams=this._streams||{},this._reverseStreams=this._reverseStreams||{};const y=this._streams[d.id];if(y)y.addTrack(u),Promise.resolve().then(()=>{this.dispatchEvent(new Event("negotiationneeded"))});else{const v=new t.MediaStream([u]);this._streams[d.id]=v,this._reverseStreams[v.id]=d,this.addStream(v)}return this.getSenders().find(v=>v.track===u)};function s(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const p=c._reverseStreams[f],y=c._streams[p.id];d=d.replace(new RegExp(y.id,"g"),p.id)}),new RTCSessionDescription({type:u.type,sdp:d})}function o(c,u){let d=u.sdp;return Object.keys(c._reverseStreams||[]).forEach(f=>{const p=c._reverseStreams[f],y=c._streams[p.id];d=d.replace(new RegExp(p.id,"g"),y.id)}),new RTCSessionDescription({type:u.type,sdp:d})}["createOffer","createAnswer"].forEach(function(c){const u=t.RTCPeerConnection.prototype[c],d={[c](){const f=arguments;return arguments.length&&typeof arguments[0]=="function"?u.apply(this,[y=>{const v=s(this,y);f[0].apply(null,[v])},y=>{f[1]&&f[1].apply(null,y)},arguments[2]]):u.apply(this,arguments).then(y=>s(this,y))}};t.RTCPeerConnection.prototype[c]=d[c]});const l=t.RTCPeerConnection.prototype.setLocalDescription;t.RTCPeerConnection.prototype.setLocalDescription=function(){return!arguments.length||!arguments[0].type?l.apply(this,arguments):(arguments[0]=o(this,arguments[0]),l.apply(this,arguments))};const a=Object.getOwnPropertyDescriptor(t.RTCPeerConnection.prototype,"localDescription");Object.defineProperty(t.RTCPeerConnection.prototype,"localDescription",{get(){const c=a.get.apply(this);return c.type===""?c:s(this,c)}}),t.RTCPeerConnection.prototype.removeTrack=function(u){if(this.signalingState==="closed")throw new DOMException("The RTCPeerConnection's signalingState is 'closed'.","InvalidStateError");if(!u._pc)throw new DOMException("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.","TypeError");if(!(u._pc===this))throw new DOMException("Sender was not created by this connection.","InvalidAccessError");this._streams=this._streams||{};let f;Object.keys(this._streams).forEach(p=>{this._streams[p].getTracks().find(v=>u.track===v)&&(f=this._streams[p])}),f&&(f.getTracks().length===1?this.removeStream(this._reverseStreams[f.id]):f.removeTrack(u.track),this.dispatchEvent(new Event("negotiationneeded")))}}function of(t,e){!t.RTCPeerConnection&&t.webkitRTCPeerConnection&&(t.RTCPeerConnection=t.webkitRTCPeerConnection),t.RTCPeerConnection&&e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(n){const r=t.RTCPeerConnection.prototype[n],i={[n](){return arguments[0]=new(n==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),r.apply(this,arguments)}};t.RTCPeerConnection.prototype[n]=i[n]})}function V1(t,e){js(t,"negotiationneeded",n=>{const r=n.target;if(!((e.version<72||r.getConfiguration&&r.getConfiguration().sdpSemantics==="plan-b")&&r.signalingState!=="stable"))return n})}const nv=Object.freeze(Object.defineProperty({__proto__:null,fixNegotiationNeeded:V1,shimAddTrackRemoveTrack:j1,shimAddTrackRemoveTrackWithNative:L1,shimGetDisplayMedia:NI,shimGetSendersWithDtmf:N1,shimGetStats:D1,shimGetUserMedia:b1,shimMediaStream:x1,shimOnTrack:O1,shimPeerConnection:of,shimSenderReceiverGetStats:M1},Symbol.toStringTag,{value:"Module"}));function DI(t,e){let n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(r=>{if(r&&(r.urls||r.url)){let i=r.urls||r.url;r.url&&!r.urls&&Su("RTCIceServer.url","RTCIceServer.urls");const s=typeof i=="string";return s&&(i=[i]),i=i.filter(o=>{if(o.indexOf("stun:")===0)return!1;const l=o.startsWith("turn")&&!o.startsWith("turn:[")&&o.includes("transport=udp");return l&&!n?(n=!0,!0):l&&!n}),delete r.url,r.urls=s?i[0]:i,!!i.length}})}var F1={exports:{}};(function(t){var e={};e.generateIdentifier=function(){return Math.random().toString(36).substr(2,10)},e.localCName=e.generateIdentifier(),e.splitLines=function(n){return n.trim().split(`
`).map(function(r){return r.trim()})},e.splitSections=function(n){var r=n.split(`
m=`);return r.map(function(i,s){return(s>0?"m="+i:i).trim()+`\r
`})},e.getDescription=function(n){var r=e.splitSections(n);return r&&r[0]},e.getMediaSections=function(n){var r=e.splitSections(n);return r.shift(),r},e.matchPrefix=function(n,r){return e.splitLines(n).filter(function(i){return i.indexOf(r)===0})},e.parseCandidate=function(n){var r;n.indexOf("a=candidate:")===0?r=n.substring(12).split(" "):r=n.substring(10).split(" ");for(var i={foundation:r[0],component:parseInt(r[1],10),protocol:r[2].toLowerCase(),priority:parseInt(r[3],10),ip:r[4],address:r[4],port:parseInt(r[5],10),type:r[7]},s=8;s<r.length;s+=2)switch(r[s]){case"raddr":i.relatedAddress=r[s+1];break;case"rport":i.relatedPort=parseInt(r[s+1],10);break;case"tcptype":i.tcpType=r[s+1];break;case"ufrag":i.ufrag=r[s+1],i.usernameFragment=r[s+1];break;default:i[r[s]]=r[s+1];break}return i},e.writeCandidate=function(n){var r=[];r.push(n.foundation),r.push(n.component),r.push(n.protocol.toUpperCase()),r.push(n.priority),r.push(n.address||n.ip),r.push(n.port);var i=n.type;return r.push("typ"),r.push(i),i!=="host"&&n.relatedAddress&&n.relatedPort&&(r.push("raddr"),r.push(n.relatedAddress),r.push("rport"),r.push(n.relatedPort)),n.tcpType&&n.protocol.toLowerCase()==="tcp"&&(r.push("tcptype"),r.push(n.tcpType)),(n.usernameFragment||n.ufrag)&&(r.push("ufrag"),r.push(n.usernameFragment||n.ufrag)),"candidate:"+r.join(" ")},e.parseIceOptions=function(n){return n.substr(14).split(" ")},e.parseRtpMap=function(n){var r=n.substr(9).split(" "),i={payloadType:parseInt(r.shift(),10)};return r=r[0].split("/"),i.name=r[0],i.clockRate=parseInt(r[1],10),i.channels=r.length===3?parseInt(r[2],10):1,i.numChannels=i.channels,i},e.writeRtpMap=function(n){var r=n.payloadType;n.preferredPayloadType!==void 0&&(r=n.preferredPayloadType);var i=n.channels||n.numChannels||1;return"a=rtpmap:"+r+" "+n.name+"/"+n.clockRate+(i!==1?"/"+i:"")+`\r
`},e.parseExtmap=function(n){var r=n.substr(9).split(" ");return{id:parseInt(r[0],10),direction:r[0].indexOf("/")>0?r[0].split("/")[1]:"sendrecv",uri:r[1]}},e.writeExtmap=function(n){return"a=extmap:"+(n.id||n.preferredId)+(n.direction&&n.direction!=="sendrecv"?"/"+n.direction:"")+" "+n.uri+`\r
`},e.parseFmtp=function(n){for(var r={},i,s=n.substr(n.indexOf(" ")+1).split(";"),o=0;o<s.length;o++)i=s[o].trim().split("="),r[i[0].trim()]=i[1];return r},e.writeFmtp=function(n){var r="",i=n.payloadType;if(n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.parameters&&Object.keys(n.parameters).length){var s=[];Object.keys(n.parameters).forEach(function(o){n.parameters[o]?s.push(o+"="+n.parameters[o]):s.push(o)}),r+="a=fmtp:"+i+" "+s.join(";")+`\r
`}return r},e.parseRtcpFb=function(n){var r=n.substr(n.indexOf(" ")+1).split(" ");return{type:r.shift(),parameter:r.join(" ")}},e.writeRtcpFb=function(n){var r="",i=n.payloadType;return n.preferredPayloadType!==void 0&&(i=n.preferredPayloadType),n.rtcpFeedback&&n.rtcpFeedback.length&&n.rtcpFeedback.forEach(function(s){r+="a=rtcp-fb:"+i+" "+s.type+(s.parameter&&s.parameter.length?" "+s.parameter:"")+`\r
`}),r},e.parseSsrcMedia=function(n){var r=n.indexOf(" "),i={ssrc:parseInt(n.substr(7,r-7),10)},s=n.indexOf(":",r);return s>-1?(i.attribute=n.substr(r+1,s-r-1),i.value=n.substr(s+1)):i.attribute=n.substr(r+1),i},e.parseSsrcGroup=function(n){var r=n.substr(13).split(" ");return{semantics:r.shift(),ssrcs:r.map(function(i){return parseInt(i,10)})}},e.getMid=function(n){var r=e.matchPrefix(n,"a=mid:")[0];if(r)return r.substr(6)},e.parseFingerprint=function(n){var r=n.substr(14).split(" ");return{algorithm:r[0].toLowerCase(),value:r[1]}},e.getDtlsParameters=function(n,r){var i=e.matchPrefix(n+r,"a=fingerprint:");return{role:"auto",fingerprints:i.map(e.parseFingerprint)}},e.writeDtlsParameters=function(n,r){var i="a=setup:"+r+`\r
`;return n.fingerprints.forEach(function(s){i+="a=fingerprint:"+s.algorithm+" "+s.value+`\r
`}),i},e.parseCryptoLine=function(n){var r=n.substr(9).split(" ");return{tag:parseInt(r[0],10),cryptoSuite:r[1],keyParams:r[2],sessionParams:r.slice(3)}},e.writeCryptoLine=function(n){return"a=crypto:"+n.tag+" "+n.cryptoSuite+" "+(typeof n.keyParams=="object"?e.writeCryptoKeyParams(n.keyParams):n.keyParams)+(n.sessionParams?" "+n.sessionParams.join(" "):"")+`\r
`},e.parseCryptoKeyParams=function(n){if(n.indexOf("inline:")!==0)return null;var r=n.substr(7).split("|");return{keyMethod:"inline",keySalt:r[0],lifeTime:r[1],mkiValue:r[2]?r[2].split(":")[0]:void 0,mkiLength:r[2]?r[2].split(":")[1]:void 0}},e.writeCryptoKeyParams=function(n){return n.keyMethod+":"+n.keySalt+(n.lifeTime?"|"+n.lifeTime:"")+(n.mkiValue&&n.mkiLength?"|"+n.mkiValue+":"+n.mkiLength:"")},e.getCryptoParameters=function(n,r){var i=e.matchPrefix(n+r,"a=crypto:");return i.map(e.parseCryptoLine)},e.getIceParameters=function(n,r){var i=e.matchPrefix(n+r,"a=ice-ufrag:")[0],s=e.matchPrefix(n+r,"a=ice-pwd:")[0];return i&&s?{usernameFragment:i.substr(12),password:s.substr(10)}:null},e.writeIceParameters=function(n){return"a=ice-ufrag:"+n.usernameFragment+`\r
a=ice-pwd:`+n.password+`\r
`},e.parseRtpParameters=function(n){for(var r={codecs:[],headerExtensions:[],fecMechanisms:[],rtcp:[]},i=e.splitLines(n),s=i[0].split(" "),o=3;o<s.length;o++){var l=s[o],a=e.matchPrefix(n,"a=rtpmap:"+l+" ")[0];if(a){var c=e.parseRtpMap(a),u=e.matchPrefix(n,"a=fmtp:"+l+" ");switch(c.parameters=u.length?e.parseFmtp(u[0]):{},c.rtcpFeedback=e.matchPrefix(n,"a=rtcp-fb:"+l+" ").map(e.parseRtcpFb),r.codecs.push(c),c.name.toUpperCase()){case"RED":case"ULPFEC":r.fecMechanisms.push(c.name.toUpperCase());break}}}return e.matchPrefix(n,"a=extmap:").forEach(function(d){r.headerExtensions.push(e.parseExtmap(d))}),r},e.writeRtpDescription=function(n,r){var i="";i+="m="+n+" ",i+=r.codecs.length>0?"9":"0",i+=" UDP/TLS/RTP/SAVPF ",i+=r.codecs.map(function(o){return o.preferredPayloadType!==void 0?o.preferredPayloadType:o.payloadType}).join(" ")+`\r
`,i+=`c=IN IP4 0.0.0.0\r
`,i+=`a=rtcp:9 IN IP4 0.0.0.0\r
`,r.codecs.forEach(function(o){i+=e.writeRtpMap(o),i+=e.writeFmtp(o),i+=e.writeRtcpFb(o)});var s=0;return r.codecs.forEach(function(o){o.maxptime>s&&(s=o.maxptime)}),s>0&&(i+="a=maxptime:"+s+`\r
`),i+=`a=rtcp-mux\r
`,r.headerExtensions&&r.headerExtensions.forEach(function(o){i+=e.writeExtmap(o)}),i},e.parseRtpEncodingParameters=function(n){var r=[],i=e.parseRtpParameters(n),s=i.fecMechanisms.indexOf("RED")!==-1,o=i.fecMechanisms.indexOf("ULPFEC")!==-1,l=e.matchPrefix(n,"a=ssrc:").map(function(f){return e.parseSsrcMedia(f)}).filter(function(f){return f.attribute==="cname"}),a=l.length>0&&l[0].ssrc,c,u=e.matchPrefix(n,"a=ssrc-group:FID").map(function(f){var p=f.substr(17).split(" ");return p.map(function(y){return parseInt(y,10)})});u.length>0&&u[0].length>1&&u[0][0]===a&&(c=u[0][1]),i.codecs.forEach(function(f){if(f.name.toUpperCase()==="RTX"&&f.parameters.apt){var p={ssrc:a,codecPayloadType:parseInt(f.parameters.apt,10)};a&&c&&(p.rtx={ssrc:c}),r.push(p),s&&(p=JSON.parse(JSON.stringify(p)),p.fec={ssrc:a,mechanism:o?"red+ulpfec":"red"},r.push(p))}}),r.length===0&&a&&r.push({ssrc:a});var d=e.matchPrefix(n,"b=");return d.length&&(d[0].indexOf("b=TIAS:")===0?d=parseInt(d[0].substr(7),10):d[0].indexOf("b=AS:")===0?d=parseInt(d[0].substr(5),10)*1e3*.95-50*40*8:d=void 0,r.forEach(function(f){f.maxBitrate=d})),r},e.parseRtcpParameters=function(n){var r={},i=e.matchPrefix(n,"a=ssrc:").map(function(l){return e.parseSsrcMedia(l)}).filter(function(l){return l.attribute==="cname"})[0];i&&(r.cname=i.value,r.ssrc=i.ssrc);var s=e.matchPrefix(n,"a=rtcp-rsize");r.reducedSize=s.length>0,r.compound=s.length===0;var o=e.matchPrefix(n,"a=rtcp-mux");return r.mux=o.length>0,r},e.parseMsid=function(n){var r,i=e.matchPrefix(n,"a=msid:");if(i.length===1)return r=i[0].substr(7).split(" "),{stream:r[0],track:r[1]};var s=e.matchPrefix(n,"a=ssrc:").map(function(o){return e.parseSsrcMedia(o)}).filter(function(o){return o.attribute==="msid"});if(s.length>0)return r=s[0].value.split(" "),{stream:r[0],track:r[1]}},e.parseSctpDescription=function(n){var r=e.parseMLine(n),i=e.matchPrefix(n,"a=max-message-size:"),s;i.length>0&&(s=parseInt(i[0].substr(19),10)),isNaN(s)&&(s=65536);var o=e.matchPrefix(n,"a=sctp-port:");if(o.length>0)return{port:parseInt(o[0].substr(12),10),protocol:r.fmt,maxMessageSize:s};var l=e.matchPrefix(n,"a=sctpmap:");if(l.length>0){var a=e.matchPrefix(n,"a=sctpmap:")[0].substr(10).split(" ");return{port:parseInt(a[0],10),protocol:a[1],maxMessageSize:s}}},e.writeSctpDescription=function(n,r){var i=[];return n.protocol!=="DTLS/SCTP"?i=["m="+n.kind+" 9 "+n.protocol+" "+r.protocol+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctp-port:"+r.port+`\r
`]:i=["m="+n.kind+" 9 "+n.protocol+" "+r.port+`\r
`,`c=IN IP4 0.0.0.0\r
`,"a=sctpmap:"+r.port+" "+r.protocol+` 65535\r
`],r.maxMessageSize!==void 0&&i.push("a=max-message-size:"+r.maxMessageSize+`\r
`),i.join("")},e.generateSessionId=function(){return Math.random().toString().substr(2,21)},e.writeSessionBoilerplate=function(n,r,i){var s,o=r!==void 0?r:2;n?s=n:s=e.generateSessionId();var l=i||"thisisadapterortc";return`v=0\r
o=`+l+" "+s+" "+o+` IN IP4 127.0.0.1\r
s=-\r
t=0 0\r
`},e.writeMediaSection=function(n,r,i,s){var o=e.writeRtpDescription(n.kind,r);if(o+=e.writeIceParameters(n.iceGatherer.getLocalParameters()),o+=e.writeDtlsParameters(n.dtlsTransport.getLocalParameters(),i==="offer"?"actpass":"active"),o+="a=mid:"+n.mid+`\r
`,n.direction?o+="a="+n.direction+`\r
`:n.rtpSender&&n.rtpReceiver?o+=`a=sendrecv\r
`:n.rtpSender?o+=`a=sendonly\r
`:n.rtpReceiver?o+=`a=recvonly\r
`:o+=`a=inactive\r
`,n.rtpSender){var l="msid:"+s.id+" "+n.rtpSender.track.id+`\r
`;o+="a="+l,o+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" "+l,n.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" "+l,o+="a=ssrc-group:FID "+n.sendEncodingParameters[0].ssrc+" "+n.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return o+="a=ssrc:"+n.sendEncodingParameters[0].ssrc+" cname:"+e.localCName+`\r
`,n.rtpSender&&n.sendEncodingParameters[0].rtx&&(o+="a=ssrc:"+n.sendEncodingParameters[0].rtx.ssrc+" cname:"+e.localCName+`\r
`),o},e.getDirection=function(n,r){for(var i=e.splitLines(n),s=0;s<i.length;s++)switch(i[s]){case"a=sendrecv":case"a=sendonly":case"a=recvonly":case"a=inactive":return i[s].substr(2)}return r?e.getDirection(r):"sendrecv"},e.getKind=function(n){var r=e.splitLines(n),i=r[0].split(" ");return i[0].substr(2)},e.isRejected=function(n){return n.split(" ",2)[1]==="0"},e.parseMLine=function(n){var r=e.splitLines(n),i=r[0].substr(2).split(" ");return{kind:i[0],port:parseInt(i[1],10),protocol:i[2],fmt:i.slice(3).join(" ")}},e.parseOLine=function(n){var r=e.matchPrefix(n,"o=")[0],i=r.substr(2).split(" ");return{username:i[0],sessionId:i[1],sessionVersion:parseInt(i[2],10),netType:i[3],addressType:i[4],address:i[5]}},e.isValidSDP=function(n){if(typeof n!="string"||n.length===0)return!1;for(var r=e.splitLines(n),i=0;i<r.length;i++)if(r[i].length<2||r[i].charAt(1)!=="=")return!1;return!0},t.exports=e})(F1);var U1=F1.exports;const Kl=Qf(U1);var J=U1;function MI(t){return{inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"}[t.type]||t.type}function rv(t,e,n,r,i){var s=J.writeRtpDescription(t.kind,e);if(s+=J.writeIceParameters(t.iceGatherer.getLocalParameters()),s+=J.writeDtlsParameters(t.dtlsTransport.getLocalParameters(),n==="offer"?"actpass":i||"active"),s+="a=mid:"+t.mid+`\r
`,t.rtpSender&&t.rtpReceiver?s+=`a=sendrecv\r
`:t.rtpSender?s+=`a=sendonly\r
`:t.rtpReceiver?s+=`a=recvonly\r
`:s+=`a=inactive\r
`,t.rtpSender){var o=t.rtpSender._initialTrackId||t.rtpSender.track.id;t.rtpSender._initialTrackId=o;var l="msid:"+(r?r.id:"-")+" "+o+`\r
`;s+="a="+l,s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" "+l,t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" "+l,s+="a=ssrc-group:FID "+t.sendEncodingParameters[0].ssrc+" "+t.sendEncodingParameters[0].rtx.ssrc+`\r
`)}return s+="a=ssrc:"+t.sendEncodingParameters[0].ssrc+" cname:"+J.localCName+`\r
`,t.rtpSender&&t.sendEncodingParameters[0].rtx&&(s+="a=ssrc:"+t.sendEncodingParameters[0].rtx.ssrc+" cname:"+J.localCName+`\r
`),s}function LI(t,e){var n=!1;return t=JSON.parse(JSON.stringify(t)),t.filter(function(r){if(r&&(r.urls||r.url)){var i=r.urls||r.url;r.url&&!r.urls&&console.warn("RTCIceServer.url is deprecated! Use urls instead.");var s=typeof i=="string";return s&&(i=[i]),i=i.filter(function(o){var l=o.indexOf("turn:")===0&&o.indexOf("transport=udp")!==-1&&o.indexOf("turn:[")===-1&&!n;return l?(n=!0,!0):o.indexOf("stun:")===0&&e>=14393&&o.indexOf("?transport=udp")===-1}),delete r.url,r.urls=s?i[0]:i,!!i.length}})}function vl(t,e){var n={codecs:[],headerExtensions:[],fecMechanisms:[]},r=function(s,o){s=parseInt(s,10);for(var l=0;l<o.length;l++)if(o[l].payloadType===s||o[l].preferredPayloadType===s)return o[l]},i=function(s,o,l,a){var c=r(s.parameters.apt,l),u=r(o.parameters.apt,a);return c&&u&&c.name.toLowerCase()===u.name.toLowerCase()};return t.codecs.forEach(function(s){for(var o=0;o<e.codecs.length;o++){var l=e.codecs[o];if(s.name.toLowerCase()===l.name.toLowerCase()&&s.clockRate===l.clockRate){if(s.name.toLowerCase()==="rtx"&&s.parameters&&l.parameters.apt&&!i(s,l,t.codecs,e.codecs))continue;l=JSON.parse(JSON.stringify(l)),l.numChannels=Math.min(s.numChannels,l.numChannels),n.codecs.push(l),l.rtcpFeedback=l.rtcpFeedback.filter(function(a){for(var c=0;c<s.rtcpFeedback.length;c++)if(s.rtcpFeedback[c].type===a.type&&s.rtcpFeedback[c].parameter===a.parameter)return!0;return!1});break}}}),t.headerExtensions.forEach(function(s){for(var o=0;o<e.headerExtensions.length;o++){var l=e.headerExtensions[o];if(s.uri===l.uri){n.headerExtensions.push(l);break}}}),n}function iv(t,e,n){return{offer:{setLocalDescription:["stable","have-local-offer"],setRemoteDescription:["stable","have-remote-offer"]},answer:{setLocalDescription:["have-remote-offer","have-local-pranswer"],setRemoteDescription:["have-local-offer","have-remote-pranswer"]}}[e][t].indexOf(n)!==-1}function Od(t,e){var n=t.getRemoteCandidates().find(function(r){return e.foundation===r.foundation&&e.ip===r.ip&&e.port===r.port&&e.priority===r.priority&&e.protocol===r.protocol&&e.type===r.type});return n||t.addRemoteCandidate(e),!n}function yt(t,e){var n=new Error(e);return n.name=t,n.code={NotSupportedError:9,InvalidStateError:11,InvalidAccessError:15,TypeError:void 0,OperationError:void 0}[t],n}var jI=function(t,e){function n(a,c){c.addTrack(a),c.dispatchEvent(new t.MediaStreamTrackEvent("addtrack",{track:a}))}function r(a,c){c.removeTrack(a),c.dispatchEvent(new t.MediaStreamTrackEvent("removetrack",{track:a}))}function i(a,c,u,d){var f=new Event("track");f.track=c,f.receiver=u,f.transceiver={receiver:u},f.streams=d,t.setTimeout(function(){a._dispatchEvent("track",f)})}var s=function(a){var c=this,u=document.createDocumentFragment();if(["addEventListener","removeEventListener","dispatchEvent"].forEach(function(f){c[f]=u[f].bind(u)}),this.canTrickleIceCandidates=null,this.needNegotiation=!1,this.localStreams=[],this.remoteStreams=[],this._localDescription=null,this._remoteDescription=null,this.signalingState="stable",this.iceConnectionState="new",this.connectionState="new",this.iceGatheringState="new",a=JSON.parse(JSON.stringify(a||{})),this.usingBundle=a.bundlePolicy==="max-bundle",a.rtcpMuxPolicy==="negotiate")throw yt("NotSupportedError","rtcpMuxPolicy 'negotiate' is not supported");switch(a.rtcpMuxPolicy||(a.rtcpMuxPolicy="require"),a.iceTransportPolicy){case"all":case"relay":break;default:a.iceTransportPolicy="all";break}switch(a.bundlePolicy){case"balanced":case"max-compat":case"max-bundle":break;default:a.bundlePolicy="balanced";break}if(a.iceServers=LI(a.iceServers||[],e),this._iceGatherers=[],a.iceCandidatePoolSize)for(var d=a.iceCandidatePoolSize;d>0;d--)this._iceGatherers.push(new t.RTCIceGatherer({iceServers:a.iceServers,gatherPolicy:a.iceTransportPolicy}));else a.iceCandidatePoolSize=0;this._config=a,this.transceivers=[],this._sdpSessionId=J.generateSessionId(),this._sdpSessionVersion=0,this._dtlsRole=void 0,this._isClosed=!1};Object.defineProperty(s.prototype,"localDescription",{configurable:!0,get:function(){return this._localDescription}}),Object.defineProperty(s.prototype,"remoteDescription",{configurable:!0,get:function(){return this._remoteDescription}}),s.prototype.onicecandidate=null,s.prototype.onaddstream=null,s.prototype.ontrack=null,s.prototype.onremovestream=null,s.prototype.onsignalingstatechange=null,s.prototype.oniceconnectionstatechange=null,s.prototype.onconnectionstatechange=null,s.prototype.onicegatheringstatechange=null,s.prototype.onnegotiationneeded=null,s.prototype.ondatachannel=null,s.prototype._dispatchEvent=function(a,c){this._isClosed||(this.dispatchEvent(c),typeof this["on"+a]=="function"&&this["on"+a](c))},s.prototype._emitGatheringStateChange=function(){var a=new Event("icegatheringstatechange");this._dispatchEvent("icegatheringstatechange",a)},s.prototype.getConfiguration=function(){return this._config},s.prototype.getLocalStreams=function(){return this.localStreams},s.prototype.getRemoteStreams=function(){return this.remoteStreams},s.prototype._createTransceiver=function(a,c){var u=this.transceivers.length>0,d={track:null,iceGatherer:null,iceTransport:null,dtlsTransport:null,localCapabilities:null,remoteCapabilities:null,rtpSender:null,rtpReceiver:null,kind:a,mid:null,sendEncodingParameters:null,recvEncodingParameters:null,stream:null,associatedRemoteMediaStreams:[],wantReceive:!0};if(this.usingBundle&&u)d.iceTransport=this.transceivers[0].iceTransport,d.dtlsTransport=this.transceivers[0].dtlsTransport;else{var f=this._createIceAndDtlsTransports();d.iceTransport=f.iceTransport,d.dtlsTransport=f.dtlsTransport}return c||this.transceivers.push(d),d},s.prototype.addTrack=function(a,c){if(this._isClosed)throw yt("InvalidStateError","Attempted to call addTrack on a closed peerconnection.");var u=this.transceivers.find(function(p){return p.track===a});if(u)throw yt("InvalidAccessError","Track already exists.");for(var d,f=0;f<this.transceivers.length;f++)!this.transceivers[f].track&&this.transceivers[f].kind===a.kind&&(d=this.transceivers[f]);return d||(d=this._createTransceiver(a.kind)),this._maybeFireNegotiationNeeded(),this.localStreams.indexOf(c)===-1&&this.localStreams.push(c),d.track=a,d.stream=c,d.rtpSender=new t.RTCRtpSender(a,d.dtlsTransport),d.rtpSender},s.prototype.addStream=function(a){var c=this;if(e>=15025)a.getTracks().forEach(function(d){c.addTrack(d,a)});else{var u=a.clone();a.getTracks().forEach(function(d,f){var p=u.getTracks()[f];d.addEventListener("enabled",function(y){p.enabled=y.enabled})}),u.getTracks().forEach(function(d){c.addTrack(d,u)})}},s.prototype.removeTrack=function(a){if(this._isClosed)throw yt("InvalidStateError","Attempted to call removeTrack on a closed peerconnection.");if(!(a instanceof t.RTCRtpSender))throw new TypeError("Argument 1 of RTCPeerConnection.removeTrack does not implement interface RTCRtpSender.");var c=this.transceivers.find(function(f){return f.rtpSender===a});if(!c)throw yt("InvalidAccessError","Sender was not created by this connection.");var u=c.stream;c.rtpSender.stop(),c.rtpSender=null,c.track=null,c.stream=null;var d=this.transceivers.map(function(f){return f.stream});d.indexOf(u)===-1&&this.localStreams.indexOf(u)>-1&&this.localStreams.splice(this.localStreams.indexOf(u),1),this._maybeFireNegotiationNeeded()},s.prototype.removeStream=function(a){var c=this;a.getTracks().forEach(function(u){var d=c.getSenders().find(function(f){return f.track===u});d&&c.removeTrack(d)})},s.prototype.getSenders=function(){return this.transceivers.filter(function(a){return!!a.rtpSender}).map(function(a){return a.rtpSender})},s.prototype.getReceivers=function(){return this.transceivers.filter(function(a){return!!a.rtpReceiver}).map(function(a){return a.rtpReceiver})},s.prototype._createIceGatherer=function(a,c){var u=this;if(c&&a>0)return this.transceivers[0].iceGatherer;if(this._iceGatherers.length)return this._iceGatherers.shift();var d=new t.RTCIceGatherer({iceServers:this._config.iceServers,gatherPolicy:this._config.iceTransportPolicy});return Object.defineProperty(d,"state",{value:"new",writable:!0}),this.transceivers[a].bufferedCandidateEvents=[],this.transceivers[a].bufferCandidates=function(f){var p=!f.candidate||Object.keys(f.candidate).length===0;d.state=p?"completed":"gathering",u.transceivers[a].bufferedCandidateEvents!==null&&u.transceivers[a].bufferedCandidateEvents.push(f)},d.addEventListener("localcandidate",this.transceivers[a].bufferCandidates),d},s.prototype._gather=function(a,c){var u=this,d=this.transceivers[c].iceGatherer;if(!d.onlocalcandidate){var f=this.transceivers[c].bufferedCandidateEvents;this.transceivers[c].bufferedCandidateEvents=null,d.removeEventListener("localcandidate",this.transceivers[c].bufferCandidates),d.onlocalcandidate=function(p){if(!(u.usingBundle&&c>0)){var y=new Event("icecandidate");y.candidate={sdpMid:a,sdpMLineIndex:c};var v=p.candidate,C=!v||Object.keys(v).length===0;if(C)(d.state==="new"||d.state==="gathering")&&(d.state="completed");else{d.state==="new"&&(d.state="gathering"),v.component=1,v.ufrag=d.getLocalParameters().usernameFragment;var m=J.writeCandidate(v);y.candidate=Object.assign(y.candidate,J.parseCandidate(m)),y.candidate.candidate=m,y.candidate.toJSON=function(){return{candidate:y.candidate.candidate,sdpMid:y.candidate.sdpMid,sdpMLineIndex:y.candidate.sdpMLineIndex,usernameFragment:y.candidate.usernameFragment}}}var g=J.getMediaSections(u._localDescription.sdp);C?g[y.candidate.sdpMLineIndex]+=`a=end-of-candidates\r
`:g[y.candidate.sdpMLineIndex]+="a="+y.candidate.candidate+`\r
`,u._localDescription.sdp=J.getDescription(u._localDescription.sdp)+g.join("");var E=u.transceivers.every(function(T){return T.iceGatherer&&T.iceGatherer.state==="completed"});u.iceGatheringState!=="gathering"&&(u.iceGatheringState="gathering",u._emitGatheringStateChange()),C||u._dispatchEvent("icecandidate",y),E&&(u._dispatchEvent("icecandidate",new Event("icecandidate")),u.iceGatheringState="complete",u._emitGatheringStateChange())}},t.setTimeout(function(){f.forEach(function(p){d.onlocalcandidate(p)})},0)}},s.prototype._createIceAndDtlsTransports=function(){var a=this,c=new t.RTCIceTransport(null);c.onicestatechange=function(){a._updateIceConnectionState(),a._updateConnectionState()};var u=new t.RTCDtlsTransport(c);return u.ondtlsstatechange=function(){a._updateConnectionState()},u.onerror=function(){Object.defineProperty(u,"state",{value:"failed",writable:!0}),a._updateConnectionState()},{iceTransport:c,dtlsTransport:u}},s.prototype._disposeIceAndDtlsTransports=function(a){var c=this.transceivers[a].iceGatherer;c&&(delete c.onlocalcandidate,delete this.transceivers[a].iceGatherer);var u=this.transceivers[a].iceTransport;u&&(delete u.onicestatechange,delete this.transceivers[a].iceTransport);var d=this.transceivers[a].dtlsTransport;d&&(delete d.ondtlsstatechange,delete d.onerror,delete this.transceivers[a].dtlsTransport)},s.prototype._transceive=function(a,c,u){var d=vl(a.localCapabilities,a.remoteCapabilities);c&&a.rtpSender&&(d.encodings=a.sendEncodingParameters,d.rtcp={cname:J.localCName,compound:a.rtcpParameters.compound},a.recvEncodingParameters.length&&(d.rtcp.ssrc=a.recvEncodingParameters[0].ssrc),a.rtpSender.send(d)),u&&a.rtpReceiver&&d.codecs.length>0&&(a.kind==="video"&&a.recvEncodingParameters&&e<15019&&a.recvEncodingParameters.forEach(function(f){delete f.rtx}),a.recvEncodingParameters.length?d.encodings=a.recvEncodingParameters:d.encodings=[{}],d.rtcp={compound:a.rtcpParameters.compound},a.rtcpParameters.cname&&(d.rtcp.cname=a.rtcpParameters.cname),a.sendEncodingParameters.length&&(d.rtcp.ssrc=a.sendEncodingParameters[0].ssrc),a.rtpReceiver.receive(d))},s.prototype.setLocalDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(yt("TypeError",'Unsupported type "'+a.type+'"'));if(!iv("setLocalDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(yt("InvalidStateError","Can not set local "+a.type+" in state "+c.signalingState));var u,d;if(a.type==="offer")u=J.splitSections(a.sdp),d=u.shift(),u.forEach(function(p,y){var v=J.parseRtpParameters(p);c.transceivers[y].localCapabilities=v}),c.transceivers.forEach(function(p,y){c._gather(p.mid,y)});else if(a.type==="answer"){u=J.splitSections(c._remoteDescription.sdp),d=u.shift();var f=J.matchPrefix(d,"a=ice-lite").length>0;u.forEach(function(p,y){var v=c.transceivers[y],C=v.iceGatherer,m=v.iceTransport,g=v.dtlsTransport,E=v.localCapabilities,T=v.remoteCapabilities,_=J.isRejected(p)&&J.matchPrefix(p,"a=bundle-only").length===0;if(!_&&!v.rejected){var R=J.getIceParameters(p,d),I=J.getDtlsParameters(p,d);f&&(I.role="server"),(!c.usingBundle||y===0)&&(c._gather(v.mid,y),m.state==="new"&&m.start(C,R,f?"controlling":"controlled"),g.state==="new"&&g.start(I));var w=vl(E,T);c._transceive(v,w.codecs.length>0,!1)}})}return c._localDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-local-offer"):c._updateSignalingState("stable"),Promise.resolve()},s.prototype.setRemoteDescription=function(a){var c=this;if(["offer","answer"].indexOf(a.type)===-1)return Promise.reject(yt("TypeError",'Unsupported type "'+a.type+'"'));if(!iv("setRemoteDescription",a.type,c.signalingState)||c._isClosed)return Promise.reject(yt("InvalidStateError","Can not set remote "+a.type+" in state "+c.signalingState));var u={};c.remoteStreams.forEach(function(m){u[m.id]=m});var d=[],f=J.splitSections(a.sdp),p=f.shift(),y=J.matchPrefix(p,"a=ice-lite").length>0,v=J.matchPrefix(p,"a=group:BUNDLE ").length>0;c.usingBundle=v;var C=J.matchPrefix(p,"a=ice-options:")[0];return C?c.canTrickleIceCandidates=C.substr(14).split(" ").indexOf("trickle")>=0:c.canTrickleIceCandidates=!1,f.forEach(function(m,g){var E=J.splitLines(m),T=J.getKind(m),_=J.isRejected(m)&&J.matchPrefix(m,"a=bundle-only").length===0,R=E[0].substr(2).split(" ")[2],I=J.getDirection(m,p),w=J.parseMsid(m),A=J.getMid(m)||J.generateIdentifier();if(_||T==="application"&&(R==="DTLS/SCTP"||R==="UDP/DTLS/SCTP")){c.transceivers[g]={mid:A,kind:T,protocol:R,rejected:!0};return}!_&&c.transceivers[g]&&c.transceivers[g].rejected&&(c.transceivers[g]=c._createTransceiver(T,!0));var S,Q,re,ye,ce,K,Te,Pe,b,L=J.parseRtpParameters(m),F,te;_||(F=J.getIceParameters(m,p),te=J.getDtlsParameters(m,p),te.role="client"),Te=J.parseRtpEncodingParameters(m);var ie=J.parseRtcpParameters(m),se=J.matchPrefix(m,"a=end-of-candidates",p).length>0,k=J.matchPrefix(m,"a=candidate:").map(function(oe){return J.parseCandidate(oe)}).filter(function(oe){return oe.component===1});if((a.type==="offer"||a.type==="answer")&&!_&&v&&g>0&&c.transceivers[g]&&(c._disposeIceAndDtlsTransports(g),c.transceivers[g].iceGatherer=c.transceivers[0].iceGatherer,c.transceivers[g].iceTransport=c.transceivers[0].iceTransport,c.transceivers[g].dtlsTransport=c.transceivers[0].dtlsTransport,c.transceivers[g].rtpSender&&c.transceivers[g].rtpSender.setTransport(c.transceivers[0].dtlsTransport),c.transceivers[g].rtpReceiver&&c.transceivers[g].rtpReceiver.setTransport(c.transceivers[0].dtlsTransport)),a.type==="offer"&&!_){S=c.transceivers[g]||c._createTransceiver(T),S.mid=A,S.iceGatherer||(S.iceGatherer=c._createIceGatherer(g,v)),k.length&&S.iceTransport.state==="new"&&(se&&(!v||g===0)?S.iceTransport.setRemoteCandidates(k):k.forEach(function(oe){Od(S.iceTransport,oe)})),Pe=t.RTCRtpReceiver.getCapabilities(T),e<15019&&(Pe.codecs=Pe.codecs.filter(function(oe){return oe.name!=="rtx"})),K=S.sendEncodingParameters||[{ssrc:(2*g+2)*1001}];var N=!1;if(I==="sendrecv"||I==="sendonly"){if(N=!S.rtpReceiver,ce=S.rtpReceiver||new t.RTCRtpReceiver(S.dtlsTransport,T),N){var U;b=ce.track,w&&w.stream==="-"||(w?(u[w.stream]||(u[w.stream]=new t.MediaStream,Object.defineProperty(u[w.stream],"id",{get:function(){return w.stream}})),Object.defineProperty(b,"id",{get:function(){return w.track}}),U=u[w.stream]):(u.default||(u.default=new t.MediaStream),U=u.default)),U&&(n(b,U),S.associatedRemoteMediaStreams.push(U)),d.push([b,ce,U])}}else S.rtpReceiver&&S.rtpReceiver.track&&(S.associatedRemoteMediaStreams.forEach(function(oe){var xe=oe.getTracks().find(function(z){return z.id===S.rtpReceiver.track.id});xe&&r(xe,oe)}),S.associatedRemoteMediaStreams=[]);S.localCapabilities=Pe,S.remoteCapabilities=L,S.rtpReceiver=ce,S.rtcpParameters=ie,S.sendEncodingParameters=K,S.recvEncodingParameters=Te,c._transceive(c.transceivers[g],!1,N)}else if(a.type==="answer"&&!_){S=c.transceivers[g],Q=S.iceGatherer,re=S.iceTransport,ye=S.dtlsTransport,ce=S.rtpReceiver,K=S.sendEncodingParameters,Pe=S.localCapabilities,c.transceivers[g].recvEncodingParameters=Te,c.transceivers[g].remoteCapabilities=L,c.transceivers[g].rtcpParameters=ie,k.length&&re.state==="new"&&((y||se)&&(!v||g===0)?re.setRemoteCandidates(k):k.forEach(function(oe){Od(S.iceTransport,oe)})),(!v||g===0)&&(re.state==="new"&&re.start(Q,F,"controlling"),ye.state==="new"&&ye.start(te));var j=vl(S.localCapabilities,S.remoteCapabilities),H=j.codecs.filter(function(oe){return oe.name.toLowerCase()==="rtx"}).length;!H&&S.sendEncodingParameters[0].rtx&&delete S.sendEncodingParameters[0].rtx,c._transceive(S,I==="sendrecv"||I==="recvonly",I==="sendrecv"||I==="sendonly"),ce&&(I==="sendrecv"||I==="sendonly")?(b=ce.track,w?(u[w.stream]||(u[w.stream]=new t.MediaStream),n(b,u[w.stream]),d.push([b,ce,u[w.stream]])):(u.default||(u.default=new t.MediaStream),n(b,u.default),d.push([b,ce,u.default]))):delete S.rtpReceiver}}),c._dtlsRole===void 0&&(c._dtlsRole=a.type==="offer"?"active":"passive"),c._remoteDescription={type:a.type,sdp:a.sdp},a.type==="offer"?c._updateSignalingState("have-remote-offer"):c._updateSignalingState("stable"),Object.keys(u).forEach(function(m){var g=u[m];if(g.getTracks().length){if(c.remoteStreams.indexOf(g)===-1){c.remoteStreams.push(g);var E=new Event("addstream");E.stream=g,t.setTimeout(function(){c._dispatchEvent("addstream",E)})}d.forEach(function(T){var _=T[0],R=T[1];g.id===T[2].id&&i(c,_,R,[g])})}}),d.forEach(function(m){m[2]||i(c,m[0],m[1],[])}),t.setTimeout(function(){c&&c.transceivers&&c.transceivers.forEach(function(m){m.iceTransport&&m.iceTransport.state==="new"&&m.iceTransport.getRemoteCandidates().length>0&&(console.warn("Timeout for addRemoteCandidate. Consider sending an end-of-candidates notification"),m.iceTransport.addRemoteCandidate({}))})},4e3),Promise.resolve()},s.prototype.close=function(){this.transceivers.forEach(function(a){a.iceTransport&&a.iceTransport.stop(),a.dtlsTransport&&a.dtlsTransport.stop(),a.rtpSender&&a.rtpSender.stop(),a.rtpReceiver&&a.rtpReceiver.stop()}),this._isClosed=!0,this._updateSignalingState("closed")},s.prototype._updateSignalingState=function(a){this.signalingState=a;var c=new Event("signalingstatechange");this._dispatchEvent("signalingstatechange",c)},s.prototype._maybeFireNegotiationNeeded=function(){var a=this;this.signalingState!=="stable"||this.needNegotiation===!0||(this.needNegotiation=!0,t.setTimeout(function(){if(a.needNegotiation){a.needNegotiation=!1;var c=new Event("negotiationneeded");a._dispatchEvent("negotiationneeded",c)}},0))},s.prototype._updateIceConnectionState=function(){var a,c={new:0,closed:0,checking:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(d){d.iceTransport&&!d.rejected&&c[d.iceTransport.state]++}),a="new",c.failed>0?a="failed":c.checking>0?a="checking":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0?a="connected":c.completed>0&&(a="completed"),a!==this.iceConnectionState){this.iceConnectionState=a;var u=new Event("iceconnectionstatechange");this._dispatchEvent("iceconnectionstatechange",u)}},s.prototype._updateConnectionState=function(){var a,c={new:0,closed:0,connecting:0,connected:0,completed:0,disconnected:0,failed:0};if(this.transceivers.forEach(function(d){d.iceTransport&&d.dtlsTransport&&!d.rejected&&(c[d.iceTransport.state]++,c[d.dtlsTransport.state]++)}),c.connected+=c.completed,a="new",c.failed>0?a="failed":c.connecting>0?a="connecting":c.disconnected>0?a="disconnected":c.new>0?a="new":c.connected>0&&(a="connected"),a!==this.connectionState){this.connectionState=a;var u=new Event("connectionstatechange");this._dispatchEvent("connectionstatechange",u)}},s.prototype.createOffer=function(){var a=this;if(a._isClosed)return Promise.reject(yt("InvalidStateError","Can not call createOffer after close"));var c=a.transceivers.filter(function(y){return y.kind==="audio"}).length,u=a.transceivers.filter(function(y){return y.kind==="video"}).length,d=arguments[0];if(d){if(d.mandatory||d.optional)throw new TypeError("Legacy mandatory/optional constraints not supported.");d.offerToReceiveAudio!==void 0&&(d.offerToReceiveAudio===!0?c=1:d.offerToReceiveAudio===!1?c=0:c=d.offerToReceiveAudio),d.offerToReceiveVideo!==void 0&&(d.offerToReceiveVideo===!0?u=1:d.offerToReceiveVideo===!1?u=0:u=d.offerToReceiveVideo)}for(a.transceivers.forEach(function(y){y.kind==="audio"?(c--,c<0&&(y.wantReceive=!1)):y.kind==="video"&&(u--,u<0&&(y.wantReceive=!1))});c>0||u>0;)c>0&&(a._createTransceiver("audio"),c--),u>0&&(a._createTransceiver("video"),u--);var f=J.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.transceivers.forEach(function(y,v){var C=y.track,m=y.kind,g=y.mid||J.generateIdentifier();y.mid=g,y.iceGatherer||(y.iceGatherer=a._createIceGatherer(v,a.usingBundle));var E=t.RTCRtpSender.getCapabilities(m);e<15019&&(E.codecs=E.codecs.filter(function(_){return _.name!=="rtx"})),E.codecs.forEach(function(_){_.name==="H264"&&_.parameters["level-asymmetry-allowed"]===void 0&&(_.parameters["level-asymmetry-allowed"]="1"),y.remoteCapabilities&&y.remoteCapabilities.codecs&&y.remoteCapabilities.codecs.forEach(function(R){_.name.toLowerCase()===R.name.toLowerCase()&&_.clockRate===R.clockRate&&(_.preferredPayloadType=R.payloadType)})}),E.headerExtensions.forEach(function(_){var R=y.remoteCapabilities&&y.remoteCapabilities.headerExtensions||[];R.forEach(function(I){_.uri===I.uri&&(_.id=I.id)})});var T=y.sendEncodingParameters||[{ssrc:(2*v+1)*1001}];C&&e>=15019&&m==="video"&&!T[0].rtx&&(T[0].rtx={ssrc:T[0].ssrc+1}),y.wantReceive&&(y.rtpReceiver=new t.RTCRtpReceiver(y.dtlsTransport,m)),y.localCapabilities=E,y.sendEncodingParameters=T}),a._config.bundlePolicy!=="max-compat"&&(f+="a=group:BUNDLE "+a.transceivers.map(function(y){return y.mid}).join(" ")+`\r
`),f+=`a=ice-options:trickle\r
`,a.transceivers.forEach(function(y,v){f+=rv(y,y.localCapabilities,"offer",y.stream,a._dtlsRole),f+=`a=rtcp-rsize\r
`,y.iceGatherer&&a.iceGatheringState!=="new"&&(v===0||!a.usingBundle)&&(y.iceGatherer.getLocalCandidates().forEach(function(C){C.component=1,f+="a="+J.writeCandidate(C)+`\r
`}),y.iceGatherer.state==="completed"&&(f+=`a=end-of-candidates\r
`))});var p=new t.RTCSessionDescription({type:"offer",sdp:f});return Promise.resolve(p)},s.prototype.createAnswer=function(){var a=this;if(a._isClosed)return Promise.reject(yt("InvalidStateError","Can not call createAnswer after close"));if(!(a.signalingState==="have-remote-offer"||a.signalingState==="have-local-pranswer"))return Promise.reject(yt("InvalidStateError","Can not call createAnswer in signalingState "+a.signalingState));var c=J.writeSessionBoilerplate(a._sdpSessionId,a._sdpSessionVersion++);a.usingBundle&&(c+="a=group:BUNDLE "+a.transceivers.map(function(f){return f.mid}).join(" ")+`\r
`),c+=`a=ice-options:trickle\r
`;var u=J.getMediaSections(a._remoteDescription.sdp).length;a.transceivers.forEach(function(f,p){if(!(p+1>u)){if(f.rejected){f.kind==="application"?f.protocol==="DTLS/SCTP"?c+=`m=application 0 DTLS/SCTP 5000\r
`:c+="m=application 0 "+f.protocol+` webrtc-datachannel\r
`:f.kind==="audio"?c+=`m=audio 0 UDP/TLS/RTP/SAVPF 0\r
a=rtpmap:0 PCMU/8000\r
`:f.kind==="video"&&(c+=`m=video 0 UDP/TLS/RTP/SAVPF 120\r
a=rtpmap:120 VP8/90000\r
`),c+=`c=IN IP4 0.0.0.0\r
a=inactive\r
a=mid:`+f.mid+`\r
`;return}if(f.stream){var y;f.kind==="audio"?y=f.stream.getAudioTracks()[0]:f.kind==="video"&&(y=f.stream.getVideoTracks()[0]),y&&e>=15019&&f.kind==="video"&&!f.sendEncodingParameters[0].rtx&&(f.sendEncodingParameters[0].rtx={ssrc:f.sendEncodingParameters[0].ssrc+1})}var v=vl(f.localCapabilities,f.remoteCapabilities),C=v.codecs.filter(function(m){return m.name.toLowerCase()==="rtx"}).length;!C&&f.sendEncodingParameters[0].rtx&&delete f.sendEncodingParameters[0].rtx,c+=rv(f,v,"answer",f.stream,a._dtlsRole),f.rtcpParameters&&f.rtcpParameters.reducedSize&&(c+=`a=rtcp-rsize\r
`)}});var d=new t.RTCSessionDescription({type:"answer",sdp:c});return Promise.resolve(d)},s.prototype.addIceCandidate=function(a){var c=this,u;return a&&!(a.sdpMLineIndex!==void 0||a.sdpMid)?Promise.reject(new TypeError("sdpMLineIndex or sdpMid required")):new Promise(function(d,f){if(c._remoteDescription)if(!a||a.candidate==="")for(var p=0;p<c.transceivers.length&&!(!c.transceivers[p].rejected&&(c.transceivers[p].iceTransport.addRemoteCandidate({}),u=J.getMediaSections(c._remoteDescription.sdp),u[p]+=`a=end-of-candidates\r
`,c._remoteDescription.sdp=J.getDescription(c._remoteDescription.sdp)+u.join(""),c.usingBundle));p++);else{var y=a.sdpMLineIndex;if(a.sdpMid){for(var v=0;v<c.transceivers.length;v++)if(c.transceivers[v].mid===a.sdpMid){y=v;break}}var C=c.transceivers[y];if(C){if(C.rejected)return d();var m=Object.keys(a.candidate).length>0?J.parseCandidate(a.candidate):{};if(m.protocol==="tcp"&&(m.port===0||m.port===9)||m.component&&m.component!==1)return d();if((y===0||y>0&&C.iceTransport!==c.transceivers[0].iceTransport)&&!Od(C.iceTransport,m))return f(yt("OperationError","Can not add ICE candidate"));var g=a.candidate.trim();g.indexOf("a=")===0&&(g=g.substr(2)),u=J.getMediaSections(c._remoteDescription.sdp),u[y]+="a="+(m.type?g:"end-of-candidates")+`\r
`,c._remoteDescription.sdp=J.getDescription(c._remoteDescription.sdp)+u.join("")}else return f(yt("OperationError","Can not add ICE candidate"))}else return f(yt("InvalidStateError","Can not add ICE candidate without a remote description"));d()})},s.prototype.getStats=function(a){if(a&&a instanceof t.MediaStreamTrack){var c=null;if(this.transceivers.forEach(function(d){d.rtpSender&&d.rtpSender.track===a?c=d.rtpSender:d.rtpReceiver&&d.rtpReceiver.track===a&&(c=d.rtpReceiver)}),!c)throw yt("InvalidAccessError","Invalid selector.");return c.getStats()}var u=[];return this.transceivers.forEach(function(d){["rtpSender","rtpReceiver","iceGatherer","iceTransport","dtlsTransport"].forEach(function(f){d[f]&&u.push(d[f].getStats())})}),Promise.all(u).then(function(d){var f=new Map;return d.forEach(function(p){p.forEach(function(y){f.set(y.id,y)})}),f})};var o=["RTCRtpSender","RTCRtpReceiver","RTCIceGatherer","RTCIceTransport","RTCDtlsTransport"];o.forEach(function(a){var c=t[a];if(c&&c.prototype&&c.prototype.getStats){var u=c.prototype.getStats;c.prototype.getStats=function(){return u.apply(this).then(function(d){var f=new Map;return Object.keys(d).forEach(function(p){d[p].type=MI(d[p]),f.set(p,d[p])}),f})}}});var l=["createOffer","createAnswer"];return l.forEach(function(a){var c=s.prototype[a];s.prototype[a]=function(){var u=arguments;return typeof u[0]=="function"||typeof u[1]=="function"?c.apply(this,[arguments[2]]).then(function(d){typeof u[0]=="function"&&u[0].apply(null,[d])},function(d){typeof u[1]=="function"&&u[1].apply(null,[d])}):c.apply(this,arguments)}}),l=["setLocalDescription","setRemoteDescription","addIceCandidate"],l.forEach(function(a){var c=s.prototype[a];s.prototype[a]=function(){var u=arguments;return typeof u[1]=="function"||typeof u[2]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)},function(d){typeof u[2]=="function"&&u[2].apply(null,[d])}):c.apply(this,arguments)}}),["getStats"].forEach(function(a){var c=s.prototype[a];s.prototype[a]=function(){var u=arguments;return typeof u[1]=="function"?c.apply(this,arguments).then(function(){typeof u[1]=="function"&&u[1].apply(null)}):c.apply(this,arguments)}}),s};const VI=Qf(jI);function $1(t){const e=t&&t.navigator,n=function(i){return{name:{PermissionDeniedError:"NotAllowedError"}[i.name]||i.name,message:i.message,constraint:i.constraint,toString(){return this.name}}},r=e.mediaDevices.getUserMedia.bind(e.mediaDevices);e.mediaDevices.getUserMedia=function(i){return r(i).catch(s=>Promise.reject(n(s)))}}function B1(t){"getDisplayMedia"in t.navigator&&t.navigator.mediaDevices&&(t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||(t.navigator.mediaDevices.getDisplayMedia=t.navigator.getDisplayMedia.bind(t.navigator)))}function af(t,e){if(t.RTCIceGatherer&&(t.RTCIceCandidate||(t.RTCIceCandidate=function(i){return i}),t.RTCSessionDescription||(t.RTCSessionDescription=function(i){return i}),e.version<15025)){const r=Object.getOwnPropertyDescriptor(t.MediaStreamTrack.prototype,"enabled");Object.defineProperty(t.MediaStreamTrack.prototype,"enabled",{set(i){r.set.call(this,i);const s=new Event("enabled");s.enabled=i,this.dispatchEvent(s)}})}t.RTCRtpSender&&!("dtmf"in t.RTCRtpSender.prototype)&&Object.defineProperty(t.RTCRtpSender.prototype,"dtmf",{get(){return this._dtmf===void 0&&(this.track.kind==="audio"?this._dtmf=new t.RTCDtmfSender(this):this.track.kind==="video"&&(this._dtmf=null)),this._dtmf}}),t.RTCDtmfSender&&!t.RTCDTMFSender&&(t.RTCDTMFSender=t.RTCDtmfSender);const n=VI(t,e.version);t.RTCPeerConnection=function(i){return i&&i.iceServers&&(i.iceServers=DI(i.iceServers,e.version),Zp("ICE servers after filtering:",i.iceServers)),new n(i)},t.RTCPeerConnection.prototype=n.prototype}function z1(t){t.RTCRtpSender&&!("replaceTrack"in t.RTCRtpSender.prototype)&&(t.RTCRtpSender.prototype.replaceTrack=t.RTCRtpSender.prototype.setTrack)}const sv=Object.freeze(Object.defineProperty({__proto__:null,shimGetDisplayMedia:B1,shimGetUserMedia:$1,shimPeerConnection:af,shimReplaceTrack:z1},Symbol.toStringTag,{value:"Module"}));function q1(t,e){const n=t&&t.navigator,r=t&&t.MediaStreamTrack;if(n.getUserMedia=function(i,s,o){Su("navigator.getUserMedia","navigator.mediaDevices.getUserMedia"),n.mediaDevices.getUserMedia(i).then(s,o)},!(e.version>55&&"autoGainControl"in n.mediaDevices.getSupportedConstraints())){const i=function(o,l,a){l in o&&!(a in o)&&(o[a]=o[l],delete o[l])},s=n.mediaDevices.getUserMedia.bind(n.mediaDevices);if(n.mediaDevices.getUserMedia=function(o){return typeof o=="object"&&typeof o.audio=="object"&&(o=JSON.parse(JSON.stringify(o)),i(o.audio,"autoGainControl","mozAutoGainControl"),i(o.audio,"noiseSuppression","mozNoiseSuppression")),s(o)},r&&r.prototype.getSettings){const o=r.prototype.getSettings;r.prototype.getSettings=function(){const l=o.apply(this,arguments);return i(l,"mozAutoGainControl","autoGainControl"),i(l,"mozNoiseSuppression","noiseSuppression"),l}}if(r&&r.prototype.applyConstraints){const o=r.prototype.applyConstraints;r.prototype.applyConstraints=function(l){return this.kind==="audio"&&typeof l=="object"&&(l=JSON.parse(JSON.stringify(l)),i(l,"autoGainControl","mozAutoGainControl"),i(l,"noiseSuppression","mozNoiseSuppression")),o.apply(this,[l])}}}}function FI(t,e){t.navigator.mediaDevices&&"getDisplayMedia"in t.navigator.mediaDevices||t.navigator.mediaDevices&&(t.navigator.mediaDevices.getDisplayMedia=function(r){if(!(r&&r.video)){const i=new DOMException("getDisplayMedia without video constraints is undefined");return i.name="NotFoundError",i.code=8,Promise.reject(i)}return r.video===!0?r.video={mediaSource:e}:r.video.mediaSource=e,t.navigator.mediaDevices.getUserMedia(r)})}function H1(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function lf(t,e){if(typeof t!="object"||!(t.RTCPeerConnection||t.mozRTCPeerConnection))return;!t.RTCPeerConnection&&t.mozRTCPeerConnection&&(t.RTCPeerConnection=t.mozRTCPeerConnection),e.version<53&&["setLocalDescription","setRemoteDescription","addIceCandidate"].forEach(function(i){const s=t.RTCPeerConnection.prototype[i],o={[i](){return arguments[0]=new(i==="addIceCandidate"?t.RTCIceCandidate:t.RTCSessionDescription)(arguments[0]),s.apply(this,arguments)}};t.RTCPeerConnection.prototype[i]=o[i]});const n={inboundrtp:"inbound-rtp",outboundrtp:"outbound-rtp",candidatepair:"candidate-pair",localcandidate:"local-candidate",remotecandidate:"remote-candidate"},r=t.RTCPeerConnection.prototype.getStats;t.RTCPeerConnection.prototype.getStats=function(){const[s,o,l]=arguments;return r.apply(this,[s||null]).then(a=>{if(e.version<53&&!o)try{a.forEach(c=>{c.type=n[c.type]||c.type})}catch(c){if(c.name!=="TypeError")throw c;a.forEach((u,d)=>{a.set(d,Object.assign({},u,{type:n[u.type]||u.type}))})}return a}).then(o,l)}}function W1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpSender.prototype)return;const e=t.RTCPeerConnection.prototype.getSenders;e&&(t.RTCPeerConnection.prototype.getSenders=function(){const i=e.apply(this,[]);return i.forEach(s=>s._pc=this),i});const n=t.RTCPeerConnection.prototype.addTrack;n&&(t.RTCPeerConnection.prototype.addTrack=function(){const i=n.apply(this,arguments);return i._pc=this,i}),t.RTCRtpSender.prototype.getStats=function(){return this.track?this._pc.getStats(this.track):Promise.resolve(new Map)}}function K1(t){if(!(typeof t=="object"&&t.RTCPeerConnection&&t.RTCRtpSender)||t.RTCRtpSender&&"getStats"in t.RTCRtpReceiver.prototype)return;const e=t.RTCPeerConnection.prototype.getReceivers;e&&(t.RTCPeerConnection.prototype.getReceivers=function(){const r=e.apply(this,[]);return r.forEach(i=>i._pc=this),r}),js(t,"track",n=>(n.receiver._pc=n.srcElement,n)),t.RTCRtpReceiver.prototype.getStats=function(){return this._pc.getStats(this.track)}}function G1(t){!t.RTCPeerConnection||"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){Su("removeStream","removeTrack"),this.getSenders().forEach(r=>{r.track&&n.getTracks().includes(r.track)&&this.removeTrack(r)})})}function J1(t){t.DataChannel&&!t.RTCDataChannel&&(t.RTCDataChannel=t.DataChannel)}function Q1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.addTransceiver;e&&(t.RTCPeerConnection.prototype.addTransceiver=function(){this.setParametersPromises=[];const r=arguments[1],i=r&&"sendEncodings"in r;i&&r.sendEncodings.forEach(o=>{if("rid"in o&&!/^[a-z0-9]{0,16}$/i.test(o.rid))throw new TypeError("Invalid RID value provided.");if("scaleResolutionDownBy"in o&&!(parseFloat(o.scaleResolutionDownBy)>=1))throw new RangeError("scale_resolution_down_by must be >= 1.0");if("maxFramerate"in o&&!(parseFloat(o.maxFramerate)>=0))throw new RangeError("max_framerate must be >= 0.0")});const s=e.apply(this,arguments);if(i){const{sender:o}=s,l=o.getParameters();(!("encodings"in l)||l.encodings.length===1&&Object.keys(l.encodings[0]).length===0)&&(l.encodings=r.sendEncodings,o.sendEncodings=r.sendEncodings,this.setParametersPromises.push(o.setParameters(l).then(()=>{delete o.sendEncodings}).catch(()=>{delete o.sendEncodings})))}return s})}function Y1(t){if(!(typeof t=="object"&&t.RTCRtpSender))return;const e=t.RTCRtpSender.prototype.getParameters;e&&(t.RTCRtpSender.prototype.getParameters=function(){const r=e.apply(this,arguments);return"encodings"in r||(r.encodings=[].concat(this.sendEncodings||[{}])),r})}function X1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}function Z1(t){if(!(typeof t=="object"&&t.RTCPeerConnection))return;const e=t.RTCPeerConnection.prototype.createAnswer;t.RTCPeerConnection.prototype.createAnswer=function(){return this.setParametersPromises&&this.setParametersPromises.length?Promise.all(this.setParametersPromises).then(()=>e.apply(this,arguments)).finally(()=>{this.setParametersPromises=[]}):e.apply(this,arguments)}}const ov=Object.freeze(Object.defineProperty({__proto__:null,shimAddTransceiver:Q1,shimCreateAnswer:Z1,shimCreateOffer:X1,shimGetDisplayMedia:FI,shimGetParameters:Y1,shimGetUserMedia:q1,shimOnTrack:H1,shimPeerConnection:lf,shimRTCDataChannel:J1,shimReceiverGetStats:K1,shimRemoveStream:G1,shimSenderGetStats:W1},Symbol.toStringTag,{value:"Module"}));function eT(t){if(!(typeof t!="object"||!t.RTCPeerConnection)){if("getLocalStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getLocalStreams=function(){return this._localStreams||(this._localStreams=[]),this._localStreams}),!("addStream"in t.RTCPeerConnection.prototype)){const e=t.RTCPeerConnection.prototype.addTrack;t.RTCPeerConnection.prototype.addStream=function(r){this._localStreams||(this._localStreams=[]),this._localStreams.includes(r)||this._localStreams.push(r),r.getAudioTracks().forEach(i=>e.call(this,i,r)),r.getVideoTracks().forEach(i=>e.call(this,i,r))},t.RTCPeerConnection.prototype.addTrack=function(r,...i){return i&&i.forEach(s=>{this._localStreams?this._localStreams.includes(s)||this._localStreams.push(s):this._localStreams=[s]}),e.apply(this,arguments)}}"removeStream"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.removeStream=function(n){this._localStreams||(this._localStreams=[]);const r=this._localStreams.indexOf(n);if(r===-1)return;this._localStreams.splice(r,1);const i=n.getTracks();this.getSenders().forEach(s=>{i.includes(s.track)&&this.removeTrack(s)})})}}function tT(t){if(!(typeof t!="object"||!t.RTCPeerConnection)&&("getRemoteStreams"in t.RTCPeerConnection.prototype||(t.RTCPeerConnection.prototype.getRemoteStreams=function(){return this._remoteStreams?this._remoteStreams:[]}),!("onaddstream"in t.RTCPeerConnection.prototype))){Object.defineProperty(t.RTCPeerConnection.prototype,"onaddstream",{get(){return this._onaddstream},set(n){this._onaddstream&&(this.removeEventListener("addstream",this._onaddstream),this.removeEventListener("track",this._onaddstreampoly)),this.addEventListener("addstream",this._onaddstream=n),this.addEventListener("track",this._onaddstreampoly=r=>{r.streams.forEach(i=>{if(this._remoteStreams||(this._remoteStreams=[]),this._remoteStreams.includes(i))return;this._remoteStreams.push(i);const s=new Event("addstream");s.stream=i,this.dispatchEvent(s)})})}});const e=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){const r=this;return this._onaddstreampoly||this.addEventListener("track",this._onaddstreampoly=function(i){i.streams.forEach(s=>{if(r._remoteStreams||(r._remoteStreams=[]),r._remoteStreams.indexOf(s)>=0)return;r._remoteStreams.push(s);const o=new Event("addstream");o.stream=s,r.dispatchEvent(o)})}),e.apply(r,arguments)}}}function nT(t){if(typeof t!="object"||!t.RTCPeerConnection)return;const e=t.RTCPeerConnection.prototype,n=e.createOffer,r=e.createAnswer,i=e.setLocalDescription,s=e.setRemoteDescription,o=e.addIceCandidate;e.createOffer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=n.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f},e.createAnswer=function(c,u){const d=arguments.length>=2?arguments[2]:arguments[0],f=r.apply(this,[d]);return u?(f.then(c,u),Promise.resolve()):f};let l=function(a,c,u){const d=i.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d};e.setLocalDescription=l,l=function(a,c,u){const d=s.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d},e.setRemoteDescription=l,l=function(a,c,u){const d=o.apply(this,[a]);return u?(d.then(c,u),Promise.resolve()):d},e.addIceCandidate=l}function rT(t){const e=t&&t.navigator;if(e.mediaDevices&&e.mediaDevices.getUserMedia){const n=e.mediaDevices,r=n.getUserMedia.bind(n);e.mediaDevices.getUserMedia=i=>r(iT(i))}!e.getUserMedia&&e.mediaDevices&&e.mediaDevices.getUserMedia&&(e.getUserMedia=(function(r,i,s){e.mediaDevices.getUserMedia(r).then(i,s)}).bind(e))}function iT(t){return t&&t.video!==void 0?Object.assign({},t,{video:A1(t.video)}):t}function sT(t){if(!t.RTCPeerConnection)return;const e=t.RTCPeerConnection;t.RTCPeerConnection=function(r,i){if(r&&r.iceServers){const s=[];for(let o=0;o<r.iceServers.length;o++){let l=r.iceServers[o];!l.hasOwnProperty("urls")&&l.hasOwnProperty("url")?(Su("RTCIceServer.url","RTCIceServer.urls"),l=JSON.parse(JSON.stringify(l)),l.urls=l.url,delete l.url,s.push(l)):s.push(r.iceServers[o])}r.iceServers=s}return new e(r,i)},t.RTCPeerConnection.prototype=e.prototype,"generateCertificate"in e&&Object.defineProperty(t.RTCPeerConnection,"generateCertificate",{get(){return e.generateCertificate}})}function oT(t){typeof t=="object"&&t.RTCTrackEvent&&"receiver"in t.RTCTrackEvent.prototype&&!("transceiver"in t.RTCTrackEvent.prototype)&&Object.defineProperty(t.RTCTrackEvent.prototype,"transceiver",{get(){return{receiver:this.receiver}}})}function aT(t){const e=t.RTCPeerConnection.prototype.createOffer;t.RTCPeerConnection.prototype.createOffer=function(r){if(r){typeof r.offerToReceiveAudio<"u"&&(r.offerToReceiveAudio=!!r.offerToReceiveAudio);const i=this.getTransceivers().find(o=>o.receiver.track.kind==="audio");r.offerToReceiveAudio===!1&&i?i.direction==="sendrecv"?i.setDirection?i.setDirection("sendonly"):i.direction="sendonly":i.direction==="recvonly"&&(i.setDirection?i.setDirection("inactive"):i.direction="inactive"):r.offerToReceiveAudio===!0&&!i&&this.addTransceiver("audio"),typeof r.offerToReceiveVideo<"u"&&(r.offerToReceiveVideo=!!r.offerToReceiveVideo);const s=this.getTransceivers().find(o=>o.receiver.track.kind==="video");r.offerToReceiveVideo===!1&&s?s.direction==="sendrecv"?s.setDirection?s.setDirection("sendonly"):s.direction="sendonly":s.direction==="recvonly"&&(s.setDirection?s.setDirection("inactive"):s.direction="inactive"):r.offerToReceiveVideo===!0&&!s&&this.addTransceiver("video")}return e.apply(this,arguments)}}function lT(t){typeof t!="object"||t.AudioContext||(t.AudioContext=t.webkitAudioContext)}const av=Object.freeze(Object.defineProperty({__proto__:null,shimAudioContext:lT,shimCallbacksAPI:nT,shimConstraints:iT,shimCreateOfferLegacy:aT,shimGetUserMedia:rT,shimLocalStreamsAPI:eT,shimRTCIceServerUrls:sT,shimRemoteStreamsAPI:tT,shimTrackEventTransceiver:oT},Symbol.toStringTag,{value:"Module"}));function Gl(t){if(!t.RTCIceCandidate||t.RTCIceCandidate&&"foundation"in t.RTCIceCandidate.prototype)return;const e=t.RTCIceCandidate;t.RTCIceCandidate=function(r){if(typeof r=="object"&&r.candidate&&r.candidate.indexOf("a=")===0&&(r=JSON.parse(JSON.stringify(r)),r.candidate=r.candidate.substr(2)),r.candidate&&r.candidate.length){const i=new e(r),s=Kl.parseCandidate(r.candidate),o=Object.assign(i,s);return o.toJSON=function(){return{candidate:o.candidate,sdpMid:o.sdpMid,sdpMLineIndex:o.sdpMLineIndex,usernameFragment:o.usernameFragment}},o}return new e(r)},t.RTCIceCandidate.prototype=e.prototype,js(t,"icecandidate",n=>(n.candidate&&Object.defineProperty(n,"candidate",{value:new t.RTCIceCandidate(n.candidate),writable:"false"}),n))}function mo(t,e){if(!t.RTCPeerConnection)return;"sctp"in t.RTCPeerConnection.prototype||Object.defineProperty(t.RTCPeerConnection.prototype,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp}});const n=function(l){if(!l||!l.sdp)return!1;const a=Kl.splitSections(l.sdp);return a.shift(),a.some(c=>{const u=Kl.parseMLine(c);return u&&u.kind==="application"&&u.protocol.indexOf("SCTP")!==-1})},r=function(l){const a=l.sdp.match(/mozilla...THIS_IS_SDPARTA-(\d+)/);if(a===null||a.length<2)return-1;const c=parseInt(a[1],10);return c!==c?-1:c},i=function(l){let a=65536;return e.browser==="firefox"&&(e.version<57?l===-1?a=16384:a=2147483637:e.version<60?a=e.version===57?65535:65536:a=2147483637),a},s=function(l,a){let c=65536;e.browser==="firefox"&&e.version===57&&(c=65535);const u=Kl.matchPrefix(l.sdp,"a=max-message-size:");return u.length>0?c=parseInt(u[0].substr(19),10):e.browser==="firefox"&&a!==-1&&(c=2147483637),c},o=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(){if(this._sctp=null,e.browser==="chrome"&&e.version>=76){const{sdpSemantics:a}=this.getConfiguration();a==="plan-b"&&Object.defineProperty(this,"sctp",{get(){return typeof this._sctp>"u"?null:this._sctp},enumerable:!0,configurable:!0})}if(n(arguments[0])){const a=r(arguments[0]),c=i(a),u=s(arguments[0],a);let d;c===0&&u===0?d=Number.POSITIVE_INFINITY:c===0||u===0?d=Math.max(c,u):d=Math.min(c,u);const f={};Object.defineProperty(f,"maxMessageSize",{get(){return d}}),this._sctp=f}return o.apply(this,arguments)}}function go(t){if(!(t.RTCPeerConnection&&"createDataChannel"in t.RTCPeerConnection.prototype))return;function e(r,i){const s=r.send;r.send=function(){const l=arguments[0],a=l.length||l.size||l.byteLength;if(r.readyState==="open"&&i.sctp&&a>i.sctp.maxMessageSize)throw new TypeError("Message too large (can send a maximum of "+i.sctp.maxMessageSize+" bytes)");return s.apply(r,arguments)}}const n=t.RTCPeerConnection.prototype.createDataChannel;t.RTCPeerConnection.prototype.createDataChannel=function(){const i=n.apply(this,arguments);return e(i,this),i},js(t,"datachannel",r=>(e(r.channel,r.target),r))}function cf(t){if(!t.RTCPeerConnection||"connectionState"in t.RTCPeerConnection.prototype)return;const e=t.RTCPeerConnection.prototype;Object.defineProperty(e,"connectionState",{get(){return{completed:"connected",checking:"connecting"}[this.iceConnectionState]||this.iceConnectionState},enumerable:!0,configurable:!0}),Object.defineProperty(e,"onconnectionstatechange",{get(){return this._onconnectionstatechange||null},set(n){this._onconnectionstatechange&&(this.removeEventListener("connectionstatechange",this._onconnectionstatechange),delete this._onconnectionstatechange),n&&this.addEventListener("connectionstatechange",this._onconnectionstatechange=n)},enumerable:!0,configurable:!0}),["setLocalDescription","setRemoteDescription"].forEach(n=>{const r=e[n];e[n]=function(){return this._connectionstatechangepoly||(this._connectionstatechangepoly=i=>{const s=i.target;if(s._lastConnectionState!==s.connectionState){s._lastConnectionState=s.connectionState;const o=new Event("connectionstatechange",i);s.dispatchEvent(o)}return i},this.addEventListener("iceconnectionstatechange",this._connectionstatechangepoly)),r.apply(this,arguments)}})}function uf(t,e){if(!t.RTCPeerConnection||e.browser==="chrome"&&e.version>=71||e.browser==="safari"&&e.version>=605)return;const n=t.RTCPeerConnection.prototype.setRemoteDescription;t.RTCPeerConnection.prototype.setRemoteDescription=function(i){if(i&&i.sdp&&i.sdp.indexOf(`
a=extmap-allow-mixed`)!==-1){const s=i.sdp.split(`
`).filter(o=>o.trim()!=="a=extmap-allow-mixed").join(`
`);t.RTCSessionDescription&&i instanceof t.RTCSessionDescription?arguments[0]=new t.RTCSessionDescription({type:i.type,sdp:s}):i.sdp=s}return n.apply(this,arguments)}}function Jl(t,e){if(!(t.RTCPeerConnection&&t.RTCPeerConnection.prototype))return;const n=t.RTCPeerConnection.prototype.addIceCandidate;!n||n.length===0||(t.RTCPeerConnection.prototype.addIceCandidate=function(){return arguments[0]?(e.browser==="chrome"&&e.version<78||e.browser==="firefox"&&e.version<68||e.browser==="safari")&&arguments[0]&&arguments[0].candidate===""?Promise.resolve():n.apply(this,arguments):(arguments[1]&&arguments[1].apply(null),Promise.resolve())})}const UI=Object.freeze(Object.defineProperty({__proto__:null,removeExtmapAllowMixed:uf,shimAddIceCandidateNullOrEmpty:Jl,shimConnectionState:cf,shimMaxMessageSize:mo,shimRTCIceCandidate:Gl,shimSendThrowTypeError:go},Symbol.toStringTag,{value:"Module"}));function $I({window:t}={},e={shimChrome:!0,shimFirefox:!0,shimEdge:!0,shimSafari:!0}){const n=Zp,r=OI(t),i={browserDetails:r,commonShim:UI,extractVersion:po,disableLog:bI,disableWarnings:xI};switch(r.browser){case"chrome":if(!nv||!of||!e.shimChrome)return n("Chrome shim is not included in this adapter release."),i;if(r.version===null)return n("Chrome shim can not determine version, not shimming."),i;n("adapter.js shimming chrome."),i.browserShim=nv,Jl(t,r),b1(t,r),x1(t),of(t,r),O1(t),j1(t,r),N1(t),D1(t),M1(t),V1(t,r),Gl(t),cf(t),mo(t,r),go(t),uf(t,r);break;case"firefox":if(!ov||!lf||!e.shimFirefox)return n("Firefox shim is not included in this adapter release."),i;n("adapter.js shimming firefox."),i.browserShim=ov,Jl(t,r),q1(t,r),lf(t,r),H1(t),G1(t),W1(t),K1(t),J1(t),Q1(t),Y1(t),X1(t),Z1(t),Gl(t),cf(t),mo(t,r),go(t);break;case"edge":if(!sv||!af||!e.shimEdge)return n("MS edge shim is not included in this adapter release."),i;n("adapter.js shimming edge."),i.browserShim=sv,$1(t),B1(t),af(t,r),z1(t),mo(t,r),go(t);break;case"safari":if(!av||!e.shimSafari)return n("Safari shim is not included in this adapter release."),i;n("adapter.js shimming safari."),i.browserShim=av,Jl(t,r),sT(t),aT(t),nT(t),eT(t),tT(t),oT(t),rT(t),lT(t),Gl(t),mo(t,r),go(t),uf(t,r);break;default:n("Unsupported browser!");break}return i}const lv=$I({window:typeof window>"u"?void 0:window});function Hn(t,e,n,r){Object.defineProperty(t,e,{get:n,set:r,enumerable:!0,configurable:!0})}var Nd=lv.default||lv,ro=new(function(){function t(){this.isIOS=["iPad","iPhone","iPod"].includes(navigator.platform),this.supportedBrowsers=["firefox","chrome","safari"],this.minFirefoxVersion=59,this.minChromeVersion=72,this.minSafariVersion=605}return t.prototype.isWebRTCSupported=function(){return typeof RTCPeerConnection<"u"},t.prototype.isBrowserSupported=function(){var e=this.getBrowser(),n=this.getVersion(),r=this.supportedBrowsers.includes(e);return r?e==="chrome"?n>=this.minChromeVersion:e==="firefox"?n>=this.minFirefoxVersion:e==="safari"?!this.isIOS&&n>=this.minSafariVersion:!1:!1},t.prototype.getBrowser=function(){return Nd.browserDetails.browser},t.prototype.getVersion=function(){return Nd.browserDetails.version||0},t.prototype.isUnifiedPlanSupported=function(){var e=this.getBrowser(),n=Nd.browserDetails.version||0;if(e==="chrome"&&n<this.minChromeVersion)return!1;if(e==="firefox"&&n>=this.minFirefoxVersion)return!0;if(!window.RTCRtpTransceiver||!("currentDirection"in RTCRtpTransceiver.prototype))return!1;var r,i=!1;try{r=new RTCPeerConnection,r.addTransceiver("audio"),i=!0}catch{}finally{r&&r.close()}return i},t.prototype.toString=function(){return`Supports:
    browser:`.concat(this.getBrowser(),`
    version:`).concat(this.getVersion(),`
    isIOS:`).concat(this.isIOS,`
    isWebRTCSupported:`).concat(this.isWebRTCSupported(),`
    isBrowserSupported:`).concat(this.isBrowserSupported(),`
    isUnifiedPlanSupported:`).concat(this.isUnifiedPlanSupported())},t}()),cv={iceServers:[{urls:"stun:stun.l.google.com:19302"},{urls:["turn:eu-0.turn.peerjs.com:3478","turn:us-0.turn.peerjs.com:3478"],username:"peerjs",credential:"peerjsp"}],sdpSemantics:"unified-plan"},BI=function(){function t(){this.CLOUD_HOST="0.peerjs.com",this.CLOUD_PORT=443,this.chunkedBrowsers={Chrome:1,chrome:1},this.chunkedMTU=16300,this.defaultConfig=cv,this.browser=ro.getBrowser(),this.browserVersion=ro.getVersion(),this.supports=function(){var e={browser:ro.isBrowserSupported(),webRTC:ro.isWebRTCSupported(),audioVideo:!1,data:!1,binaryBlob:!1,reliable:!1};if(!e.webRTC)return e;var n;try{n=new RTCPeerConnection(cv),e.audioVideo=!0;var r=void 0;try{r=n.createDataChannel("_PEERJSTEST",{ordered:!0}),e.data=!0,e.reliable=!!r.ordered;try{r.binaryType="blob",e.binaryBlob=!ro.isIOS}catch{}}catch{}finally{r&&r.close()}}catch{}finally{n&&n.close()}return e}(),this.pack=Xy.pack,this.unpack=Xy.unpack,this._dataCount=1}return t.prototype.noop=function(){},t.prototype.validateId=function(e){return!e||/^[A-Za-z0-9]+(?:[ _-][A-Za-z0-9]+)*$/.test(e)},t.prototype.chunk=function(e){for(var n=[],r=e.size,i=Math.ceil(r/ve.chunkedMTU),s=0,o=0;o<r;){var l=Math.min(r,o+ve.chunkedMTU),a=e.slice(o,l),c={__peerData:this._dataCount,n:s,data:a,total:i};n.push(c),o=l,s++}return this._dataCount++,n},t.prototype.blobToArrayBuffer=function(e,n){var r=new FileReader;return r.onload=function(i){i.target&&n(i.target.result)},r.readAsArrayBuffer(e),r},t.prototype.binaryStringToArrayBuffer=function(e){for(var n=new Uint8Array(e.length),r=0;r<e.length;r++)n[r]=e.charCodeAt(r)&255;return n.buffer},t.prototype.randomToken=function(){return Math.random().toString(36).slice(2)},t.prototype.isSecure=function(){return location.protocol==="https:"},t}(),ve=new BI,cT={};Hn(cT,"Peer",()=>Ev,t=>Ev=t);var Aa={},zI=Object.prototype.hasOwnProperty,Dt="~";function ra(){}Object.create&&(ra.prototype=Object.create(null),new ra().__proto__||(Dt=!1));function qI(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function uT(t,e,n,r,i){if(typeof n!="function")throw new TypeError("The listener must be a function");var s=new qI(n,r||t,i),o=Dt?Dt+e:e;return t._events[o]?t._events[o].fn?t._events[o]=[t._events[o],s]:t._events[o].push(s):(t._events[o]=s,t._eventsCount++),t}function Ql(t,e){--t._eventsCount===0?t._events=new ra:delete t._events[e]}function kt(){this._events=new ra,this._eventsCount=0}kt.prototype.eventNames=function(){var e=[],n,r;if(this._eventsCount===0)return e;for(r in n=this._events)zI.call(n,r)&&e.push(Dt?r.slice(1):r);return Object.getOwnPropertySymbols?e.concat(Object.getOwnPropertySymbols(n)):e};kt.prototype.listeners=function(e){var n=Dt?Dt+e:e,r=this._events[n];if(!r)return[];if(r.fn)return[r.fn];for(var i=0,s=r.length,o=new Array(s);i<s;i++)o[i]=r[i].fn;return o};kt.prototype.listenerCount=function(e){var n=Dt?Dt+e:e,r=this._events[n];return r?r.fn?1:r.length:0};kt.prototype.emit=function(e,n,r,i,s,o){var l=Dt?Dt+e:e;if(!this._events[l])return!1;var a=this._events[l],c=arguments.length,u,d;if(a.fn){switch(a.once&&this.removeListener(e,a.fn,void 0,!0),c){case 1:return a.fn.call(a.context),!0;case 2:return a.fn.call(a.context,n),!0;case 3:return a.fn.call(a.context,n,r),!0;case 4:return a.fn.call(a.context,n,r,i),!0;case 5:return a.fn.call(a.context,n,r,i,s),!0;case 6:return a.fn.call(a.context,n,r,i,s,o),!0}for(d=1,u=new Array(c-1);d<c;d++)u[d-1]=arguments[d];a.fn.apply(a.context,u)}else{var f=a.length,p;for(d=0;d<f;d++)switch(a[d].once&&this.removeListener(e,a[d].fn,void 0,!0),c){case 1:a[d].fn.call(a[d].context);break;case 2:a[d].fn.call(a[d].context,n);break;case 3:a[d].fn.call(a[d].context,n,r);break;case 4:a[d].fn.call(a[d].context,n,r,i);break;default:if(!u)for(p=1,u=new Array(c-1);p<c;p++)u[p-1]=arguments[p];a[d].fn.apply(a[d].context,u)}}return!0};kt.prototype.on=function(e,n,r){return uT(this,e,n,r,!1)};kt.prototype.once=function(e,n,r){return uT(this,e,n,r,!0)};kt.prototype.removeListener=function(e,n,r,i){var s=Dt?Dt+e:e;if(!this._events[s])return this;if(!n)return Ql(this,s),this;var o=this._events[s];if(o.fn)o.fn===n&&(!i||o.once)&&(!r||o.context===r)&&Ql(this,s);else{for(var l=0,a=[],c=o.length;l<c;l++)(o[l].fn!==n||i&&!o[l].once||r&&o[l].context!==r)&&a.push(o[l]);a.length?this._events[s]=a.length===1?a[0]:a:Ql(this,s)}return this};kt.prototype.removeAllListeners=function(e){var n;return e?(n=Dt?Dt+e:e,this._events[n]&&Ql(this,n)):(this._events=new ra,this._eventsCount=0),this};kt.prototype.off=kt.prototype.removeListener;kt.prototype.addListener=kt.prototype.on;kt.prefixed=Dt;kt.EventEmitter=kt;Aa=kt;var B={};Hn(B,"LogLevel",()=>jt,t=>jt=t);Hn(B,"default",()=>uv,t=>uv=t);var ni=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},ri=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},HI="PeerJS: ",jt;(function(t){t[t.Disabled=0]="Disabled",t[t.Errors=1]="Errors",t[t.Warnings=2]="Warnings",t[t.All=3]="All"})(jt||(jt={}));var WI=function(){function t(){this._logLevel=jt.Disabled}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(e){this._logLevel=e},enumerable:!1,configurable:!0}),t.prototype.log=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=jt.All&&this._print.apply(this,ri([jt.All],ni(e),!1))},t.prototype.warn=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=jt.Warnings&&this._print.apply(this,ri([jt.Warnings],ni(e),!1))},t.prototype.error=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];this._logLevel>=jt.Errors&&this._print.apply(this,ri([jt.Errors],ni(e),!1))},t.prototype.setLogFunction=function(e){this._print=e},t.prototype._print=function(e){for(var n=[],r=1;r<arguments.length;r++)n[r-1]=arguments[r];var i=ri([HI],ni(n),!1);for(var s in i)i[s]instanceof Error&&(i[s]="("+i[s].name+") "+i[s].message);e>=jt.All?console.log.apply(console,ri([],ni(i),!1)):e>=jt.Warnings?console.warn.apply(console,ri(["WARNING"],ni(i),!1)):e>=jt.Errors&&console.error.apply(console,ri(["ERROR"],ni(i),!1))},t}(),uv=new WI,dT={};Hn(dT,"Socket",()=>dv,t=>dv=t);var En;(function(t){t.Data="data",t.Media="media"})(En||(En={}));var $e;(function(t){t.BrowserIncompatible="browser-incompatible",t.Disconnected="disconnected",t.InvalidID="invalid-id",t.InvalidKey="invalid-key",t.Network="network",t.PeerUnavailable="peer-unavailable",t.SslUnavailable="ssl-unavailable",t.ServerError="server-error",t.SocketError="socket-error",t.SocketClosed="socket-closed",t.UnavailableID="unavailable-id",t.WebRTC="webrtc"})($e||($e={}));var Gn;(function(t){t.Binary="binary",t.BinaryUTF8="binary-utf8",t.JSON="json"})(Gn||(Gn={}));var Xn;(function(t){t.Message="message",t.Disconnected="disconnected",t.Error="error",t.Close="close"})(Xn||(Xn={}));var at;(function(t){t.Heartbeat="HEARTBEAT",t.Candidate="CANDIDATE",t.Offer="OFFER",t.Answer="ANSWER",t.Open="OPEN",t.Error="ERROR",t.IdTaken="ID-TAKEN",t.InvalidKey="INVALID-KEY",t.Leave="LEAVE",t.Expire="EXPIRE"})(at||(at={}));var em={};em=JSON.parse('{"name":"peerjs","version":"1.4.7","keywords":["peerjs","webrtc","p2p","rtc"],"description":"PeerJS client","homepage":"https://peerjs.com","bugs":{"url":"https://github.com/peers/peerjs/issues"},"repository":{"type":"git","url":"https://github.com/peers/peerjs"},"license":"MIT","contributors":["Michelle Bu <michelle@michellebu.com>","afrokick <devbyru@gmail.com>","ericz <really.ez@gmail.com>","Jairo <kidandcat@gmail.com>","Jonas Gloning <34194370+jonasgloning@users.noreply.github.com>","Jairo Caro-Accino Viciana <jairo@galax.be>","Carlos Caballero <carlos.caballero.gonzalez@gmail.com>","hc <hheennrryy@gmail.com>","Muhammad Asif <capripio@gmail.com>","PrashoonB <prashoonbhattacharjee@gmail.com>","Harsh Bardhan Mishra <47351025+HarshCasper@users.noreply.github.com>","akotynski <aleksanderkotbury@gmail.com>","lmb <i@lmb.io>","Jairooo <jairocaro@msn.com>","Moritz Stückler <moritz.stueckler@gmail.com>","Simon <crydotsnakegithub@gmail.com>","Denis Lukov <denismassters@gmail.com>","Philipp Hancke <fippo@andyet.net>","Hans Oksendahl <hansoksendahl@gmail.com>","Jess <jessachandler@gmail.com>","khankuan <khankuan@gmail.com>","DUODVK <kurmanov.work@gmail.com>","XiZhao <kwang1imsa@gmail.com>","Matthias Lohr <matthias@lohr.me>","=frank tree <=frnktrb@googlemail.com>","Andre Eckardt <aeckardt@outlook.com>","Chris Cowan <agentme49@gmail.com>","Alex Chuev <alex@chuev.com>","alxnull <alxnull@e.mail.de>","Yemel Jardi <angel.jardi@gmail.com>","Ben Parnell <benjaminparnell.94@gmail.com>","Benny Lichtner <bennlich@gmail.com>","fresheneesz <bitetrudpublic@gmail.com>","bob.barstead@exaptive.com <bob.barstead@exaptive.com>","chandika <chandika@gmail.com>","emersion <contact@emersion.fr>","Christopher Van <cvan@users.noreply.github.com>","eddieherm <edhermoso@gmail.com>","Eduardo Pinho <enet4mikeenet@gmail.com>","Evandro Zanatta <ezanatta@tray.net.br>","Gardner Bickford <gardner@users.noreply.github.com>","Gian Luca <gianluca.cecchi@cynny.com>","PatrickJS <github@gdi2290.com>","jonnyf <github@jonathanfoss.co.uk>","Hizkia Felix <hizkifw@gmail.com>","Hristo Oskov <hristo.oskov@gmail.com>","Isaac Madwed <i.madwed@gmail.com>","Ilya Konanykhin <ilya.konanykhin@gmail.com>","jasonbarry <jasbarry@me.com>","Jonathan Burke <jonathan.burke.1311@googlemail.com>","Josh Hamit <josh.hamit@gmail.com>","Jordan Austin <jrax86@gmail.com>","Joel Wetzell <jwetzell@yahoo.com>","xizhao <kevin.wang@cloudera.com>","Alberto Torres <kungfoobar@gmail.com>","Jonathan Mayol <mayoljonathan@gmail.com>","Jefferson Felix <me@jsfelix.dev>","Rolf Erik Lekang <me@rolflekang.com>","Kevin Mai-Husan Chia <mhchia@users.noreply.github.com>","Pepijn de Vos <pepijndevos@gmail.com>","JooYoung <qkdlql@naver.com>","Tobias Speicher <rootcommander@gmail.com>","Steve Blaurock <sblaurock@gmail.com>","Kyrylo Shegeda <shegeda@ualberta.ca>","Diwank Singh Tomer <singh@diwank.name>","Sören Balko <Soeren.Balko@gmail.com>","Arpit Solanki <solankiarpit1997@gmail.com>","Yuki Ito <yuki@gnnk.net>","Artur Zayats <zag2art@gmail.com>"],"funding":{"type":"opencollective","url":"https://opencollective.com/peer"},"collective":{"type":"opencollective","url":"https://opencollective.com/peer"},"files":["dist/*"],"sideEffects":["lib/global.ts","lib/supports.ts"],"main":"dist/bundler.cjs","module":"dist/bundler.mjs","browser-minified":"dist/peerjs.min.js","browser-unminified":"dist/peerjs.js","types":"dist/types.d.ts","engines":{"node":">= 10"},"targets":{"types":{"source":"lib/exports.ts"},"main":{"source":"lib/exports.ts","sourceMap":{"inlineSources":true}},"module":{"source":"lib/exports.ts","includeNodeModules":["eventemitter3"],"sourceMap":{"inlineSources":true}},"browser-minified":{"context":"browser","outputFormat":"global","optimize":true,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"},"browser-unminified":{"context":"browser","outputFormat":"global","optimize":false,"engines":{"browsers":"cover 99%, not dead"},"source":"lib/global.ts"}},"scripts":{"contributors":"git-authors-cli --print=false && prettier --write package.json && git add package.json package-lock.json && git commit -m \\"chore(contributors): update and sort contributors list\\"","check":"tsc --noEmit","watch":"parcel watch","build":"rm -rf dist && parcel build","prepublishOnly":"npm run build","test":"mocha -r ts-node/register -r jsdom-global/register test/**/*.ts","format":"prettier --write .","semantic-release":"semantic-release"},"devDependencies":{"@parcel/config-default":"^2.5.0","@parcel/packager-ts":"^2.5.0","@parcel/transformer-typescript-tsc":"^2.5.0","@parcel/transformer-typescript-types":"^2.5.0","@semantic-release/changelog":"^6.0.1","@semantic-release/git":"^10.0.1","@types/chai":"^4.3.0","@types/mocha":"^9.1.0","@types/node":"^17.0.18","chai":"^4.3.6","git-authors-cli":"^1.0.40","jsdom":"^19.0.0","jsdom-global":"^3.0.2","mocha":"^9.2.0","mock-socket":"8.0.5","parcel":"^2.5.0","parcel-transformer-tsc-sourcemaps":"^1.0.2","prettier":"^2.6.2","semantic-release":"^19.0.2","standard":"^16.0.4","ts-node":"^10.5.0","typescript":"^4.5.5"},"dependencies":{"@swc/helpers":"^0.3.13","eventemitter3":"^4.0.7","peerjs-js-binarypack":"1.0.1","webrtc-adapter":"^7.7.1"}}');var KI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),GI=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},JI=function(t,e,n){if(n||arguments.length===2)for(var r=0,i=e.length,s;r<i;r++)(s||!(r in e))&&(s||(s=Array.prototype.slice.call(e,0,r)),s[r]=e[r]);return t.concat(s||Array.prototype.slice.call(e))},QI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},dv=function(t){KI(e,t);function e(n,r,i,s,o,l){l===void 0&&(l=5e3);var a=t.call(this)||this;a.pingInterval=l,a._disconnected=!0,a._messagesQueue=[];var c=n?"wss://":"ws://";return a._baseUrl=c+r+":"+i+s+"peerjs?key="+o,a}return e.prototype.start=function(n,r){var i=this;this._id=n;var s="".concat(this._baseUrl,"&id=").concat(n,"&token=").concat(r);this._socket||!this._disconnected||(this._socket=new WebSocket(s+"&version="+em.version),this._disconnected=!1,this._socket.onmessage=function(o){var l;try{l=JSON.parse(o.data),B.default.log("Server message received:",l)}catch{B.default.log("Invalid server message",o.data);return}i.emit(Xn.Message,l)},this._socket.onclose=function(o){i._disconnected||(B.default.log("Socket closed.",o),i._cleanup(),i._disconnected=!0,i.emit(Xn.Disconnected))},this._socket.onopen=function(){i._disconnected||(i._sendQueuedMessages(),B.default.log("Socket open"),i._scheduleHeartbeat())})},e.prototype._scheduleHeartbeat=function(){var n=this;this._wsPingTimer=setTimeout(function(){n._sendHeartbeat()},this.pingInterval)},e.prototype._sendHeartbeat=function(){if(!this._wsOpen()){B.default.log("Cannot send heartbeat, because socket closed");return}var n=JSON.stringify({type:at.Heartbeat});this._socket.send(n),this._scheduleHeartbeat()},e.prototype._wsOpen=function(){return!!this._socket&&this._socket.readyState===1},e.prototype._sendQueuedMessages=function(){var n,r,i=JI([],GI(this._messagesQueue),!1);this._messagesQueue=[];try{for(var s=QI(i),o=s.next();!o.done;o=s.next()){var l=o.value;this.send(l)}}catch(a){n={error:a}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}},e.prototype.send=function(n){if(!this._disconnected){if(!this._id){this._messagesQueue.push(n);return}if(!n.type){this.emit(Xn.Error,"Invalid message");return}if(this._wsOpen()){var r=JSON.stringify(n);this._socket.send(r)}}},e.prototype.close=function(){this._disconnected||(this._cleanup(),this._disconnected=!0)},e.prototype._cleanup=function(){this._socket&&(this._socket.onopen=this._socket.onmessage=this._socket.onclose=null,this._socket.close(),this._socket=void 0),clearTimeout(this._wsPingTimer)},e}(Aa.EventEmitter),df={};Hn(df,"MediaConnection",()=>pv,t=>pv=t);var tm={};Hn(tm,"Negotiator",()=>hv,t=>hv=t);var Nc=function(){return Nc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Nc.apply(this,arguments)},_l=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})},El=function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},hv=function(){function t(e){this.connection=e}return t.prototype.startConnection=function(e){var n=this._startPeerConnection();if(this.connection.peerConnection=n,this.connection.type===En.Media&&e._stream&&this._addTracksToConnection(e._stream,n),e.originator){if(this.connection.type===En.Data){var r=this.connection,i={ordered:!!e.reliable},s=n.createDataChannel(r.label,i);r.initialize(s)}this._makeOffer()}else this.handleSDP("OFFER",e.sdp)},t.prototype._startPeerConnection=function(){B.default.log("Creating RTCPeerConnection.");var e=new RTCPeerConnection(this.connection.provider.options.config);return this._setupListeners(e),e},t.prototype._setupListeners=function(e){var n=this,r=this.connection.peer,i=this.connection.connectionId,s=this.connection.type,o=this.connection.provider;B.default.log("Listening for ICE candidates."),e.onicecandidate=function(l){!l.candidate||!l.candidate.candidate||(B.default.log("Received ICE candidates for ".concat(r,":"),l.candidate),o.socket.send({type:at.Candidate,payload:{candidate:l.candidate,type:s,connectionId:i},dst:r}))},e.oniceconnectionstatechange=function(){switch(e.iceConnectionState){case"failed":B.default.log("iceConnectionState is failed, closing connections to "+r),n.connection.emit("error",new Error("Negotiation of connection to "+r+" failed.")),n.connection.close();break;case"closed":B.default.log("iceConnectionState is closed, closing connections to "+r),n.connection.emit("error",new Error("Connection to "+r+" closed.")),n.connection.close();break;case"disconnected":B.default.log("iceConnectionState changed to disconnected on the connection with "+r);break;case"completed":e.onicecandidate=ve.noop;break}n.connection.emit("iceStateChanged",e.iceConnectionState)},B.default.log("Listening for data channel"),e.ondatachannel=function(l){B.default.log("Received data channel");var a=l.channel,c=o.getConnection(r,i);c.initialize(a)},B.default.log("Listening for remote stream"),e.ontrack=function(l){B.default.log("Received remote stream");var a=l.streams[0],c=o.getConnection(r,i);if(c.type===En.Media){var u=c;n._addStreamToMediaConnection(a,u)}}},t.prototype.cleanup=function(){B.default.log("Cleaning up PeerConnection to "+this.connection.peer);var e=this.connection.peerConnection;if(e){this.connection.peerConnection=null,e.onicecandidate=e.oniceconnectionstatechange=e.ondatachannel=e.ontrack=function(){};var n=e.signalingState!=="closed",r=!1;if(this.connection.type===En.Data){var i=this.connection,s=i.dataChannel;s&&(r=!!s.readyState&&s.readyState!=="closed")}(n||r)&&e.close()}},t.prototype._makeOffer=function(){return _l(this,void 0,Promise,function(){var e,n,r,i,s,o,l;return El(this,function(a){switch(a.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,a.label=1;case 1:return a.trys.push([1,7,,8]),[4,e.createOffer(this.connection.options.constraints)];case 2:r=a.sent(),B.default.log("Created offer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),a.label=3;case 3:return a.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return a.sent(),B.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),i={sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,metadata:this.connection.metadata,browser:ve.browser},this.connection.type===En.Data&&(s=this.connection,i=Nc(Nc({},i),{label:s.label,reliable:s.reliable,serialization:s.serialization})),n.socket.send({type:at.Offer,payload:i,dst:this.connection.peer}),[3,6];case 5:return o=a.sent(),o!="OperationError: Failed to set local offer sdp: Called in wrong state: kHaveRemoteOffer"&&(n.emitError($e.WebRTC,o),B.default.log("Failed to setLocalDescription, ",o)),[3,6];case 6:return[3,8];case 7:return l=a.sent(),n.emitError($e.WebRTC,l),B.default.log("Failed to createOffer, ",l),[3,8];case 8:return[2]}})})},t.prototype._makeAnswer=function(){return _l(this,void 0,Promise,function(){var e,n,r,i,s;return El(this,function(o){switch(o.label){case 0:e=this.connection.peerConnection,n=this.connection.provider,o.label=1;case 1:return o.trys.push([1,7,,8]),[4,e.createAnswer()];case 2:r=o.sent(),B.default.log("Created answer."),this.connection.options.sdpTransform&&typeof this.connection.options.sdpTransform=="function"&&(r.sdp=this.connection.options.sdpTransform(r.sdp)||r.sdp),o.label=3;case 3:return o.trys.push([3,5,,6]),[4,e.setLocalDescription(r)];case 4:return o.sent(),B.default.log("Set localDescription:",r,"for:".concat(this.connection.peer)),n.socket.send({type:at.Answer,payload:{sdp:r,type:this.connection.type,connectionId:this.connection.connectionId,browser:ve.browser},dst:this.connection.peer}),[3,6];case 5:return i=o.sent(),n.emitError($e.WebRTC,i),B.default.log("Failed to setLocalDescription, ",i),[3,6];case 6:return[3,8];case 7:return s=o.sent(),n.emitError($e.WebRTC,s),B.default.log("Failed to create answer, ",s),[3,8];case 8:return[2]}})})},t.prototype.handleSDP=function(e,n){return _l(this,void 0,Promise,function(){var r,i,s,o;return El(this,function(l){switch(l.label){case 0:n=new RTCSessionDescription(n),r=this.connection.peerConnection,i=this.connection.provider,B.default.log("Setting remote description",n),s=this,l.label=1;case 1:return l.trys.push([1,5,,6]),[4,r.setRemoteDescription(n)];case 2:return l.sent(),B.default.log("Set remoteDescription:".concat(e," for:").concat(this.connection.peer)),e!=="OFFER"?[3,4]:[4,s._makeAnswer()];case 3:l.sent(),l.label=4;case 4:return[3,6];case 5:return o=l.sent(),i.emitError($e.WebRTC,o),B.default.log("Failed to setRemoteDescription, ",o),[3,6];case 6:return[2]}})})},t.prototype.handleCandidate=function(e){return _l(this,void 0,Promise,function(){var n,r,i,s,o,l;return El(this,function(a){switch(a.label){case 0:B.default.log("handleCandidate:",e),n=e.candidate,r=e.sdpMLineIndex,i=e.sdpMid,s=this.connection.peerConnection,o=this.connection.provider,a.label=1;case 1:return a.trys.push([1,3,,4]),[4,s.addIceCandidate(new RTCIceCandidate({sdpMid:i,sdpMLineIndex:r,candidate:n}))];case 2:return a.sent(),B.default.log("Added ICE candidate for:".concat(this.connection.peer)),[3,4];case 3:return l=a.sent(),o.emitError($e.WebRTC,l),B.default.log("Failed to handleCandidate, ",l),[3,4];case 4:return[2]}})})},t.prototype._addTracksToConnection=function(e,n){if(B.default.log("add tracks from stream ".concat(e.id," to peer connection")),!n.addTrack)return B.default.error("Your browser does't support RTCPeerConnection#addTrack. Ignored.");e.getTracks().forEach(function(r){n.addTrack(r,e)})},t.prototype._addStreamToMediaConnection=function(e,n){B.default.log("add stream ".concat(e.id," to media connection ").concat(n.connectionId)),n.addStream(e)},t}(),nm={};Hn(nm,"BaseConnection",()=>fv,t=>fv=t);var YI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),fv=function(t){YI(e,t);function e(n,r,i){var s=t.call(this)||this;return s.peer=n,s.provider=r,s.options=i,s._open=!1,s.metadata=i.metadata,s}return Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),e}(Aa.EventEmitter),XI=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Dc=function(){return Dc=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Dc.apply(this,arguments)},ZI=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},pv=function(t){XI(e,t);function e(n,r,i){var s=t.call(this,n,r,i)||this;return s._localStream=s.options._stream,s.connectionId=s.options.connectionId||e.ID_PREFIX+ve.randomToken(),s._negotiator=new tm.Negotiator(s),s._localStream&&s._negotiator.startConnection({_stream:s._localStream,originator:!0}),s}return Object.defineProperty(e.prototype,"type",{get:function(){return En.Media},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"localStream",{get:function(){return this._localStream},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"remoteStream",{get:function(){return this._remoteStream},enumerable:!1,configurable:!0}),e.prototype.addStream=function(n){B.default.log("Receiving stream",n),this._remoteStream=n,t.prototype.emit.call(this,"stream",n)},e.prototype.handleMessage=function(n){var r=n.type,i=n.payload;switch(n.type){case at.Answer:this._negotiator.handleSDP(r,i.sdp),this._open=!0;break;case at.Candidate:this._negotiator.handleCandidate(i.candidate);break;default:B.default.warn("Unrecognized message type:".concat(r," from peer:").concat(this.peer));break}},e.prototype.answer=function(n,r){var i,s;if(r===void 0&&(r={}),this._localStream){B.default.warn("Local stream already exists on this MediaConnection. Are you answering a call twice?");return}this._localStream=n,r&&r.sdpTransform&&(this.options.sdpTransform=r.sdpTransform),this._negotiator.startConnection(Dc(Dc({},this.options._payload),{_stream:n}));var o=this.provider._getMessages(this.connectionId);try{for(var l=ZI(o),a=l.next();!a.done;a=l.next()){var c=a.value;this.handleMessage(c)}}catch(u){i={error:u}}finally{try{a&&!a.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}this._open=!0},e.prototype.close=function(){this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this._localStream=null,this._remoteStream=null,this.provider&&(this.provider._removeConnection(this),this.provider=null),this.options&&this.options._stream&&(this.options._stream=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.ID_PREFIX="mc_",e}(nm.BaseConnection),hf={};Hn(hf,"DataConnection",()=>gv,t=>gv=t);var hT={};Hn(hT,"EncodingQueue",()=>mv,t=>mv=t);var eA=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),mv=function(t){eA(e,t);function e(){var n=t.call(this)||this;return n.fileReader=new FileReader,n._queue=[],n._processing=!1,n.fileReader.onload=function(r){n._processing=!1,r.target&&n.emit("done",r.target.result),n.doNextTask()},n.fileReader.onerror=function(r){B.default.error("EncodingQueue error:",r),n._processing=!1,n.destroy(),n.emit("error",r)},n}return Object.defineProperty(e.prototype,"queue",{get:function(){return this._queue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this.queue.length},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"processing",{get:function(){return this._processing},enumerable:!1,configurable:!0}),e.prototype.enque=function(n){this.queue.push(n),!this.processing&&this.doNextTask()},e.prototype.destroy=function(){this.fileReader.abort(),this._queue=[]},e.prototype.doNextTask=function(){this.size!==0&&(this.processing||(this._processing=!0,this.fileReader.readAsArrayBuffer(this.queue.shift())))},e}(Aa.EventEmitter),tA=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),nA=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},gv=function(t){tA(e,t);function e(n,r,i){var s=t.call(this,n,r,i)||this;return s.stringify=JSON.stringify,s.parse=JSON.parse,s._buffer=[],s._bufferSize=0,s._buffering=!1,s._chunkedData={},s._encodingQueue=new hT.EncodingQueue,s.connectionId=s.options.connectionId||e.ID_PREFIX+ve.randomToken(),s.label=s.options.label||s.connectionId,s.serialization=s.options.serialization||Gn.Binary,s.reliable=!!s.options.reliable,s._encodingQueue.on("done",function(o){s._bufferedSend(o)}),s._encodingQueue.on("error",function(){B.default.error("DC#".concat(s.connectionId,": Error occured in encoding from blob to arraybuffer, close DC")),s.close()}),s._negotiator=new tm.Negotiator(s),s._negotiator.startConnection(s.options._payload||{originator:!0}),s}return Object.defineProperty(e.prototype,"type",{get:function(){return En.Data},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"dataChannel",{get:function(){return this._dc},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"bufferSize",{get:function(){return this._bufferSize},enumerable:!1,configurable:!0}),e.prototype.initialize=function(n){this._dc=n,this._configureDataChannel()},e.prototype._configureDataChannel=function(){var n=this;(!ve.supports.binaryBlob||ve.supports.reliable)&&(this.dataChannel.binaryType="arraybuffer"),this.dataChannel.onopen=function(){B.default.log("DC#".concat(n.connectionId," dc connection success")),n._open=!0,n.emit("open")},this.dataChannel.onmessage=function(r){B.default.log("DC#".concat(n.connectionId," dc onmessage:"),r.data),n._handleDataMessage(r)},this.dataChannel.onclose=function(){B.default.log("DC#".concat(n.connectionId," dc closed for:"),n.peer),n.close()}},e.prototype._handleDataMessage=function(n){var r=this,i=n.data,s=i.constructor,o=this.serialization===Gn.Binary||this.serialization===Gn.BinaryUTF8,l=i;if(o){if(s===Blob){ve.blobToArrayBuffer(i,function(c){var u=ve.unpack(c);r.emit("data",u)});return}else if(s===ArrayBuffer)l=ve.unpack(i);else if(s===String){var a=ve.binaryStringToArrayBuffer(i);l=ve.unpack(a)}}else this.serialization===Gn.JSON&&(l=this.parse(i));if(l.__peerData){this._handleChunk(l);return}t.prototype.emit.call(this,"data",l)},e.prototype._handleChunk=function(n){var r=n.__peerData,i=this._chunkedData[r]||{data:[],count:0,total:n.total};if(i.data[n.n]=n.data,i.count++,this._chunkedData[r]=i,i.total===i.count){delete this._chunkedData[r];var s=new Blob(i.data);this._handleDataMessage({data:s})}},e.prototype.close=function(){this._buffer=[],this._bufferSize=0,this._chunkedData={},this._negotiator&&(this._negotiator.cleanup(),this._negotiator=null),this.provider&&(this.provider._removeConnection(this),this.provider=null),this.dataChannel&&(this.dataChannel.onopen=null,this.dataChannel.onmessage=null,this.dataChannel.onclose=null,this._dc=null),this._encodingQueue&&(this._encodingQueue.destroy(),this._encodingQueue.removeAllListeners(),this._encodingQueue=null),this.open&&(this._open=!1,t.prototype.emit.call(this,"close"))},e.prototype.send=function(n,r){if(!this.open){t.prototype.emit.call(this,"error",new Error("Connection is not open. You should listen for the `open` event before sending messages."));return}if(this.serialization===Gn.JSON)this._bufferedSend(this.stringify(n));else if(this.serialization===Gn.Binary||this.serialization===Gn.BinaryUTF8){var i=ve.pack(n);if(!r&&i.size>ve.chunkedMTU){this._sendChunks(i);return}ve.supports.binaryBlob?this._bufferedSend(i):this._encodingQueue.enque(i)}else this._bufferedSend(n)},e.prototype._bufferedSend=function(n){(this._buffering||!this._trySend(n))&&(this._buffer.push(n),this._bufferSize=this._buffer.length)},e.prototype._trySend=function(n){var r=this;if(!this.open)return!1;if(this.dataChannel.bufferedAmount>e.MAX_BUFFERED_AMOUNT)return this._buffering=!0,setTimeout(function(){r._buffering=!1,r._tryBuffer()},50),!1;try{this.dataChannel.send(n)}catch(i){return B.default.error("DC#:".concat(this.connectionId," Error when sending:"),i),this._buffering=!0,this.close(),!1}return!0},e.prototype._tryBuffer=function(){if(this.open&&this._buffer.length!==0){var n=this._buffer[0];this._trySend(n)&&(this._buffer.shift(),this._bufferSize=this._buffer.length,this._tryBuffer())}},e.prototype._sendChunks=function(n){var r,i,s=ve.chunk(n);B.default.log("DC#".concat(this.connectionId," Try to send ").concat(s.length," chunks..."));try{for(var o=nA(s),l=o.next();!l.done;l=o.next()){var a=l.value;this.send(a,!0)}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.handleMessage=function(n){var r=n.payload;switch(n.type){case at.Answer:this._negotiator.handleSDP(n.type,r.sdp);break;case at.Candidate:this._negotiator.handleCandidate(r.candidate);break;default:B.default.warn("Unrecognized message type:",n.type,"from peer:",this.peer);break}},e.ID_PREFIX="dc_",e.MAX_BUFFERED_AMOUNT=8388608,e}(nm.BaseConnection),fT={};Hn(fT,"API",()=>_v,t=>_v=t);var yv=function(t,e,n,r){function i(s){return s instanceof n?s:new n(function(o){o(s)})}return new(n||(n=Promise))(function(s,o){function l(u){try{c(r.next(u))}catch(d){o(d)}}function a(u){try{c(r.throw(u))}catch(d){o(d)}}function c(u){u.done?s(u.value):i(u.value).then(l,a)}c((r=r.apply(t,e||[])).next())})},vv=function(t,e){var n={label:0,sent:function(){if(s[0]&1)throw s[1];return s[1]},trys:[],ops:[]},r,i,s,o;return o={next:l(0),throw:l(1),return:l(2)},typeof Symbol=="function"&&(o[Symbol.iterator]=function(){return this}),o;function l(c){return function(u){return a([c,u])}}function a(c){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,i&&(s=c[0]&2?i.return:c[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,c[1])).done)return s;switch(i=0,s&&(c=[c[0]&2,s.value]),c[0]){case 0:case 1:s=c;break;case 4:return n.label++,{value:c[1],done:!1};case 5:n.label++,i=c[1],c=[0];continue;case 7:c=n.ops.pop(),n.trys.pop();continue;default:if(s=n.trys,!(s=s.length>0&&s[s.length-1])&&(c[0]===6||c[0]===2)){n=0;continue}if(c[0]===3&&(!s||c[1]>s[0]&&c[1]<s[3])){n.label=c[1];break}if(c[0]===6&&n.label<s[1]){n.label=s[1],s=c;break}if(s&&n.label<s[2]){n.label=s[2],n.ops.push(c);break}s[2]&&n.ops.pop(),n.trys.pop();continue}c=e.call(t,n)}catch(u){c=[6,u],i=0}finally{r=s=0}if(c[0]&5)throw c[1];return{value:c[0]?c[1]:void 0,done:!0}}},_v=function(){function t(e){this._options=e}return t.prototype._buildRequest=function(e){var n=this._options.secure?"https":"http",r=this._options,i=r.host,s=r.port,o=r.path,l=r.key,a=new URL("".concat(n,"://").concat(i,":").concat(s).concat(o).concat(l,"/").concat(e));return a.searchParams.set("ts","".concat(Date.now()).concat(Math.random())),a.searchParams.set("version",em.version),fetch(a.href,{referrerPolicy:this._options.referrerPolicy})},t.prototype.retrieveId=function(){return yv(this,void 0,Promise,function(){var e,n,r;return vv(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("id")];case 1:if(e=i.sent(),e.status!==200)throw new Error("Error. Status:".concat(e.status));return[2,e.text()];case 2:throw n=i.sent(),B.default.error("Error retrieving ID",n),r="",this._options.path==="/"&&this._options.host!==ve.CLOUD_HOST&&(r=" If you passed in a `path` to your self-hosted PeerServer, you'll also need to pass in that same path when creating a new Peer."),new Error("Could not get an ID from the server."+r);case 3:return[2]}})})},t.prototype.listAllPeers=function(){return yv(this,void 0,Promise,function(){var e,n,r;return vv(this,function(i){switch(i.label){case 0:return i.trys.push([0,2,,3]),[4,this._buildRequest("peers")];case 1:if(e=i.sent(),e.status!==200)throw e.status===401?(n="",this._options.host===ve.CLOUD_HOST?n="It looks like you're using the cloud server. You can email team@peerjs.com to enable peer listing for your API key.":n="You need to enable `allow_discovery` on your self-hosted PeerServer to use this feature.",new Error("It doesn't look like you have permission to list peers IDs. "+n)):new Error("Error. Status:".concat(e.status));return[2,e.json()];case 2:throw r=i.sent(),B.default.error("Error retrieving list peers",r),new Error("Could not get list peers from the server."+r);case 3:return[2]}})})},t}(),rA=function(){var t=function(e,n){return t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var s in i)Object.prototype.hasOwnProperty.call(i,s)&&(r[s]=i[s])},t(e,n)};return function(e,n){if(typeof n!="function"&&n!==null)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");t(e,n);function r(){this.constructor=e}e.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Oo=function(){return Oo=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++){e=arguments[n];for(var i in e)Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i])}return t},Oo.apply(this,arguments)},io=function(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")},iA=function(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var r=n.call(t),i,s=[],o;try{for(;(e===void 0||e-- >0)&&!(i=r.next()).done;)s.push(i.value)}catch(l){o={error:l}}finally{try{i&&!i.done&&(n=r.return)&&n.call(r)}finally{if(o)throw o.error}}return s},Ev=function(t){rA(e,t);function e(n,r){var i=t.call(this)||this;i._id=null,i._lastServerId=null,i._destroyed=!1,i._disconnected=!1,i._open=!1,i._connections=new Map,i._lostMessages=new Map;var s;return n&&n.constructor==Object?r=n:n&&(s=n.toString()),r=Oo({debug:0,host:ve.CLOUD_HOST,port:ve.CLOUD_PORT,path:"/",key:e.DEFAULT_KEY,token:ve.randomToken(),config:ve.defaultConfig,referrerPolicy:"strict-origin-when-cross-origin"},r),i._options=r,i._options.host==="/"&&(i._options.host=window.location.hostname),i._options.path&&(i._options.path[0]!=="/"&&(i._options.path="/"+i._options.path),i._options.path[i._options.path.length-1]!=="/"&&(i._options.path+="/")),i._options.secure===void 0&&i._options.host!==ve.CLOUD_HOST?i._options.secure=ve.isSecure():i._options.host==ve.CLOUD_HOST&&(i._options.secure=!0),i._options.logFunction&&B.default.setLogFunction(i._options.logFunction),B.default.logLevel=i._options.debug||0,i._api=new fT.API(r),i._socket=i._createServerConnection(),!ve.supports.audioVideo&&!ve.supports.data?(i._delayedAbort($e.BrowserIncompatible,"The current browser does not support WebRTC"),i):s&&!ve.validateId(s)?(i._delayedAbort($e.InvalidID,'ID "'.concat(s,'" is invalid')),i):(s?i._initialize(s):i._api.retrieveId().then(function(o){return i._initialize(o)}).catch(function(o){return i._abort($e.ServerError,o)}),i)}return Object.defineProperty(e.prototype,"id",{get:function(){return this._id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"options",{get:function(){return this._options},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"open",{get:function(){return this._open},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"socket",{get:function(){return this._socket},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"connections",{get:function(){var n,r,i=Object.create(null);try{for(var s=io(this._connections),o=s.next();!o.done;o=s.next()){var l=iA(o.value,2),a=l[0],c=l[1];i[a]=c}}catch(u){n={error:u}}finally{try{o&&!o.done&&(r=s.return)&&r.call(s)}finally{if(n)throw n.error}}return i},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"destroyed",{get:function(){return this._destroyed},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"disconnected",{get:function(){return this._disconnected},enumerable:!1,configurable:!0}),e.prototype._createServerConnection=function(){var n=this,r=new dT.Socket(this._options.secure,this._options.host,this._options.port,this._options.path,this._options.key,this._options.pingInterval);return r.on(Xn.Message,function(i){n._handleMessage(i)}),r.on(Xn.Error,function(i){n._abort($e.SocketError,i)}),r.on(Xn.Disconnected,function(){n.disconnected||(n.emitError($e.Network,"Lost connection to server."),n.disconnect())}),r.on(Xn.Close,function(){n.disconnected||n._abort($e.SocketClosed,"Underlying socket is already closed.")}),r},e.prototype._initialize=function(n){this._id=n,this.socket.start(n,this._options.token)},e.prototype._handleMessage=function(n){var r,i,s=n.type,o=n.payload,l=n.src;switch(s){case at.Open:this._lastServerId=this.id,this._open=!0,this.emit("open",this.id);break;case at.Error:this._abort($e.ServerError,o.msg);break;case at.IdTaken:this._abort($e.UnavailableID,'ID "'.concat(this.id,'" is taken'));break;case at.InvalidKey:this._abort($e.InvalidKey,'API KEY "'.concat(this._options.key,'" is invalid'));break;case at.Leave:B.default.log("Received leave message from ".concat(l)),this._cleanupPeer(l),this._connections.delete(l);break;case at.Expire:this.emitError($e.PeerUnavailable,"Could not connect to peer ".concat(l));break;case at.Offer:var y=o.connectionId,v=this.getConnection(l,y);if(v&&(v.close(),B.default.warn("Offer received for existing Connection ID:".concat(y))),o.type===En.Media){var a=new df.MediaConnection(l,this,{connectionId:y,_payload:o,metadata:o.metadata});v=a,this._addConnection(l,v),this.emit("call",a)}else if(o.type===En.Data){var c=new hf.DataConnection(l,this,{connectionId:y,_payload:o,metadata:o.metadata,label:o.label,serialization:o.serialization,reliable:o.reliable});v=c,this._addConnection(l,v),this.emit("connection",c)}else{B.default.warn("Received malformed connection type:".concat(o.type));return}var u=this._getMessages(y);try{for(var d=io(u),f=d.next();!f.done;f=d.next()){var p=f.value;v.handleMessage(p)}}catch(C){r={error:C}}finally{try{f&&!f.done&&(i=d.return)&&i.call(d)}finally{if(r)throw r.error}}break;default:if(!o){B.default.warn("You received a malformed message from ".concat(l," of type ").concat(s));return}var y=o.connectionId,v=this.getConnection(l,y);v&&v.peerConnection?v.handleMessage(n):y?this._storeMessage(y,n):B.default.warn("You received an unrecognized message:",n);break}},e.prototype._storeMessage=function(n,r){this._lostMessages.has(n)||this._lostMessages.set(n,[]),this._lostMessages.get(n).push(r)},e.prototype._getMessages=function(n){var r=this._lostMessages.get(n);return r?(this._lostMessages.delete(n),r):[]},e.prototype.connect=function(n,r){if(r===void 0&&(r={}),this.disconnected){B.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect, or call reconnect on this peer if you believe its ID to still be available."),this.emitError($e.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}var i=new hf.DataConnection(n,this,r);return this._addConnection(n,i),i},e.prototype.call=function(n,r,i){if(i===void 0&&(i={}),this.disconnected){B.default.warn("You cannot connect to a new Peer because you called .disconnect() on this Peer and ended your connection with the server. You can create a new Peer to reconnect."),this.emitError($e.Disconnected,"Cannot connect to new Peer after disconnecting from server.");return}if(!r){B.default.error("To call a peer, you must provide a stream from your browser's `getUserMedia`.");return}var s=new df.MediaConnection(n,this,Oo(Oo({},i),{_stream:r}));return this._addConnection(n,s),s},e.prototype._addConnection=function(n,r){B.default.log("add connection ".concat(r.type,":").concat(r.connectionId," to peerId:").concat(n)),this._connections.has(n)||this._connections.set(n,[]),this._connections.get(n).push(r)},e.prototype._removeConnection=function(n){var r=this._connections.get(n.peer);if(r){var i=r.indexOf(n);i!==-1&&r.splice(i,1)}this._lostMessages.delete(n.connectionId)},e.prototype.getConnection=function(n,r){var i,s,o=this._connections.get(n);if(!o)return null;try{for(var l=io(o),a=l.next();!a.done;a=l.next()){var c=a.value;if(c.connectionId===r)return c}}catch(u){i={error:u}}finally{try{a&&!a.done&&(s=l.return)&&s.call(l)}finally{if(i)throw i.error}}return null},e.prototype._delayedAbort=function(n,r){var i=this;setTimeout(function(){i._abort(n,r)},0)},e.prototype._abort=function(n,r){B.default.error("Aborting!"),this.emitError(n,r),this._lastServerId?this.disconnect():this.destroy()},e.prototype.emitError=function(n,r){B.default.error("Error:",r);var i;typeof r=="string"?i=new Error(r):i=r,i.type=n,this.emit("error",i)},e.prototype.destroy=function(){this.destroyed||(B.default.log("Destroy peer with ID:".concat(this.id)),this.disconnect(),this._cleanup(),this._destroyed=!0,this.emit("close"))},e.prototype._cleanup=function(){var n,r;try{for(var i=io(this._connections.keys()),s=i.next();!s.done;s=i.next()){var o=s.value;this._cleanupPeer(o),this._connections.delete(o)}}catch(l){n={error:l}}finally{try{s&&!s.done&&(r=i.return)&&r.call(i)}finally{if(n)throw n.error}}this.socket.removeAllListeners()},e.prototype._cleanupPeer=function(n){var r,i,s=this._connections.get(n);if(s)try{for(var o=io(s),l=o.next();!l.done;l=o.next()){var a=l.value;a.close()}}catch(c){r={error:c}}finally{try{l&&!l.done&&(i=o.return)&&i.call(o)}finally{if(r)throw r.error}}},e.prototype.disconnect=function(){if(!this.disconnected){var n=this.id;B.default.log("Disconnect peer with ID:".concat(n)),this._disconnected=!0,this._open=!1,this.socket.close(),this._lastServerId=n,this._id=null,this.emit("disconnected",n)}},e.prototype.reconnect=function(){if(this.disconnected&&!this.destroyed)B.default.log("Attempting reconnection to server with ID ".concat(this._lastServerId)),this._disconnected=!1,this._initialize(this._lastServerId);else{if(this.destroyed)throw new Error("This peer cannot reconnect to the server. It has already been destroyed.");if(!this.disconnected&&!this.open)B.default.error("In a hurry? We're still trying to make the initial connection!");else throw new Error("Peer ".concat(this.id," cannot reconnect because it is not disconnected from the server!"))}},e.prototype.listAllPeers=function(n){var r=this;n===void 0&&(n=function(i){}),this._api.listAllPeers().then(function(i){return n(i)}).catch(function(i){return r._abort($e.ServerError,i)})},e.DEFAULT_KEY="peerjs",e}(Aa.EventEmitter),pT=cT.Peer;function sA(t){return new Promise((e,n)=>{const r=new pT({debug:0,logFunction:(...i)=>{console.log("client: ",...i)},secure:!1});r.on("open",i=>{const s=r.connect(t,{reliable:!0}),o=new mT(s,"client-side");o.id=i,e(o)}),r.on("error",i=>{console.error("PeerJS error:",i),n(i)})})}class mT{constructor(e,n){we(this,"client");we(this,"events");we(this,"id");we(this,"debugName");this.debugName=n??"socket",this.id="",this.client=e,this.events=new Map,this.client.on("data",r=>{try{const i=JSON.parse(r),s=this.events.get(i.event);s!==void 0&&s(i.args)}catch{}}),this.client.on("error",r=>{console.error("Data connection error:",r),this.log(Array.from(this.events.keys()))})}log(...e){console.log(this.debugName+": ",...e)}on(e,n){this.events.set(e,n),this.client.on("data",()=>{})}emit(e,n){e!=="mouse"&&this.log(`${JSON.stringify({event:e,args:n??void 0})}`),this.client.send(JSON.stringify({event:e,args:n??void 0}))}disconnect(){this.emit("disconnect"),this.client.close()}}class oA{constructor(e,n){we(this,"socket");this.socket=new pT({debug:0,logFunction:(...r)=>{console.log("server: ",...r)}}),this.socket.on("open",r=>{e==null||e(r)}),this.socket.on("connection",r=>{r.on("open",()=>{const i=new mT(r,"server-side");i.id=r.peer,n==null||n(i)})})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gT=function(t){const e=[];let n=0;for(let r=0;r<t.length;r++){let i=t.charCodeAt(r);i<128?e[n++]=i:i<2048?(e[n++]=i>>6|192,e[n++]=i&63|128):(i&64512)===55296&&r+1<t.length&&(t.charCodeAt(r+1)&64512)===56320?(i=65536+((i&1023)<<10)+(t.charCodeAt(++r)&1023),e[n++]=i>>18|240,e[n++]=i>>12&63|128,e[n++]=i>>6&63|128,e[n++]=i&63|128):(e[n++]=i>>12|224,e[n++]=i>>6&63|128,e[n++]=i&63|128)}return e},aA=function(t){const e=[];let n=0,r=0;for(;n<t.length;){const i=t[n++];if(i<128)e[r++]=String.fromCharCode(i);else if(i>191&&i<224){const s=t[n++];e[r++]=String.fromCharCode((i&31)<<6|s&63)}else if(i>239&&i<365){const s=t[n++],o=t[n++],l=t[n++],a=((i&7)<<18|(s&63)<<12|(o&63)<<6|l&63)-65536;e[r++]=String.fromCharCode(55296+(a>>10)),e[r++]=String.fromCharCode(56320+(a&1023))}else{const s=t[n++],o=t[n++];e[r++]=String.fromCharCode((i&15)<<12|(s&63)<<6|o&63)}}return e.join("")},yT={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(t,e){if(!Array.isArray(t))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=e?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let i=0;i<t.length;i+=3){const s=t[i],o=i+1<t.length,l=o?t[i+1]:0,a=i+2<t.length,c=a?t[i+2]:0,u=s>>2,d=(s&3)<<4|l>>4;let f=(l&15)<<2|c>>6,p=c&63;a||(p=64,o||(f=64)),r.push(n[u],n[d],n[f],n[p])}return r.join("")},encodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?btoa(t):this.encodeByteArray(gT(t),e)},decodeString(t,e){return this.HAS_NATIVE_SUPPORT&&!e?atob(t):aA(this.decodeStringToByteArray(t,e))},decodeStringToByteArray(t,e){this.init_();const n=e?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let i=0;i<t.length;){const s=n[t.charAt(i++)],l=i<t.length?n[t.charAt(i)]:0;++i;const c=i<t.length?n[t.charAt(i)]:64;++i;const d=i<t.length?n[t.charAt(i)]:64;if(++i,s==null||l==null||c==null||d==null)throw new lA;const f=s<<2|l>>4;if(r.push(f),c!==64){const p=l<<4&240|c>>2;if(r.push(p),d!==64){const y=c<<6&192|d;r.push(y)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let t=0;t<this.ENCODED_VALS.length;t++)this.byteToCharMap_[t]=this.ENCODED_VALS.charAt(t),this.charToByteMap_[this.byteToCharMap_[t]]=t,this.byteToCharMapWebSafe_[t]=this.ENCODED_VALS_WEBSAFE.charAt(t),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[t]]=t,t>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(t)]=t,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(t)]=t)}}};class lA extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const cA=function(t){const e=gT(t);return yT.encodeByteArray(e,!0)},Mc=function(t){return cA(t).replace(/\./g,"")},vT=function(t){try{return yT.decodeString(t,!0)}catch(e){console.error("base64Decode failed: ",e)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function uA(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const dA=()=>uA().__FIREBASE_DEFAULTS__,hA=()=>{if(typeof process>"u"||typeof process.env>"u")return;const t={}.__FIREBASE_DEFAULTS__;if(t)return JSON.parse(t)},fA=()=>{if(typeof document>"u")return;let t;try{t=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const e=t&&vT(t[1]);return e&&JSON.parse(e)},rm=()=>{try{return dA()||hA()||fA()}catch(t){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${t}`);return}},_T=t=>{var e,n;return(n=(e=rm())===null||e===void 0?void 0:e.emulatorHosts)===null||n===void 0?void 0:n[t]},pA=t=>{const e=_T(t);if(!e)return;const n=e.lastIndexOf(":");if(n<=0||n+1===e.length)throw new Error(`Invalid host ${e} with no separate hostname and port!`);const r=parseInt(e.substring(n+1),10);return e[0]==="["?[e.substring(1,n-1),r]:[e.substring(0,n),r]},ET=()=>{var t;return(t=rm())===null||t===void 0?void 0:t.config},TT=t=>{var e;return(e=rm())===null||e===void 0?void 0:e[`_${t}`]};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mA{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}wrapCallback(e){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof e=="function"&&(this.promise.catch(()=>{}),e.length===1?e(n):e(n,r))}}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gA(t,e){if(t.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=e||"demo-project",i=t.iat||0,s=t.sub||t.user_id;if(!s)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const o=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:i,exp:i+3600,auth_time:i,sub:s,user_id:s,firebase:{sign_in_provider:"custom",identities:{}}},t),l="";return[Mc(JSON.stringify(n)),Mc(JSON.stringify(o)),l].join(".")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function It(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function yA(){return typeof window<"u"&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(It())}function vA(){const t=typeof chrome=="object"?chrome.runtime:typeof browser=="object"?browser.runtime:void 0;return typeof t=="object"&&t.id!==void 0}function _A(){return typeof navigator=="object"&&navigator.product==="ReactNative"}function EA(){const t=It();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function TA(){try{return typeof indexedDB=="object"}catch{return!1}}function SA(){return new Promise((t,e)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",i=self.indexedDB.open(r);i.onsuccess=()=>{i.result.close(),n||self.indexedDB.deleteDatabase(r),t(!0)},i.onupgradeneeded=()=>{n=!1},i.onerror=()=>{var s;e(((s=i.error)===null||s===void 0?void 0:s.message)||"")}}catch(n){e(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wA="FirebaseError";class gr extends Error{constructor(e,n,r){super(n),this.code=e,this.customData=r,this.name=wA,Object.setPrototypeOf(this,gr.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ba.prototype.create)}}class ba{constructor(e,n,r){this.service=e,this.serviceName=n,this.errors=r}create(e,...n){const r=n[0]||{},i=`${this.service}/${e}`,s=this.errors[e],o=s?CA(s,r):"Error",l=`${this.serviceName}: ${o} (${i}).`;return new gr(i,l,r)}}function CA(t,e){return t.replace(PA,(n,r)=>{const i=e[r];return i!=null?String(i):`<${r}?>`})}const PA=/\{\$([^}]+)}/g;function RA(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Lc(t,e){if(t===e)return!0;const n=Object.keys(t),r=Object.keys(e);for(const i of n){if(!r.includes(i))return!1;const s=t[i],o=e[i];if(Tv(s)&&Tv(o)){if(!Lc(s,o))return!1}else if(s!==o)return!1}for(const i of r)if(!n.includes(i))return!1;return!0}function Tv(t){return t!==null&&typeof t=="object"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function xa(t){const e=[];for(const[n,r]of Object.entries(t))Array.isArray(r)?r.forEach(i=>{e.push(encodeURIComponent(n)+"="+encodeURIComponent(i))}):e.push(encodeURIComponent(n)+"="+encodeURIComponent(r));return e.length?"&"+e.join("&"):""}function yo(t){const e={};return t.replace(/^\?/,"").split("&").forEach(r=>{if(r){const[i,s]=r.split("=");e[decodeURIComponent(i)]=decodeURIComponent(s)}}),e}function vo(t){const e=t.indexOf("?");if(!e)return"";const n=t.indexOf("#",e);return t.substring(e,n>0?n:void 0)}function kA(t,e){const n=new IA(t,e);return n.subscribe.bind(n)}class IA{constructor(e,n){this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=n,this.task.then(()=>{e(this)}).catch(r=>{this.error(r)})}next(e){this.forEachObserver(n=>{n.next(e)})}error(e){this.forEachObserver(n=>{n.error(e)}),this.close(e)}complete(){this.forEachObserver(e=>{e.complete()}),this.close()}subscribe(e,n,r){let i;if(e===void 0&&n===void 0&&r===void 0)throw new Error("Missing Observer.");AA(e,["next","error","complete"])?i=e:i={next:e,error:n,complete:r},i.next===void 0&&(i.next=Dd),i.error===void 0&&(i.error=Dd),i.complete===void 0&&(i.complete=Dd);const s=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(()=>{try{this.finalError?i.error(this.finalError):i.complete()}catch{}}),this.observers.push(i),s}unsubscribeOne(e){this.observers===void 0||this.observers[e]===void 0||(delete this.observers[e],this.observerCount-=1,this.observerCount===0&&this.onNoObservers!==void 0&&this.onNoObservers(this))}forEachObserver(e){if(!this.finalized)for(let n=0;n<this.observers.length;n++)this.sendOne(n,e)}sendOne(e,n){this.task.then(()=>{if(this.observers!==void 0&&this.observers[e]!==void 0)try{n(this.observers[e])}catch(r){typeof console<"u"&&console.error&&console.error(r)}})}close(e){this.finalized||(this.finalized=!0,e!==void 0&&(this.finalError=e),this.task.then(()=>{this.observers=void 0,this.onNoObservers=void 0}))}}function AA(t,e){if(typeof t!="object"||t===null)return!1;for(const n of e)if(n in t&&typeof t[n]=="function")return!0;return!1}function Dd(){}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function un(t){return t&&t._delegate?t._delegate:t}class Si{constructor(e,n,r){this.name=e,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(e){return this.instantiationMode=e,this}setMultipleInstances(e){return this.multipleInstances=e,this}setServiceProps(e){return this.serviceProps=e,this}setInstanceCreatedCallback(e){return this.onInstanceCreated=e,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const oi="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bA{constructor(e,n){this.name=e,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(e){const n=this.normalizeInstanceIdentifier(e);if(!this.instancesDeferred.has(n)){const r=new mA;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const i=this.getOrInitializeService({instanceIdentifier:n});i&&r.resolve(i)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(e){var n;const r=this.normalizeInstanceIdentifier(e==null?void 0:e.identifier),i=(n=e==null?void 0:e.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(s){if(i)return null;throw s}else{if(i)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(e){if(e.name!==this.name)throw Error(`Mismatching Component ${e.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=e,!!this.shouldAutoInitialize()){if(OA(e))try{this.getOrInitializeService({instanceIdentifier:oi})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const i=this.normalizeInstanceIdentifier(n);try{const s=this.getOrInitializeService({instanceIdentifier:i});r.resolve(s)}catch{}}}}clearInstance(e=oi){this.instancesDeferred.delete(e),this.instancesOptions.delete(e),this.instances.delete(e)}async delete(){const e=Array.from(this.instances.values());await Promise.all([...e.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...e.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(e=oi){return this.instances.has(e)}getOptions(e=oi){return this.instancesOptions.get(e)||{}}initialize(e={}){const{options:n={}}=e,r=this.normalizeInstanceIdentifier(e.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const i=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[s,o]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(s);r===l&&o.resolve(i)}return i}onInit(e,n){var r;const i=this.normalizeInstanceIdentifier(n),s=(r=this.onInitCallbacks.get(i))!==null&&r!==void 0?r:new Set;s.add(e),this.onInitCallbacks.set(i,s);const o=this.instances.get(i);return o&&e(o,i),()=>{s.delete(e)}}invokeOnInitCallbacks(e,n){const r=this.onInitCallbacks.get(n);if(r)for(const i of r)try{i(e,n)}catch{}}getOrInitializeService({instanceIdentifier:e,options:n={}}){let r=this.instances.get(e);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:xA(e),options:n}),this.instances.set(e,r),this.instancesOptions.set(e,n),this.invokeOnInitCallbacks(r,e),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,e,r)}catch{}return r||null}normalizeInstanceIdentifier(e=oi){return this.component?this.component.multipleInstances?e:oi:e}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function xA(t){return t===oi?void 0:t}function OA(t){return t.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NA{constructor(e){this.name=e,this.providers=new Map}addComponent(e){const n=this.getProvider(e.name);if(n.isComponentSet())throw new Error(`Component ${e.name} has already been registered with ${this.name}`);n.setComponent(e)}addOrOverwriteComponent(e){this.getProvider(e.name).isComponentSet()&&this.providers.delete(e.name),this.addComponent(e)}getProvider(e){if(this.providers.has(e))return this.providers.get(e);const n=new bA(e,this);return this.providers.set(e,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var me;(function(t){t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT"})(me||(me={}));const DA={debug:me.DEBUG,verbose:me.VERBOSE,info:me.INFO,warn:me.WARN,error:me.ERROR,silent:me.SILENT},MA=me.INFO,LA={[me.DEBUG]:"log",[me.VERBOSE]:"log",[me.INFO]:"info",[me.WARN]:"warn",[me.ERROR]:"error"},jA=(t,e,...n)=>{if(e<t.logLevel)return;const r=new Date().toISOString(),i=LA[e];if(i)console[i](`[${r}]  ${t.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${e})`)};class im{constructor(e){this.name=e,this._logLevel=MA,this._logHandler=jA,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(e){if(!(e in me))throw new TypeError(`Invalid value "${e}" assigned to \`logLevel\``);this._logLevel=e}setLogLevel(e){this._logLevel=typeof e=="string"?DA[e]:e}get logHandler(){return this._logHandler}set logHandler(e){if(typeof e!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=e}get userLogHandler(){return this._userLogHandler}set userLogHandler(e){this._userLogHandler=e}debug(...e){this._userLogHandler&&this._userLogHandler(this,me.DEBUG,...e),this._logHandler(this,me.DEBUG,...e)}log(...e){this._userLogHandler&&this._userLogHandler(this,me.VERBOSE,...e),this._logHandler(this,me.VERBOSE,...e)}info(...e){this._userLogHandler&&this._userLogHandler(this,me.INFO,...e),this._logHandler(this,me.INFO,...e)}warn(...e){this._userLogHandler&&this._userLogHandler(this,me.WARN,...e),this._logHandler(this,me.WARN,...e)}error(...e){this._userLogHandler&&this._userLogHandler(this,me.ERROR,...e),this._logHandler(this,me.ERROR,...e)}}const VA=(t,e)=>e.some(n=>t instanceof n);let Sv,wv;function FA(){return Sv||(Sv=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function UA(){return wv||(wv=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const ST=new WeakMap,ff=new WeakMap,wT=new WeakMap,Md=new WeakMap,sm=new WeakMap;function $A(t){const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("success",s),t.removeEventListener("error",o)},s=()=>{n(Ur(t.result)),i()},o=()=>{r(t.error),i()};t.addEventListener("success",s),t.addEventListener("error",o)});return e.then(n=>{n instanceof IDBCursor&&ST.set(n,t)}).catch(()=>{}),sm.set(e,t),e}function BA(t){if(ff.has(t))return;const e=new Promise((n,r)=>{const i=()=>{t.removeEventListener("complete",s),t.removeEventListener("error",o),t.removeEventListener("abort",o)},s=()=>{n(),i()},o=()=>{r(t.error||new DOMException("AbortError","AbortError")),i()};t.addEventListener("complete",s),t.addEventListener("error",o),t.addEventListener("abort",o)});ff.set(t,e)}let pf={get(t,e,n){if(t instanceof IDBTransaction){if(e==="done")return ff.get(t);if(e==="objectStoreNames")return t.objectStoreNames||wT.get(t);if(e==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return Ur(t[e])},set(t,e,n){return t[e]=n,!0},has(t,e){return t instanceof IDBTransaction&&(e==="done"||e==="store")?!0:e in t}};function zA(t){pf=t(pf)}function qA(t){return t===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(e,...n){const r=t.call(Ld(this),e,...n);return wT.set(r,e.sort?e.sort():[e]),Ur(r)}:UA().includes(t)?function(...e){return t.apply(Ld(this),e),Ur(ST.get(this))}:function(...e){return Ur(t.apply(Ld(this),e))}}function HA(t){return typeof t=="function"?qA(t):(t instanceof IDBTransaction&&BA(t),VA(t,FA())?new Proxy(t,pf):t)}function Ur(t){if(t instanceof IDBRequest)return $A(t);if(Md.has(t))return Md.get(t);const e=HA(t);return e!==t&&(Md.set(t,e),sm.set(e,t)),e}const Ld=t=>sm.get(t);function WA(t,e,{blocked:n,upgrade:r,blocking:i,terminated:s}={}){const o=indexedDB.open(t,e),l=Ur(o);return r&&o.addEventListener("upgradeneeded",a=>{r(Ur(o.result),a.oldVersion,a.newVersion,Ur(o.transaction),a)}),n&&o.addEventListener("blocked",a=>n(a.oldVersion,a.newVersion,a)),l.then(a=>{s&&a.addEventListener("close",()=>s()),i&&a.addEventListener("versionchange",c=>i(c.oldVersion,c.newVersion,c))}).catch(()=>{}),l}const KA=["get","getKey","getAll","getAllKeys","count"],GA=["put","add","delete","clear"],jd=new Map;function Cv(t,e){if(!(t instanceof IDBDatabase&&!(e in t)&&typeof e=="string"))return;if(jd.get(e))return jd.get(e);const n=e.replace(/FromIndex$/,""),r=e!==n,i=GA.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(i||KA.includes(n)))return;const s=async function(o,...l){const a=this.transaction(o,i?"readwrite":"readonly");let c=a.store;return r&&(c=c.index(l.shift())),(await Promise.all([c[n](...l),i&&a.done]))[0]};return jd.set(e,s),s}zA(t=>({...t,get:(e,n,r)=>Cv(e,n)||t.get(e,n,r),has:(e,n)=>!!Cv(e,n)||t.has(e,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JA{constructor(e){this.container=e}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(QA(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function QA(t){const e=t.getComponent();return(e==null?void 0:e.type)==="VERSION"}const mf="@firebase/app",Pv="0.9.16";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wi=new im("@firebase/app"),YA="@firebase/app-compat",XA="@firebase/analytics-compat",ZA="@firebase/analytics",eb="@firebase/app-check-compat",tb="@firebase/app-check",nb="@firebase/auth",rb="@firebase/auth-compat",ib="@firebase/database",sb="@firebase/database-compat",ob="@firebase/functions",ab="@firebase/functions-compat",lb="@firebase/installations",cb="@firebase/installations-compat",ub="@firebase/messaging",db="@firebase/messaging-compat",hb="@firebase/performance",fb="@firebase/performance-compat",pb="@firebase/remote-config",mb="@firebase/remote-config-compat",gb="@firebase/storage",yb="@firebase/storage-compat",vb="@firebase/firestore",_b="@firebase/firestore-compat",Eb="firebase",Tb="10.2.0";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gf="[DEFAULT]",Sb={[mf]:"fire-core",[YA]:"fire-core-compat",[ZA]:"fire-analytics",[XA]:"fire-analytics-compat",[tb]:"fire-app-check",[eb]:"fire-app-check-compat",[nb]:"fire-auth",[rb]:"fire-auth-compat",[ib]:"fire-rtdb",[sb]:"fire-rtdb-compat",[ob]:"fire-fn",[ab]:"fire-fn-compat",[lb]:"fire-iid",[cb]:"fire-iid-compat",[ub]:"fire-fcm",[db]:"fire-fcm-compat",[hb]:"fire-perf",[fb]:"fire-perf-compat",[pb]:"fire-rc",[mb]:"fire-rc-compat",[gb]:"fire-gcs",[yb]:"fire-gcs-compat",[vb]:"fire-fst",[_b]:"fire-fst-compat","fire-js":"fire-js",[Eb]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const jc=new Map,yf=new Map;function wb(t,e){try{t.container.addComponent(e)}catch(n){wi.debug(`Component ${e.name} failed to register with FirebaseApp ${t.name}`,n)}}function Ss(t){const e=t.name;if(yf.has(e))return wi.debug(`There were multiple attempts to register component ${e}.`),!1;yf.set(e,t);for(const n of jc.values())wb(n,t);return!0}function om(t,e){const n=t.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),t.container.getProvider(e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cb={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}."},$r=new ba("app","Firebase",Cb);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pb{constructor(e,n,r){this._isDeleted=!1,this._options=Object.assign({},e),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Si("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(e){this.checkDestroyed(),this._automaticDataCollectionEnabled=e}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(e){this._isDeleted=e}checkDestroyed(){if(this.isDeleted)throw $r.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vs=Tb;function CT(t,e={}){let n=t;typeof e!="object"&&(e={name:e});const r=Object.assign({name:gf,automaticDataCollectionEnabled:!1},e),i=r.name;if(typeof i!="string"||!i)throw $r.create("bad-app-name",{appName:String(i)});if(n||(n=ET()),!n)throw $r.create("no-options");const s=jc.get(i);if(s){if(Lc(n,s.options)&&Lc(r,s.config))return s;throw $r.create("duplicate-app",{appName:i})}const o=new NA(i);for(const a of yf.values())o.addComponent(a);const l=new Pb(n,r,o);return jc.set(i,l),l}function PT(t=gf){const e=jc.get(t);if(!e&&t===gf&&ET())return CT();if(!e)throw $r.create("no-app",{appName:t});return e}function Br(t,e,n){var r;let i=(r=Sb[t])!==null&&r!==void 0?r:t;n&&(i+=`-${n}`);const s=i.match(/\s|\//),o=e.match(/\s|\//);if(s||o){const l=[`Unable to register library "${i}" with version "${e}":`];s&&l.push(`library name "${i}" contains illegal characters (whitespace or "/")`),s&&o&&l.push("and"),o&&l.push(`version name "${e}" contains illegal characters (whitespace or "/")`),wi.warn(l.join(" "));return}Ss(new Si(`${i}-version`,()=>({library:i,version:e}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Rb="firebase-heartbeat-database",kb=1,ia="firebase-heartbeat-store";let Vd=null;function RT(){return Vd||(Vd=WA(Rb,kb,{upgrade:(t,e)=>{switch(e){case 0:t.createObjectStore(ia)}}}).catch(t=>{throw $r.create("idb-open",{originalErrorMessage:t.message})})),Vd}async function Ib(t){try{return await(await RT()).transaction(ia).objectStore(ia).get(kT(t))}catch(e){if(e instanceof gr)wi.warn(e.message);else{const n=$r.create("idb-get",{originalErrorMessage:e==null?void 0:e.message});wi.warn(n.message)}}}async function Rv(t,e){try{const r=(await RT()).transaction(ia,"readwrite");await r.objectStore(ia).put(e,kT(t)),await r.done}catch(n){if(n instanceof gr)wi.warn(n.message);else{const r=$r.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});wi.warn(r.message)}}}function kT(t){return`${t.name}!${t.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ab=1024,bb=30*24*60*60*1e3;class xb{constructor(e){this.container=e,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new Nb(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){const n=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),r=kv();if(this._heartbeatsCache===null&&(this._heartbeatsCache=await this._heartbeatsCachePromise),!(this._heartbeatsCache.lastSentHeartbeatDate===r||this._heartbeatsCache.heartbeats.some(i=>i.date===r)))return this._heartbeatsCache.heartbeats.push({date:r,agent:n}),this._heartbeatsCache.heartbeats=this._heartbeatsCache.heartbeats.filter(i=>{const s=new Date(i.date).valueOf();return Date.now()-s<=bb}),this._storage.overwrite(this._heartbeatsCache)}async getHeartbeatsHeader(){if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,this._heartbeatsCache===null||this._heartbeatsCache.heartbeats.length===0)return"";const e=kv(),{heartbeatsToSend:n,unsentEntries:r}=Ob(this._heartbeatsCache.heartbeats),i=Mc(JSON.stringify({version:2,heartbeats:n}));return this._heartbeatsCache.lastSentHeartbeatDate=e,r.length>0?(this._heartbeatsCache.heartbeats=r,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}}function kv(){return new Date().toISOString().substring(0,10)}function Ob(t,e=Ab){const n=[];let r=t.slice();for(const i of t){const s=n.find(o=>o.agent===i.agent);if(s){if(s.dates.push(i.date),Iv(n)>e){s.dates.pop();break}}else if(n.push({agent:i.agent,dates:[i.date]}),Iv(n)>e){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class Nb{constructor(e){this.app=e,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return TA()?SA().then(()=>!0).catch(()=>!1):!1}async read(){return await this._canUseIndexedDBPromise?await Ib(this.app)||{heartbeats:[]}:{heartbeats:[]}}async overwrite(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Rv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:e.heartbeats})}else return}async add(e){var n;if(await this._canUseIndexedDBPromise){const i=await this.read();return Rv(this.app,{lastSentHeartbeatDate:(n=e.lastSentHeartbeatDate)!==null&&n!==void 0?n:i.lastSentHeartbeatDate,heartbeats:[...i.heartbeats,...e.heartbeats]})}else return}}function Iv(t){return Mc(JSON.stringify({version:2,heartbeats:t})).length}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Db(t){Ss(new Si("platform-logger",e=>new JA(e),"PRIVATE")),Ss(new Si("heartbeat",e=>new xb(e),"PRIVATE")),Br(mf,Pv,t),Br(mf,Pv,"esm2017"),Br("fire-js","")}Db("");function am(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var i=0,r=Object.getOwnPropertySymbols(t);i<r.length;i++)e.indexOf(r[i])<0&&Object.prototype.propertyIsEnumerable.call(t,r[i])&&(n[r[i]]=t[r[i]]);return n}function Av(t){return t!==void 0&&t.enterprise!==void 0}class Mb{constructor(e){if(this.siteKey="",this.emailPasswordEnabled=!1,e.recaptchaKey===void 0)throw new Error("recaptchaKey undefined");this.siteKey=e.recaptchaKey.split("/")[3],this.emailPasswordEnabled=e.recaptchaEnforcementState.some(n=>n.provider==="EMAIL_PASSWORD_PROVIDER"&&n.enforcementState!=="OFF")}}function IT(){return{"dependent-sdk-initialized-before-auth":"Another Firebase SDK was initialized and is trying to use Auth before Auth is initialized. Please be sure to call `initializeAuth` or `getAuth` before starting any other Firebase SDK."}}const Lb=IT,AT=new ba("auth","Firebase",IT());/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Vc=new im("@firebase/auth");function jb(t,...e){Vc.logLevel<=me.WARN&&Vc.warn(`Auth (${Vs}): ${t}`,...e)}function Yl(t,...e){Vc.logLevel<=me.ERROR&&Vc.error(`Auth (${Vs}): ${t}`,...e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Pn(t,...e){throw lm(t,...e)}function Fn(t,...e){return lm(t,...e)}function Vb(t,e,n){const r=Object.assign(Object.assign({},Lb()),{[e]:n});return new ba("auth","Firebase",r).create(e,{appName:t.name})}function lm(t,...e){if(typeof t!="string"){const n=e[0],r=[...e.slice(1)];return r[0]&&(r[0].appName=t.name),t._errorFactory.create(n,...r)}return AT.create(t,...e)}function Y(t,e,...n){if(!t)throw lm(e,...n)}function Zn(t){const e="INTERNAL ASSERTION FAILED: "+t;throw Yl(e),new Error(e)}function ur(t,e){t||Zn(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vf(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.href)||""}function Fb(){return bv()==="http:"||bv()==="https:"}function bv(){var t;return typeof self<"u"&&((t=self.location)===null||t===void 0?void 0:t.protocol)||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ub(){return typeof navigator<"u"&&navigator&&"onLine"in navigator&&typeof navigator.onLine=="boolean"&&(Fb()||vA()||"connection"in navigator)?navigator.onLine:!0}function $b(){if(typeof navigator>"u")return null;const t=navigator;return t.languages&&t.languages[0]||t.language||null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Oa{constructor(e,n){this.shortDelay=e,this.longDelay=n,ur(n>e,"Short delay should be less than long delay!"),this.isMobile=yA()||_A()}get(){return Ub()?this.isMobile?this.longDelay:this.shortDelay:Math.min(5e3,this.shortDelay)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function cm(t,e){ur(t.emulator,"Emulator should always be set here");const{url:n}=t.emulator;return e?`${n}${e.startsWith("/")?e.slice(1):e}`:n}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bT{static initialize(e,n,r){this.fetchImpl=e,n&&(this.headersImpl=n),r&&(this.responseImpl=r)}static fetch(){if(this.fetchImpl)return this.fetchImpl;if(typeof self<"u"&&"fetch"in self)return self.fetch;Zn("Could not find fetch implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static headers(){if(this.headersImpl)return this.headersImpl;if(typeof self<"u"&&"Headers"in self)return self.Headers;Zn("Could not find Headers implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}static response(){if(this.responseImpl)return this.responseImpl;if(typeof self<"u"&&"Response"in self)return self.Response;Zn("Could not find Response implementation, make sure you call FetchProvider.initialize() with an appropriate polyfill")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bb={CREDENTIAL_MISMATCH:"custom-token-mismatch",MISSING_CUSTOM_TOKEN:"internal-error",INVALID_IDENTIFIER:"invalid-email",MISSING_CONTINUE_URI:"internal-error",INVALID_PASSWORD:"wrong-password",MISSING_PASSWORD:"missing-password",EMAIL_EXISTS:"email-already-in-use",PASSWORD_LOGIN_DISABLED:"operation-not-allowed",INVALID_IDP_RESPONSE:"invalid-credential",INVALID_PENDING_TOKEN:"invalid-credential",FEDERATED_USER_ID_ALREADY_LINKED:"credential-already-in-use",MISSING_REQ_TYPE:"internal-error",EMAIL_NOT_FOUND:"user-not-found",RESET_PASSWORD_EXCEED_LIMIT:"too-many-requests",EXPIRED_OOB_CODE:"expired-action-code",INVALID_OOB_CODE:"invalid-action-code",MISSING_OOB_CODE:"internal-error",CREDENTIAL_TOO_OLD_LOGIN_AGAIN:"requires-recent-login",INVALID_ID_TOKEN:"invalid-user-token",TOKEN_EXPIRED:"user-token-expired",USER_NOT_FOUND:"user-token-expired",TOO_MANY_ATTEMPTS_TRY_LATER:"too-many-requests",PASSWORD_DOES_NOT_MEET_REQUIREMENTS:"password-does-not-meet-requirements",INVALID_CODE:"invalid-verification-code",INVALID_SESSION_INFO:"invalid-verification-id",INVALID_TEMPORARY_PROOF:"invalid-credential",MISSING_SESSION_INFO:"missing-verification-id",SESSION_EXPIRED:"code-expired",MISSING_ANDROID_PACKAGE_NAME:"missing-android-pkg-name",UNAUTHORIZED_DOMAIN:"unauthorized-continue-uri",INVALID_OAUTH_CLIENT_ID:"invalid-oauth-client-id",ADMIN_ONLY_OPERATION:"admin-restricted-operation",INVALID_MFA_PENDING_CREDENTIAL:"invalid-multi-factor-session",MFA_ENROLLMENT_NOT_FOUND:"multi-factor-info-not-found",MISSING_MFA_ENROLLMENT_ID:"missing-multi-factor-info",MISSING_MFA_PENDING_CREDENTIAL:"missing-multi-factor-session",SECOND_FACTOR_EXISTS:"second-factor-already-in-use",SECOND_FACTOR_LIMIT_EXCEEDED:"maximum-second-factor-count-exceeded",BLOCKING_FUNCTION_ERROR_RESPONSE:"internal-error",RECAPTCHA_NOT_ENABLED:"recaptcha-not-enabled",MISSING_RECAPTCHA_TOKEN:"missing-recaptcha-token",INVALID_RECAPTCHA_TOKEN:"invalid-recaptcha-token",INVALID_RECAPTCHA_ACTION:"invalid-recaptcha-action",MISSING_CLIENT_TYPE:"missing-client-type",MISSING_RECAPTCHA_VERSION:"missing-recaptcha-version",INVALID_RECAPTCHA_VERSION:"invalid-recaptcha-version",INVALID_REQ_TYPE:"invalid-req-type"};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zb=new Oa(3e4,6e4);function xi(t,e){return t.tenantId&&!e.tenantId?Object.assign(Object.assign({},e),{tenantId:t.tenantId}):e}async function Xr(t,e,n,r,i={}){return xT(t,i,async()=>{let s={},o={};r&&(e==="GET"?o=r:s={body:JSON.stringify(r)});const l=xa(Object.assign({key:t.config.apiKey},o)).slice(1),a=await t._getAdditionalHeaders();return a["Content-Type"]="application/json",t.languageCode&&(a["X-Firebase-Locale"]=t.languageCode),bT.fetch()(OT(t,t.config.apiHost,n,l),Object.assign({method:e,headers:a,referrerPolicy:"no-referrer"},s))})}async function xT(t,e,n){t._canInitEmulator=!1;const r=Object.assign(Object.assign({},Bb),e);try{const i=new qb(t),s=await Promise.race([n(),i.promise]);i.clearNetworkTimeout();const o=await s.json();if("needConfirmation"in o)throw Tl(t,"account-exists-with-different-credential",o);if(s.ok&&!("errorMessage"in o))return o;{const l=s.ok?o.errorMessage:o.error.message,[a,c]=l.split(" : ");if(a==="FEDERATED_USER_ID_ALREADY_LINKED")throw Tl(t,"credential-already-in-use",o);if(a==="EMAIL_EXISTS")throw Tl(t,"email-already-in-use",o);if(a==="USER_DISABLED")throw Tl(t,"user-disabled",o);const u=r[a]||a.toLowerCase().replace(/[_\s]+/g,"-");if(c)throw Vb(t,u,c);Pn(t,u)}}catch(i){if(i instanceof gr)throw i;Pn(t,"network-request-failed",{message:String(i)})}}async function Na(t,e,n,r,i={}){const s=await Xr(t,e,n,r,i);return"mfaPendingCredential"in s&&Pn(t,"multi-factor-auth-required",{_serverResponse:s}),s}function OT(t,e,n,r){const i=`${e}${n}?${r}`;return t.config.emulator?cm(t.config,i):`${t.config.apiScheme}://${i}`}class qb{constructor(e){this.auth=e,this.timer=null,this.promise=new Promise((n,r)=>{this.timer=setTimeout(()=>r(Fn(this.auth,"network-request-failed")),zb.get())})}clearNetworkTimeout(){clearTimeout(this.timer)}}function Tl(t,e,n){const r={appName:t.name};n.email&&(r.email=n.email),n.phoneNumber&&(r.phoneNumber=n.phoneNumber);const i=Fn(t,e,r);return i.customData._tokenResponse=n,i}async function Hb(t,e){return Xr(t,"GET","/v2/recaptchaConfig",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Wb(t,e){return Xr(t,"POST","/v1/accounts:delete",e)}async function Kb(t,e){return Xr(t,"POST","/v1/accounts:lookup",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function No(t){if(t)try{const e=new Date(Number(t));if(!isNaN(e.getTime()))return e.toUTCString()}catch{}}async function Gb(t,e=!1){const n=un(t),r=await n.getIdToken(e),i=um(r);Y(i&&i.exp&&i.auth_time&&i.iat,n.auth,"internal-error");const s=typeof i.firebase=="object"?i.firebase:void 0,o=s==null?void 0:s.sign_in_provider;return{claims:i,token:r,authTime:No(Fd(i.auth_time)),issuedAtTime:No(Fd(i.iat)),expirationTime:No(Fd(i.exp)),signInProvider:o||null,signInSecondFactor:(s==null?void 0:s.sign_in_second_factor)||null}}function Fd(t){return Number(t)*1e3}function um(t){const[e,n,r]=t.split(".");if(e===void 0||n===void 0||r===void 0)return Yl("JWT malformed, contained fewer than 3 sections"),null;try{const i=vT(n);return i?JSON.parse(i):(Yl("Failed to decode base64 JWT payload"),null)}catch(i){return Yl("Caught error parsing JWT payload as JSON",i==null?void 0:i.toString()),null}}function Jb(t){const e=um(t);return Y(e,"internal-error"),Y(typeof e.exp<"u","internal-error"),Y(typeof e.iat<"u","internal-error"),Number(e.exp)-Number(e.iat)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ws(t,e,n=!1){if(n)return e;try{return await e}catch(r){throw r instanceof gr&&Qb(r)&&t.auth.currentUser===t&&await t.auth.signOut(),r}}function Qb({code:t}){return t==="auth/user-disabled"||t==="auth/user-token-expired"}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yb{constructor(e){this.user=e,this.isRunning=!1,this.timerId=null,this.errorBackoff=3e4}_start(){this.isRunning||(this.isRunning=!0,this.schedule())}_stop(){this.isRunning&&(this.isRunning=!1,this.timerId!==null&&clearTimeout(this.timerId))}getInterval(e){var n;if(e){const r=this.errorBackoff;return this.errorBackoff=Math.min(this.errorBackoff*2,96e4),r}else{this.errorBackoff=3e4;const i=((n=this.user.stsTokenManager.expirationTime)!==null&&n!==void 0?n:0)-Date.now()-3e5;return Math.max(0,i)}}schedule(e=!1){if(!this.isRunning)return;const n=this.getInterval(e);this.timerId=setTimeout(async()=>{await this.iteration()},n)}async iteration(){try{await this.user.getIdToken(!0)}catch(e){(e==null?void 0:e.code)==="auth/network-request-failed"&&this.schedule(!0);return}this.schedule()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NT{constructor(e,n){this.createdAt=e,this.lastLoginAt=n,this._initializeTime()}_initializeTime(){this.lastSignInTime=No(this.lastLoginAt),this.creationTime=No(this.createdAt)}_copy(e){this.createdAt=e.createdAt,this.lastLoginAt=e.lastLoginAt,this._initializeTime()}toJSON(){return{createdAt:this.createdAt,lastLoginAt:this.lastLoginAt}}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fc(t){var e;const n=t.auth,r=await t.getIdToken(),i=await ws(t,Kb(n,{idToken:r}));Y(i==null?void 0:i.users.length,n,"internal-error");const s=i.users[0];t._notifyReloadListener(s);const o=!((e=s.providerUserInfo)===null||e===void 0)&&e.length?ex(s.providerUserInfo):[],l=Zb(t.providerData,o),a=t.isAnonymous,c=!(t.email&&s.passwordHash)&&!(l!=null&&l.length),u=a?c:!1,d={uid:s.localId,displayName:s.displayName||null,photoURL:s.photoUrl||null,email:s.email||null,emailVerified:s.emailVerified||!1,phoneNumber:s.phoneNumber||null,tenantId:s.tenantId||null,providerData:l,metadata:new NT(s.createdAt,s.lastLoginAt),isAnonymous:u};Object.assign(t,d)}async function Xb(t){const e=un(t);await Fc(e),await e.auth._persistUserIfCurrent(e),e.auth._notifyListenersIfCurrent(e)}function Zb(t,e){return[...t.filter(r=>!e.some(i=>i.providerId===r.providerId)),...e]}function ex(t){return t.map(e=>{var{providerId:n}=e,r=am(e,["providerId"]);return{providerId:n,uid:r.rawId||"",displayName:r.displayName||null,email:r.email||null,phoneNumber:r.phoneNumber||null,photoURL:r.photoUrl||null}})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function tx(t,e){const n=await xT(t,{},async()=>{const r=xa({grant_type:"refresh_token",refresh_token:e}).slice(1),{tokenApiHost:i,apiKey:s}=t.config,o=OT(t,i,"/v1/token",`key=${s}`),l=await t._getAdditionalHeaders();return l["Content-Type"]="application/x-www-form-urlencoded",bT.fetch()(o,{method:"POST",headers:l,body:r})});return{accessToken:n.access_token,expiresIn:n.expires_in,refreshToken:n.refresh_token}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sa{constructor(){this.refreshToken=null,this.accessToken=null,this.expirationTime=null}get isExpired(){return!this.expirationTime||Date.now()>this.expirationTime-3e4}updateFromServerResponse(e){Y(e.idToken,"internal-error"),Y(typeof e.idToken<"u","internal-error"),Y(typeof e.refreshToken<"u","internal-error");const n="expiresIn"in e&&typeof e.expiresIn<"u"?Number(e.expiresIn):Jb(e.idToken);this.updateTokensAndExpiration(e.idToken,e.refreshToken,n)}async getToken(e,n=!1){return Y(!this.accessToken||this.refreshToken,e,"user-token-expired"),!n&&this.accessToken&&!this.isExpired?this.accessToken:this.refreshToken?(await this.refresh(e,this.refreshToken),this.accessToken):null}clearRefreshToken(){this.refreshToken=null}async refresh(e,n){const{accessToken:r,refreshToken:i,expiresIn:s}=await tx(e,n);this.updateTokensAndExpiration(r,i,Number(s))}updateTokensAndExpiration(e,n,r){this.refreshToken=n||null,this.accessToken=e||null,this.expirationTime=Date.now()+r*1e3}static fromJSON(e,n){const{refreshToken:r,accessToken:i,expirationTime:s}=n,o=new sa;return r&&(Y(typeof r=="string","internal-error",{appName:e}),o.refreshToken=r),i&&(Y(typeof i=="string","internal-error",{appName:e}),o.accessToken=i),s&&(Y(typeof s=="number","internal-error",{appName:e}),o.expirationTime=s),o}toJSON(){return{refreshToken:this.refreshToken,accessToken:this.accessToken,expirationTime:this.expirationTime}}_assign(e){this.accessToken=e.accessToken,this.refreshToken=e.refreshToken,this.expirationTime=e.expirationTime}_clone(){return Object.assign(new sa,this.toJSON())}_performRefresh(){return Zn("not implemented")}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vr(t,e){Y(typeof t=="string"||typeof t>"u","internal-error",{appName:e})}class mi{constructor(e){var{uid:n,auth:r,stsTokenManager:i}=e,s=am(e,["uid","auth","stsTokenManager"]);this.providerId="firebase",this.proactiveRefresh=new Yb(this),this.reloadUserInfo=null,this.reloadListener=null,this.uid=n,this.auth=r,this.stsTokenManager=i,this.accessToken=i.accessToken,this.displayName=s.displayName||null,this.email=s.email||null,this.emailVerified=s.emailVerified||!1,this.phoneNumber=s.phoneNumber||null,this.photoURL=s.photoURL||null,this.isAnonymous=s.isAnonymous||!1,this.tenantId=s.tenantId||null,this.providerData=s.providerData?[...s.providerData]:[],this.metadata=new NT(s.createdAt||void 0,s.lastLoginAt||void 0)}async getIdToken(e){const n=await ws(this,this.stsTokenManager.getToken(this.auth,e));return Y(n,this.auth,"internal-error"),this.accessToken!==n&&(this.accessToken=n,await this.auth._persistUserIfCurrent(this),this.auth._notifyListenersIfCurrent(this)),n}getIdTokenResult(e){return Gb(this,e)}reload(){return Xb(this)}_assign(e){this!==e&&(Y(this.uid===e.uid,this.auth,"internal-error"),this.displayName=e.displayName,this.photoURL=e.photoURL,this.email=e.email,this.emailVerified=e.emailVerified,this.phoneNumber=e.phoneNumber,this.isAnonymous=e.isAnonymous,this.tenantId=e.tenantId,this.providerData=e.providerData.map(n=>Object.assign({},n)),this.metadata._copy(e.metadata),this.stsTokenManager._assign(e.stsTokenManager))}_clone(e){const n=new mi(Object.assign(Object.assign({},this),{auth:e,stsTokenManager:this.stsTokenManager._clone()}));return n.metadata._copy(this.metadata),n}_onReload(e){Y(!this.reloadListener,this.auth,"internal-error"),this.reloadListener=e,this.reloadUserInfo&&(this._notifyReloadListener(this.reloadUserInfo),this.reloadUserInfo=null)}_notifyReloadListener(e){this.reloadListener?this.reloadListener(e):this.reloadUserInfo=e}_startProactiveRefresh(){this.proactiveRefresh._start()}_stopProactiveRefresh(){this.proactiveRefresh._stop()}async _updateTokensIfNecessary(e,n=!1){let r=!1;e.idToken&&e.idToken!==this.stsTokenManager.accessToken&&(this.stsTokenManager.updateFromServerResponse(e),r=!0),n&&await Fc(this),await this.auth._persistUserIfCurrent(this),r&&this.auth._notifyListenersIfCurrent(this)}async delete(){const e=await this.getIdToken();return await ws(this,Wb(this.auth,{idToken:e})),this.stsTokenManager.clearRefreshToken(),this.auth.signOut()}toJSON(){return Object.assign(Object.assign({uid:this.uid,email:this.email||void 0,emailVerified:this.emailVerified,displayName:this.displayName||void 0,isAnonymous:this.isAnonymous,photoURL:this.photoURL||void 0,phoneNumber:this.phoneNumber||void 0,tenantId:this.tenantId||void 0,providerData:this.providerData.map(e=>Object.assign({},e)),stsTokenManager:this.stsTokenManager.toJSON(),_redirectEventId:this._redirectEventId},this.metadata.toJSON()),{apiKey:this.auth.config.apiKey,appName:this.auth.name})}get refreshToken(){return this.stsTokenManager.refreshToken||""}static _fromJSON(e,n){var r,i,s,o,l,a,c,u;const d=(r=n.displayName)!==null&&r!==void 0?r:void 0,f=(i=n.email)!==null&&i!==void 0?i:void 0,p=(s=n.phoneNumber)!==null&&s!==void 0?s:void 0,y=(o=n.photoURL)!==null&&o!==void 0?o:void 0,v=(l=n.tenantId)!==null&&l!==void 0?l:void 0,C=(a=n._redirectEventId)!==null&&a!==void 0?a:void 0,m=(c=n.createdAt)!==null&&c!==void 0?c:void 0,g=(u=n.lastLoginAt)!==null&&u!==void 0?u:void 0,{uid:E,emailVerified:T,isAnonymous:_,providerData:R,stsTokenManager:I}=n;Y(E&&I,e,"internal-error");const w=sa.fromJSON(this.name,I);Y(typeof E=="string",e,"internal-error"),vr(d,e.name),vr(f,e.name),Y(typeof T=="boolean",e,"internal-error"),Y(typeof _=="boolean",e,"internal-error"),vr(p,e.name),vr(y,e.name),vr(v,e.name),vr(C,e.name),vr(m,e.name),vr(g,e.name);const A=new mi({uid:E,auth:e,email:f,emailVerified:T,displayName:d,isAnonymous:_,photoURL:y,phoneNumber:p,tenantId:v,stsTokenManager:w,createdAt:m,lastLoginAt:g});return R&&Array.isArray(R)&&(A.providerData=R.map(S=>Object.assign({},S))),C&&(A._redirectEventId=C),A}static async _fromIdTokenResponse(e,n,r=!1){const i=new sa;i.updateFromServerResponse(n);const s=new mi({uid:n.localId,auth:e,stsTokenManager:i,isAnonymous:r});return await Fc(s),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xv=new Map;function er(t){ur(t instanceof Function,"Expected a class definition");let e=xv.get(t);return e?(ur(e instanceof t,"Instance stored in cache mismatched with class"),e):(e=new t,xv.set(t,e),e)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.type="NONE",this.storage={}}async _isAvailable(){return!0}async _set(e,n){this.storage[e]=n}async _get(e){const n=this.storage[e];return n===void 0?null:n}async _remove(e){delete this.storage[e]}_addListener(e,n){}_removeListener(e,n){}}DT.type="NONE";const Ov=DT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xl(t,e,n){return`firebase:${t}:${e}:${n}`}class us{constructor(e,n,r){this.persistence=e,this.auth=n,this.userKey=r;const{config:i,name:s}=this.auth;this.fullUserKey=Xl(this.userKey,i.apiKey,s),this.fullPersistenceKey=Xl("persistence",i.apiKey,s),this.boundEventHandler=n._onStorageEvent.bind(n),this.persistence._addListener(this.fullUserKey,this.boundEventHandler)}setCurrentUser(e){return this.persistence._set(this.fullUserKey,e.toJSON())}async getCurrentUser(){const e=await this.persistence._get(this.fullUserKey);return e?mi._fromJSON(this.auth,e):null}removeCurrentUser(){return this.persistence._remove(this.fullUserKey)}savePersistenceForRedirect(){return this.persistence._set(this.fullPersistenceKey,this.persistence.type)}async setPersistence(e){if(this.persistence===e)return;const n=await this.getCurrentUser();if(await this.removeCurrentUser(),this.persistence=e,n)return this.setCurrentUser(n)}delete(){this.persistence._removeListener(this.fullUserKey,this.boundEventHandler)}static async create(e,n,r="authUser"){if(!n.length)return new us(er(Ov),e,r);const i=(await Promise.all(n.map(async c=>{if(await c._isAvailable())return c}))).filter(c=>c);let s=i[0]||er(Ov);const o=Xl(r,e.config.apiKey,e.name);let l=null;for(const c of n)try{const u=await c._get(o);if(u){const d=mi._fromJSON(e,u);c!==s&&(l=d),s=c;break}}catch{}const a=i.filter(c=>c._shouldAllowMigration);return!s._shouldAllowMigration||!a.length?new us(s,e,r):(s=a[0],l&&await s._set(o,l.toJSON()),await Promise.all(n.map(async c=>{if(c!==s)try{await c._remove(o)}catch{}})),new us(s,e,r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Nv(t){const e=t.toLowerCase();if(e.includes("opera/")||e.includes("opr/")||e.includes("opios/"))return"Opera";if(jT(e))return"IEMobile";if(e.includes("msie")||e.includes("trident/"))return"IE";if(e.includes("edge/"))return"Edge";if(MT(e))return"Firefox";if(e.includes("silk/"))return"Silk";if(FT(e))return"Blackberry";if(UT(e))return"Webos";if(dm(e))return"Safari";if((e.includes("chrome/")||LT(e))&&!e.includes("edge/"))return"Chrome";if(VT(e))return"Android";{const n=/([a-zA-Z\d\.]+)\/[a-zA-Z\d\.]*$/,r=t.match(n);if((r==null?void 0:r.length)===2)return r[1]}return"Other"}function MT(t=It()){return/firefox\//i.test(t)}function dm(t=It()){const e=t.toLowerCase();return e.includes("safari/")&&!e.includes("chrome/")&&!e.includes("crios/")&&!e.includes("android")}function LT(t=It()){return/crios\//i.test(t)}function jT(t=It()){return/iemobile/i.test(t)}function VT(t=It()){return/android/i.test(t)}function FT(t=It()){return/blackberry/i.test(t)}function UT(t=It()){return/webos/i.test(t)}function wu(t=It()){return/iphone|ipad|ipod/i.test(t)||/macintosh/i.test(t)&&/mobile/i.test(t)}function nx(t=It()){var e;return wu(t)&&!!(!((e=window.navigator)===null||e===void 0)&&e.standalone)}function rx(){return EA()&&document.documentMode===10}function $T(t=It()){return wu(t)||VT(t)||UT(t)||FT(t)||/windows phone/i.test(t)||jT(t)}function ix(){try{return!!(window&&window!==window.top)}catch{return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function BT(t,e=[]){let n;switch(t){case"Browser":n=Nv(It());break;case"Worker":n=`${Nv(It())}-${t}`;break;default:n=t}const r=e.length?e.join(","):"FirebaseCore-web";return`${n}/JsCore/${Vs}/${r}`}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class sx{constructor(e){this.auth=e,this.queue=[]}pushCallback(e,n){const r=s=>new Promise((o,l)=>{try{const a=e(s);o(a)}catch(a){l(a)}});r.onAbort=n,this.queue.push(r);const i=this.queue.length-1;return()=>{this.queue[i]=()=>Promise.resolve()}}async runMiddleware(e){if(this.auth.currentUser===e)return;const n=[];try{for(const r of this.queue)await r(e),r.onAbort&&n.push(r.onAbort)}catch(r){n.reverse();for(const i of n)try{i()}catch{}throw this.auth._errorFactory.create("login-blocked",{originalMessage:r==null?void 0:r.message})}}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ox(t,e={}){return Xr(t,"GET","/v2/passwordPolicy",xi(t,e))}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ax=6;class lx{constructor(e){var n,r,i,s;const o=e.customStrengthOptions;this.customStrengthOptions={},this.customStrengthOptions.minPasswordLength=(n=o.minPasswordLength)!==null&&n!==void 0?n:ax,o.maxPasswordLength&&(this.customStrengthOptions.maxPasswordLength=o.maxPasswordLength),o.containsLowercaseCharacter!==void 0&&(this.customStrengthOptions.containsLowercaseLetter=o.containsLowercaseCharacter),o.containsUppercaseCharacter!==void 0&&(this.customStrengthOptions.containsUppercaseLetter=o.containsUppercaseCharacter),o.containsNumericCharacter!==void 0&&(this.customStrengthOptions.containsNumericCharacter=o.containsNumericCharacter),o.containsNonAlphanumericCharacter!==void 0&&(this.customStrengthOptions.containsNonAlphanumericCharacter=o.containsNonAlphanumericCharacter),this.enforcementState=e.enforcementState,this.enforcementState==="ENFORCEMENT_STATE_UNSPECIFIED"&&(this.enforcementState="OFF"),this.allowedNonAlphanumericCharacters=(i=(r=e.allowedNonAlphanumericCharacters)===null||r===void 0?void 0:r.join(""))!==null&&i!==void 0?i:"",this.forceUpgradeOnSignin=(s=e.forceUpgradeOnSignin)!==null&&s!==void 0?s:!1,this.schemaVersion=e.schemaVersion}validatePassword(e){var n,r,i,s,o,l;const a={isValid:!0,passwordPolicy:this};return this.validatePasswordLengthOptions(e,a),this.validatePasswordCharacterOptions(e,a),a.isValid&&(a.isValid=(n=a.meetsMinPasswordLength)!==null&&n!==void 0?n:!0),a.isValid&&(a.isValid=(r=a.meetsMaxPasswordLength)!==null&&r!==void 0?r:!0),a.isValid&&(a.isValid=(i=a.containsLowercaseLetter)!==null&&i!==void 0?i:!0),a.isValid&&(a.isValid=(s=a.containsUppercaseLetter)!==null&&s!==void 0?s:!0),a.isValid&&(a.isValid=(o=a.containsNumericCharacter)!==null&&o!==void 0?o:!0),a.isValid&&(a.isValid=(l=a.containsNonAlphanumericCharacter)!==null&&l!==void 0?l:!0),a}validatePasswordLengthOptions(e,n){const r=this.customStrengthOptions.minPasswordLength,i=this.customStrengthOptions.maxPasswordLength;r&&(n.meetsMinPasswordLength=e.length>=r),i&&(n.meetsMaxPasswordLength=e.length<=i)}validatePasswordCharacterOptions(e,n){this.updatePasswordCharacterOptionsStatuses(n,!1,!1,!1,!1);let r;for(let i=0;i<e.length;i++)r=e.charAt(i),this.updatePasswordCharacterOptionsStatuses(n,r>="a"&&r<="z",r>="A"&&r<="Z",r>="0"&&r<="9",this.allowedNonAlphanumericCharacters.includes(r))}updatePasswordCharacterOptionsStatuses(e,n,r,i,s){this.customStrengthOptions.containsLowercaseLetter&&(e.containsLowercaseLetter||(e.containsLowercaseLetter=n)),this.customStrengthOptions.containsUppercaseLetter&&(e.containsUppercaseLetter||(e.containsUppercaseLetter=r)),this.customStrengthOptions.containsNumericCharacter&&(e.containsNumericCharacter||(e.containsNumericCharacter=i)),this.customStrengthOptions.containsNonAlphanumericCharacter&&(e.containsNonAlphanumericCharacter||(e.containsNonAlphanumericCharacter=s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cx{constructor(e,n,r,i){this.app=e,this.heartbeatServiceProvider=n,this.appCheckServiceProvider=r,this.config=i,this.currentUser=null,this.emulatorConfig=null,this.operations=Promise.resolve(),this.authStateSubscription=new Dv(this),this.idTokenSubscription=new Dv(this),this.beforeStateQueue=new sx(this),this.redirectUser=null,this.isProactiveRefreshEnabled=!1,this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION=1,this._canInitEmulator=!0,this._isInitialized=!1,this._deleted=!1,this._initializationPromise=null,this._popupRedirectResolver=null,this._errorFactory=AT,this._agentRecaptchaConfig=null,this._tenantRecaptchaConfigs={},this._projectPasswordPolicy=null,this._tenantPasswordPolicies={},this.lastNotifiedUid=void 0,this.languageCode=null,this.tenantId=null,this.settings={appVerificationDisabledForTesting:!1},this.frameworks=[],this.name=e.name,this.clientVersion=i.sdkClientVersion}_initializeWithPersistence(e,n){return n&&(this._popupRedirectResolver=er(n)),this._initializationPromise=this.queue(async()=>{var r,i;if(!this._deleted&&(this.persistenceManager=await us.create(this,e),!this._deleted)){if(!((r=this._popupRedirectResolver)===null||r===void 0)&&r._shouldInitProactively)try{await this._popupRedirectResolver._initialize(this)}catch{}await this.initializeCurrentUser(n),this.lastNotifiedUid=((i=this.currentUser)===null||i===void 0?void 0:i.uid)||null,!this._deleted&&(this._isInitialized=!0)}}),this._initializationPromise}async _onStorageEvent(){if(this._deleted)return;const e=await this.assertedPersistence.getCurrentUser();if(!(!this.currentUser&&!e)){if(this.currentUser&&e&&this.currentUser.uid===e.uid){this._currentUser._assign(e),await this.currentUser.getIdToken();return}await this._updateCurrentUser(e,!0)}}async initializeCurrentUser(e){var n;const r=await this.assertedPersistence.getCurrentUser();let i=r,s=!1;if(e&&this.config.authDomain){await this.getOrInitRedirectPersistenceManager();const o=(n=this.redirectUser)===null||n===void 0?void 0:n._redirectEventId,l=i==null?void 0:i._redirectEventId,a=await this.tryRedirectSignIn(e);(!o||o===l)&&(a!=null&&a.user)&&(i=a.user,s=!0)}if(!i)return this.directlySetCurrentUser(null);if(!i._redirectEventId){if(s)try{await this.beforeStateQueue.runMiddleware(i)}catch(o){i=r,this._popupRedirectResolver._overrideRedirectResult(this,()=>Promise.reject(o))}return i?this.reloadAndSetCurrentUserOrClear(i):this.directlySetCurrentUser(null)}return Y(this._popupRedirectResolver,this,"argument-error"),await this.getOrInitRedirectPersistenceManager(),this.redirectUser&&this.redirectUser._redirectEventId===i._redirectEventId?this.directlySetCurrentUser(i):this.reloadAndSetCurrentUserOrClear(i)}async tryRedirectSignIn(e){let n=null;try{n=await this._popupRedirectResolver._completeRedirectFn(this,e,!0)}catch{await this._setRedirectUser(null)}return n}async reloadAndSetCurrentUserOrClear(e){try{await Fc(e)}catch(n){if((n==null?void 0:n.code)!=="auth/network-request-failed")return this.directlySetCurrentUser(null)}return this.directlySetCurrentUser(e)}useDeviceLanguage(){this.languageCode=$b()}async _delete(){this._deleted=!0}async updateCurrentUser(e){const n=e?un(e):null;return n&&Y(n.auth.config.apiKey===this.config.apiKey,this,"invalid-user-token"),this._updateCurrentUser(n&&n._clone(this))}async _updateCurrentUser(e,n=!1){if(!this._deleted)return e&&Y(this.tenantId===e.tenantId,this,"tenant-id-mismatch"),n||await this.beforeStateQueue.runMiddleware(e),this.queue(async()=>{await this.directlySetCurrentUser(e),this.notifyAuthListeners()})}async signOut(){return await this.beforeStateQueue.runMiddleware(null),(this.redirectPersistenceManager||this._popupRedirectResolver)&&await this._setRedirectUser(null),this._updateCurrentUser(null,!0)}setPersistence(e){return this.queue(async()=>{await this.assertedPersistence.setPersistence(er(e))})}_getRecaptchaConfig(){return this.tenantId==null?this._agentRecaptchaConfig:this._tenantRecaptchaConfigs[this.tenantId]}async validatePassword(e){this._getPasswordPolicyInternal()||await this._updatePasswordPolicy();const n=this._getPasswordPolicyInternal();return n.schemaVersion!==this.EXPECTED_PASSWORD_POLICY_SCHEMA_VERSION?Promise.reject(this._errorFactory.create("unsupported-password-policy-schema-version",{})):n.validatePassword(e)}_getPasswordPolicyInternal(){return this.tenantId===null?this._projectPasswordPolicy:this._tenantPasswordPolicies[this.tenantId]}async _updatePasswordPolicy(){const e=await ox(this),n=new lx(e);this.tenantId===null?this._projectPasswordPolicy=n:this._tenantPasswordPolicies[this.tenantId]=n}_getPersistence(){return this.assertedPersistence.persistence.type}_updateErrorMap(e){this._errorFactory=new ba("auth","Firebase",e())}onAuthStateChanged(e,n,r){return this.registerStateListener(this.authStateSubscription,e,n,r)}beforeAuthStateChanged(e,n){return this.beforeStateQueue.pushCallback(e,n)}onIdTokenChanged(e,n,r){return this.registerStateListener(this.idTokenSubscription,e,n,r)}authStateReady(){return new Promise((e,n)=>{if(this.currentUser)e();else{const r=this.onAuthStateChanged(()=>{r(),e()},n)}})}toJSON(){var e;return{apiKey:this.config.apiKey,authDomain:this.config.authDomain,appName:this.name,currentUser:(e=this._currentUser)===null||e===void 0?void 0:e.toJSON()}}async _setRedirectUser(e,n){const r=await this.getOrInitRedirectPersistenceManager(n);return e===null?r.removeCurrentUser():r.setCurrentUser(e)}async getOrInitRedirectPersistenceManager(e){if(!this.redirectPersistenceManager){const n=e&&er(e)||this._popupRedirectResolver;Y(n,this,"argument-error"),this.redirectPersistenceManager=await us.create(this,[er(n._redirectPersistence)],"redirectUser"),this.redirectUser=await this.redirectPersistenceManager.getCurrentUser()}return this.redirectPersistenceManager}async _redirectUserForId(e){var n,r;return this._isInitialized&&await this.queue(async()=>{}),((n=this._currentUser)===null||n===void 0?void 0:n._redirectEventId)===e?this._currentUser:((r=this.redirectUser)===null||r===void 0?void 0:r._redirectEventId)===e?this.redirectUser:null}async _persistUserIfCurrent(e){if(e===this.currentUser)return this.queue(async()=>this.directlySetCurrentUser(e))}_notifyListenersIfCurrent(e){e===this.currentUser&&this.notifyAuthListeners()}_key(){return`${this.config.authDomain}:${this.config.apiKey}:${this.name}`}_startProactiveRefresh(){this.isProactiveRefreshEnabled=!0,this.currentUser&&this._currentUser._startProactiveRefresh()}_stopProactiveRefresh(){this.isProactiveRefreshEnabled=!1,this.currentUser&&this._currentUser._stopProactiveRefresh()}get _currentUser(){return this.currentUser}notifyAuthListeners(){var e,n;if(!this._isInitialized)return;this.idTokenSubscription.next(this.currentUser);const r=(n=(e=this.currentUser)===null||e===void 0?void 0:e.uid)!==null&&n!==void 0?n:null;this.lastNotifiedUid!==r&&(this.lastNotifiedUid=r,this.authStateSubscription.next(this.currentUser))}registerStateListener(e,n,r,i){if(this._deleted)return()=>{};const s=typeof n=="function"?n:n.next.bind(n);let o=!1;const l=this._isInitialized?Promise.resolve():this._initializationPromise;if(Y(l,this,"internal-error"),l.then(()=>{o||s(this.currentUser)}),typeof n=="function"){const a=e.addObserver(n,r,i);return()=>{o=!0,a()}}else{const a=e.addObserver(n);return()=>{o=!0,a()}}}async directlySetCurrentUser(e){this.currentUser&&this.currentUser!==e&&this._currentUser._stopProactiveRefresh(),e&&this.isProactiveRefreshEnabled&&e._startProactiveRefresh(),this.currentUser=e,e?await this.assertedPersistence.setCurrentUser(e):await this.assertedPersistence.removeCurrentUser()}queue(e){return this.operations=this.operations.then(e,e),this.operations}get assertedPersistence(){return Y(this.persistenceManager,this,"internal-error"),this.persistenceManager}_logFramework(e){!e||this.frameworks.includes(e)||(this.frameworks.push(e),this.frameworks.sort(),this.clientVersion=BT(this.config.clientPlatform,this._getFrameworks()))}_getFrameworks(){return this.frameworks}async _getAdditionalHeaders(){var e;const n={"X-Client-Version":this.clientVersion};this.app.options.appId&&(n["X-Firebase-gmpid"]=this.app.options.appId);const r=await((e=this.heartbeatServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getHeartbeatsHeader());r&&(n["X-Firebase-Client"]=r);const i=await this._getAppCheckToken();return i&&(n["X-Firebase-AppCheck"]=i),n}async _getAppCheckToken(){var e;const n=await((e=this.appCheckServiceProvider.getImmediate({optional:!0}))===null||e===void 0?void 0:e.getToken());return n!=null&&n.error&&jb(`Error while retrieving App Check token: ${n.error}`),n==null?void 0:n.token}}function Oi(t){return un(t)}class Dv{constructor(e){this.auth=e,this.observer=null,this.addObserver=kA(n=>this.observer=n)}get next(){return Y(this.observer,this.auth,"internal-error"),this.observer.next.bind(this.observer)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ux(){var t,e;return(e=(t=document.getElementsByTagName("head"))===null||t===void 0?void 0:t[0])!==null&&e!==void 0?e:document}function zT(t){return new Promise((e,n)=>{const r=document.createElement("script");r.setAttribute("src",t),r.onload=e,r.onerror=i=>{const s=Fn("internal-error");s.customData=i,n(s)},r.type="text/javascript",r.charset="UTF-8",ux().appendChild(r)})}function dx(t){return`__${t}${Math.floor(Math.random()*1e6)}`}const hx="https://www.google.com/recaptcha/enterprise.js?render=",fx="recaptcha-enterprise",px="NO_RECAPTCHA";class mx{constructor(e){this.type=fx,this.auth=Oi(e)}async verify(e="verify",n=!1){async function r(s){if(!n){if(s.tenantId==null&&s._agentRecaptchaConfig!=null)return s._agentRecaptchaConfig.siteKey;if(s.tenantId!=null&&s._tenantRecaptchaConfigs[s.tenantId]!==void 0)return s._tenantRecaptchaConfigs[s.tenantId].siteKey}return new Promise(async(o,l)=>{Hb(s,{clientType:"CLIENT_TYPE_WEB",version:"RECAPTCHA_ENTERPRISE"}).then(a=>{if(a.recaptchaKey===void 0)l(new Error("recaptcha Enterprise site key undefined"));else{const c=new Mb(a);return s.tenantId==null?s._agentRecaptchaConfig=c:s._tenantRecaptchaConfigs[s.tenantId]=c,o(c.siteKey)}}).catch(a=>{l(a)})})}function i(s,o,l){const a=window.grecaptcha;Av(a)?a.enterprise.ready(()=>{a.enterprise.execute(s,{action:e}).then(c=>{o(c)}).catch(()=>{o(px)})}):l(Error("No reCAPTCHA enterprise script loaded."))}return new Promise((s,o)=>{r(this.auth).then(l=>{if(!n&&Av(window.grecaptcha))i(l,s,o);else{if(typeof window>"u"){o(new Error("RecaptchaVerifier is only supported in browser"));return}zT(hx+l).then(()=>{i(l,s,o)}).catch(a=>{o(a)})}}).catch(l=>{o(l)})})}}async function Uc(t,e,n,r=!1){const i=new mx(t);let s;try{s=await i.verify(n)}catch{s=await i.verify(n,!0)}const o=Object.assign({},e);return r?Object.assign(o,{captchaResp:s}):Object.assign(o,{captchaResponse:s}),Object.assign(o,{clientType:"CLIENT_TYPE_WEB"}),Object.assign(o,{recaptchaVersion:"RECAPTCHA_ENTERPRISE"}),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function gx(t,e){const n=om(t,"auth");if(n.isInitialized()){const i=n.getImmediate(),s=n.getOptions();if(Lc(s,e??{}))return i;Pn(i,"already-initialized")}return n.initialize({options:e})}function yx(t,e){const n=(e==null?void 0:e.persistence)||[],r=(Array.isArray(n)?n:[n]).map(er);e!=null&&e.errorMap&&t._updateErrorMap(e.errorMap),t._initializeWithPersistence(r,e==null?void 0:e.popupRedirectResolver)}function vx(t,e,n){const r=Oi(t);Y(r._canInitEmulator,r,"emulator-config-failed"),Y(/^https?:\/\//.test(e),r,"invalid-emulator-scheme");const i=!!(n!=null&&n.disableWarnings),s=qT(e),{host:o,port:l}=_x(e),a=l===null?"":`:${l}`;r.config.emulator={url:`${s}//${o}${a}/`},r.settings.appVerificationDisabledForTesting=!0,r.emulatorConfig=Object.freeze({host:o,port:l,protocol:s.replace(":",""),options:Object.freeze({disableWarnings:i})}),i||Ex()}function qT(t){const e=t.indexOf(":");return e<0?"":t.substr(0,e+1)}function _x(t){const e=qT(t),n=/(\/\/)?([^?#/]+)/.exec(t.substr(e.length));if(!n)return{host:"",port:null};const r=n[2].split("@").pop()||"",i=/^(\[[^\]]+\])(:|$)/.exec(r);if(i){const s=i[1];return{host:s,port:Mv(r.substr(s.length+1))}}else{const[s,o]=r.split(":");return{host:s,port:Mv(o)}}}function Mv(t){if(!t)return null;const e=Number(t);return isNaN(e)?null:e}function Ex(){function t(){const e=document.createElement("p"),n=e.style;e.innerText="Running in emulator mode. Do not use with production credentials.",n.position="fixed",n.width="100%",n.backgroundColor="#ffffff",n.border=".1em solid #000000",n.color="#b50000",n.bottom="0px",n.left="0px",n.margin="0px",n.zIndex="10000",n.textAlign="center",e.classList.add("firebase-emulator-warning"),document.body.appendChild(e)}typeof console<"u"&&typeof console.info=="function"&&console.info("WARNING: You are using the Auth Emulator, which is intended for local testing only.  Do not use with production credentials."),typeof window<"u"&&typeof document<"u"&&(document.readyState==="loading"?window.addEventListener("DOMContentLoaded",t):t())}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hm{constructor(e,n){this.providerId=e,this.signInMethod=n}toJSON(){return Zn("not implemented")}_getIdTokenResponse(e){return Zn("not implemented")}_linkToIdToken(e,n){return Zn("not implemented")}_getReauthenticationResolver(e){return Zn("not implemented")}}async function Tx(t,e){return Xr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ud(t,e){return Na(t,"POST","/v1/accounts:signInWithPassword",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Sx(t,e){return Na(t,"POST","/v1/accounts:signInWithEmailLink",xi(t,e))}async function wx(t,e){return Na(t,"POST","/v1/accounts:signInWithEmailLink",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class oa extends hm{constructor(e,n,r,i=null){super("password",r),this._email=e,this._password=n,this._tenantId=i}static _fromEmailAndPassword(e,n){return new oa(e,n,"password")}static _fromEmailAndCode(e,n,r=null){return new oa(e,n,"emailLink",r)}toJSON(){return{email:this._email,password:this._password,signInMethod:this.signInMethod,tenantId:this._tenantId}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e;if(n!=null&&n.email&&(n!=null&&n.password)){if(n.signInMethod==="password")return this._fromEmailAndPassword(n.email,n.password);if(n.signInMethod==="emailLink")return this._fromEmailAndCode(n.email,n.password,n.tenantId)}return null}async _getIdTokenResponse(e){var n;switch(this.signInMethod){case"password":const r={returnSecureToken:!0,email:this._email,password:this._password,clientType:"CLIENT_TYPE_WEB"};if(!((n=e._getRecaptchaConfig())===null||n===void 0)&&n.emailPasswordEnabled){const i=await Uc(e,r,"signInWithPassword");return Ud(e,i)}else return Ud(e,r).catch(async i=>{if(i.code==="auth/missing-recaptcha-token"){console.log("Sign-in with email address and password is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-in flow.");const s=await Uc(e,r,"signInWithPassword");return Ud(e,s)}else return Promise.reject(i)});case"emailLink":return Sx(e,{email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}async _linkToIdToken(e,n){switch(this.signInMethod){case"password":return Tx(e,{idToken:n,returnSecureToken:!0,email:this._email,password:this._password});case"emailLink":return wx(e,{idToken:n,email:this._email,oobCode:this._password});default:Pn(e,"internal-error")}}_getReauthenticationResolver(e){return this._getIdTokenResponse(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function ds(t,e){return Na(t,"POST","/v1/accounts:signInWithIdp",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Cx="http://localhost";class Ci extends hm{constructor(){super(...arguments),this.pendingToken=null}static _fromParams(e){const n=new Ci(e.providerId,e.signInMethod);return e.idToken||e.accessToken?(e.idToken&&(n.idToken=e.idToken),e.accessToken&&(n.accessToken=e.accessToken),e.nonce&&!e.pendingToken&&(n.nonce=e.nonce),e.pendingToken&&(n.pendingToken=e.pendingToken)):e.oauthToken&&e.oauthTokenSecret?(n.accessToken=e.oauthToken,n.secret=e.oauthTokenSecret):Pn("argument-error"),n}toJSON(){return{idToken:this.idToken,accessToken:this.accessToken,secret:this.secret,nonce:this.nonce,pendingToken:this.pendingToken,providerId:this.providerId,signInMethod:this.signInMethod}}static fromJSON(e){const n=typeof e=="string"?JSON.parse(e):e,{providerId:r,signInMethod:i}=n,s=am(n,["providerId","signInMethod"]);if(!r||!i)return null;const o=new Ci(r,i);return o.idToken=s.idToken||void 0,o.accessToken=s.accessToken||void 0,o.secret=s.secret,o.nonce=s.nonce,o.pendingToken=s.pendingToken||null,o}_getIdTokenResponse(e){const n=this.buildRequest();return ds(e,n)}_linkToIdToken(e,n){const r=this.buildRequest();return r.idToken=n,ds(e,r)}_getReauthenticationResolver(e){const n=this.buildRequest();return n.autoCreate=!1,ds(e,n)}buildRequest(){const e={requestUri:Cx,returnSecureToken:!0};if(this.pendingToken)e.pendingToken=this.pendingToken;else{const n={};this.idToken&&(n.id_token=this.idToken),this.accessToken&&(n.access_token=this.accessToken),this.secret&&(n.oauth_token_secret=this.secret),n.providerId=this.providerId,this.nonce&&!this.pendingToken&&(n.nonce=this.nonce),e.postBody=xa(n)}return e}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Px(t){switch(t){case"recoverEmail":return"RECOVER_EMAIL";case"resetPassword":return"PASSWORD_RESET";case"signIn":return"EMAIL_SIGNIN";case"verifyEmail":return"VERIFY_EMAIL";case"verifyAndChangeEmail":return"VERIFY_AND_CHANGE_EMAIL";case"revertSecondFactorAddition":return"REVERT_SECOND_FACTOR_ADDITION";default:return null}}function Rx(t){const e=yo(vo(t)).link,n=e?yo(vo(e)).deep_link_id:null,r=yo(vo(t)).deep_link_id;return(r?yo(vo(r)).link:null)||r||n||e||t}class fm{constructor(e){var n,r,i,s,o,l;const a=yo(vo(e)),c=(n=a.apiKey)!==null&&n!==void 0?n:null,u=(r=a.oobCode)!==null&&r!==void 0?r:null,d=Px((i=a.mode)!==null&&i!==void 0?i:null);Y(c&&u&&d,"argument-error"),this.apiKey=c,this.operation=d,this.code=u,this.continueUrl=(s=a.continueUrl)!==null&&s!==void 0?s:null,this.languageCode=(o=a.languageCode)!==null&&o!==void 0?o:null,this.tenantId=(l=a.tenantId)!==null&&l!==void 0?l:null}static parseLink(e){const n=Rx(e);try{return new fm(n)}catch{return null}}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fs{constructor(){this.providerId=Fs.PROVIDER_ID}static credential(e,n){return oa._fromEmailAndPassword(e,n)}static credentialWithLink(e,n){const r=fm.parseLink(n);return Y(r,"argument-error"),oa._fromEmailAndCode(e,r.code,r.tenantId)}}Fs.PROVIDER_ID="password";Fs.EMAIL_PASSWORD_SIGN_IN_METHOD="password";Fs.EMAIL_LINK_SIGN_IN_METHOD="emailLink";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(e){this.providerId=e,this.defaultLanguageCode=null,this.customParameters={}}setDefaultLanguage(e){this.defaultLanguageCode=e}setCustomParameters(e){return this.customParameters=e,this}getCustomParameters(){return this.customParameters}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Da extends HT{constructor(){super(...arguments),this.scopes=[]}addScope(e){return this.scopes.includes(e)||this.scopes.push(e),this}getScopes(){return[...this.scopes]}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pr extends Da{constructor(){super("facebook.com")}static credential(e){return Ci._fromParams({providerId:Pr.PROVIDER_ID,signInMethod:Pr.FACEBOOK_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return Pr.credentialFromTaggedObject(e)}static credentialFromError(e){return Pr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return Pr.credential(e.oauthAccessToken)}catch{return null}}}Pr.FACEBOOK_SIGN_IN_METHOD="facebook.com";Pr.PROVIDER_ID="facebook.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr extends Da{constructor(){super("google.com"),this.addScope("profile")}static credential(e,n){return Ci._fromParams({providerId:Rr.PROVIDER_ID,signInMethod:Rr.GOOGLE_SIGN_IN_METHOD,idToken:e,accessToken:n})}static credentialFromResult(e){return Rr.credentialFromTaggedObject(e)}static credentialFromError(e){return Rr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthIdToken:n,oauthAccessToken:r}=e;if(!n&&!r)return null;try{return Rr.credential(n,r)}catch{return null}}}Rr.GOOGLE_SIGN_IN_METHOD="google.com";Rr.PROVIDER_ID="google.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kr extends Da{constructor(){super("github.com")}static credential(e){return Ci._fromParams({providerId:kr.PROVIDER_ID,signInMethod:kr.GITHUB_SIGN_IN_METHOD,accessToken:e})}static credentialFromResult(e){return kr.credentialFromTaggedObject(e)}static credentialFromError(e){return kr.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e||!("oauthAccessToken"in e)||!e.oauthAccessToken)return null;try{return kr.credential(e.oauthAccessToken)}catch{return null}}}kr.GITHUB_SIGN_IN_METHOD="github.com";kr.PROVIDER_ID="github.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ir extends Da{constructor(){super("twitter.com")}static credential(e,n){return Ci._fromParams({providerId:Ir.PROVIDER_ID,signInMethod:Ir.TWITTER_SIGN_IN_METHOD,oauthToken:e,oauthTokenSecret:n})}static credentialFromResult(e){return Ir.credentialFromTaggedObject(e)}static credentialFromError(e){return Ir.credentialFromTaggedObject(e.customData||{})}static credentialFromTaggedObject({_tokenResponse:e}){if(!e)return null;const{oauthAccessToken:n,oauthTokenSecret:r}=e;if(!n||!r)return null;try{return Ir.credential(n,r)}catch{return null}}}Ir.TWITTER_SIGN_IN_METHOD="twitter.com";Ir.PROVIDER_ID="twitter.com";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function $d(t,e){return Na(t,"POST","/v1/accounts:signUp",xi(t,e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pi{constructor(e){this.user=e.user,this.providerId=e.providerId,this._tokenResponse=e._tokenResponse,this.operationType=e.operationType}static async _fromIdTokenResponse(e,n,r,i=!1){const s=await mi._fromIdTokenResponse(e,r,i),o=Lv(r);return new Pi({user:s,providerId:o,_tokenResponse:r,operationType:n})}static async _forOperation(e,n,r){await e._updateTokensIfNecessary(r,!0);const i=Lv(r);return new Pi({user:e,providerId:i,_tokenResponse:r,operationType:n})}}function Lv(t){return t.providerId?t.providerId:"phoneNumber"in t?"phone":null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $c extends gr{constructor(e,n,r,i){var s;super(n.code,n.message),this.operationType=r,this.user=i,Object.setPrototypeOf(this,$c.prototype),this.customData={appName:e.name,tenantId:(s=e.tenantId)!==null&&s!==void 0?s:void 0,_serverResponse:n.customData._serverResponse,operationType:r}}static _fromErrorAndOperation(e,n,r,i){return new $c(e,n,r,i)}}function WT(t,e,n,r){return(e==="reauthenticate"?n._getReauthenticationResolver(t):n._getIdTokenResponse(t)).catch(s=>{throw s.code==="auth/multi-factor-auth-required"?$c._fromErrorAndOperation(t,s,e,r):s})}async function kx(t,e,n=!1){const r=await ws(t,e._linkToIdToken(t.auth,await t.getIdToken()),n);return Pi._forOperation(t,"link",r)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ix(t,e,n=!1){const{auth:r}=t,i="reauthenticate";try{const s=await ws(t,WT(r,i,e,t),n);Y(s.idToken,r,"internal-error");const o=um(s.idToken);Y(o,r,"internal-error");const{sub:l}=o;return Y(t.uid===l,r,"user-mismatch"),Pi._forOperation(t,i,s)}catch(s){throw(s==null?void 0:s.code)==="auth/user-not-found"&&Pn(r,"user-mismatch"),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function KT(t,e,n=!1){const r="signIn",i=await WT(t,r,e),s=await Pi._fromIdTokenResponse(t,r,i);return n||await t._updateCurrentUser(s.user),s}async function Ax(t,e){return KT(Oi(t),e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function GT(t){const e=Oi(t);e._getPasswordPolicyInternal()&&await e._updatePasswordPolicy()}async function bx(t,e,n){var r;const i=Oi(t),s={returnSecureToken:!0,email:e,password:n,clientType:"CLIENT_TYPE_WEB"};let o;if(!((r=i._getRecaptchaConfig())===null||r===void 0)&&r.emailPasswordEnabled){const c=await Uc(i,s,"signUpPassword");o=$d(i,c)}else o=$d(i,s).catch(async c=>{if(c.code==="auth/missing-recaptcha-token"){console.log("Sign-up is protected by reCAPTCHA for this project. Automatically triggering the reCAPTCHA flow and restarting the sign-up flow.");const u=await Uc(i,s,"signUpPassword");return $d(i,u)}throw c});const l=await o.catch(c=>{throw c.code==="auth/password-does-not-meet-requirements"&&GT(t),c}),a=await Pi._fromIdTokenResponse(i,"signIn",l);return await i._updateCurrentUser(a.user),a}function xx(t,e,n){return Ax(un(t),Fs.credential(e,n)).catch(async r=>{throw r.code==="auth/password-does-not-meet-requirements"&&GT(t),r})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ox(t,e){return Xr(t,"POST","/v1/accounts:update",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Nx(t,{displayName:e,photoURL:n}){if(e===void 0&&n===void 0)return;const r=un(t),s={idToken:await r.getIdToken(),displayName:e,photoUrl:n,returnSecureToken:!0},o=await ws(r,Ox(r.auth,s));r.displayName=o.displayName||null,r.photoURL=o.photoUrl||null;const l=r.providerData.find(({providerId:a})=>a==="password");l&&(l.displayName=r.displayName,l.photoURL=r.photoURL),await r._updateTokensIfNecessary(o)}function Dx(t,e,n,r){return un(t).onIdTokenChanged(e,n,r)}function Mx(t,e,n){return un(t).beforeAuthStateChanged(e,n)}const Bc="__sak";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JT{constructor(e,n){this.storageRetriever=e,this.type=n}_isAvailable(){try{return this.storage?(this.storage.setItem(Bc,"1"),this.storage.removeItem(Bc),Promise.resolve(!0)):Promise.resolve(!1)}catch{return Promise.resolve(!1)}}_set(e,n){return this.storage.setItem(e,JSON.stringify(n)),Promise.resolve()}_get(e){const n=this.storage.getItem(e);return Promise.resolve(n?JSON.parse(n):null)}_remove(e){return this.storage.removeItem(e),Promise.resolve()}get storage(){return this.storageRetriever()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Lx(){const t=It();return dm(t)||wu(t)}const jx=1e3,Vx=10;class QT extends JT{constructor(){super(()=>window.localStorage,"LOCAL"),this.boundEventHandler=(e,n)=>this.onStorageEvent(e,n),this.listeners={},this.localCache={},this.pollTimer=null,this.safariLocalStorageNotSynced=Lx()&&ix(),this.fallbackToPolling=$T(),this._shouldAllowMigration=!0}forAllChangedKeys(e){for(const n of Object.keys(this.listeners)){const r=this.storage.getItem(n),i=this.localCache[n];r!==i&&e(n,i,r)}}onStorageEvent(e,n=!1){if(!e.key){this.forAllChangedKeys((o,l,a)=>{this.notifyListeners(o,a)});return}const r=e.key;if(n?this.detachListener():this.stopPolling(),this.safariLocalStorageNotSynced){const o=this.storage.getItem(r);if(e.newValue!==o)e.newValue!==null?this.storage.setItem(r,e.newValue):this.storage.removeItem(r);else if(this.localCache[r]===e.newValue&&!n)return}const i=()=>{const o=this.storage.getItem(r);!n&&this.localCache[r]===o||this.notifyListeners(r,o)},s=this.storage.getItem(r);rx()&&s!==e.newValue&&e.newValue!==e.oldValue?setTimeout(i,Vx):i()}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n&&JSON.parse(n))}startPolling(){this.stopPolling(),this.pollTimer=setInterval(()=>{this.forAllChangedKeys((e,n,r)=>{this.onStorageEvent(new StorageEvent("storage",{key:e,oldValue:n,newValue:r}),!0)})},jx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}attachListener(){window.addEventListener("storage",this.boundEventHandler)}detachListener(){window.removeEventListener("storage",this.boundEventHandler)}_addListener(e,n){Object.keys(this.listeners).length===0&&(this.fallbackToPolling?this.startPolling():this.attachListener()),this.listeners[e]||(this.listeners[e]=new Set,this.localCache[e]=this.storage.getItem(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&(this.detachListener(),this.stopPolling())}async _set(e,n){await super._set(e,n),this.localCache[e]=JSON.stringify(n)}async _get(e){const n=await super._get(e);return this.localCache[e]=JSON.stringify(n),n}async _remove(e){await super._remove(e),delete this.localCache[e]}}QT.type="LOCAL";const Fx=QT;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT extends JT{constructor(){super(()=>window.sessionStorage,"SESSION")}_addListener(e,n){}_removeListener(e,n){}}YT.type="SESSION";const XT=YT;/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ux(t){return Promise.all(t.map(async e=>{try{return{fulfilled:!0,value:await e}}catch(n){return{fulfilled:!1,reason:n}}}))}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Cu{constructor(e){this.eventTarget=e,this.handlersMap={},this.boundEventHandler=this.handleEvent.bind(this)}static _getInstance(e){const n=this.receivers.find(i=>i.isListeningto(e));if(n)return n;const r=new Cu(e);return this.receivers.push(r),r}isListeningto(e){return this.eventTarget===e}async handleEvent(e){const n=e,{eventId:r,eventType:i,data:s}=n.data,o=this.handlersMap[i];if(!(o!=null&&o.size))return;n.ports[0].postMessage({status:"ack",eventId:r,eventType:i});const l=Array.from(o).map(async c=>c(n.origin,s)),a=await Ux(l);n.ports[0].postMessage({status:"done",eventId:r,eventType:i,response:a})}_subscribe(e,n){Object.keys(this.handlersMap).length===0&&this.eventTarget.addEventListener("message",this.boundEventHandler),this.handlersMap[e]||(this.handlersMap[e]=new Set),this.handlersMap[e].add(n)}_unsubscribe(e,n){this.handlersMap[e]&&n&&this.handlersMap[e].delete(n),(!n||this.handlersMap[e].size===0)&&delete this.handlersMap[e],Object.keys(this.handlersMap).length===0&&this.eventTarget.removeEventListener("message",this.boundEventHandler)}}Cu.receivers=[];/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function pm(t="",e=10){let n="";for(let r=0;r<e;r++)n+=Math.floor(Math.random()*10);return t+n}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $x{constructor(e){this.target=e,this.handlers=new Set}removeMessageHandler(e){e.messageChannel&&(e.messageChannel.port1.removeEventListener("message",e.onMessage),e.messageChannel.port1.close()),this.handlers.delete(e)}async _send(e,n,r=50){const i=typeof MessageChannel<"u"?new MessageChannel:null;if(!i)throw new Error("connection_unavailable");let s,o;return new Promise((l,a)=>{const c=pm("",20);i.port1.start();const u=setTimeout(()=>{a(new Error("unsupported_event"))},r);o={messageChannel:i,onMessage(d){const f=d;if(f.data.eventId===c)switch(f.data.status){case"ack":clearTimeout(u),s=setTimeout(()=>{a(new Error("timeout"))},3e3);break;case"done":clearTimeout(s),l(f.data.response);break;default:clearTimeout(u),clearTimeout(s),a(new Error("invalid_response"));break}}},this.handlers.add(o),i.port1.addEventListener("message",o.onMessage),this.target.postMessage({eventType:e,eventId:c,data:n},[i.port2])}).finally(()=>{o&&this.removeMessageHandler(o)})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Un(){return window}function Bx(t){Un().location.href=t}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZT(){return typeof Un().WorkerGlobalScope<"u"&&typeof Un().importScripts=="function"}async function zx(){if(!(navigator!=null&&navigator.serviceWorker))return null;try{return(await navigator.serviceWorker.ready).active}catch{return null}}function qx(){var t;return((t=navigator==null?void 0:navigator.serviceWorker)===null||t===void 0?void 0:t.controller)||null}function Hx(){return ZT()?self:null}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eS="firebaseLocalStorageDb",Wx=1,zc="firebaseLocalStorage",tS="fbase_key";class Ma{constructor(e){this.request=e}toPromise(){return new Promise((e,n)=>{this.request.addEventListener("success",()=>{e(this.request.result)}),this.request.addEventListener("error",()=>{n(this.request.error)})})}}function Pu(t,e){return t.transaction([zc],e?"readwrite":"readonly").objectStore(zc)}function Kx(){const t=indexedDB.deleteDatabase(eS);return new Ma(t).toPromise()}function _f(){const t=indexedDB.open(eS,Wx);return new Promise((e,n)=>{t.addEventListener("error",()=>{n(t.error)}),t.addEventListener("upgradeneeded",()=>{const r=t.result;try{r.createObjectStore(zc,{keyPath:tS})}catch(i){n(i)}}),t.addEventListener("success",async()=>{const r=t.result;r.objectStoreNames.contains(zc)?e(r):(r.close(),await Kx(),e(await _f()))})})}async function jv(t,e,n){const r=Pu(t,!0).put({[tS]:e,value:n});return new Ma(r).toPromise()}async function Gx(t,e){const n=Pu(t,!1).get(e),r=await new Ma(n).toPromise();return r===void 0?null:r.value}function Vv(t,e){const n=Pu(t,!0).delete(e);return new Ma(n).toPromise()}const Jx=800,Qx=3;class nS{constructor(){this.type="LOCAL",this._shouldAllowMigration=!0,this.listeners={},this.localCache={},this.pollTimer=null,this.pendingWrites=0,this.receiver=null,this.sender=null,this.serviceWorkerReceiverAvailable=!1,this.activeServiceWorker=null,this._workerInitializationPromise=this.initializeServiceWorkerMessaging().then(()=>{},()=>{})}async _openDb(){return this.db?this.db:(this.db=await _f(),this.db)}async _withRetries(e){let n=0;for(;;)try{const r=await this._openDb();return await e(r)}catch(r){if(n++>Qx)throw r;this.db&&(this.db.close(),this.db=void 0)}}async initializeServiceWorkerMessaging(){return ZT()?this.initializeReceiver():this.initializeSender()}async initializeReceiver(){this.receiver=Cu._getInstance(Hx()),this.receiver._subscribe("keyChanged",async(e,n)=>({keyProcessed:(await this._poll()).includes(n.key)})),this.receiver._subscribe("ping",async(e,n)=>["keyChanged"])}async initializeSender(){var e,n;if(this.activeServiceWorker=await zx(),!this.activeServiceWorker)return;this.sender=new $x(this.activeServiceWorker);const r=await this.sender._send("ping",{},800);r&&!((e=r[0])===null||e===void 0)&&e.fulfilled&&!((n=r[0])===null||n===void 0)&&n.value.includes("keyChanged")&&(this.serviceWorkerReceiverAvailable=!0)}async notifyServiceWorker(e){if(!(!this.sender||!this.activeServiceWorker||qx()!==this.activeServiceWorker))try{await this.sender._send("keyChanged",{key:e},this.serviceWorkerReceiverAvailable?800:50)}catch{}}async _isAvailable(){try{if(!indexedDB)return!1;const e=await _f();return await jv(e,Bc,"1"),await Vv(e,Bc),!0}catch{}return!1}async _withPendingWrite(e){this.pendingWrites++;try{await e()}finally{this.pendingWrites--}}async _set(e,n){return this._withPendingWrite(async()=>(await this._withRetries(r=>jv(r,e,n)),this.localCache[e]=n,this.notifyServiceWorker(e)))}async _get(e){const n=await this._withRetries(r=>Gx(r,e));return this.localCache[e]=n,n}async _remove(e){return this._withPendingWrite(async()=>(await this._withRetries(n=>Vv(n,e)),delete this.localCache[e],this.notifyServiceWorker(e)))}async _poll(){const e=await this._withRetries(i=>{const s=Pu(i,!1).getAll();return new Ma(s).toPromise()});if(!e)return[];if(this.pendingWrites!==0)return[];const n=[],r=new Set;for(const{fbase_key:i,value:s}of e)r.add(i),JSON.stringify(this.localCache[i])!==JSON.stringify(s)&&(this.notifyListeners(i,s),n.push(i));for(const i of Object.keys(this.localCache))this.localCache[i]&&!r.has(i)&&(this.notifyListeners(i,null),n.push(i));return n}notifyListeners(e,n){this.localCache[e]=n;const r=this.listeners[e];if(r)for(const i of Array.from(r))i(n)}startPolling(){this.stopPolling(),this.pollTimer=setInterval(async()=>this._poll(),Jx)}stopPolling(){this.pollTimer&&(clearInterval(this.pollTimer),this.pollTimer=null)}_addListener(e,n){Object.keys(this.listeners).length===0&&this.startPolling(),this.listeners[e]||(this.listeners[e]=new Set,this._get(e)),this.listeners[e].add(n)}_removeListener(e,n){this.listeners[e]&&(this.listeners[e].delete(n),this.listeners[e].size===0&&delete this.listeners[e]),Object.keys(this.listeners).length===0&&this.stopPolling()}}nS.type="LOCAL";const Yx=nS;new Oa(3e4,6e4);/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Xx(t,e){return e?er(e):(Y(t._popupRedirectResolver,t,"argument-error"),t._popupRedirectResolver)}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mm extends hm{constructor(e){super("custom","custom"),this.params=e}_getIdTokenResponse(e){return ds(e,this._buildIdpRequest())}_linkToIdToken(e,n){return ds(e,this._buildIdpRequest(n))}_getReauthenticationResolver(e){return ds(e,this._buildIdpRequest())}_buildIdpRequest(e){const n={requestUri:this.params.requestUri,sessionId:this.params.sessionId,postBody:this.params.postBody,tenantId:this.params.tenantId,pendingToken:this.params.pendingToken,returnSecureToken:!0,returnIdpCredential:!0};return e&&(n.idToken=e),n}}function Zx(t){return KT(t.auth,new mm(t),t.bypassAuthState)}function e2(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),Ix(n,new mm(t),t.bypassAuthState)}async function t2(t){const{auth:e,user:n}=t;return Y(n,e,"internal-error"),kx(n,new mm(t),t.bypassAuthState)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rS{constructor(e,n,r,i,s=!1){this.auth=e,this.resolver=r,this.user=i,this.bypassAuthState=s,this.pendingPromise=null,this.eventManager=null,this.filter=Array.isArray(n)?n:[n]}execute(){return new Promise(async(e,n)=>{this.pendingPromise={resolve:e,reject:n};try{this.eventManager=await this.resolver._initialize(this.auth),await this.onExecution(),this.eventManager.registerConsumer(this)}catch(r){this.reject(r)}})}async onAuthEvent(e){const{urlResponse:n,sessionId:r,postBody:i,tenantId:s,error:o,type:l}=e;if(o){this.reject(o);return}const a={auth:this.auth,requestUri:n,sessionId:r,tenantId:s||void 0,postBody:i||void 0,user:this.user,bypassAuthState:this.bypassAuthState};try{this.resolve(await this.getIdpTask(l)(a))}catch(c){this.reject(c)}}onError(e){this.reject(e)}getIdpTask(e){switch(e){case"signInViaPopup":case"signInViaRedirect":return Zx;case"linkViaPopup":case"linkViaRedirect":return t2;case"reauthViaPopup":case"reauthViaRedirect":return e2;default:Pn(this.auth,"internal-error")}}resolve(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.resolve(e),this.unregisterAndCleanUp()}reject(e){ur(this.pendingPromise,"Pending promise was never set"),this.pendingPromise.reject(e),this.unregisterAndCleanUp()}unregisterAndCleanUp(){this.eventManager&&this.eventManager.unregisterConsumer(this),this.pendingPromise=null,this.cleanUp()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const n2=new Oa(2e3,1e4);class es extends rS{constructor(e,n,r,i,s){super(e,n,i,s),this.provider=r,this.authWindow=null,this.pollId=null,es.currentPopupAction&&es.currentPopupAction.cancel(),es.currentPopupAction=this}async executeNotNull(){const e=await this.execute();return Y(e,this.auth,"internal-error"),e}async onExecution(){ur(this.filter.length===1,"Popup operations only handle one event");const e=pm();this.authWindow=await this.resolver._openPopup(this.auth,this.provider,this.filter[0],e),this.authWindow.associatedEvent=e,this.resolver._originValidation(this.auth).catch(n=>{this.reject(n)}),this.resolver._isIframeWebStorageSupported(this.auth,n=>{n||this.reject(Fn(this.auth,"web-storage-unsupported"))}),this.pollUserCancellation()}get eventId(){var e;return((e=this.authWindow)===null||e===void 0?void 0:e.associatedEvent)||null}cancel(){this.reject(Fn(this.auth,"cancelled-popup-request"))}cleanUp(){this.authWindow&&this.authWindow.close(),this.pollId&&window.clearTimeout(this.pollId),this.authWindow=null,this.pollId=null,es.currentPopupAction=null}pollUserCancellation(){const e=()=>{var n,r;if(!((r=(n=this.authWindow)===null||n===void 0?void 0:n.window)===null||r===void 0)&&r.closed){this.pollId=window.setTimeout(()=>{this.pollId=null,this.reject(Fn(this.auth,"popup-closed-by-user"))},8e3);return}this.pollId=window.setTimeout(e,n2.get())};e()}}es.currentPopupAction=null;/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const r2="pendingRedirect",Zl=new Map;class i2 extends rS{constructor(e,n,r=!1){super(e,["signInViaRedirect","linkViaRedirect","reauthViaRedirect","unknown"],n,void 0,r),this.eventId=null}async execute(){let e=Zl.get(this.auth._key());if(!e){try{const r=await s2(this.resolver,this.auth)?await super.execute():null;e=()=>Promise.resolve(r)}catch(n){e=()=>Promise.reject(n)}Zl.set(this.auth._key(),e)}return this.bypassAuthState||Zl.set(this.auth._key(),()=>Promise.resolve(null)),e()}async onAuthEvent(e){if(e.type==="signInViaRedirect")return super.onAuthEvent(e);if(e.type==="unknown"){this.resolve(null);return}if(e.eventId){const n=await this.auth._redirectUserForId(e.eventId);if(n)return this.user=n,super.onAuthEvent(e);this.resolve(null)}}async onExecution(){}cleanUp(){}}async function s2(t,e){const n=l2(e),r=a2(t);if(!await r._isAvailable())return!1;const i=await r._get(n)==="true";return await r._remove(n),i}function o2(t,e){Zl.set(t._key(),e)}function a2(t){return er(t._redirectPersistence)}function l2(t){return Xl(r2,t.config.apiKey,t.name)}async function c2(t,e,n=!1){const r=Oi(t),i=Xx(r,e),o=await new i2(r,i,n).execute();return o&&!n&&(delete o.user._redirectEventId,await r._persistUserIfCurrent(o.user),await r._setRedirectUser(null,e)),o}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const u2=10*60*1e3;class d2{constructor(e){this.auth=e,this.cachedEventUids=new Set,this.consumers=new Set,this.queuedRedirectEvent=null,this.hasHandledPotentialRedirect=!1,this.lastProcessedEventTime=Date.now()}registerConsumer(e){this.consumers.add(e),this.queuedRedirectEvent&&this.isEventForConsumer(this.queuedRedirectEvent,e)&&(this.sendToConsumer(this.queuedRedirectEvent,e),this.saveEventToCache(this.queuedRedirectEvent),this.queuedRedirectEvent=null)}unregisterConsumer(e){this.consumers.delete(e)}onEvent(e){if(this.hasEventBeenHandled(e))return!1;let n=!1;return this.consumers.forEach(r=>{this.isEventForConsumer(e,r)&&(n=!0,this.sendToConsumer(e,r),this.saveEventToCache(e))}),this.hasHandledPotentialRedirect||!h2(e)||(this.hasHandledPotentialRedirect=!0,n||(this.queuedRedirectEvent=e,n=!0)),n}sendToConsumer(e,n){var r;if(e.error&&!iS(e)){const i=((r=e.error.code)===null||r===void 0?void 0:r.split("auth/")[1])||"internal-error";n.onError(Fn(this.auth,i))}else n.onAuthEvent(e)}isEventForConsumer(e,n){const r=n.eventId===null||!!e.eventId&&e.eventId===n.eventId;return n.filter.includes(e.type)&&r}hasEventBeenHandled(e){return Date.now()-this.lastProcessedEventTime>=u2&&this.cachedEventUids.clear(),this.cachedEventUids.has(Fv(e))}saveEventToCache(e){this.cachedEventUids.add(Fv(e)),this.lastProcessedEventTime=Date.now()}}function Fv(t){return[t.type,t.eventId,t.sessionId,t.tenantId].filter(e=>e).join("-")}function iS({type:t,error:e}){return t==="unknown"&&(e==null?void 0:e.code)==="auth/no-auth-event"}function h2(t){switch(t.type){case"signInViaRedirect":case"linkViaRedirect":case"reauthViaRedirect":return!0;case"unknown":return iS(t);default:return!1}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function f2(t,e={}){return Xr(t,"GET","/v1/projects",e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const p2=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,m2=/^https?/;async function g2(t){if(t.config.emulator)return;const{authorizedDomains:e}=await f2(t);for(const n of e)try{if(y2(n))return}catch{}Pn(t,"unauthorized-domain")}function y2(t){const e=vf(),{protocol:n,hostname:r}=new URL(e);if(t.startsWith("chrome-extension://")){const o=new URL(t);return o.hostname===""&&r===""?n==="chrome-extension:"&&t.replace("chrome-extension://","")===e.replace("chrome-extension://",""):n==="chrome-extension:"&&o.hostname===r}if(!m2.test(n))return!1;if(p2.test(t))return r===t;const i=t.replace(/\./g,"\\.");return new RegExp("^(.+\\."+i+"|"+i+")$","i").test(r)}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const v2=new Oa(3e4,6e4);function Uv(){const t=Un().___jsl;if(t!=null&&t.H){for(const e of Object.keys(t.H))if(t.H[e].r=t.H[e].r||[],t.H[e].L=t.H[e].L||[],t.H[e].r=[...t.H[e].L],t.CP)for(let n=0;n<t.CP.length;n++)t.CP[n]=null}}function _2(t){return new Promise((e,n)=>{var r,i,s;function o(){Uv(),gapi.load("gapi.iframes",{callback:()=>{e(gapi.iframes.getContext())},ontimeout:()=>{Uv(),n(Fn(t,"network-request-failed"))},timeout:v2.get()})}if(!((i=(r=Un().gapi)===null||r===void 0?void 0:r.iframes)===null||i===void 0)&&i.Iframe)e(gapi.iframes.getContext());else if(!((s=Un().gapi)===null||s===void 0)&&s.load)o();else{const l=dx("iframefcb");return Un()[l]=()=>{gapi.load?o():n(Fn(t,"network-request-failed"))},zT(`https://apis.google.com/js/api.js?onload=${l}`).catch(a=>n(a))}}).catch(e=>{throw ec=null,e})}let ec=null;function E2(t){return ec=ec||_2(t),ec}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const T2=new Oa(5e3,15e3),S2="__/auth/iframe",w2="emulator/auth/iframe",C2={style:{position:"absolute",top:"-100px",width:"1px",height:"1px"},"aria-hidden":"true",tabindex:"-1"},P2=new Map([["identitytoolkit.googleapis.com","p"],["staging-identitytoolkit.sandbox.googleapis.com","s"],["test-identitytoolkit.sandbox.googleapis.com","t"]]);function R2(t){const e=t.config;Y(e.authDomain,t,"auth-domain-config-required");const n=e.emulator?cm(e,w2):`https://${t.config.authDomain}/${S2}`,r={apiKey:e.apiKey,appName:t.name,v:Vs},i=P2.get(t.config.apiHost);i&&(r.eid=i);const s=t._getFrameworks();return s.length&&(r.fw=s.join(",")),`${n}?${xa(r).slice(1)}`}async function k2(t){const e=await E2(t),n=Un().gapi;return Y(n,t,"internal-error"),e.open({where:document.body,url:R2(t),messageHandlersFilter:n.iframes.CROSS_ORIGIN_IFRAMES_FILTER,attributes:C2,dontclear:!0},r=>new Promise(async(i,s)=>{await r.restyle({setHideOnLeave:!1});const o=Fn(t,"network-request-failed"),l=Un().setTimeout(()=>{s(o)},T2.get());function a(){Un().clearTimeout(l),i(r)}r.ping(a).then(a,()=>{s(o)})}))}/**
 * @license
 * Copyright 2020 Google LLC.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const I2={location:"yes",resizable:"yes",statusbar:"yes",toolbar:"no"},A2=500,b2=600,x2="_blank",O2="http://localhost";class $v{constructor(e){this.window=e,this.associatedEvent=null}close(){if(this.window)try{this.window.close()}catch{}}}function N2(t,e,n,r=A2,i=b2){const s=Math.max((window.screen.availHeight-i)/2,0).toString(),o=Math.max((window.screen.availWidth-r)/2,0).toString();let l="";const a=Object.assign(Object.assign({},I2),{width:r.toString(),height:i.toString(),top:s,left:o}),c=It().toLowerCase();n&&(l=LT(c)?x2:n),MT(c)&&(e=e||O2,a.scrollbars="yes");const u=Object.entries(a).reduce((f,[p,y])=>`${f}${p}=${y},`,"");if(nx(c)&&l!=="_self")return D2(e||"",l),new $v(null);const d=window.open(e||"",l,u);Y(d,t,"popup-blocked");try{d.focus()}catch{}return new $v(d)}function D2(t,e){const n=document.createElement("a");n.href=t,n.target=e;const r=document.createEvent("MouseEvent");r.initMouseEvent("click",!0,!0,window,1,0,0,0,0,!1,!1,!1,!1,1,null),n.dispatchEvent(r)}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const M2="__/auth/handler",L2="emulator/auth/handler",j2=encodeURIComponent("fac");async function Bv(t,e,n,r,i,s){Y(t.config.authDomain,t,"auth-domain-config-required"),Y(t.config.apiKey,t,"invalid-api-key");const o={apiKey:t.config.apiKey,appName:t.name,authType:n,redirectUrl:r,v:Vs,eventId:i};if(e instanceof HT){e.setDefaultLanguage(t.languageCode),o.providerId=e.providerId||"",RA(e.getCustomParameters())||(o.customParameters=JSON.stringify(e.getCustomParameters()));for(const[u,d]of Object.entries(s||{}))o[u]=d}if(e instanceof Da){const u=e.getScopes().filter(d=>d!=="");u.length>0&&(o.scopes=u.join(","))}t.tenantId&&(o.tid=t.tenantId);const l=o;for(const u of Object.keys(l))l[u]===void 0&&delete l[u];const a=await t._getAppCheckToken(),c=a?`#${j2}=${encodeURIComponent(a)}`:"";return`${V2(t)}?${xa(l).slice(1)}${c}`}function V2({config:t}){return t.emulator?cm(t,L2):`https://${t.authDomain}/${M2}`}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Bd="webStorageSupport";class F2{constructor(){this.eventManagers={},this.iframes={},this.originValidationPromises={},this._redirectPersistence=XT,this._completeRedirectFn=c2,this._overrideRedirectResult=o2}async _openPopup(e,n,r,i){var s;ur((s=this.eventManagers[e._key()])===null||s===void 0?void 0:s.manager,"_initialize() not called before _openPopup()");const o=await Bv(e,n,r,vf(),i);return N2(e,o,pm())}async _openRedirect(e,n,r,i){await this._originValidation(e);const s=await Bv(e,n,r,vf(),i);return Bx(s),new Promise(()=>{})}_initialize(e){const n=e._key();if(this.eventManagers[n]){const{manager:i,promise:s}=this.eventManagers[n];return i?Promise.resolve(i):(ur(s,"If manager is not set, promise should be"),s)}const r=this.initAndGetManager(e);return this.eventManagers[n]={promise:r},r.catch(()=>{delete this.eventManagers[n]}),r}async initAndGetManager(e){const n=await k2(e),r=new d2(e);return n.register("authEvent",i=>(Y(i==null?void 0:i.authEvent,e,"invalid-auth-event"),{status:r.onEvent(i.authEvent)?"ACK":"ERROR"}),gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER),this.eventManagers[e._key()]={manager:r},this.iframes[e._key()]=n,r}_isIframeWebStorageSupported(e,n){this.iframes[e._key()].send(Bd,{type:Bd},i=>{var s;const o=(s=i==null?void 0:i[0])===null||s===void 0?void 0:s[Bd];o!==void 0&&n(!!o),Pn(e,"internal-error")},gapi.iframes.CROSS_ORIGIN_IFRAMES_FILTER)}_originValidation(e){const n=e._key();return this.originValidationPromises[n]||(this.originValidationPromises[n]=g2(e)),this.originValidationPromises[n]}get _shouldInitProactively(){return $T()||dm()||wu()}}const U2=F2;var zv="@firebase/auth",qv="1.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $2{constructor(e){this.auth=e,this.internalListeners=new Map}getUid(){var e;return this.assertAuthConfigured(),((e=this.auth.currentUser)===null||e===void 0?void 0:e.uid)||null}async getToken(e){return this.assertAuthConfigured(),await this.auth._initializationPromise,this.auth.currentUser?{accessToken:await this.auth.currentUser.getIdToken(e)}:null}addAuthTokenListener(e){if(this.assertAuthConfigured(),this.internalListeners.has(e))return;const n=this.auth.onIdTokenChanged(r=>{e((r==null?void 0:r.stsTokenManager.accessToken)||null)});this.internalListeners.set(e,n),this.updateProactiveRefresh()}removeAuthTokenListener(e){this.assertAuthConfigured();const n=this.internalListeners.get(e);n&&(this.internalListeners.delete(e),n(),this.updateProactiveRefresh())}assertAuthConfigured(){Y(this.auth._initializationPromise,"dependent-sdk-initialized-before-auth")}updateProactiveRefresh(){this.internalListeners.size>0?this.auth._startProactiveRefresh():this.auth._stopProactiveRefresh()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function B2(t){switch(t){case"Node":return"node";case"ReactNative":return"rn";case"Worker":return"webworker";case"Cordova":return"cordova";default:return}}function z2(t){Ss(new Si("auth",(e,{options:n})=>{const r=e.getProvider("app").getImmediate(),i=e.getProvider("heartbeat"),s=e.getProvider("app-check-internal"),{apiKey:o,authDomain:l}=r.options;Y(o&&!o.includes(":"),"invalid-api-key",{appName:r.name});const a={apiKey:o,authDomain:l,clientPlatform:t,apiHost:"identitytoolkit.googleapis.com",tokenApiHost:"securetoken.googleapis.com",apiScheme:"https",sdkClientVersion:BT(t)},c=new cx(r,i,s,a);return yx(c,n),c},"PUBLIC").setInstantiationMode("EXPLICIT").setInstanceCreatedCallback((e,n,r)=>{e.getProvider("auth-internal").initialize()})),Ss(new Si("auth-internal",e=>{const n=Oi(e.getProvider("auth").getImmediate());return(r=>new $2(r))(n)},"PRIVATE").setInstantiationMode("EXPLICIT")),Br(zv,qv,B2(t)),Br(zv,qv,"esm2017")}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const q2=5*60,H2=TT("authIdTokenMaxAge")||q2;let Hv=null;const W2=t=>async e=>{const n=e&&await e.getIdTokenResult(),r=n&&(new Date().getTime()-Date.parse(n.issuedAtTime))/1e3;if(r&&r>H2)return;const i=n==null?void 0:n.token;Hv!==i&&(Hv=i,await fetch(t,{method:i?"POST":"DELETE",headers:i?{Authorization:`Bearer ${i}`}:{}}))};function K2(t=PT()){const e=om(t,"auth");if(e.isInitialized())return e.getImmediate();const n=gx(t,{popupRedirectResolver:U2,persistence:[Yx,Fx,XT]}),r=TT("authTokenSyncURL");if(r){const s=W2(r);Mx(n,s,()=>s(n.currentUser)),Dx(n,o=>s(o))}const i=_T("auth");return i&&vx(n,`http://${i}`),n}z2("Browser");var G2=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},V,gm=gm||{},X=G2||self;function Ru(t){var e=typeof t;return e=e!="object"?e:t?Array.isArray(t)?"array":e:"null",e=="array"||e=="object"&&typeof t.length=="number"}function La(t){var e=typeof t;return e=="object"&&t!=null||e=="function"}function J2(t){return Object.prototype.hasOwnProperty.call(t,zd)&&t[zd]||(t[zd]=++Q2)}var zd="closure_uid_"+(1e9*Math.random()>>>0),Q2=0;function Y2(t,e,n){return t.call.apply(t.bind,arguments)}function X2(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var i=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(i,r),t.apply(e,i)}}return function(){return t.apply(e,arguments)}}function wt(t,e,n){return Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?wt=Y2:wt=X2,wt.apply(null,arguments)}function Sl(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var r=n.slice();return r.push.apply(r,arguments),t.apply(this,r)}}function it(t,e){function n(){}n.prototype=e.prototype,t.$=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.ac=function(r,i,s){for(var o=Array(arguments.length-2),l=2;l<arguments.length;l++)o[l-2]=arguments[l];return e.prototype[i].apply(r,o)}}function Zr(){this.s=this.s,this.o=this.o}var Z2=0;Zr.prototype.s=!1;Zr.prototype.sa=function(){!this.s&&(this.s=!0,this.N(),Z2!=0)&&J2(this)};Zr.prototype.N=function(){if(this.o)for(;this.o.length;)this.o.shift()()};const sS=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if(typeof t=="string")return typeof e!="string"||e.length!=1?-1:t.indexOf(e,0);for(let n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1};function ym(t){const e=t.length;if(0<e){const n=Array(e);for(let r=0;r<e;r++)n[r]=t[r];return n}return[]}function Wv(t,e){for(let n=1;n<arguments.length;n++){const r=arguments[n];if(Ru(r)){const i=t.length||0,s=r.length||0;t.length=i+s;for(let o=0;o<s;o++)t[i+o]=r[o]}else t.push(r)}}function Ct(t,e){this.type=t,this.g=this.target=e,this.defaultPrevented=!1}Ct.prototype.h=function(){this.defaultPrevented=!0};var eO=function(){if(!X.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{X.addEventListener("test",()=>{},e),X.removeEventListener("test",()=>{},e)}catch{}return t}();function aa(t){return/^[\s\xa0]*$/.test(t)}function ku(){var t=X.navigator;return t&&(t=t.userAgent)?t:""}function Nn(t){return ku().indexOf(t)!=-1}function vm(t){return vm[" "](t),t}vm[" "]=function(){};function tO(t,e){var n=KO;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e(t)}var nO=Nn("Opera"),Cs=Nn("Trident")||Nn("MSIE"),oS=Nn("Edge"),Ef=oS||Cs,aS=Nn("Gecko")&&!(ku().toLowerCase().indexOf("webkit")!=-1&&!Nn("Edge"))&&!(Nn("Trident")||Nn("MSIE"))&&!Nn("Edge"),rO=ku().toLowerCase().indexOf("webkit")!=-1&&!Nn("Edge");function lS(){var t=X.document;return t?t.documentMode:void 0}var Tf;e:{var qd="",Hd=function(){var t=ku();if(aS)return/rv:([^\);]+)(\)|;)/.exec(t);if(oS)return/Edge\/([\d\.]+)/.exec(t);if(Cs)return/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(t);if(rO)return/WebKit\/(\S+)/.exec(t);if(nO)return/(?:Version)[ \/]?(\S+)/.exec(t)}();if(Hd&&(qd=Hd?Hd[1]:""),Cs){var Wd=lS();if(Wd!=null&&Wd>parseFloat(qd)){Tf=String(Wd);break e}}Tf=qd}var Sf;if(X.document&&Cs){var Kv=lS();Sf=Kv||parseInt(Tf,10)||void 0}else Sf=void 0;var iO=Sf;function la(t,e){if(Ct.call(this,t?t.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.g=e,e=t.relatedTarget){if(aS){e:{try{vm(e.nodeName);var i=!0;break e}catch{}i=!1}i||(e=null)}}else n=="mouseover"?e=t.fromElement:n=="mouseout"&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=r.clientX!==void 0?r.clientX:r.pageX,this.clientY=r.clientY!==void 0?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=t.clientX!==void 0?t.clientX:t.pageX,this.clientY=t.clientY!==void 0?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType=typeof t.pointerType=="string"?t.pointerType:sO[t.pointerType]||"",this.state=t.state,this.i=t,t.defaultPrevented&&la.$.h.call(this)}}it(la,Ct);var sO={2:"touch",3:"pen",4:"mouse"};la.prototype.h=function(){la.$.h.call(this);var t=this.i;t.preventDefault?t.preventDefault():t.returnValue=!1};var ja="closure_listenable_"+(1e6*Math.random()|0),oO=0;function aO(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.la=i,this.key=++oO,this.fa=this.ia=!1}function Iu(t){t.fa=!0,t.listener=null,t.proxy=null,t.src=null,t.la=null}function _m(t,e,n){for(const r in t)e.call(n,t[r],r,t)}function lO(t,e){for(const n in t)e.call(void 0,t[n],n,t)}function cS(t){const e={};for(const n in t)e[n]=t[n];return e}const Gv="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function uS(t,e){let n,r;for(let i=1;i<arguments.length;i++){r=arguments[i];for(n in r)t[n]=r[n];for(let s=0;s<Gv.length;s++)n=Gv[s],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function Au(t){this.src=t,this.g={},this.h=0}Au.prototype.add=function(t,e,n,r,i){var s=t.toString();t=this.g[s],t||(t=this.g[s]=[],this.h++);var o=Cf(t,e,r,i);return-1<o?(e=t[o],n||(e.ia=!1)):(e=new aO(e,this.src,s,!!r,i),e.ia=n,t.push(e)),e};function wf(t,e){var n=e.type;if(n in t.g){var r=t.g[n],i=sS(r,e),s;(s=0<=i)&&Array.prototype.splice.call(r,i,1),s&&(Iu(e),t.g[n].length==0&&(delete t.g[n],t.h--))}}function Cf(t,e,n,r){for(var i=0;i<t.length;++i){var s=t[i];if(!s.fa&&s.listener==e&&s.capture==!!n&&s.la==r)return i}return-1}var Em="closure_lm_"+(1e6*Math.random()|0),Kd={};function dS(t,e,n,r,i){if(r&&r.once)return fS(t,e,n,r,i);if(Array.isArray(e)){for(var s=0;s<e.length;s++)dS(t,e[s],n,r,i);return null}return n=wm(n),t&&t[ja]?t.O(e,n,La(r)?!!r.capture:!!r,i):hS(t,e,n,!1,r,i)}function hS(t,e,n,r,i,s){if(!e)throw Error("Invalid event type");var o=La(i)?!!i.capture:!!i,l=Sm(t);if(l||(t[Em]=l=new Au(t)),n=l.add(e,n,r,o,s),n.proxy)return n;if(r=cO(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)eO||(i=o),i===void 0&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(mS(e.toString()),r);else if(t.addListener&&t.removeListener)t.addListener(r);else throw Error("addEventListener and attachEvent are unavailable.");return n}function cO(){function t(n){return e.call(t.src,t.listener,n)}const e=uO;return t}function fS(t,e,n,r,i){if(Array.isArray(e)){for(var s=0;s<e.length;s++)fS(t,e[s],n,r,i);return null}return n=wm(n),t&&t[ja]?t.P(e,n,La(r)?!!r.capture:!!r,i):hS(t,e,n,!0,r,i)}function pS(t,e,n,r,i){if(Array.isArray(e))for(var s=0;s<e.length;s++)pS(t,e[s],n,r,i);else r=La(r)?!!r.capture:!!r,n=wm(n),t&&t[ja]?(t=t.i,e=String(e).toString(),e in t.g&&(s=t.g[e],n=Cf(s,n,r,i),-1<n&&(Iu(s[n]),Array.prototype.splice.call(s,n,1),s.length==0&&(delete t.g[e],t.h--)))):t&&(t=Sm(t))&&(e=t.g[e.toString()],t=-1,e&&(t=Cf(e,n,r,i)),(n=-1<t?e[t]:null)&&Tm(n))}function Tm(t){if(typeof t!="number"&&t&&!t.fa){var e=t.src;if(e&&e[ja])wf(e.i,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(mS(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Sm(e))?(wf(n,t),n.h==0&&(n.src=null,e[Em]=null)):Iu(t)}}}function mS(t){return t in Kd?Kd[t]:Kd[t]="on"+t}function uO(t,e){if(t.fa)t=!0;else{e=new la(e,this);var n=t.listener,r=t.la||t.src;t.ia&&Tm(t),t=n.call(r,e)}return t}function Sm(t){return t=t[Em],t instanceof Au?t:null}var Gd="__closure_events_fn_"+(1e9*Math.random()>>>0);function wm(t){return typeof t=="function"?t:(t[Gd]||(t[Gd]=function(e){return t.handleEvent(e)}),t[Gd])}function rt(){Zr.call(this),this.i=new Au(this),this.S=this,this.J=null}it(rt,Zr);rt.prototype[ja]=!0;rt.prototype.removeEventListener=function(t,e,n,r){pS(this,t,e,n,r)};function ut(t,e){var n,r=t.J;if(r)for(n=[];r;r=r.J)n.push(r);if(t=t.S,r=e.type||e,typeof e=="string")e=new Ct(e,t);else if(e instanceof Ct)e.target=e.target||t;else{var i=e;e=new Ct(r,t),uS(e,i)}if(i=!0,n)for(var s=n.length-1;0<=s;s--){var o=e.g=n[s];i=wl(o,r,!0,e)&&i}if(o=e.g=t,i=wl(o,r,!0,e)&&i,i=wl(o,r,!1,e)&&i,n)for(s=0;s<n.length;s++)o=e.g=n[s],i=wl(o,r,!1,e)&&i}rt.prototype.N=function(){if(rt.$.N.call(this),this.i){var t=this.i,e;for(e in t.g){for(var n=t.g[e],r=0;r<n.length;r++)Iu(n[r]);delete t.g[e],t.h--}}this.J=null};rt.prototype.O=function(t,e,n,r){return this.i.add(String(t),e,!1,n,r)};rt.prototype.P=function(t,e,n,r){return this.i.add(String(t),e,!0,n,r)};function wl(t,e,n,r){if(e=t.i.g[String(e)],!e)return!0;e=e.concat();for(var i=!0,s=0;s<e.length;++s){var o=e[s];if(o&&!o.fa&&o.capture==n){var l=o.listener,a=o.la||o.src;o.ia&&wf(t.i,o),i=l.call(a,r)!==!1&&i}}return i&&!r.defaultPrevented}var Cm=X.JSON.stringify;class dO{constructor(e,n){this.i=e,this.j=n,this.h=0,this.g=null}get(){let e;return 0<this.h?(this.h--,e=this.g,this.g=e.next,e.next=null):e=this.i(),e}}function hO(){var t=Pm;let e=null;return t.g&&(e=t.g,t.g=t.g.next,t.g||(t.h=null),e.next=null),e}class fO{constructor(){this.h=this.g=null}add(e,n){const r=gS.get();r.set(e,n),this.h?this.h.next=r:this.g=r,this.h=r}}var gS=new dO(()=>new pO,t=>t.reset());class pO{constructor(){this.next=this.g=this.h=null}set(e,n){this.h=e,this.g=n,this.next=null}reset(){this.next=this.g=this.h=null}}function mO(t){var e=1;t=t.split(":");const n=[];for(;0<e&&t.length;)n.push(t.shift()),e--;return t.length&&n.push(t.join(":")),n}function gO(t){X.setTimeout(()=>{throw t},0)}let ca,ua=!1,Pm=new fO,yS=()=>{const t=X.Promise.resolve(void 0);ca=()=>{t.then(yO)}};var yO=()=>{for(var t;t=hO();){try{t.h.call(t.g)}catch(n){gO(n)}var e=gS;e.j(t),100>e.h&&(e.h++,t.next=e.g,e.g=t)}ua=!1};function bu(t,e){rt.call(this),this.h=t||1,this.g=e||X,this.j=wt(this.qb,this),this.l=Date.now()}it(bu,rt);V=bu.prototype;V.ga=!1;V.T=null;V.qb=function(){if(this.ga){var t=Date.now()-this.l;0<t&&t<.8*this.h?this.T=this.g.setTimeout(this.j,this.h-t):(this.T&&(this.g.clearTimeout(this.T),this.T=null),ut(this,"tick"),this.ga&&(Rm(this),this.start()))}};V.start=function(){this.ga=!0,this.T||(this.T=this.g.setTimeout(this.j,this.h),this.l=Date.now())};function Rm(t){t.ga=!1,t.T&&(t.g.clearTimeout(t.T),t.T=null)}V.N=function(){bu.$.N.call(this),Rm(this),delete this.g};function km(t,e,n){if(typeof t=="function")n&&(t=wt(t,n));else if(t&&typeof t.handleEvent=="function")t=wt(t.handleEvent,t);else throw Error("Invalid listener argument");return 2147483647<Number(e)?-1:X.setTimeout(t,e||0)}function vS(t){t.g=km(()=>{t.g=null,t.i&&(t.i=!1,vS(t))},t.j);const e=t.h;t.h=null,t.m.apply(null,e)}class vO extends Zr{constructor(e,n){super(),this.m=e,this.j=n,this.h=null,this.i=!1,this.g=null}l(e){this.h=arguments,this.g?this.i=!0:vS(this)}N(){super.N(),this.g&&(X.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function da(t){Zr.call(this),this.h=t,this.g={}}it(da,Zr);var Jv=[];function _S(t,e,n,r){Array.isArray(n)||(n&&(Jv[0]=n.toString()),n=Jv);for(var i=0;i<n.length;i++){var s=dS(e,n[i],r||t.handleEvent,!1,t.h||t);if(!s)break;t.g[s.key]=s}}function ES(t){_m(t.g,function(e,n){this.g.hasOwnProperty(n)&&Tm(e)},t),t.g={}}da.prototype.N=function(){da.$.N.call(this),ES(this)};da.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};function xu(){this.g=!0}xu.prototype.Ea=function(){this.g=!1};function _O(t,e,n,r,i,s){t.info(function(){if(t.g)if(s)for(var o="",l=s.split("&"),a=0;a<l.length;a++){var c=l[a].split("=");if(1<c.length){var u=c[0];c=c[1];var d=u.split("_");o=2<=d.length&&d[1]=="type"?o+(u+"="+c+"&"):o+(u+"=redacted&")}}else o=null;else o=s;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+`
`+n+`
`+o})}function EO(t,e,n,r,i,s,o){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+`
`+n+`
`+s+" "+o})}function ts(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+SO(t,n)+(r?" "+r:"")})}function TO(t,e){t.info(function(){return"TIMEOUT: "+e})}xu.prototype.info=function(){};function SO(t,e){if(!t.g)return e;if(!e)return null;try{var n=JSON.parse(e);if(n){for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var s=i[0];if(s!="noop"&&s!="stop"&&s!="close")for(var o=1;o<i.length;o++)i[o]=""}}}}return Cm(n)}catch{return e}}var Ni={},Qv=null;function Ou(){return Qv=Qv||new rt}Ni.Ta="serverreachability";function TS(t){Ct.call(this,Ni.Ta,t)}it(TS,Ct);function ha(t){const e=Ou();ut(e,new TS(e))}Ni.STAT_EVENT="statevent";function SS(t,e){Ct.call(this,Ni.STAT_EVENT,t),this.stat=e}it(SS,Ct);function Ot(t){const e=Ou();ut(e,new SS(e,t))}Ni.Ua="timingevent";function wS(t,e){Ct.call(this,Ni.Ua,t),this.size=e}it(wS,Ct);function Va(t,e){if(typeof t!="function")throw Error("Fn must not be null and must be a function");return X.setTimeout(function(){t()},e)}var Nu={NO_ERROR:0,rb:1,Eb:2,Db:3,yb:4,Cb:5,Fb:6,Qa:7,TIMEOUT:8,Ib:9},CS={wb:"complete",Sb:"success",Ra:"error",Qa:"abort",Kb:"ready",Lb:"readystatechange",TIMEOUT:"timeout",Gb:"incrementaldata",Jb:"progress",zb:"downloadprogress",$b:"uploadprogress"};function Im(){}Im.prototype.h=null;function Yv(t){return t.h||(t.h=t.i())}function PS(){}var Fa={OPEN:"a",vb:"b",Ra:"c",Hb:"d"};function Am(){Ct.call(this,"d")}it(Am,Ct);function bm(){Ct.call(this,"c")}it(bm,Ct);var Pf;function Du(){}it(Du,Im);Du.prototype.g=function(){return new XMLHttpRequest};Du.prototype.i=function(){return{}};Pf=new Du;function Ua(t,e,n,r){this.l=t,this.j=e,this.m=n,this.W=r||1,this.U=new da(this),this.P=wO,t=Ef?125:void 0,this.V=new bu(t),this.I=null,this.i=!1,this.s=this.A=this.v=this.L=this.G=this.Y=this.B=null,this.F=[],this.g=null,this.C=0,this.o=this.u=null,this.ca=-1,this.J=!1,this.O=0,this.M=null,this.ba=this.K=this.aa=this.S=!1,this.h=new RS}function RS(){this.i=null,this.g="",this.h=!1}var wO=45e3,Rf={},qc={};V=Ua.prototype;V.setTimeout=function(t){this.P=t};function kf(t,e,n){t.L=1,t.v=Lu(dr(e)),t.s=n,t.S=!0,kS(t,null)}function kS(t,e){t.G=Date.now(),$a(t),t.A=dr(t.v);var n=t.A,r=t.W;Array.isArray(r)||(r=[String(r)]),MS(n.i,"t",r),t.C=0,n=t.l.J,t.h=new RS,t.g=nw(t.l,n?e:null,!t.s),0<t.O&&(t.M=new vO(wt(t.Pa,t,t.g),t.O)),_S(t.U,t.g,"readystatechange",t.nb),e=t.I?cS(t.I):{},t.s?(t.u||(t.u="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.g.ha(t.A,t.u,t.s,e)):(t.u="GET",t.g.ha(t.A,t.u,null,e)),ha(),_O(t.j,t.u,t.A,t.m,t.W,t.s)}V.nb=function(t){t=t.target;const e=this.M;e&&Dn(t)==3?e.l():this.Pa(t)};V.Pa=function(t){try{if(t==this.g)e:{const u=Dn(this.g);var e=this.g.Ia();const d=this.g.da();if(!(3>u)&&(u!=3||Ef||this.g&&(this.h.h||this.g.ja()||t0(this.g)))){this.J||u!=4||e==7||(e==8||0>=d?ha(3):ha(2)),Mu(this);var n=this.g.da();this.ca=n;t:if(IS(this)){var r=t0(this.g);t="";var i=r.length,s=Dn(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){ui(this),Do(this);var o="";break t}this.h.i=new X.TextDecoder}for(e=0;e<i;e++)this.h.h=!0,t+=this.h.i.decode(r[e],{stream:s&&e==i-1});r.splice(0,i),this.h.g+=t,this.C=0,o=this.h.g}else o=this.g.ja();if(this.i=n==200,EO(this.j,this.u,this.A,this.m,this.W,u,n),this.i){if(this.aa&&!this.K){t:{if(this.g){var l,a=this.g;if((l=a.g?a.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!aa(l)){var c=l;break t}}c=null}if(n=c)ts(this.j,this.m,n,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,If(this,n);else{this.i=!1,this.o=3,Ot(12),ui(this),Do(this);break e}}this.S?(AS(this,u,o),Ef&&this.i&&u==3&&(_S(this.U,this.V,"tick",this.mb),this.V.start())):(ts(this.j,this.m,o,null),If(this,o)),u==4&&ui(this),this.i&&!this.J&&(u==4?XS(this.l,this):(this.i=!1,$a(this)))}else qO(this.g),n==400&&0<o.indexOf("Unknown SID")?(this.o=3,Ot(12)):(this.o=0,Ot(13)),ui(this),Do(this)}}}catch{}finally{}};function IS(t){return t.g?t.u=="GET"&&t.L!=2&&t.l.Ha:!1}function AS(t,e,n){let r=!0,i;for(;!t.J&&t.C<n.length;)if(i=CO(t,n),i==qc){e==4&&(t.o=4,Ot(14),r=!1),ts(t.j,t.m,null,"[Incomplete Response]");break}else if(i==Rf){t.o=4,Ot(15),ts(t.j,t.m,n,"[Invalid Chunk]"),r=!1;break}else ts(t.j,t.m,i,null),If(t,i);IS(t)&&i!=qc&&i!=Rf&&(t.h.g="",t.C=0),e!=4||n.length!=0||t.h.h||(t.o=1,Ot(16),r=!1),t.i=t.i&&r,r?0<n.length&&!t.ba&&(t.ba=!0,e=t.l,e.g==t&&e.ca&&!e.M&&(e.l.info("Great, no buffering proxy detected. Bytes received: "+n.length),Lm(e),e.M=!0,Ot(11))):(ts(t.j,t.m,n,"[Invalid Chunked Response]"),ui(t),Do(t))}V.mb=function(){if(this.g){var t=Dn(this.g),e=this.g.ja();this.C<e.length&&(Mu(this),AS(this,t,e),this.i&&t!=4&&$a(this))}};function CO(t,e){var n=t.C,r=e.indexOf(`
`,n);return r==-1?qc:(n=Number(e.substring(n,r)),isNaN(n)?Rf:(r+=1,r+n>e.length?qc:(e=e.slice(r,r+n),t.C=r+n,e)))}V.cancel=function(){this.J=!0,ui(this)};function $a(t){t.Y=Date.now()+t.P,bS(t,t.P)}function bS(t,e){if(t.B!=null)throw Error("WatchDog timer not null");t.B=Va(wt(t.lb,t),e)}function Mu(t){t.B&&(X.clearTimeout(t.B),t.B=null)}V.lb=function(){this.B=null;const t=Date.now();0<=t-this.Y?(TO(this.j,this.A),this.L!=2&&(ha(),Ot(17)),ui(this),this.o=2,Do(this)):bS(this,this.Y-t)};function Do(t){t.l.H==0||t.J||XS(t.l,t)}function ui(t){Mu(t);var e=t.M;e&&typeof e.sa=="function"&&e.sa(),t.M=null,Rm(t.V),ES(t.U),t.g&&(e=t.g,t.g=null,e.abort(),e.sa())}function If(t,e){try{var n=t.l;if(n.H!=0&&(n.g==t||Af(n.i,t))){if(!t.K&&Af(n.i,t)&&n.H==3){try{var r=n.Ja.g.parse(e)}catch{r=null}if(Array.isArray(r)&&r.length==3){var i=r;if(i[0]==0){e:if(!n.u){if(n.g)if(n.g.G+3e3<t.G)Kc(n),Fu(n);else break e;Mm(n),Ot(18)}}else n.Fa=i[1],0<n.Fa-n.V&&37500>i[2]&&n.G&&n.A==0&&!n.v&&(n.v=Va(wt(n.ib,n),6e3));if(1>=VS(n.i)&&n.oa){try{n.oa()}catch{}n.oa=void 0}}else di(n,11)}else if((t.K||n.g==t)&&Kc(n),!aa(e))for(i=n.Ja.g.parse(e),e=0;e<i.length;e++){let c=i[e];if(n.V=c[0],c=c[1],n.H==2)if(c[0]=="c"){n.K=c[1],n.pa=c[2];const u=c[3];u!=null&&(n.ra=u,n.l.info("VER="+n.ra));const d=c[4];d!=null&&(n.Ga=d,n.l.info("SVER="+n.Ga));const f=c[5];f!=null&&typeof f=="number"&&0<f&&(r=1.5*f,n.L=r,n.l.info("backChannelRequestTimeoutMs_="+r)),r=n;const p=t.g;if(p){const y=p.g?p.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(y){var s=r.i;s.g||y.indexOf("spdy")==-1&&y.indexOf("quic")==-1&&y.indexOf("h2")==-1||(s.j=s.l,s.g=new Set,s.h&&(xm(s,s.h),s.h=null))}if(r.F){const v=p.g?p.g.getResponseHeader("X-HTTP-Session-Id"):null;v&&(r.Da=v,ke(r.I,r.F,v))}}n.H=3,n.h&&n.h.Ba(),n.ca&&(n.S=Date.now()-t.G,n.l.info("Handshake RTT: "+n.S+"ms")),r=n;var o=t;if(r.wa=tw(r,r.J?r.pa:null,r.Y),o.K){FS(r.i,o);var l=o,a=r.L;a&&l.setTimeout(a),l.B&&(Mu(l),$a(l)),r.g=o}else QS(r);0<n.j.length&&Uu(n)}else c[0]!="stop"&&c[0]!="close"||di(n,7);else n.H==3&&(c[0]=="stop"||c[0]=="close"?c[0]=="stop"?di(n,7):Dm(n):c[0]!="noop"&&n.h&&n.h.Aa(c),n.A=0)}}ha(4)}catch{}}function PO(t){if(t.Z&&typeof t.Z=="function")return t.Z();if(typeof Map<"u"&&t instanceof Map||typeof Set<"u"&&t instanceof Set)return Array.from(t.values());if(typeof t=="string")return t.split("");if(Ru(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}e=[],n=0;for(r in t)e[n++]=t[r];return e}function RO(t){if(t.ta&&typeof t.ta=="function")return t.ta();if(!t.Z||typeof t.Z!="function"){if(typeof Map<"u"&&t instanceof Map)return Array.from(t.keys());if(!(typeof Set<"u"&&t instanceof Set)){if(Ru(t)||typeof t=="string"){var e=[];t=t.length;for(var n=0;n<t;n++)e.push(n);return e}e=[],n=0;for(const r in t)e[n++]=r;return e}}}function xS(t,e){if(t.forEach&&typeof t.forEach=="function")t.forEach(e,void 0);else if(Ru(t)||typeof t=="string")Array.prototype.forEach.call(t,e,void 0);else for(var n=RO(t),r=PO(t),i=r.length,s=0;s<i;s++)e.call(void 0,r[s],n&&n[s],t)}var OS=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function kO(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var s=t[n].substring(0,r);i=t[n].substring(r+1)}else s=t[n];e(s,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}function gi(t){if(this.g=this.s=this.j="",this.m=null,this.o=this.l="",this.h=!1,t instanceof gi){this.h=t.h,Hc(this,t.j),this.s=t.s,this.g=t.g,Wc(this,t.m),this.l=t.l;var e=t.i,n=new fa;n.i=e.i,e.g&&(n.g=new Map(e.g),n.h=e.h),Xv(this,n),this.o=t.o}else t&&(e=String(t).match(OS))?(this.h=!1,Hc(this,e[1]||"",!0),this.s=_o(e[2]||""),this.g=_o(e[3]||"",!0),Wc(this,e[4]),this.l=_o(e[5]||"",!0),Xv(this,e[6]||"",!0),this.o=_o(e[7]||"")):(this.h=!1,this.i=new fa(null,this.h))}gi.prototype.toString=function(){var t=[],e=this.j;e&&t.push(Eo(e,Zv,!0),":");var n=this.g;return(n||e=="file")&&(t.push("//"),(e=this.s)&&t.push(Eo(e,Zv,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),n=this.m,n!=null&&t.push(":",String(n))),(n=this.l)&&(this.g&&n.charAt(0)!="/"&&t.push("/"),t.push(Eo(n,n.charAt(0)=="/"?bO:AO,!0))),(n=this.i.toString())&&t.push("?",n),(n=this.o)&&t.push("#",Eo(n,OO)),t.join("")};function dr(t){return new gi(t)}function Hc(t,e,n){t.j=n?_o(e,!0):e,t.j&&(t.j=t.j.replace(/:$/,""))}function Wc(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.m=e}else t.m=null}function Xv(t,e,n){e instanceof fa?(t.i=e,NO(t.i,t.h)):(n||(e=Eo(e,xO)),t.i=new fa(e,t.h))}function ke(t,e,n){t.i.set(e,n)}function Lu(t){return ke(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),t}function _o(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function Eo(t,e,n){return typeof t=="string"?(t=encodeURI(t).replace(e,IO),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function IO(t){return t=t.charCodeAt(0),"%"+(t>>4&15).toString(16)+(t&15).toString(16)}var Zv=/[#\/\?@]/g,AO=/[#\?:]/g,bO=/[#\?]/g,xO=/[#\?@]/g,OO=/#/g;function fa(t,e){this.h=this.g=null,this.i=t||null,this.j=!!e}function ei(t){t.g||(t.g=new Map,t.h=0,t.i&&kO(t.i,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}V=fa.prototype;V.add=function(t,e){ei(this),this.i=null,t=Us(this,t);var n=this.g.get(t);return n||this.g.set(t,n=[]),n.push(e),this.h+=1,this};function NS(t,e){ei(t),e=Us(t,e),t.g.has(e)&&(t.i=null,t.h-=t.g.get(e).length,t.g.delete(e))}function DS(t,e){return ei(t),e=Us(t,e),t.g.has(e)}V.forEach=function(t,e){ei(this),this.g.forEach(function(n,r){n.forEach(function(i){t.call(e,i,r,this)},this)},this)};V.ta=function(){ei(this);const t=Array.from(this.g.values()),e=Array.from(this.g.keys()),n=[];for(let r=0;r<e.length;r++){const i=t[r];for(let s=0;s<i.length;s++)n.push(e[r])}return n};V.Z=function(t){ei(this);let e=[];if(typeof t=="string")DS(this,t)&&(e=e.concat(this.g.get(Us(this,t))));else{t=Array.from(this.g.values());for(let n=0;n<t.length;n++)e=e.concat(t[n])}return e};V.set=function(t,e){return ei(this),this.i=null,t=Us(this,t),DS(this,t)&&(this.h-=this.g.get(t).length),this.g.set(t,[e]),this.h+=1,this};V.get=function(t,e){return t?(t=this.Z(t),0<t.length?String(t[0]):e):e};function MS(t,e,n){NS(t,e),0<n.length&&(t.i=null,t.g.set(Us(t,e),ym(n)),t.h+=n.length)}V.toString=function(){if(this.i)return this.i;if(!this.g)return"";const t=[],e=Array.from(this.g.keys());for(var n=0;n<e.length;n++){var r=e[n];const s=encodeURIComponent(String(r)),o=this.Z(r);for(r=0;r<o.length;r++){var i=s;o[r]!==""&&(i+="="+encodeURIComponent(String(o[r]))),t.push(i)}}return this.i=t.join("&")};function Us(t,e){return e=String(e),t.j&&(e=e.toLowerCase()),e}function NO(t,e){e&&!t.j&&(ei(t),t.i=null,t.g.forEach(function(n,r){var i=r.toLowerCase();r!=i&&(NS(this,r),MS(this,i,n))},t)),t.j=e}var DO=class{constructor(t,e){this.g=t,this.map=e}};function LS(t){this.l=t||MO,X.PerformanceNavigationTiming?(t=X.performance.getEntriesByType("navigation"),t=0<t.length&&(t[0].nextHopProtocol=="hq"||t[0].nextHopProtocol=="h2")):t=!!(X.g&&X.g.Ka&&X.g.Ka()&&X.g.Ka().ec),this.j=t?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}var MO=10;function jS(t){return t.h?!0:t.g?t.g.size>=t.j:!1}function VS(t){return t.h?1:t.g?t.g.size:0}function Af(t,e){return t.h?t.h==e:t.g?t.g.has(e):!1}function xm(t,e){t.g?t.g.add(e):t.h=e}function FS(t,e){t.h&&t.h==e?t.h=null:t.g&&t.g.has(e)&&t.g.delete(e)}LS.prototype.cancel=function(){if(this.i=US(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const t of this.g.values())t.cancel();this.g.clear()}};function US(t){if(t.h!=null)return t.i.concat(t.h.F);if(t.g!=null&&t.g.size!==0){let e=t.i;for(const n of t.g.values())e=e.concat(n.F);return e}return ym(t.i)}var LO=class{stringify(t){return X.JSON.stringify(t,void 0)}parse(t){return X.JSON.parse(t,void 0)}};function jO(){this.g=new LO}function VO(t,e,n){const r=n||"";try{xS(t,function(i,s){let o=i;La(i)&&(o=Cm(i)),e.push(r+s+"="+encodeURIComponent(o))})}catch(i){throw e.push(r+"type="+encodeURIComponent("_badmap")),i}}function FO(t,e){const n=new xu;if(X.Image){const r=new Image;r.onload=Sl(Cl,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Sl(Cl,n,r,"TestLoadImage: error",!1,e),r.onabort=Sl(Cl,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Sl(Cl,n,r,"TestLoadImage: timeout",!1,e),X.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}function Cl(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch{}}function Ba(t){this.l=t.fc||null,this.j=t.ob||!1}it(Ba,Im);Ba.prototype.g=function(){return new ju(this.l,this.j)};Ba.prototype.i=function(t){return function(){return t}}({});function ju(t,e){rt.call(this),this.F=t,this.u=e,this.m=void 0,this.readyState=Om,this.status=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.v=new Headers,this.h=null,this.C="GET",this.B="",this.g=!1,this.A=this.j=this.l=null}it(ju,rt);var Om=0;V=ju.prototype;V.open=function(t,e){if(this.readyState!=Om)throw this.abort(),Error("Error reopening a connection");this.C=t,this.B=e,this.readyState=1,pa(this)};V.send=function(t){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const e={headers:this.v,method:this.C,credentials:this.m,cache:void 0};t&&(e.body=t),(this.F||X).fetch(new Request(this.B,e)).then(this.$a.bind(this),this.ka.bind(this))};V.abort=function(){this.response=this.responseText="",this.v=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,za(this)),this.readyState=Om};V.$a=function(t){if(this.g&&(this.l=t,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=t.headers,this.readyState=2,pa(this)),this.g&&(this.readyState=3,pa(this),this.g)))if(this.responseType==="arraybuffer")t.arrayBuffer().then(this.Ya.bind(this),this.ka.bind(this));else if(typeof X.ReadableStream<"u"&&"body"in t){if(this.j=t.body.getReader(),this.u){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.A=new TextDecoder;$S(this)}else t.text().then(this.Za.bind(this),this.ka.bind(this))};function $S(t){t.j.read().then(t.Xa.bind(t)).catch(t.ka.bind(t))}V.Xa=function(t){if(this.g){if(this.u&&t.value)this.response.push(t.value);else if(!this.u){var e=t.value?t.value:new Uint8Array(0);(e=this.A.decode(e,{stream:!t.done}))&&(this.response=this.responseText+=e)}t.done?za(this):pa(this),this.readyState==3&&$S(this)}};V.Za=function(t){this.g&&(this.response=this.responseText=t,za(this))};V.Ya=function(t){this.g&&(this.response=t,za(this))};V.ka=function(){this.g&&za(this)};function za(t){t.readyState=4,t.l=null,t.j=null,t.A=null,pa(t)}V.setRequestHeader=function(t,e){this.v.append(t,e)};V.getResponseHeader=function(t){return this.h&&this.h.get(t.toLowerCase())||""};V.getAllResponseHeaders=function(){if(!this.h)return"";const t=[],e=this.h.entries();for(var n=e.next();!n.done;)n=n.value,t.push(n[0]+": "+n[1]),n=e.next();return t.join(`\r
`)};function pa(t){t.onreadystatechange&&t.onreadystatechange.call(t)}Object.defineProperty(ju.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(t){this.m=t?"include":"same-origin"}});var UO=X.JSON.parse;function Ue(t){rt.call(this),this.headers=new Map,this.u=t||null,this.h=!1,this.C=this.g=null,this.I="",this.m=0,this.j="",this.l=this.G=this.v=this.F=!1,this.B=0,this.A=null,this.K=BS,this.L=this.M=!1}it(Ue,rt);var BS="",$O=/^https?$/i,BO=["POST","PUT"];V=Ue.prototype;V.Oa=function(t){this.M=t};V.ha=function(t,e,n,r){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.I+"; newUri="+t);e=e?e.toUpperCase():"GET",this.I=t,this.j="",this.m=0,this.F=!1,this.h=!0,this.g=this.u?this.u.g():Pf.g(),this.C=this.u?Yv(this.u):Yv(Pf),this.g.onreadystatechange=wt(this.La,this);try{this.G=!0,this.g.open(e,String(t),!0),this.G=!1}catch(s){e0(this,s);return}if(t=n||"",n=new Map(this.headers),r)if(Object.getPrototypeOf(r)===Object.prototype)for(var i in r)n.set(i,r[i]);else if(typeof r.keys=="function"&&typeof r.get=="function")for(const s of r.keys())n.set(s,r.get(s));else throw Error("Unknown input type for opt_headers: "+String(r));r=Array.from(n.keys()).find(s=>s.toLowerCase()=="content-type"),i=X.FormData&&t instanceof X.FormData,!(0<=sS(BO,e))||r||i||n.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[s,o]of n)this.g.setRequestHeader(s,o);this.K&&(this.g.responseType=this.K),"withCredentials"in this.g&&this.g.withCredentials!==this.M&&(this.g.withCredentials=this.M);try{HS(this),0<this.B&&((this.L=zO(this.g))?(this.g.timeout=this.B,this.g.ontimeout=wt(this.ua,this)):this.A=km(this.ua,this.B,this)),this.v=!0,this.g.send(t),this.v=!1}catch(s){e0(this,s)}};function zO(t){return Cs&&typeof t.timeout=="number"&&t.ontimeout!==void 0}V.ua=function(){typeof gm<"u"&&this.g&&(this.j="Timed out after "+this.B+"ms, aborting",this.m=8,ut(this,"timeout"),this.abort(8))};function e0(t,e){t.h=!1,t.g&&(t.l=!0,t.g.abort(),t.l=!1),t.j=e,t.m=5,zS(t),Vu(t)}function zS(t){t.F||(t.F=!0,ut(t,"complete"),ut(t,"error"))}V.abort=function(t){this.g&&this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1,this.m=t||7,ut(this,"complete"),ut(this,"abort"),Vu(this))};V.N=function(){this.g&&(this.h&&(this.h=!1,this.l=!0,this.g.abort(),this.l=!1),Vu(this,!0)),Ue.$.N.call(this)};V.La=function(){this.s||(this.G||this.v||this.l?qS(this):this.kb())};V.kb=function(){qS(this)};function qS(t){if(t.h&&typeof gm<"u"&&(!t.C[1]||Dn(t)!=4||t.da()!=2)){if(t.v&&Dn(t)==4)km(t.La,0,t);else if(ut(t,"readystatechange"),Dn(t)==4){t.h=!1;try{const o=t.da();e:switch(o){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var e=!0;break e;default:e=!1}var n;if(!(n=e)){var r;if(r=o===0){var i=String(t.I).match(OS)[1]||null;!i&&X.self&&X.self.location&&(i=X.self.location.protocol.slice(0,-1)),r=!$O.test(i?i.toLowerCase():"")}n=r}if(n)ut(t,"complete"),ut(t,"success");else{t.m=6;try{var s=2<Dn(t)?t.g.statusText:""}catch{s=""}t.j=s+" ["+t.da()+"]",zS(t)}}finally{Vu(t)}}}}function Vu(t,e){if(t.g){HS(t);const n=t.g,r=t.C[0]?()=>{}:null;t.g=null,t.C=null,e||ut(t,"ready");try{n.onreadystatechange=r}catch{}}}function HS(t){t.g&&t.L&&(t.g.ontimeout=null),t.A&&(X.clearTimeout(t.A),t.A=null)}V.isActive=function(){return!!this.g};function Dn(t){return t.g?t.g.readyState:0}V.da=function(){try{return 2<Dn(this)?this.g.status:-1}catch{return-1}};V.ja=function(){try{return this.g?this.g.responseText:""}catch{return""}};V.Wa=function(t){if(this.g){var e=this.g.responseText;return t&&e.indexOf(t)==0&&(e=e.substring(t.length)),UO(e)}};function t0(t){try{if(!t.g)return null;if("response"in t.g)return t.g.response;switch(t.K){case BS:case"text":return t.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in t.g)return t.g.mozResponseArrayBuffer}return null}catch{return null}}function qO(t){const e={};t=(t.g&&2<=Dn(t)&&t.g.getAllResponseHeaders()||"").split(`\r
`);for(let r=0;r<t.length;r++){if(aa(t[r]))continue;var n=mO(t[r]);const i=n[0];if(n=n[1],typeof n!="string")continue;n=n.trim();const s=e[i]||[];e[i]=s,s.push(n)}lO(e,function(r){return r.join(", ")})}V.Ia=function(){return this.m};V.Sa=function(){return typeof this.j=="string"?this.j:String(this.j)};function WS(t){let e="";return _m(t,function(n,r){e+=r,e+=":",e+=n,e+=`\r
`}),e}function Nm(t,e,n){e:{for(r in n){var r=!1;break e}r=!0}r||(n=WS(n),typeof t=="string"?n!=null&&encodeURIComponent(String(n)):ke(t,e,n))}function so(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function KS(t){this.Ga=0,this.j=[],this.l=new xu,this.pa=this.wa=this.I=this.Y=this.g=this.Da=this.F=this.na=this.o=this.U=this.s=null,this.fb=this.W=0,this.cb=so("failFast",!1,t),this.G=this.v=this.u=this.m=this.h=null,this.aa=!0,this.Fa=this.V=-1,this.ba=this.A=this.C=0,this.ab=so("baseRetryDelayMs",5e3,t),this.hb=so("retryDelaySeedMs",1e4,t),this.eb=so("forwardChannelMaxRetries",2,t),this.xa=so("forwardChannelRequestTimeoutMs",2e4,t),this.va=t&&t.xmlHttpFactory||void 0,this.Ha=t&&t.dc||!1,this.L=void 0,this.J=t&&t.supportsCrossDomainXhr||!1,this.K="",this.i=new LS(t&&t.concurrentRequestLimit),this.Ja=new jO,this.P=t&&t.fastHandshake||!1,this.O=t&&t.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.bb=t&&t.bc||!1,t&&t.Ea&&this.l.Ea(),t&&t.forceLongPolling&&(this.aa=!1),this.ca=!this.P&&this.aa&&t&&t.detectBufferingProxy||!1,this.qa=void 0,t&&t.longPollingTimeout&&0<t.longPollingTimeout&&(this.qa=t.longPollingTimeout),this.oa=void 0,this.S=0,this.M=!1,this.ma=this.B=null}V=KS.prototype;V.ra=8;V.H=1;function Dm(t){if(GS(t),t.H==3){var e=t.W++,n=dr(t.I);if(ke(n,"SID",t.K),ke(n,"RID",e),ke(n,"TYPE","terminate"),qa(t,n),e=new Ua(t,t.l,e),e.L=2,e.v=Lu(dr(n)),n=!1,X.navigator&&X.navigator.sendBeacon)try{n=X.navigator.sendBeacon(e.v.toString(),"")}catch{}!n&&X.Image&&(new Image().src=e.v,n=!0),n||(e.g=nw(e.l,null),e.g.ha(e.v)),e.G=Date.now(),$a(e)}ew(t)}function Fu(t){t.g&&(Lm(t),t.g.cancel(),t.g=null)}function GS(t){Fu(t),t.u&&(X.clearTimeout(t.u),t.u=null),Kc(t),t.i.cancel(),t.m&&(typeof t.m=="number"&&X.clearTimeout(t.m),t.m=null)}function Uu(t){if(!jS(t.i)&&!t.m){t.m=!0;var e=t.Na;ca||yS(),ua||(ca(),ua=!0),Pm.add(e,t),t.C=0}}function HO(t,e){return VS(t.i)>=t.i.j-(t.m?1:0)?!1:t.m?(t.j=e.F.concat(t.j),!0):t.H==1||t.H==2||t.C>=(t.cb?0:t.eb)?!1:(t.m=Va(wt(t.Na,t,e),ZS(t,t.C)),t.C++,!0)}V.Na=function(t){if(this.m)if(this.m=null,this.H==1){if(!t){this.W=Math.floor(1e5*Math.random()),t=this.W++;const i=new Ua(this,this.l,t);let s=this.s;if(this.U&&(s?(s=cS(s),uS(s,this.U)):s=this.U),this.o!==null||this.O||(i.I=s,s=null),this.P)e:{for(var e=0,n=0;n<this.j.length;n++){t:{var r=this.j[n];if("__data__"in r.map&&(r=r.map.__data__,typeof r=="string")){r=r.length;break t}r=void 0}if(r===void 0)break;if(e+=r,4096<e){e=n;break e}if(e===4096||n===this.j.length-1){e=n+1;break e}}e=1e3}else e=1e3;e=JS(this,i,e),n=dr(this.I),ke(n,"RID",t),ke(n,"CVER",22),this.F&&ke(n,"X-HTTP-Session-Id",this.F),qa(this,n),s&&(this.O?e="headers="+encodeURIComponent(String(WS(s)))+"&"+e:this.o&&Nm(n,this.o,s)),xm(this.i,i),this.bb&&ke(n,"TYPE","init"),this.P?(ke(n,"$req",e),ke(n,"SID","null"),i.aa=!0,kf(i,n,null)):kf(i,n,e),this.H=2}}else this.H==3&&(t?n0(this,t):this.j.length==0||jS(this.i)||n0(this))};function n0(t,e){var n;e?n=e.m:n=t.W++;const r=dr(t.I);ke(r,"SID",t.K),ke(r,"RID",n),ke(r,"AID",t.V),qa(t,r),t.o&&t.s&&Nm(r,t.o,t.s),n=new Ua(t,t.l,n,t.C+1),t.o===null&&(n.I=t.s),e&&(t.j=e.F.concat(t.j)),e=JS(t,n,1e3),n.setTimeout(Math.round(.5*t.xa)+Math.round(.5*t.xa*Math.random())),xm(t.i,n),kf(n,r,e)}function qa(t,e){t.na&&_m(t.na,function(n,r){ke(e,r,n)}),t.h&&xS({},function(n,r){ke(e,r,n)})}function JS(t,e,n){n=Math.min(t.j.length,n);var r=t.h?wt(t.h.Va,t.h,t):null;e:{var i=t.j;let s=-1;for(;;){const o=["count="+n];s==-1?0<n?(s=i[0].g,o.push("ofs="+s)):s=0:o.push("ofs="+s);let l=!0;for(let a=0;a<n;a++){let c=i[a].g;const u=i[a].map;if(c-=s,0>c)s=Math.max(0,i[a].g-100),l=!1;else try{VO(u,o,"req"+c+"_")}catch{r&&r(u)}}if(l){r=o.join("&");break e}}}return t=t.j.splice(0,n),e.F=t,r}function QS(t){if(!t.g&&!t.u){t.ba=1;var e=t.Ma;ca||yS(),ua||(ca(),ua=!0),Pm.add(e,t),t.A=0}}function Mm(t){return t.g||t.u||3<=t.A?!1:(t.ba++,t.u=Va(wt(t.Ma,t),ZS(t,t.A)),t.A++,!0)}V.Ma=function(){if(this.u=null,YS(this),this.ca&&!(this.M||this.g==null||0>=this.S)){var t=2*this.S;this.l.info("BP detection timer enabled: "+t),this.B=Va(wt(this.jb,this),t)}};V.jb=function(){this.B&&(this.B=null,this.l.info("BP detection timeout reached."),this.l.info("Buffering proxy detected and switch to long-polling!"),this.G=!1,this.M=!0,Ot(10),Fu(this),YS(this))};function Lm(t){t.B!=null&&(X.clearTimeout(t.B),t.B=null)}function YS(t){t.g=new Ua(t,t.l,"rpc",t.ba),t.o===null&&(t.g.I=t.s),t.g.O=0;var e=dr(t.wa);ke(e,"RID","rpc"),ke(e,"SID",t.K),ke(e,"AID",t.V),ke(e,"CI",t.G?"0":"1"),!t.G&&t.qa&&ke(e,"TO",t.qa),ke(e,"TYPE","xmlhttp"),qa(t,e),t.o&&t.s&&Nm(e,t.o,t.s),t.L&&t.g.setTimeout(t.L);var n=t.g;t=t.pa,n.L=1,n.v=Lu(dr(e)),n.s=null,n.S=!0,kS(n,t)}V.ib=function(){this.v!=null&&(this.v=null,Fu(this),Mm(this),Ot(19))};function Kc(t){t.v!=null&&(X.clearTimeout(t.v),t.v=null)}function XS(t,e){var n=null;if(t.g==e){Kc(t),Lm(t),t.g=null;var r=2}else if(Af(t.i,e))n=e.F,FS(t.i,e),r=1;else return;if(t.H!=0){if(e.i)if(r==1){n=e.s?e.s.length:0,e=Date.now()-e.G;var i=t.C;r=Ou(),ut(r,new wS(r,n)),Uu(t)}else QS(t);else if(i=e.o,i==3||i==0&&0<e.ca||!(r==1&&HO(t,e)||r==2&&Mm(t)))switch(n&&0<n.length&&(e=t.i,e.i=e.i.concat(n)),i){case 1:di(t,5);break;case 4:di(t,10);break;case 3:di(t,6);break;default:di(t,2)}}}function ZS(t,e){let n=t.ab+Math.floor(Math.random()*t.hb);return t.isActive()||(n*=2),n*e}function di(t,e){if(t.l.info("Error code "+e),e==2){var n=null;t.h&&(n=null);var r=wt(t.pb,t);n||(n=new gi("//www.google.com/images/cleardot.gif"),X.location&&X.location.protocol=="http"||Hc(n,"https"),Lu(n)),FO(n.toString(),r)}else Ot(2);t.H=0,t.h&&t.h.za(e),ew(t),GS(t)}V.pb=function(t){t?(this.l.info("Successfully pinged google.com"),Ot(2)):(this.l.info("Failed to ping google.com"),Ot(1))};function ew(t){if(t.H=0,t.ma=[],t.h){const e=US(t.i);(e.length!=0||t.j.length!=0)&&(Wv(t.ma,e),Wv(t.ma,t.j),t.i.i.length=0,ym(t.j),t.j.length=0),t.h.ya()}}function tw(t,e,n){var r=n instanceof gi?dr(n):new gi(n);if(r.g!="")e&&(r.g=e+"."+r.g),Wc(r,r.m);else{var i=X.location;r=i.protocol,e=e?e+"."+i.hostname:i.hostname,i=+i.port;var s=new gi(null);r&&Hc(s,r),e&&(s.g=e),i&&Wc(s,i),n&&(s.l=n),r=s}return n=t.F,e=t.Da,n&&e&&ke(r,n,e),ke(r,"VER",t.ra),qa(t,r),r}function nw(t,e,n){if(e&&!t.J)throw Error("Can't create secondary domain capable XhrIo object.");return e=n&&t.Ha&&!t.va?new Ue(new Ba({ob:!0})):new Ue(t.va),e.Oa(t.J),e}V.isActive=function(){return!!this.h&&this.h.isActive(this)};function rw(){}V=rw.prototype;V.Ba=function(){};V.Aa=function(){};V.za=function(){};V.ya=function(){};V.isActive=function(){return!0};V.Va=function(){};function Gc(){if(Cs&&!(10<=Number(iO)))throw Error("Environmental error: no available transport.")}Gc.prototype.g=function(t,e){return new Kt(t,e)};function Kt(t,e){rt.call(this),this.g=new KS(e),this.l=t,this.h=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.g.s=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.Ca&&(t?t["X-WebChannel-Client-Profile"]=e.Ca:t={"X-WebChannel-Client-Profile":e.Ca}),this.g.U=t,(t=e&&e.cc)&&!aa(t)&&(this.g.o=t),this.A=e&&e.supportsCrossDomainXhr||!1,this.v=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!aa(e)&&(this.g.F=e,t=this.h,t!==null&&e in t&&(t=this.h,e in t&&delete t[e])),this.j=new $s(this)}it(Kt,rt);Kt.prototype.m=function(){this.g.h=this.j,this.A&&(this.g.J=!0);var t=this.g,e=this.l,n=this.h||void 0;Ot(0),t.Y=e,t.na=n||{},t.G=t.aa,t.I=tw(t,null,t.Y),Uu(t)};Kt.prototype.close=function(){Dm(this.g)};Kt.prototype.u=function(t){var e=this.g;if(typeof t=="string"){var n={};n.__data__=t,t=n}else this.v&&(n={},n.__data__=Cm(t),t=n);e.j.push(new DO(e.fb++,t)),e.H==3&&Uu(e)};Kt.prototype.N=function(){this.g.h=null,delete this.j,Dm(this.g),delete this.g,Kt.$.N.call(this)};function iw(t){Am.call(this),t.__headers__&&(this.headers=t.__headers__,this.statusCode=t.__status__,delete t.__headers__,delete t.__status__);var e=t.__sm__;if(e){e:{for(const n in e){t=n;break e}t=void 0}(this.i=t)&&(t=this.i,e=e!==null&&t in e?e[t]:void 0),this.data=e}else this.data=t}it(iw,Am);function sw(){bm.call(this),this.status=1}it(sw,bm);function $s(t){this.g=t}it($s,rw);$s.prototype.Ba=function(){ut(this.g,"a")};$s.prototype.Aa=function(t){ut(this.g,new iw(t))};$s.prototype.za=function(t){ut(this.g,new sw)};$s.prototype.ya=function(){ut(this.g,"b")};function WO(){this.blockSize=-1}function Rn(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.m=Array(this.blockSize),this.i=this.h=0,this.reset()}it(Rn,WO);Rn.prototype.reset=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.i=this.h=0};function Jd(t,e,n){n||(n=0);var r=Array(16);if(typeof e=="string")for(var i=0;16>i;++i)r[i]=e.charCodeAt(n++)|e.charCodeAt(n++)<<8|e.charCodeAt(n++)<<16|e.charCodeAt(n++)<<24;else for(i=0;16>i;++i)r[i]=e[n++]|e[n++]<<8|e[n++]<<16|e[n++]<<24;e=t.g[0],n=t.g[1],i=t.g[2];var s=t.g[3],o=e+(s^n&(i^s))+r[0]+3614090360&4294967295;e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[1]+3905402710&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[2]+606105819&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[3]+3250441966&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[4]+4118548399&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[5]+1200080426&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[6]+2821735955&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[7]+4249261313&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[8]+1770035416&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[9]+2336552879&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[10]+4294925233&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[11]+2304563134&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(s^n&(i^s))+r[12]+1804603682&4294967295,e=n+(o<<7&4294967295|o>>>25),o=s+(i^e&(n^i))+r[13]+4254626195&4294967295,s=e+(o<<12&4294967295|o>>>20),o=i+(n^s&(e^n))+r[14]+2792965006&4294967295,i=s+(o<<17&4294967295|o>>>15),o=n+(e^i&(s^e))+r[15]+1236535329&4294967295,n=i+(o<<22&4294967295|o>>>10),o=e+(i^s&(n^i))+r[1]+4129170786&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[6]+3225465664&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[11]+643717713&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[0]+3921069994&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[5]+3593408605&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[10]+38016083&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[15]+3634488961&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[4]+3889429448&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[9]+568446438&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[14]+3275163606&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[3]+4107603335&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[8]+1163531501&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(i^s&(n^i))+r[13]+2850285829&4294967295,e=n+(o<<5&4294967295|o>>>27),o=s+(n^i&(e^n))+r[2]+4243563512&4294967295,s=e+(o<<9&4294967295|o>>>23),o=i+(e^n&(s^e))+r[7]+1735328473&4294967295,i=s+(o<<14&4294967295|o>>>18),o=n+(s^e&(i^s))+r[12]+2368359562&4294967295,n=i+(o<<20&4294967295|o>>>12),o=e+(n^i^s)+r[5]+4294588738&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[8]+2272392833&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[11]+1839030562&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[14]+4259657740&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[1]+2763975236&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[4]+1272893353&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[7]+4139469664&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[10]+3200236656&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[13]+681279174&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[0]+3936430074&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[3]+3572445317&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[6]+76029189&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(n^i^s)+r[9]+3654602809&4294967295,e=n+(o<<4&4294967295|o>>>28),o=s+(e^n^i)+r[12]+3873151461&4294967295,s=e+(o<<11&4294967295|o>>>21),o=i+(s^e^n)+r[15]+530742520&4294967295,i=s+(o<<16&4294967295|o>>>16),o=n+(i^s^e)+r[2]+3299628645&4294967295,n=i+(o<<23&4294967295|o>>>9),o=e+(i^(n|~s))+r[0]+4096336452&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[7]+1126891415&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[14]+2878612391&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[5]+4237533241&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[12]+1700485571&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[3]+2399980690&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[10]+4293915773&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[1]+2240044497&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[8]+1873313359&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[15]+4264355552&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[6]+2734768916&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[13]+1309151649&4294967295,n=i+(o<<21&4294967295|o>>>11),o=e+(i^(n|~s))+r[4]+4149444226&4294967295,e=n+(o<<6&4294967295|o>>>26),o=s+(n^(e|~i))+r[11]+3174756917&4294967295,s=e+(o<<10&4294967295|o>>>22),o=i+(e^(s|~n))+r[2]+718787259&4294967295,i=s+(o<<15&4294967295|o>>>17),o=n+(s^(i|~e))+r[9]+3951481745&4294967295,t.g[0]=t.g[0]+e&4294967295,t.g[1]=t.g[1]+(i+(o<<21&4294967295|o>>>11))&4294967295,t.g[2]=t.g[2]+i&4294967295,t.g[3]=t.g[3]+s&4294967295}Rn.prototype.j=function(t,e){e===void 0&&(e=t.length);for(var n=e-this.blockSize,r=this.m,i=this.h,s=0;s<e;){if(i==0)for(;s<=n;)Jd(this,t,s),s+=this.blockSize;if(typeof t=="string"){for(;s<e;)if(r[i++]=t.charCodeAt(s++),i==this.blockSize){Jd(this,r),i=0;break}}else for(;s<e;)if(r[i++]=t[s++],i==this.blockSize){Jd(this,r),i=0;break}}this.h=i,this.i+=e};Rn.prototype.l=function(){var t=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);t[0]=128;for(var e=1;e<t.length-8;++e)t[e]=0;var n=8*this.i;for(e=t.length-8;e<t.length;++e)t[e]=n&255,n/=256;for(this.j(t),t=Array(16),e=n=0;4>e;++e)for(var r=0;32>r;r+=8)t[n++]=this.g[e]>>>r&255;return t};function Ee(t,e){this.h=e;for(var n=[],r=!0,i=t.length-1;0<=i;i--){var s=t[i]|0;r&&s==e||(n[i]=s,r=!1)}this.g=n}var KO={};function jm(t){return-128<=t&&128>t?tO(t,function(e){return new Ee([e|0],0>e?-1:0)}):new Ee([t|0],0>t?-1:0)}function Mn(t){if(isNaN(t)||!isFinite(t))return hs;if(0>t)return lt(Mn(-t));for(var e=[],n=1,r=0;t>=n;r++)e[r]=t/n|0,n*=bf;return new Ee(e,0)}function ow(t,e){if(t.length==0)throw Error("number format error: empty string");if(e=e||10,2>e||36<e)throw Error("radix out of range: "+e);if(t.charAt(0)=="-")return lt(ow(t.substring(1),e));if(0<=t.indexOf("-"))throw Error('number format error: interior "-" character');for(var n=Mn(Math.pow(e,8)),r=hs,i=0;i<t.length;i+=8){var s=Math.min(8,t.length-i),o=parseInt(t.substring(i,i+s),e);8>s?(s=Mn(Math.pow(e,s)),r=r.R(s).add(Mn(o))):(r=r.R(n),r=r.add(Mn(o)))}return r}var bf=4294967296,hs=jm(0),xf=jm(1),r0=jm(16777216);V=Ee.prototype;V.ea=function(){if(tn(this))return-lt(this).ea();for(var t=0,e=1,n=0;n<this.g.length;n++){var r=this.D(n);t+=(0<=r?r:bf+r)*e,e*=bf}return t};V.toString=function(t){if(t=t||10,2>t||36<t)throw Error("radix out of range: "+t);if(tr(this))return"0";if(tn(this))return"-"+lt(this).toString(t);for(var e=Mn(Math.pow(t,6)),n=this,r="";;){var i=Qc(n,e).g;n=Jc(n,i.R(e));var s=((0<n.g.length?n.g[0]:n.h)>>>0).toString(t);if(n=i,tr(n))return s+r;for(;6>s.length;)s="0"+s;r=s+r}};V.D=function(t){return 0>t?0:t<this.g.length?this.g[t]:this.h};function tr(t){if(t.h!=0)return!1;for(var e=0;e<t.g.length;e++)if(t.g[e]!=0)return!1;return!0}function tn(t){return t.h==-1}V.X=function(t){return t=Jc(this,t),tn(t)?-1:tr(t)?0:1};function lt(t){for(var e=t.g.length,n=[],r=0;r<e;r++)n[r]=~t.g[r];return new Ee(n,~t.h).add(xf)}V.abs=function(){return tn(this)?lt(this):this};V.add=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0,i=0;i<=e;i++){var s=r+(this.D(i)&65535)+(t.D(i)&65535),o=(s>>>16)+(this.D(i)>>>16)+(t.D(i)>>>16);r=o>>>16,s&=65535,o&=65535,n[i]=o<<16|s}return new Ee(n,n[n.length-1]&-2147483648?-1:0)};function Jc(t,e){return t.add(lt(e))}V.R=function(t){if(tr(this)||tr(t))return hs;if(tn(this))return tn(t)?lt(this).R(lt(t)):lt(lt(this).R(t));if(tn(t))return lt(this.R(lt(t)));if(0>this.X(r0)&&0>t.X(r0))return Mn(this.ea()*t.ea());for(var e=this.g.length+t.g.length,n=[],r=0;r<2*e;r++)n[r]=0;for(r=0;r<this.g.length;r++)for(var i=0;i<t.g.length;i++){var s=this.D(r)>>>16,o=this.D(r)&65535,l=t.D(i)>>>16,a=t.D(i)&65535;n[2*r+2*i]+=o*a,Pl(n,2*r+2*i),n[2*r+2*i+1]+=s*a,Pl(n,2*r+2*i+1),n[2*r+2*i+1]+=o*l,Pl(n,2*r+2*i+1),n[2*r+2*i+2]+=s*l,Pl(n,2*r+2*i+2)}for(r=0;r<e;r++)n[r]=n[2*r+1]<<16|n[2*r];for(r=e;r<2*e;r++)n[r]=0;return new Ee(n,0)};function Pl(t,e){for(;(t[e]&65535)!=t[e];)t[e+1]+=t[e]>>>16,t[e]&=65535,e++}function oo(t,e){this.g=t,this.h=e}function Qc(t,e){if(tr(e))throw Error("division by zero");if(tr(t))return new oo(hs,hs);if(tn(t))return e=Qc(lt(t),e),new oo(lt(e.g),lt(e.h));if(tn(e))return e=Qc(t,lt(e)),new oo(lt(e.g),e.h);if(30<t.g.length){if(tn(t)||tn(e))throw Error("slowDivide_ only works with positive integers.");for(var n=xf,r=e;0>=r.X(t);)n=i0(n),r=i0(r);var i=Vi(n,1),s=Vi(r,1);for(r=Vi(r,2),n=Vi(n,2);!tr(r);){var o=s.add(r);0>=o.X(t)&&(i=i.add(n),s=o),r=Vi(r,1),n=Vi(n,1)}return e=Jc(t,i.R(e)),new oo(i,e)}for(i=hs;0<=t.X(e);){for(n=Math.max(1,Math.floor(t.ea()/e.ea())),r=Math.ceil(Math.log(n)/Math.LN2),r=48>=r?1:Math.pow(2,r-48),s=Mn(n),o=s.R(e);tn(o)||0<o.X(t);)n-=r,s=Mn(n),o=s.R(e);tr(s)&&(s=xf),i=i.add(s),t=Jc(t,o)}return new oo(i,t)}V.gb=function(t){return Qc(this,t).h};V.and=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)&t.D(r);return new Ee(n,this.h&t.h)};V.or=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)|t.D(r);return new Ee(n,this.h|t.h)};V.xor=function(t){for(var e=Math.max(this.g.length,t.g.length),n=[],r=0;r<e;r++)n[r]=this.D(r)^t.D(r);return new Ee(n,this.h^t.h)};function i0(t){for(var e=t.g.length+1,n=[],r=0;r<e;r++)n[r]=t.D(r)<<1|t.D(r-1)>>>31;return new Ee(n,t.h)}function Vi(t,e){var n=e>>5;e%=32;for(var r=t.g.length-n,i=[],s=0;s<r;s++)i[s]=0<e?t.D(s+n)>>>e|t.D(s+n+1)<<32-e:t.D(s+n);return new Ee(i,t.h)}Gc.prototype.createWebChannel=Gc.prototype.g;Kt.prototype.send=Kt.prototype.u;Kt.prototype.open=Kt.prototype.m;Kt.prototype.close=Kt.prototype.close;Nu.NO_ERROR=0;Nu.TIMEOUT=8;Nu.HTTP_ERROR=6;CS.COMPLETE="complete";PS.EventType=Fa;Fa.OPEN="a";Fa.CLOSE="b";Fa.ERROR="c";Fa.MESSAGE="d";rt.prototype.listen=rt.prototype.O;Ue.prototype.listenOnce=Ue.prototype.P;Ue.prototype.getLastError=Ue.prototype.Sa;Ue.prototype.getLastErrorCode=Ue.prototype.Ia;Ue.prototype.getStatus=Ue.prototype.da;Ue.prototype.getResponseJson=Ue.prototype.Wa;Ue.prototype.getResponseText=Ue.prototype.ja;Ue.prototype.send=Ue.prototype.ha;Ue.prototype.setWithCredentials=Ue.prototype.Oa;Rn.prototype.digest=Rn.prototype.l;Rn.prototype.reset=Rn.prototype.reset;Rn.prototype.update=Rn.prototype.j;Ee.prototype.add=Ee.prototype.add;Ee.prototype.multiply=Ee.prototype.R;Ee.prototype.modulo=Ee.prototype.gb;Ee.prototype.compare=Ee.prototype.X;Ee.prototype.toNumber=Ee.prototype.ea;Ee.prototype.toString=Ee.prototype.toString;Ee.prototype.getBits=Ee.prototype.D;Ee.fromNumber=Mn;Ee.fromString=ow;var GO=function(){return new Gc},JO=function(){return Ou()},Qd=Nu,QO=CS,YO=Ni,s0={xb:0,Ab:1,Bb:2,Ub:3,Zb:4,Wb:5,Xb:6,Vb:7,Tb:8,Yb:9,PROXY:10,NOPROXY:11,Rb:12,Nb:13,Ob:14,Mb:15,Pb:16,Qb:17,tb:18,sb:19,ub:20},XO=Ba,Rl=PS,ZO=Ue,eN=Rn,fs=Ee;const o0="@firebase/firestore";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _t{constructor(e){this.uid=e}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(e){return e.uid===this.uid}}_t.UNAUTHENTICATED=new _t(null),_t.GOOGLE_CREDENTIALS=new _t("google-credentials-uid"),_t.FIRST_PARTY=new _t("first-party-uid"),_t.MOCK_USER=new _t("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Bs="10.2.0";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new im("@firebase/firestore");function a0(){return Ri.logLevel}function q(t,...e){if(Ri.logLevel<=me.DEBUG){const n=e.map(Vm);Ri.debug(`Firestore (${Bs}): ${t}`,...n)}}function hr(t,...e){if(Ri.logLevel<=me.ERROR){const n=e.map(Vm);Ri.error(`Firestore (${Bs}): ${t}`,...n)}}function Ps(t,...e){if(Ri.logLevel<=me.WARN){const n=e.map(Vm);Ri.warn(`Firestore (${Bs}): ${t}`,...n)}}function Vm(t){if(typeof t=="string")return t;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(t)}catch{return t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Z(t="Unexpected state"){const e=`FIRESTORE (${Bs}) INTERNAL ASSERTION FAILED: `+t;throw hr(e),new Error(e)}function Ae(t,e){t||Z()}function ne(t,e){return t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const x={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class G extends gr{constructor(e,n){super(e,n),this.code=e,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zr{constructor(){this.promise=new Promise((e,n)=>{this.resolve=e,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class aw{constructor(e,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${e}`)}}class tN{getToken(){return Promise.resolve(null)}invalidateToken(){}start(e,n){e.enqueueRetryable(()=>n(_t.UNAUTHENTICATED))}shutdown(){}}class nN{constructor(e){this.token=e,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(e,n){this.changeListener=n,e.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class rN{constructor(e){this.t=e,this.currentUser=_t.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(e,n){let r=this.i;const i=a=>this.i!==r?(r=this.i,n(a)):Promise.resolve();let s=new zr;this.o=()=>{this.i++,this.currentUser=this.u(),s.resolve(),s=new zr,e.enqueueRetryable(()=>i(this.currentUser))};const o=()=>{const a=s;e.enqueueRetryable(async()=>{await a.promise,await i(this.currentUser)})},l=a=>{q("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=a,this.auth.addAuthTokenListener(this.o),o()};this.t.onInit(a=>l(a)),setTimeout(()=>{if(!this.auth){const a=this.t.getImmediate({optional:!0});a?l(a):(q("FirebaseAuthCredentialsProvider","Auth not yet detected"),s.resolve(),s=new zr)}},0),o()}getToken(){const e=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==e?(q("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Ae(typeof r.accessToken=="string"),new aw(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.auth.removeAuthTokenListener(this.o)}u(){const e=this.auth&&this.auth.getUid();return Ae(e===null||typeof e=="string"),new _t(e)}}class iN{constructor(e,n,r){this.l=e,this.h=n,this.P=r,this.type="FirstParty",this.user=_t.FIRST_PARTY,this.I=new Map}T(){return this.P?this.P():null}get headers(){this.I.set("X-Goog-AuthUser",this.l);const e=this.T();return e&&this.I.set("Authorization",e),this.h&&this.I.set("X-Goog-Iam-Authorization-Token",this.h),this.I}}class sN{constructor(e,n,r){this.l=e,this.h=n,this.P=r}getToken(){return Promise.resolve(new iN(this.l,this.h,this.P))}start(e,n){e.enqueueRetryable(()=>n(_t.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class oN{constructor(e){this.value=e,this.type="AppCheck",this.headers=new Map,e&&e.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class aN{constructor(e){this.A=e,this.forceRefresh=!1,this.appCheck=null,this.R=null}start(e,n){const r=s=>{s.error!=null&&q("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${s.error.message}`);const o=s.token!==this.R;return this.R=s.token,q("FirebaseAppCheckTokenProvider",`Received ${o?"new":"existing"} token.`),o?n(s.token):Promise.resolve()};this.o=s=>{e.enqueueRetryable(()=>r(s))};const i=s=>{q("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=s,this.appCheck.addTokenListener(this.o)};this.A.onInit(s=>i(s)),setTimeout(()=>{if(!this.appCheck){const s=this.A.getImmediate({optional:!0});s?i(s):q("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){const e=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(e).then(n=>n?(Ae(typeof n.token=="string"),this.R=n.token,new oN(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.appCheck.removeTokenListener(this.o)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lN(t){const e=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&typeof e.getRandomValues=="function")e.getRandomValues(n);else for(let r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{static V(){const e="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=Math.floor(256/e.length)*e.length;let r="";for(;r.length<20;){const i=lN(40);for(let s=0;s<i.length;++s)r.length<20&&i[s]<n&&(r+=e.charAt(i[s]%e.length))}return r}}function ge(t,e){return t<e?-1:t>e?1:0}function Rs(t,e,n){return t.length===e.length&&t.every((r,i)=>n(r,e[i]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xe{constructor(e,n){if(this.seconds=e,this.nanoseconds=n,n<0)throw new G(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new G(x.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(e<-62135596800)throw new G(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e);if(e>=253402300800)throw new G(x.INVALID_ARGUMENT,"Timestamp seconds out of range: "+e)}static now(){return Xe.fromMillis(Date.now())}static fromDate(e){return Xe.fromMillis(e.getTime())}static fromMillis(e){const n=Math.floor(e/1e3),r=Math.floor(1e6*(e-1e3*n));return new Xe(n,r)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/1e6}_compareTo(e){return this.seconds===e.seconds?ge(this.nanoseconds,e.nanoseconds):ge(this.seconds,e.seconds)}isEqual(e){return e.seconds===this.seconds&&e.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const e=this.seconds- -62135596800;return String(e).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(e){this.timestamp=e}static fromTimestamp(e){return new ee(e)}static min(){return new ee(new Xe(0,0))}static max(){return new ee(new Xe(253402300799,999999999))}compareTo(e){return this.timestamp._compareTo(e.timestamp)}isEqual(e){return this.timestamp.isEqual(e.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ma{constructor(e,n,r){n===void 0?n=0:n>e.length&&Z(),r===void 0?r=e.length-n:r>e.length-n&&Z(),this.segments=e,this.offset=n,this.len=r}get length(){return this.len}isEqual(e){return ma.comparator(this,e)===0}child(e){const n=this.segments.slice(this.offset,this.limit());return e instanceof ma?e.forEach(r=>{n.push(r)}):n.push(e),this.construct(n)}limit(){return this.offset+this.length}popFirst(e){return e=e===void 0?1:e,this.construct(this.segments,this.offset+e,this.length-e)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(e){return this.segments[this.offset+e]}isEmpty(){return this.length===0}isPrefixOf(e){if(e.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}isImmediateParentOf(e){if(this.length+1!==e.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==e.get(n))return!1;return!0}forEach(e){for(let n=this.offset,r=this.limit();n<r;n++)e(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(e,n){const r=Math.min(e.length,n.length);for(let i=0;i<r;i++){const s=e.get(i),o=n.get(i);if(s<o)return-1;if(s>o)return 1}return e.length<n.length?-1:e.length>n.length?1:0}}class Fe extends ma{construct(e,n,r){return new Fe(e,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}static fromString(...e){const n=[];for(const r of e){if(r.indexOf("//")>=0)throw new G(x.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(i=>i.length>0))}return new Fe(n)}static emptyPath(){return new Fe([])}}const cN=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class St extends ma{construct(e,n,r){return new St(e,n,r)}static isValidIdentifier(e){return cN.test(e)}canonicalString(){return this.toArray().map(e=>(e=e.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),St.isValidIdentifier(e)||(e="`"+e+"`"),e)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)==="__name__"}static keyField(){return new St(["__name__"])}static fromServerFormat(e){const n=[];let r="",i=0;const s=()=>{if(r.length===0)throw new G(x.INVALID_ARGUMENT,`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let o=!1;for(;i<e.length;){const l=e[i];if(l==="\\"){if(i+1===e.length)throw new G(x.INVALID_ARGUMENT,"Path has trailing escape character: "+e);const a=e[i+1];if(a!=="\\"&&a!=="."&&a!=="`")throw new G(x.INVALID_ARGUMENT,"Path has invalid escape sequence: "+e);r+=a,i+=2}else l==="`"?(o=!o,i++):l!=="."||o?(r+=l,i++):(s(),i++)}if(s(),o)throw new G(x.INVALID_ARGUMENT,"Unterminated ` in path: "+e);return new St(n)}static emptyPath(){return new St([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class W{constructor(e){this.path=e}static fromPath(e){return new W(Fe.fromString(e))}static fromName(e){return new W(Fe.fromString(e).popFirst(5))}static empty(){return new W(Fe.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(e){return this.path.length>=2&&this.path.get(this.path.length-2)===e}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(e){return e!==null&&Fe.comparator(this.path,e.path)===0}toString(){return this.path.toString()}static comparator(e,n){return Fe.comparator(e.path,n.path)}static isDocumentKey(e){return e.length%2==0}static fromSegments(e){return new W(new Fe(e.slice()))}}function uN(t,e){const n=t.toTimestamp().seconds,r=t.toTimestamp().nanoseconds+1,i=ee.fromTimestamp(r===1e9?new Xe(n+1,0):new Xe(n,r));return new Wr(i,W.empty(),e)}function dN(t){return new Wr(t.readTime,t.key,-1)}class Wr{constructor(e,n,r){this.readTime=e,this.documentKey=n,this.largestBatchId=r}static min(){return new Wr(ee.min(),W.empty(),-1)}static max(){return new Wr(ee.max(),W.empty(),-1)}}function hN(t,e){let n=t.readTime.compareTo(e.readTime);return n!==0?n:(n=W.comparator(t.documentKey,e.documentKey),n!==0?n:ge(t.largestBatchId,e.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fN="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class pN{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(e){this.onCommittedListeners.push(e)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(e=>e())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Ha(t){if(t.code!==x.FAILED_PRECONDITION||t.message!==fN)throw t;q("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class D{constructor(e){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,e(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(e){return this.next(void 0,e)}next(e,n){return this.callbackAttached&&Z(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new D((r,i)=>{this.nextCallback=s=>{this.wrapSuccess(e,s).next(r,i)},this.catchCallback=s=>{this.wrapFailure(n,s).next(r,i)}})}toPromise(){return new Promise((e,n)=>{this.next(e,n)})}wrapUserFunction(e){try{const n=e();return n instanceof D?n:D.resolve(n)}catch(n){return D.reject(n)}}wrapSuccess(e,n){return e?this.wrapUserFunction(()=>e(n)):D.resolve(n)}wrapFailure(e,n){return e?this.wrapUserFunction(()=>e(n)):D.reject(n)}static resolve(e){return new D((n,r)=>{n(e)})}static reject(e){return new D((n,r)=>{r(e)})}static waitFor(e){return new D((n,r)=>{let i=0,s=0,o=!1;e.forEach(l=>{++i,l.next(()=>{++s,o&&s===i&&n()},a=>r(a))}),o=!0,s===i&&n()})}static or(e){let n=D.resolve(!1);for(const r of e)n=n.next(i=>i?D.resolve(i):r());return n}static forEach(e,n){const r=[];return e.forEach((i,s)=>{r.push(n.call(this,i,s))}),this.waitFor(r)}static mapArray(e,n){return new D((r,i)=>{const s=e.length,o=new Array(s);let l=0;for(let a=0;a<s;a++){const c=a;n(e[c]).next(u=>{o[c]=u,++l,l===s&&r(o)},u=>i(u))}})}static doWhile(e,n){return new D((r,i)=>{const s=()=>{e()===!0?n().next(()=>{s()},i):r()};s()})}}function Wa(t){return t.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Fm{constructor(e,n){this.previousValue=e,n&&(n.sequenceNumberHandler=r=>this.oe(r),this._e=r=>n.writeSequenceNumber(r))}oe(e){return this.previousValue=Math.max(e,this.previousValue),this.previousValue}next(){const e=++this.previousValue;return this._e&&this._e(e),e}}Fm.ae=-1;function $u(t){return t==null}function Yc(t){return t===0&&1/t==-1/0}function mN(t){return typeof t=="number"&&Number.isInteger(t)&&!Yc(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function l0(t){let e=0;for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function zs(t,e){for(const n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function cw(t){for(const e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class je{constructor(e,n){this.comparator=e,this.root=n||ot.EMPTY}insert(e,n){return new je(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,ot.BLACK,null,null))}remove(e){return new je(this.comparator,this.root.remove(e,this.comparator).copy(null,null,ot.BLACK,null,null))}get(e){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(e,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(e){let n=0,r=this.root;for(;!r.isEmpty();){const i=this.comparator(e,r.key);if(i===0)return n+r.left.size;i<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(e){return this.root.inorderTraversal(e)}forEach(e){this.inorderTraversal((n,r)=>(e(n,r),!1))}toString(){const e=[];return this.inorderTraversal((n,r)=>(e.push(`${n}:${r}`),!1)),`{${e.join(", ")}}`}reverseTraversal(e){return this.root.reverseTraversal(e)}getIterator(){return new kl(this.root,null,this.comparator,!1)}getIteratorFrom(e){return new kl(this.root,e,this.comparator,!1)}getReverseIterator(){return new kl(this.root,null,this.comparator,!0)}getReverseIteratorFrom(e){return new kl(this.root,e,this.comparator,!0)}}class kl{constructor(e,n,r,i){this.isReverse=i,this.nodeStack=[];let s=1;for(;!e.isEmpty();)if(s=n?r(e.key,n):1,n&&i&&(s*=-1),s<0)e=this.isReverse?e.left:e.right;else{if(s===0){this.nodeStack.push(e);break}this.nodeStack.push(e),e=this.isReverse?e.right:e.left}}getNext(){let e=this.nodeStack.pop();const n={key:e.key,value:e.value};if(this.isReverse)for(e=e.left;!e.isEmpty();)this.nodeStack.push(e),e=e.right;else for(e=e.right;!e.isEmpty();)this.nodeStack.push(e),e=e.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const e=this.nodeStack[this.nodeStack.length-1];return{key:e.key,value:e.value}}}class ot{constructor(e,n,r,i,s){this.key=e,this.value=n,this.color=r??ot.RED,this.left=i??ot.EMPTY,this.right=s??ot.EMPTY,this.size=this.left.size+1+this.right.size}copy(e,n,r,i,s){return new ot(e??this.key,n??this.value,r??this.color,i??this.left,s??this.right)}isEmpty(){return!1}inorderTraversal(e){return this.left.inorderTraversal(e)||e(this.key,this.value)||this.right.inorderTraversal(e)}reverseTraversal(e){return this.right.reverseTraversal(e)||e(this.key,this.value)||this.left.reverseTraversal(e)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(e,n,r){let i=this;const s=r(e,i.key);return i=s<0?i.copy(null,null,null,i.left.insert(e,n,r),null):s===0?i.copy(null,n,null,null,null):i.copy(null,null,null,null,i.right.insert(e,n,r)),i.fixUp()}removeMin(){if(this.left.isEmpty())return ot.EMPTY;let e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),e=e.copy(null,null,null,e.left.removeMin(),null),e.fixUp()}remove(e,n){let r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),n(e,i.key)===0){if(i.right.isEmpty())return ot.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()}isRed(){return this.color}fixUp(){let e=this;return e.right.isRed()&&!e.left.isRed()&&(e=e.rotateLeft()),e.left.isRed()&&e.left.left.isRed()&&(e=e.rotateRight()),e.left.isRed()&&e.right.isRed()&&(e=e.colorFlip()),e}moveRedLeft(){let e=this.colorFlip();return e.right.left.isRed()&&(e=e.copy(null,null,null,null,e.right.rotateRight()),e=e.rotateLeft(),e=e.colorFlip()),e}moveRedRight(){let e=this.colorFlip();return e.left.left.isRed()&&(e=e.rotateRight(),e=e.colorFlip()),e}rotateLeft(){const e=this.copy(null,null,ot.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)}rotateRight(){const e=this.copy(null,null,ot.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)}colorFlip(){const e=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,e,n)}checkMaxDepth(){const e=this.check();return Math.pow(2,e)<=this.size+1}check(){if(this.isRed()&&this.left.isRed()||this.right.isRed())throw Z();const e=this.left.check();if(e!==this.right.check())throw Z();return e+(this.isRed()?0:1)}}ot.EMPTY=null,ot.RED=!0,ot.BLACK=!1;ot.EMPTY=new class{constructor(){this.size=0}get key(){throw Z()}get value(){throw Z()}get color(){throw Z()}get left(){throw Z()}get right(){throw Z()}copy(e,n,r,i,s){return this}insert(e,n,r){return new ot(e,n)}remove(e,n){return this}isEmpty(){return!0}inorderTraversal(e){return!1}reverseTraversal(e){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Pt{constructor(e){this.comparator=e,this.data=new je(this.comparator)}has(e){return this.data.get(e)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(e){return this.data.indexOf(e)}forEach(e){this.data.inorderTraversal((n,r)=>(e(n),!1))}forEachInRange(e,n){const r=this.data.getIteratorFrom(e[0]);for(;r.hasNext();){const i=r.getNext();if(this.comparator(i.key,e[1])>=0)return;n(i.key)}}forEachWhile(e,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!e(r.getNext().key))return}firstAfterOrEqual(e){const n=this.data.getIteratorFrom(e);return n.hasNext()?n.getNext().key:null}getIterator(){return new c0(this.data.getIterator())}getIteratorFrom(e){return new c0(this.data.getIteratorFrom(e))}add(e){return this.copy(this.data.remove(e).insert(e,!0))}delete(e){return this.has(e)?this.copy(this.data.remove(e)):this}isEmpty(){return this.data.isEmpty()}unionWith(e){let n=this;return n.size<e.size&&(n=e,e=this),e.forEach(r=>{n=n.add(r)}),n}isEqual(e){if(!(e instanceof Pt)||this.size!==e.size)return!1;const n=this.data.getIterator(),r=e.data.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(this.comparator(i,s)!==0)return!1}return!0}toArray(){const e=[];return this.forEach(n=>{e.push(n)}),e}toString(){const e=[];return this.forEach(n=>e.push(n)),"SortedSet("+e.toString()+")"}copy(e){const n=new Pt(this.comparator);return n.data=e,n}}class c0{constructor(e){this.iter=e}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tn{constructor(e){this.fields=e,e.sort(St.comparator)}static empty(){return new Tn([])}unionWith(e){let n=new Pt(St.comparator);for(const r of this.fields)n=n.add(r);for(const r of e)n=n.add(r);return new Tn(n.toArray())}covers(e){for(const n of this.fields)if(n.isPrefixOf(e))return!0;return!1}isEqual(e){return Rs(this.fields,e.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class uw extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class At{constructor(e){this.binaryString=e}static fromBase64String(e){const n=function(i){try{return atob(i)}catch(s){throw typeof DOMException<"u"&&s instanceof DOMException?new uw("Invalid base64 string: "+s):s}}(e);return new At(n)}static fromUint8Array(e){const n=function(i){let s="";for(let o=0;o<i.length;++o)s+=String.fromCharCode(i[o]);return s}(e);return new At(n)}[Symbol.iterator](){let e=0;return{next:()=>e<this.binaryString.length?{value:this.binaryString.charCodeAt(e++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let i=0;i<n.length;i++)r[i]=n.charCodeAt(i);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(e){return ge(this.binaryString,e.binaryString)}isEqual(e){return this.binaryString===e.binaryString}}At.EMPTY_BYTE_STRING=new At("");const gN=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function Kr(t){if(Ae(!!t),typeof t=="string"){let e=0;const n=gN.exec(t);if(Ae(!!n),n[1]){let i=n[1];i=(i+"000000000").substr(0,9),e=Number(i)}const r=new Date(t);return{seconds:Math.floor(r.getTime()/1e3),nanos:e}}return{seconds:We(t.seconds),nanos:We(t.nanos)}}function We(t){return typeof t=="number"?t:typeof t=="string"?Number(t):0}function ki(t){return typeof t=="string"?At.fromBase64String(t):At.fromUint8Array(t)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Um(t){var e,n;return((n=(((e=t==null?void 0:t.mapValue)===null||e===void 0?void 0:e.fields)||{}).__type__)===null||n===void 0?void 0:n.stringValue)==="server_timestamp"}function $m(t){const e=t.mapValue.fields.__previous_value__;return Um(e)?$m(e):e}function ga(t){const e=Kr(t.mapValue.fields.__local_write_time__.timestampValue);return new Xe(e.seconds,e.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yN{constructor(e,n,r,i,s,o,l,a,c){this.databaseId=e,this.appId=n,this.persistenceKey=r,this.host=i,this.ssl=s,this.forceLongPolling=o,this.autoDetectLongPolling=l,this.longPollingOptions=a,this.useFetchStreams=c}}class ya{constructor(e,n){this.projectId=e,this.database=n||"(default)"}static empty(){return new ya("","")}get isDefaultDatabase(){return this.database==="(default)"}isEqual(e){return e instanceof ya&&e.projectId===this.projectId&&e.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Il={mapValue:{fields:{__type__:{stringValue:"__max__"}}}};function Ii(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?Um(t)?4:vN(t)?9007199254740991:10:Z()}function zn(t,e){if(t===e)return!0;const n=Ii(t);if(n!==Ii(e))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return ga(t).isEqual(ga(e));case 3:return function(i,s){if(typeof i.timestampValue=="string"&&typeof s.timestampValue=="string"&&i.timestampValue.length===s.timestampValue.length)return i.timestampValue===s.timestampValue;const o=Kr(i.timestampValue),l=Kr(s.timestampValue);return o.seconds===l.seconds&&o.nanos===l.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(i,s){return ki(i.bytesValue).isEqual(ki(s.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(i,s){return We(i.geoPointValue.latitude)===We(s.geoPointValue.latitude)&&We(i.geoPointValue.longitude)===We(s.geoPointValue.longitude)}(t,e);case 2:return function(i,s){if("integerValue"in i&&"integerValue"in s)return We(i.integerValue)===We(s.integerValue);if("doubleValue"in i&&"doubleValue"in s){const o=We(i.doubleValue),l=We(s.doubleValue);return o===l?Yc(o)===Yc(l):isNaN(o)&&isNaN(l)}return!1}(t,e);case 9:return Rs(t.arrayValue.values||[],e.arrayValue.values||[],zn);case 10:return function(i,s){const o=i.mapValue.fields||{},l=s.mapValue.fields||{};if(l0(o)!==l0(l))return!1;for(const a in o)if(o.hasOwnProperty(a)&&(l[a]===void 0||!zn(o[a],l[a])))return!1;return!0}(t,e);default:return Z()}}function va(t,e){return(t.values||[]).find(n=>zn(n,e))!==void 0}function ks(t,e){if(t===e)return 0;const n=Ii(t),r=Ii(e);if(n!==r)return ge(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ge(t.booleanValue,e.booleanValue);case 2:return function(s,o){const l=We(s.integerValue||s.doubleValue),a=We(o.integerValue||o.doubleValue);return l<a?-1:l>a?1:l===a?0:isNaN(l)?isNaN(a)?0:-1:1}(t,e);case 3:return u0(t.timestampValue,e.timestampValue);case 4:return u0(ga(t),ga(e));case 5:return ge(t.stringValue,e.stringValue);case 6:return function(s,o){const l=ki(s),a=ki(o);return l.compareTo(a)}(t.bytesValue,e.bytesValue);case 7:return function(s,o){const l=s.split("/"),a=o.split("/");for(let c=0;c<l.length&&c<a.length;c++){const u=ge(l[c],a[c]);if(u!==0)return u}return ge(l.length,a.length)}(t.referenceValue,e.referenceValue);case 8:return function(s,o){const l=ge(We(s.latitude),We(o.latitude));return l!==0?l:ge(We(s.longitude),We(o.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(s,o){const l=s.values||[],a=o.values||[];for(let c=0;c<l.length&&c<a.length;++c){const u=ks(l[c],a[c]);if(u)return u}return ge(l.length,a.length)}(t.arrayValue,e.arrayValue);case 10:return function(s,o){if(s===Il.mapValue&&o===Il.mapValue)return 0;if(s===Il.mapValue)return 1;if(o===Il.mapValue)return-1;const l=s.fields||{},a=Object.keys(l),c=o.fields||{},u=Object.keys(c);a.sort(),u.sort();for(let d=0;d<a.length&&d<u.length;++d){const f=ge(a[d],u[d]);if(f!==0)return f;const p=ks(l[a[d]],c[u[d]]);if(p!==0)return p}return ge(a.length,u.length)}(t.mapValue,e.mapValue);default:throw Z()}}function u0(t,e){if(typeof t=="string"&&typeof e=="string"&&t.length===e.length)return ge(t,e);const n=Kr(t),r=Kr(e),i=ge(n.seconds,r.seconds);return i!==0?i:ge(n.nanos,r.nanos)}function Is(t){return Of(t)}function Of(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(n){const r=Kr(n);return`time(${r.seconds},${r.nanos})`}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?function(n){return ki(n).toBase64()}(t.bytesValue):"referenceValue"in t?function(n){return W.fromName(n).toString()}(t.referenceValue):"geoPointValue"in t?function(n){return`geo(${n.latitude},${n.longitude})`}(t.geoPointValue):"arrayValue"in t?function(n){let r="[",i=!0;for(const s of n.values||[])i?i=!1:r+=",",r+=Of(s);return r+"]"}(t.arrayValue):"mapValue"in t?function(n){const r=Object.keys(n.fields||{}).sort();let i="{",s=!0;for(const o of r)s?s=!1:i+=",",i+=`${o}:${Of(n.fields[o])}`;return i+"}"}(t.mapValue):Z()}function Nf(t){return!!t&&"integerValue"in t}function Bm(t){return!!t&&"arrayValue"in t}function d0(t){return!!t&&"nullValue"in t}function h0(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function tc(t){return!!t&&"mapValue"in t}function Mo(t){if(t.geoPointValue)return{geoPointValue:Object.assign({},t.geoPointValue)};if(t.timestampValue&&typeof t.timestampValue=="object")return{timestampValue:Object.assign({},t.timestampValue)};if(t.mapValue){const e={mapValue:{fields:{}}};return zs(t.mapValue.fields,(n,r)=>e.mapValue.fields[n]=Mo(r)),e}if(t.arrayValue){const e={arrayValue:{values:[]}};for(let n=0;n<(t.arrayValue.values||[]).length;++n)e.arrayValue.values[n]=Mo(t.arrayValue.values[n]);return e}return Object.assign({},t)}function vN(t){return(((t.mapValue||{}).fields||{}).__type__||{}).stringValue==="__max__"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class nn{constructor(e){this.value=e}static empty(){return new nn({mapValue:{}})}field(e){if(e.isEmpty())return this.value;{let n=this.value;for(let r=0;r<e.length-1;++r)if(n=(n.mapValue.fields||{})[e.get(r)],!tc(n))return null;return n=(n.mapValue.fields||{})[e.lastSegment()],n||null}}set(e,n){this.getFieldsMap(e.popLast())[e.lastSegment()]=Mo(n)}setAll(e){let n=St.emptyPath(),r={},i=[];e.forEach((o,l)=>{if(!n.isImmediateParentOf(l)){const a=this.getFieldsMap(n);this.applyChanges(a,r,i),r={},i=[],n=l.popLast()}o?r[l.lastSegment()]=Mo(o):i.push(l.lastSegment())});const s=this.getFieldsMap(n);this.applyChanges(s,r,i)}delete(e){const n=this.field(e.popLast());tc(n)&&n.mapValue.fields&&delete n.mapValue.fields[e.lastSegment()]}isEqual(e){return zn(this.value,e.value)}getFieldsMap(e){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<e.length;++r){let i=n.mapValue.fields[e.get(r)];tc(i)&&i.mapValue.fields||(i={mapValue:{fields:{}}},n.mapValue.fields[e.get(r)]=i),n=i}return n.mapValue.fields}applyChanges(e,n,r){zs(n,(i,s)=>e[i]=s);for(const i of r)delete e[i]}clone(){return new nn(Mo(this.value))}}function dw(t){const e=[];return zs(t.fields,(n,r)=>{const i=new St([n]);if(tc(r)){const s=dw(r.mapValue).fields;if(s.length===0)e.push(i);else for(const o of s)e.push(i.child(o))}else e.push(i)}),new Tn(e)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tt{constructor(e,n,r,i,s,o,l){this.key=e,this.documentType=n,this.version=r,this.readTime=i,this.createTime=s,this.data=o,this.documentState=l}static newInvalidDocument(e){return new Tt(e,0,ee.min(),ee.min(),ee.min(),nn.empty(),0)}static newFoundDocument(e,n,r,i){return new Tt(e,1,n,ee.min(),r,i,0)}static newNoDocument(e,n){return new Tt(e,2,n,ee.min(),ee.min(),nn.empty(),0)}static newUnknownDocument(e,n){return new Tt(e,3,n,ee.min(),ee.min(),nn.empty(),2)}convertToFoundDocument(e,n){return!this.createTime.isEqual(ee.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=e),this.version=e,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(e){return this.version=e,this.documentType=2,this.data=nn.empty(),this.documentState=0,this}convertToUnknownDocument(e){return this.version=e,this.documentType=3,this.data=nn.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=ee.min(),this}setReadTime(e){return this.readTime=e,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(e){return e instanceof Tt&&this.key.isEqual(e.key)&&this.version.isEqual(e.version)&&this.documentType===e.documentType&&this.documentState===e.documentState&&this.data.isEqual(e.data)}mutableCopy(){return new Tt(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xc{constructor(e,n){this.position=e,this.inclusive=n}}function f0(t,e,n){let r=0;for(let i=0;i<t.position.length;i++){const s=e[i],o=t.position[i];if(s.field.isKeyField()?r=W.comparator(W.fromName(o.referenceValue),n.key):r=ks(o,n.data.field(s.field)),s.dir==="desc"&&(r*=-1),r!==0)break}return r}function p0(t,e){if(t===null)return e===null;if(e===null||t.inclusive!==e.inclusive||t.position.length!==e.position.length)return!1;for(let n=0;n<t.position.length;n++)if(!zn(t.position[n],e.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Lo{constructor(e,n="asc"){this.field=e,this.dir=n}}function _N(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hw{}class Qe extends hw{constructor(e,n,r){super(),this.field=e,this.op=n,this.value=r}static create(e,n,r){return e.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(e,n,r):new TN(e,n,r):n==="array-contains"?new CN(e,r):n==="in"?new PN(e,r):n==="not-in"?new RN(e,r):n==="array-contains-any"?new kN(e,r):new Qe(e,n,r)}static createKeyFieldInFilter(e,n,r){return n==="in"?new SN(e,r):new wN(e,r)}matches(e){const n=e.data.field(this.field);return this.op==="!="?n!==null&&this.matchesComparison(ks(n,this.value)):n!==null&&Ii(this.value)===Ii(n)&&this.matchesComparison(ks(n,this.value))}matchesComparison(e){switch(this.op){case"<":return e<0;case"<=":return e<=0;case"==":return e===0;case"!=":return e!==0;case">":return e>0;case">=":return e>=0;default:return Z()}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}getFirstInequalityField(){return this.isInequality()?this.field:null}}class qn extends hw{constructor(e,n){super(),this.filters=e,this.op=n,this.ce=null}static create(e,n){return new qn(e,n)}matches(e){return fw(this)?this.filters.find(n=>!n.matches(e))===void 0:this.filters.find(n=>n.matches(e))!==void 0}getFlattenedFilters(){return this.ce!==null||(this.ce=this.filters.reduce((e,n)=>e.concat(n.getFlattenedFilters()),[])),this.ce}getFilters(){return Object.assign([],this.filters)}getFirstInequalityField(){const e=this.le(n=>n.isInequality());return e!==null?e.field:null}le(e){for(const n of this.getFlattenedFilters())if(e(n))return n;return null}}function fw(t){return t.op==="and"}function pw(t){return EN(t)&&fw(t)}function EN(t){for(const e of t.filters)if(e instanceof qn)return!1;return!0}function Df(t){if(t instanceof Qe)return t.field.canonicalString()+t.op.toString()+Is(t.value);if(pw(t))return t.filters.map(e=>Df(e)).join(",");{const e=t.filters.map(n=>Df(n)).join(",");return`${t.op}(${e})`}}function mw(t,e){return t instanceof Qe?function(r,i){return i instanceof Qe&&r.op===i.op&&r.field.isEqual(i.field)&&zn(r.value,i.value)}(t,e):t instanceof qn?function(r,i){return i instanceof qn&&r.op===i.op&&r.filters.length===i.filters.length?r.filters.reduce((s,o,l)=>s&&mw(o,i.filters[l]),!0):!1}(t,e):void Z()}function gw(t){return t instanceof Qe?function(n){return`${n.field.canonicalString()} ${n.op} ${Is(n.value)}`}(t):t instanceof qn?function(n){return n.op.toString()+" {"+n.getFilters().map(gw).join(" ,")+"}"}(t):"Filter"}class TN extends Qe{constructor(e,n,r){super(e,n,r),this.key=W.fromName(r.referenceValue)}matches(e){const n=W.comparator(e.key,this.key);return this.matchesComparison(n)}}class SN extends Qe{constructor(e,n){super(e,"in",n),this.keys=yw("in",n)}matches(e){return this.keys.some(n=>n.isEqual(e.key))}}class wN extends Qe{constructor(e,n){super(e,"not-in",n),this.keys=yw("not-in",n)}matches(e){return!this.keys.some(n=>n.isEqual(e.key))}}function yw(t,e){var n;return(((n=e.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>W.fromName(r.referenceValue))}class CN extends Qe{constructor(e,n){super(e,"array-contains",n)}matches(e){const n=e.data.field(this.field);return Bm(n)&&va(n.arrayValue,this.value)}}class PN extends Qe{constructor(e,n){super(e,"in",n)}matches(e){const n=e.data.field(this.field);return n!==null&&va(this.value.arrayValue,n)}}class RN extends Qe{constructor(e,n){super(e,"not-in",n)}matches(e){if(va(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=e.data.field(this.field);return n!==null&&!va(this.value.arrayValue,n)}}class kN extends Qe{constructor(e,n){super(e,"array-contains-any",n)}matches(e){const n=e.data.field(this.field);return!(!Bm(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>va(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class IN{constructor(e,n=null,r=[],i=[],s=null,o=null,l=null){this.path=e,this.collectionGroup=n,this.orderBy=r,this.filters=i,this.limit=s,this.startAt=o,this.endAt=l,this.he=null}}function m0(t,e=null,n=[],r=[],i=null,s=null,o=null){return new IN(t,e,n,r,i,s,o)}function zm(t){const e=ne(t);if(e.he===null){let n=e.path.canonicalString();e.collectionGroup!==null&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(r=>Df(r)).join(","),n+="|ob:",n+=e.orderBy.map(r=>function(s){return s.field.canonicalString()+s.dir}(r)).join(","),$u(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=e.startAt.inclusive?"b:":"a:",n+=e.startAt.position.map(r=>Is(r)).join(",")),e.endAt&&(n+="|ub:",n+=e.endAt.inclusive?"a:":"b:",n+=e.endAt.position.map(r=>Is(r)).join(",")),e.he=n}return e.he}function qm(t,e){if(t.limit!==e.limit||t.orderBy.length!==e.orderBy.length)return!1;for(let n=0;n<t.orderBy.length;n++)if(!_N(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(let n=0;n<t.filters.length;n++)if(!mw(t.filters[n],e.filters[n]))return!1;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!p0(t.startAt,e.startAt)&&p0(t.endAt,e.endAt)}function Mf(t){return W.isDocumentKey(t.path)&&t.collectionGroup===null&&t.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Bu{constructor(e,n=null,r=[],i=[],s=null,o="F",l=null,a=null){this.path=e,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=i,this.limit=s,this.limitType=o,this.startAt=l,this.endAt=a,this.Pe=null,this.Ie=null,this.Te=null,this.startAt,this.endAt}}function AN(t,e,n,r,i,s,o,l){return new Bu(t,e,n,r,i,s,o,l)}function Hm(t){return new Bu(t)}function g0(t){return t.filters.length===0&&t.limit===null&&t.startAt==null&&t.endAt==null&&(t.explicitOrderBy.length===0||t.explicitOrderBy.length===1&&t.explicitOrderBy[0].field.isKeyField())}function bN(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function xN(t){for(const e of t.filters){const n=e.getFirstInequalityField();if(n!==null)return n}return null}function ON(t){return t.collectionGroup!==null}function jo(t){const e=ne(t);if(e.Pe===null){e.Pe=[];const n=xN(e),r=bN(e);if(n!==null&&r===null)n.isKeyField()||e.Pe.push(new Lo(n)),e.Pe.push(new Lo(St.keyField(),"asc"));else{let i=!1;for(const s of e.explicitOrderBy)e.Pe.push(s),s.field.isKeyField()&&(i=!0);if(!i){const s=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.Pe.push(new Lo(St.keyField(),s))}}}return e.Pe}function fr(t){const e=ne(t);return e.Ie||(e.Ie=NN(e,jo(t))),e.Ie}function NN(t,e){if(t.limitType==="F")return m0(t.path,t.collectionGroup,e,t.filters,t.limit,t.startAt,t.endAt);{e=e.map(i=>{const s=i.dir==="desc"?"asc":"desc";return new Lo(i.field,s)});const n=t.endAt?new Xc(t.endAt.position,t.endAt.inclusive):null,r=t.startAt?new Xc(t.startAt.position,t.startAt.inclusive):null;return m0(t.path,t.collectionGroup,e,t.filters,t.limit,n,r)}}function Lf(t,e,n){return new Bu(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function zu(t,e){return qm(fr(t),fr(e))&&t.limitType===e.limitType}function vw(t){return`${zm(fr(t))}|lt:${t.limitType}`}function jf(t){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(i=>gw(i)).join(", ")}]`),$u(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(i=>function(o){return`${o.field.canonicalString()} (${o.dir})`}(i)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(i=>Is(i)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(i=>Is(i)).join(",")),`Target(${r})`}(fr(t))}; limitType=${t.limitType})`}function qu(t,e){return e.isFoundDocument()&&function(r,i){const s=i.key.path;return r.collectionGroup!==null?i.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(s):W.isDocumentKey(r.path)?r.path.isEqual(s):r.path.isImmediateParentOf(s)}(t,e)&&function(r,i){for(const s of jo(r))if(!s.field.isKeyField()&&i.data.field(s.field)===null)return!1;return!0}(t,e)&&function(r,i){for(const s of r.filters)if(!s.matches(i))return!1;return!0}(t,e)&&function(r,i){return!(r.startAt&&!function(o,l,a){const c=f0(o,l,a);return o.inclusive?c<=0:c<0}(r.startAt,jo(r),i)||r.endAt&&!function(o,l,a){const c=f0(o,l,a);return o.inclusive?c>=0:c>0}(r.endAt,jo(r),i))}(t,e)}function DN(t){return t.collectionGroup||(t.path.length%2==1?t.path.lastSegment():t.path.get(t.path.length-2))}function _w(t){return(e,n)=>{let r=!1;for(const i of jo(t)){const s=MN(i,e,n);if(s!==0)return s;r=r||i.field.isKeyField()}return 0}}function MN(t,e,n){const r=t.field.isKeyField()?W.comparator(e.key,n.key):function(s,o,l){const a=o.data.field(s),c=l.data.field(s);return a!==null&&c!==null?ks(a,c):Z()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Z()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qs{constructor(e,n){this.mapKeyFn=e,this.equalsFn=n,this.inner={},this.innerSize=0}get(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r!==void 0){for(const[i,s]of r)if(this.equalsFn(i,e))return s}}has(e){return this.get(e)!==void 0}set(e,n){const r=this.mapKeyFn(e),i=this.inner[r];if(i===void 0)return this.inner[r]=[[e,n]],void this.innerSize++;for(let s=0;s<i.length;s++)if(this.equalsFn(i[s][0],e))return void(i[s]=[e,n]);i.push([e,n]),this.innerSize++}delete(e){const n=this.mapKeyFn(e),r=this.inner[n];if(r===void 0)return!1;for(let i=0;i<r.length;i++)if(this.equalsFn(r[i][0],e))return r.length===1?delete this.inner[n]:r.splice(i,1),this.innerSize--,!0;return!1}forEach(e){zs(this.inner,(n,r)=>{for(const[i,s]of r)e(i,s)})}isEmpty(){return cw(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const LN=new je(W.comparator);function pr(){return LN}const Ew=new je(W.comparator);function To(...t){let e=Ew;for(const n of t)e=e.insert(n.key,n);return e}function Tw(t){let e=Ew;return t.forEach((n,r)=>e=e.insert(n,r.overlayedDocument)),e}function hi(){return Vo()}function Sw(){return Vo()}function Vo(){return new qs(t=>t.toString(),(t,e)=>t.isEqual(e))}const jN=new je(W.comparator),VN=new Pt(W.comparator);function ae(...t){let e=VN;for(const n of t)e=e.add(n);return e}const FN=new Pt(ge);function UN(){return FN}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ww(t,e){if(t.useProto3Json){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Yc(e)?"-0":e}}function Cw(t){return{integerValue:""+t}}function $N(t,e){return mN(e)?Cw(e):ww(t,e)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Hu{constructor(){this._=void 0}}function BN(t,e,n){return t instanceof Zc?function(i,s){const o={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:i.seconds,nanos:i.nanoseconds}}}};return s&&Um(s)&&(s=$m(s)),s&&(o.fields.__previous_value__=s),{mapValue:o}}(n,e):t instanceof _a?Rw(t,e):t instanceof Ea?kw(t,e):function(i,s){const o=Pw(i,s),l=y0(o)+y0(i.Ee);return Nf(o)&&Nf(i.Ee)?Cw(l):ww(i.serializer,l)}(t,e)}function zN(t,e,n){return t instanceof _a?Rw(t,e):t instanceof Ea?kw(t,e):n}function Pw(t,e){return t instanceof eu?function(r){return Nf(r)||function(s){return!!s&&"doubleValue"in s}(r)}(e)?e:{integerValue:0}:null}class Zc extends Hu{}class _a extends Hu{constructor(e){super(),this.elements=e}}function Rw(t,e){const n=Iw(e);for(const r of t.elements)n.some(i=>zn(i,r))||n.push(r);return{arrayValue:{values:n}}}class Ea extends Hu{constructor(e){super(),this.elements=e}}function kw(t,e){let n=Iw(e);for(const r of t.elements)n=n.filter(i=>!zn(i,r));return{arrayValue:{values:n}}}class eu extends Hu{constructor(e,n){super(),this.serializer=e,this.Ee=n}}function y0(t){return We(t.integerValue||t.doubleValue)}function Iw(t){return Bm(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}function qN(t,e){return t.field.isEqual(e.field)&&function(r,i){return r instanceof _a&&i instanceof _a||r instanceof Ea&&i instanceof Ea?Rs(r.elements,i.elements,zn):r instanceof eu&&i instanceof eu?zn(r.Ee,i.Ee):r instanceof Zc&&i instanceof Zc}(t.transform,e.transform)}class HN{constructor(e,n){this.version=e,this.transformResults=n}}class ir{constructor(e,n){this.updateTime=e,this.exists=n}static none(){return new ir}static exists(e){return new ir(void 0,e)}static updateTime(e){return new ir(e)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(e){return this.exists===e.exists&&(this.updateTime?!!e.updateTime&&this.updateTime.isEqual(e.updateTime):!e.updateTime)}}function nc(t,e){return t.updateTime!==void 0?e.isFoundDocument()&&e.version.isEqual(t.updateTime):t.exists===void 0||t.exists===e.isFoundDocument()}class Wu{}function Aw(t,e){if(!t.hasLocalMutations||e&&e.fields.length===0)return null;if(e===null)return t.isNoDocument()?new xw(t.key,ir.none()):new Ka(t.key,t.data,ir.none());{const n=t.data,r=nn.empty();let i=new Pt(St.comparator);for(let s of e.fields)if(!i.has(s)){let o=n.field(s);o===null&&s.length>1&&(s=s.popLast(),o=n.field(s)),o===null?r.delete(s):r.set(s,o),i=i.add(s)}return new Di(t.key,r,new Tn(i.toArray()),ir.none())}}function WN(t,e,n){t instanceof Ka?function(i,s,o){const l=i.value.clone(),a=_0(i.fieldTransforms,s,o.transformResults);l.setAll(a),s.convertToFoundDocument(o.version,l).setHasCommittedMutations()}(t,e,n):t instanceof Di?function(i,s,o){if(!nc(i.precondition,s))return void s.convertToUnknownDocument(o.version);const l=_0(i.fieldTransforms,s,o.transformResults),a=s.data;a.setAll(bw(i)),a.setAll(l),s.convertToFoundDocument(o.version,a).setHasCommittedMutations()}(t,e,n):function(i,s,o){s.convertToNoDocument(o.version).setHasCommittedMutations()}(0,e,n)}function Fo(t,e,n,r){return t instanceof Ka?function(s,o,l,a){if(!nc(s.precondition,o))return l;const c=s.value.clone(),u=E0(s.fieldTransforms,a,o);return c.setAll(u),o.convertToFoundDocument(o.version,c).setHasLocalMutations(),null}(t,e,n,r):t instanceof Di?function(s,o,l,a){if(!nc(s.precondition,o))return l;const c=E0(s.fieldTransforms,a,o),u=o.data;return u.setAll(bw(s)),u.setAll(c),o.convertToFoundDocument(o.version,u).setHasLocalMutations(),l===null?null:l.unionWith(s.fieldMask.fields).unionWith(s.fieldTransforms.map(d=>d.field))}(t,e,n,r):function(s,o,l){return nc(s.precondition,o)?(o.convertToNoDocument(o.version).setHasLocalMutations(),null):l}(t,e,n)}function KN(t,e){let n=null;for(const r of t.fieldTransforms){const i=e.data.field(r.field),s=Pw(r.transform,i||null);s!=null&&(n===null&&(n=nn.empty()),n.set(r.field,s))}return n||null}function v0(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(r,i){return r===void 0&&i===void 0||!(!r||!i)&&Rs(r,i,(s,o)=>qN(s,o))}(t.fieldTransforms,e.fieldTransforms)&&(t.type===0?t.value.isEqual(e.value):t.type!==1||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}class Ka extends Wu{constructor(e,n,r,i=[]){super(),this.key=e,this.value=n,this.precondition=r,this.fieldTransforms=i,this.type=0}getFieldMask(){return null}}class Di extends Wu{constructor(e,n,r,i,s=[]){super(),this.key=e,this.data=n,this.fieldMask=r,this.precondition=i,this.fieldTransforms=s,this.type=1}getFieldMask(){return this.fieldMask}}function bw(t){const e=new Map;return t.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=t.data.field(n);e.set(n,r)}}),e}function _0(t,e,n){const r=new Map;Ae(t.length===n.length);for(let i=0;i<n.length;i++){const s=t[i],o=s.transform,l=e.data.field(s.field);r.set(s.field,zN(o,l,n[i]))}return r}function E0(t,e,n){const r=new Map;for(const i of t){const s=i.transform,o=n.data.field(i.field);r.set(i.field,BN(s,o,e))}return r}class xw extends Wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}class GN extends Wu{constructor(e,n){super(),this.key=e,this.precondition=n,this.type=3,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class JN{constructor(e,n,r,i){this.batchId=e,this.localWriteTime=n,this.baseMutations=r,this.mutations=i}applyToRemoteDocument(e,n){const r=n.mutationResults;for(let i=0;i<this.mutations.length;i++){const s=this.mutations[i];s.key.isEqual(e.key)&&WN(s,e,r[i])}}applyToLocalView(e,n){for(const r of this.baseMutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(e.key)&&(n=Fo(r,e,n,this.localWriteTime));return n}applyToLocalDocumentSet(e,n){const r=Sw();return this.mutations.forEach(i=>{const s=e.get(i.key),o=s.overlayedDocument;let l=this.applyToLocalView(o,s.mutatedFields);l=n.has(i.key)?null:l;const a=Aw(o,l);a!==null&&r.set(i.key,a),o.isValidDocument()||o.convertToNoDocument(ee.min())}),r}keys(){return this.mutations.reduce((e,n)=>e.add(n.key),ae())}isEqual(e){return this.batchId===e.batchId&&Rs(this.mutations,e.mutations,(n,r)=>v0(n,r))&&Rs(this.baseMutations,e.baseMutations,(n,r)=>v0(n,r))}}class Wm{constructor(e,n,r,i){this.batch=e,this.commitVersion=n,this.mutationResults=r,this.docVersions=i}static from(e,n,r){Ae(e.mutations.length===r.length);let i=function(){return jN}();const s=e.mutations;for(let o=0;o<s.length;o++)i=i.insert(s[o].key,r[o].version);return new Wm(e,n,r,i)}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QN{constructor(e,n){this.largestBatchId=e,this.mutation=n}getKey(){return this.mutation.key}isEqual(e){return e!==null&&this.mutation===e.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YN{constructor(e,n){this.count=e,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var He,de;function XN(t){switch(t){default:return Z();case x.CANCELLED:case x.UNKNOWN:case x.DEADLINE_EXCEEDED:case x.RESOURCE_EXHAUSTED:case x.INTERNAL:case x.UNAVAILABLE:case x.UNAUTHENTICATED:return!1;case x.INVALID_ARGUMENT:case x.NOT_FOUND:case x.ALREADY_EXISTS:case x.PERMISSION_DENIED:case x.FAILED_PRECONDITION:case x.ABORTED:case x.OUT_OF_RANGE:case x.UNIMPLEMENTED:case x.DATA_LOSS:return!0}}function Ow(t){if(t===void 0)return hr("GRPC error has no .code"),x.UNKNOWN;switch(t){case He.OK:return x.OK;case He.CANCELLED:return x.CANCELLED;case He.UNKNOWN:return x.UNKNOWN;case He.DEADLINE_EXCEEDED:return x.DEADLINE_EXCEEDED;case He.RESOURCE_EXHAUSTED:return x.RESOURCE_EXHAUSTED;case He.INTERNAL:return x.INTERNAL;case He.UNAVAILABLE:return x.UNAVAILABLE;case He.UNAUTHENTICATED:return x.UNAUTHENTICATED;case He.INVALID_ARGUMENT:return x.INVALID_ARGUMENT;case He.NOT_FOUND:return x.NOT_FOUND;case He.ALREADY_EXISTS:return x.ALREADY_EXISTS;case He.PERMISSION_DENIED:return x.PERMISSION_DENIED;case He.FAILED_PRECONDITION:return x.FAILED_PRECONDITION;case He.ABORTED:return x.ABORTED;case He.OUT_OF_RANGE:return x.OUT_OF_RANGE;case He.UNIMPLEMENTED:return x.UNIMPLEMENTED;case He.DATA_LOSS:return x.DATA_LOSS;default:return Z()}}(de=He||(He={}))[de.OK=0]="OK",de[de.CANCELLED=1]="CANCELLED",de[de.UNKNOWN=2]="UNKNOWN",de[de.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",de[de.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",de[de.NOT_FOUND=5]="NOT_FOUND",de[de.ALREADY_EXISTS=6]="ALREADY_EXISTS",de[de.PERMISSION_DENIED=7]="PERMISSION_DENIED",de[de.UNAUTHENTICATED=16]="UNAUTHENTICATED",de[de.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",de[de.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",de[de.ABORTED=10]="ABORTED",de[de.OUT_OF_RANGE=11]="OUT_OF_RANGE",de[de.UNIMPLEMENTED=12]="UNIMPLEMENTED",de[de.INTERNAL=13]="INTERNAL",de[de.UNAVAILABLE=14]="UNAVAILABLE",de[de.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Km{constructor(){this.onExistenceFilterMismatchCallbacks=new Map}static get instance(){return Al}static getOrCreateInstance(){return Al===null&&(Al=new Km),Al}onExistenceFilterMismatch(e){const n=Symbol();return this.onExistenceFilterMismatchCallbacks.set(n,e),()=>this.onExistenceFilterMismatchCallbacks.delete(n)}notifyOnExistenceFilterMismatch(e){this.onExistenceFilterMismatchCallbacks.forEach(n=>n(e))}}let Al=null;/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ZN(){return new TextEncoder}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const eD=new fs([4294967295,4294967295],0);function T0(t){const e=ZN().encode(t),n=new eN;return n.update(e),new Uint8Array(n.digest())}function S0(t){const e=new DataView(t.buffer),n=e.getUint32(0,!0),r=e.getUint32(4,!0),i=e.getUint32(8,!0),s=e.getUint32(12,!0);return[new fs([n,r],0),new fs([i,s],0)]}class Gm{constructor(e,n,r){if(this.bitmap=e,this.padding=n,this.hashCount=r,n<0||n>=8)throw new So(`Invalid padding: ${n}`);if(r<0)throw new So(`Invalid hash count: ${r}`);if(e.length>0&&this.hashCount===0)throw new So(`Invalid hash count: ${r}`);if(e.length===0&&n!==0)throw new So(`Invalid padding when bitmap length is 0: ${n}`);this.Ae=8*e.length-n,this.Re=fs.fromNumber(this.Ae)}Ve(e,n,r){let i=e.add(n.multiply(fs.fromNumber(r)));return i.compare(eD)===1&&(i=new fs([i.getBits(0),i.getBits(1)],0)),i.modulo(this.Re).toNumber()}me(e){return(this.bitmap[Math.floor(e/8)]&1<<e%8)!=0}mightContain(e){if(this.Ae===0)return!1;const n=T0(e),[r,i]=S0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);if(!this.me(o))return!1}return!0}static create(e,n,r){const i=e%8==0?0:8-e%8,s=new Uint8Array(Math.ceil(e/8)),o=new Gm(s,i,n);return r.forEach(l=>o.insert(l)),o}insert(e){if(this.Ae===0)return;const n=T0(e),[r,i]=S0(n);for(let s=0;s<this.hashCount;s++){const o=this.Ve(r,i,s);this.fe(o)}}fe(e){const n=Math.floor(e/8),r=e%8;this.bitmap[n]|=1<<r}}class So extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ku{constructor(e,n,r,i,s){this.snapshotVersion=e,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=i,this.resolvedLimboDocuments=s}static createSynthesizedRemoteEventForCurrentChange(e,n,r){const i=new Map;return i.set(e,Ga.createSynthesizedTargetChangeForCurrentChange(e,n,r)),new Ku(ee.min(),i,new je(ge),pr(),ae())}}class Ga{constructor(e,n,r,i,s){this.resumeToken=e,this.current=n,this.addedDocuments=r,this.modifiedDocuments=i,this.removedDocuments=s}static createSynthesizedTargetChangeForCurrentChange(e,n,r){return new Ga(r,n,ae(),ae(),ae())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rc{constructor(e,n,r,i){this.ge=e,this.removedTargetIds=n,this.key=r,this.pe=i}}class Nw{constructor(e,n){this.targetId=e,this.ye=n}}class Dw{constructor(e,n,r=At.EMPTY_BYTE_STRING,i=null){this.state=e,this.targetIds=n,this.resumeToken=r,this.cause=i}}class w0{constructor(){this.we=0,this.Se=P0(),this.be=At.EMPTY_BYTE_STRING,this.De=!1,this.ve=!0}get current(){return this.De}get resumeToken(){return this.be}get Ce(){return this.we!==0}get Fe(){return this.ve}Me(e){e.approximateByteSize()>0&&(this.ve=!0,this.be=e)}xe(){let e=ae(),n=ae(),r=ae();return this.Se.forEach((i,s)=>{switch(s){case 0:e=e.add(i);break;case 2:n=n.add(i);break;case 1:r=r.add(i);break;default:Z()}}),new Ga(this.be,this.De,e,n,r)}Oe(){this.ve=!1,this.Se=P0()}Ne(e,n){this.ve=!0,this.Se=this.Se.insert(e,n)}Be(e){this.ve=!0,this.Se=this.Se.remove(e)}Le(){this.we+=1}ke(){this.we-=1}qe(){this.ve=!0,this.De=!0}}class tD{constructor(e){this.Qe=e,this.Ke=new Map,this.$e=pr(),this.Ue=C0(),this.We=new je(ge)}Ge(e){for(const n of e.ge)e.pe&&e.pe.isFoundDocument()?this.ze(n,e.pe):this.je(n,e.key,e.pe);for(const n of e.removedTargetIds)this.je(n,e.key,e.pe)}He(e){this.forEachTarget(e,n=>{const r=this.Je(n);switch(e.state){case 0:this.Ye(n)&&r.Me(e.resumeToken);break;case 1:r.ke(),r.Ce||r.Oe(),r.Me(e.resumeToken);break;case 2:r.ke(),r.Ce||this.removeTarget(n);break;case 3:this.Ye(n)&&(r.qe(),r.Me(e.resumeToken));break;case 4:this.Ye(n)&&(this.Ze(n),r.Me(e.resumeToken));break;default:Z()}})}forEachTarget(e,n){e.targetIds.length>0?e.targetIds.forEach(n):this.Ke.forEach((r,i)=>{this.Ye(i)&&n(i)})}Xe(e){var n;const r=e.targetId,i=e.ye.count,s=this.et(r);if(s){const o=s.target;if(Mf(o))if(i===0){const l=new W(o.path);this.je(r,l,Tt.newNoDocument(l,ee.min()))}else Ae(i===1);else{const l=this.tt(r);if(l!==i){const a=this.nt(e),c=a?this.rt(a,e,l):1;if(c!==0){this.Ze(r);const u=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.We=this.We.insert(r,u)}(n=Km.instance)===null||n===void 0||n.notifyOnExistenceFilterMismatch(function(d,f,p,y,v){var C,m,g,E,T,_;const R={localCacheCount:d,existenceFilterCount:f.count,databaseId:p.database,projectId:p.projectId},I=f.unchangedNames;return I&&(R.bloomFilter={applied:v===0,hashCount:(C=I==null?void 0:I.hashCount)!==null&&C!==void 0?C:0,bitmapLength:(E=(g=(m=I==null?void 0:I.bits)===null||m===void 0?void 0:m.bitmap)===null||g===void 0?void 0:g.length)!==null&&E!==void 0?E:0,padding:(_=(T=I==null?void 0:I.bits)===null||T===void 0?void 0:T.padding)!==null&&_!==void 0?_:0,mightContain:w=>{var A;return(A=y==null?void 0:y.mightContain(w))!==null&&A!==void 0&&A}}),R}(l,e.ye,this.Qe.it(),a,c))}}}}nt(e){const n=e.ye.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:i=0},hashCount:s=0}=n;let o,l;try{o=ki(r).toUint8Array()}catch(a){if(a instanceof uw)return Ps("Decoding the base64 bloom filter in existence filter failed ("+a.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw a}try{l=new Gm(o,i,s)}catch(a){return Ps(a instanceof So?"BloomFilter error: ":"Applying bloom filter failed: ",a),null}return l.Ae===0?null:l}rt(e,n,r){return n.ye.count===r-this.st(e,n.targetId)?0:2}st(e,n){const r=this.Qe.getRemoteKeysForTarget(n);let i=0;return r.forEach(s=>{const o=this.Qe.it(),l=`projects/${o.projectId}/databases/${o.database}/documents/${s.path.canonicalString()}`;e.mightContain(l)||(this.je(n,s,null),i++)}),i}ot(e){const n=new Map;this.Ke.forEach((s,o)=>{const l=this.et(o);if(l){if(s.current&&Mf(l.target)){const a=new W(l.target.path);this.$e.get(a)!==null||this._t(o,a)||this.je(o,a,Tt.newNoDocument(a,e))}s.Fe&&(n.set(o,s.xe()),s.Oe())}});let r=ae();this.Ue.forEach((s,o)=>{let l=!0;o.forEachWhile(a=>{const c=this.et(a);return!c||c.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(s))}),this.$e.forEach((s,o)=>o.setReadTime(e));const i=new Ku(e,n,this.We,this.$e,r);return this.$e=pr(),this.Ue=C0(),this.We=new je(ge),i}ze(e,n){if(!this.Ye(e))return;const r=this._t(e,n.key)?2:0;this.Je(e).Ne(n.key,r),this.$e=this.$e.insert(n.key,n),this.Ue=this.Ue.insert(n.key,this.ut(n.key).add(e))}je(e,n,r){if(!this.Ye(e))return;const i=this.Je(e);this._t(e,n)?i.Ne(n,1):i.Be(n),this.Ue=this.Ue.insert(n,this.ut(n).delete(e)),r&&(this.$e=this.$e.insert(n,r))}removeTarget(e){this.Ke.delete(e)}tt(e){const n=this.Je(e).xe();return this.Qe.getRemoteKeysForTarget(e).size+n.addedDocuments.size-n.removedDocuments.size}Le(e){this.Je(e).Le()}Je(e){let n=this.Ke.get(e);return n||(n=new w0,this.Ke.set(e,n)),n}ut(e){let n=this.Ue.get(e);return n||(n=new Pt(ge),this.Ue=this.Ue.insert(e,n)),n}Ye(e){const n=this.et(e)!==null;return n||q("WatchChangeAggregator","Detected inactive target",e),n}et(e){const n=this.Ke.get(e);return n&&n.Ce?null:this.Qe.ct(e)}Ze(e){this.Ke.set(e,new w0),this.Qe.getRemoteKeysForTarget(e).forEach(n=>{this.je(e,n,null)})}_t(e,n){return this.Qe.getRemoteKeysForTarget(e).has(n)}}function C0(){return new je(W.comparator)}function P0(){return new je(W.comparator)}const nD=(()=>({asc:"ASCENDING",desc:"DESCENDING"}))(),rD=(()=>({"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"}))(),iD=(()=>({and:"AND",or:"OR"}))();class sD{constructor(e,n){this.databaseId=e,this.useProto3Json=n}}function Vf(t,e){return t.useProto3Json||$u(e)?e:{value:e}}function tu(t,e){return t.useProto3Json?`${new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+e.nanoseconds).slice(-9)}Z`:{seconds:""+e.seconds,nanos:e.nanoseconds}}function Mw(t,e){return t.useProto3Json?e.toBase64():e.toUint8Array()}function oD(t,e){return tu(t,e.toTimestamp())}function $n(t){return Ae(!!t),ee.fromTimestamp(function(n){const r=Kr(n);return new Xe(r.seconds,r.nanos)}(t))}function Jm(t,e){return function(r){return new Fe(["projects",r.projectId,"databases",r.database])}(t).child("documents").child(e).canonicalString()}function Lw(t){const e=Fe.fromString(t);return Ae(Uw(e)),e}function Ff(t,e){return Jm(t.databaseId,e.path)}function Yd(t,e){const n=Lw(e);if(n.get(1)!==t.databaseId.projectId)throw new G(x.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new G(x.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new W(jw(n))}function Uf(t,e){return Jm(t.databaseId,e)}function aD(t){const e=Lw(t);return e.length===4?Fe.emptyPath():jw(e)}function $f(t){return new Fe(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function jw(t){return Ae(t.length>4&&t.get(4)==="documents"),t.popFirst(5)}function R0(t,e,n){return{name:Ff(t,e),fields:n.value.mapValue.fields}}function lD(t,e){let n;if("targetChange"in e){e.targetChange;const r=function(c){return c==="NO_CHANGE"?0:c==="ADD"?1:c==="REMOVE"?2:c==="CURRENT"?3:c==="RESET"?4:Z()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],s=function(c,u){return c.useProto3Json?(Ae(u===void 0||typeof u=="string"),At.fromBase64String(u||"")):(Ae(u===void 0||u instanceof Uint8Array),At.fromUint8Array(u||new Uint8Array))}(t,e.targetChange.resumeToken),o=e.targetChange.cause,l=o&&function(c){const u=c.code===void 0?x.UNKNOWN:Ow(c.code);return new G(u,c.message||"")}(o);n=new Dw(r,i,s,l||null)}else if("documentChange"in e){e.documentChange;const r=e.documentChange;r.document,r.document.name,r.document.updateTime;const i=Yd(t,r.document.name),s=$n(r.document.updateTime),o=r.document.createTime?$n(r.document.createTime):ee.min(),l=new nn({mapValue:{fields:r.document.fields}}),a=Tt.newFoundDocument(i,s,o,l),c=r.targetIds||[],u=r.removedTargetIds||[];n=new rc(c,u,a.key,a)}else if("documentDelete"in e){e.documentDelete;const r=e.documentDelete;r.document;const i=Yd(t,r.document),s=r.readTime?$n(r.readTime):ee.min(),o=Tt.newNoDocument(i,s),l=r.removedTargetIds||[];n=new rc([],l,o.key,o)}else if("documentRemove"in e){e.documentRemove;const r=e.documentRemove;r.document;const i=Yd(t,r.document),s=r.removedTargetIds||[];n=new rc([],s,i,null)}else{if(!("filter"in e))return Z();{e.filter;const r=e.filter;r.targetId;const{count:i=0,unchangedNames:s}=r,o=new YN(i,s),l=r.targetId;n=new Nw(l,o)}}return n}function cD(t,e){let n;if(e instanceof Ka)n={update:R0(t,e.key,e.value)};else if(e instanceof xw)n={delete:Ff(t,e.key)};else if(e instanceof Di)n={update:R0(t,e.key,e.data),updateMask:vD(e.fieldMask)};else{if(!(e instanceof GN))return Z();n={verify:Ff(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(r=>function(s,o){const l=o.transform;if(l instanceof Zc)return{fieldPath:o.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(l instanceof _a)return{fieldPath:o.field.canonicalString(),appendMissingElements:{values:l.elements}};if(l instanceof Ea)return{fieldPath:o.field.canonicalString(),removeAllFromArray:{values:l.elements}};if(l instanceof eu)return{fieldPath:o.field.canonicalString(),increment:l.Ee};throw Z()}(0,r))),e.precondition.isNone||(n.currentDocument=function(i,s){return s.updateTime!==void 0?{updateTime:oD(i,s.updateTime)}:s.exists!==void 0?{exists:s.exists}:Z()}(t,e.precondition)),n}function uD(t,e){return t&&t.length>0?(Ae(e!==void 0),t.map(n=>function(i,s){let o=i.updateTime?$n(i.updateTime):$n(s);return o.isEqual(ee.min())&&(o=$n(s)),new HN(o,i.transformResults||[])}(n,e))):[]}function dD(t,e){return{documents:[Uf(t,e.path)]}}function hD(t,e){const n={structuredQuery:{}},r=e.path;e.collectionGroup!==null?(n.parent=Uf(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Uf(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);const i=function(a){if(a.length!==0)return Fw(qn.create(a,"and"))}(e.filters);i&&(n.structuredQuery.where=i);const s=function(a){if(a.length!==0)return a.map(c=>function(d){return{field:Ui(d.field),direction:mD(d.dir)}}(c))}(e.orderBy);s&&(n.structuredQuery.orderBy=s);const o=Vf(t,e.limit);return o!==null&&(n.structuredQuery.limit=o),e.startAt&&(n.structuredQuery.startAt=function(a){return{before:a.inclusive,values:a.position}}(e.startAt)),e.endAt&&(n.structuredQuery.endAt=function(a){return{before:!a.inclusive,values:a.position}}(e.endAt)),n}function fD(t){let e=aD(t.parent);const n=t.structuredQuery,r=n.from?n.from.length:0;let i=null;if(r>0){Ae(r===1);const u=n.from[0];u.allDescendants?i=u.collectionId:e=e.child(u.collectionId)}let s=[];n.where&&(s=function(d){const f=Vw(d);return f instanceof qn&&pw(f)?f.getFilters():[f]}(n.where));let o=[];n.orderBy&&(o=function(d){return d.map(f=>function(y){return new Lo($i(y.field),function(C){switch(C){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(y.direction))}(f))}(n.orderBy));let l=null;n.limit&&(l=function(d){let f;return f=typeof d=="object"?d.value:d,$u(f)?null:f}(n.limit));let a=null;n.startAt&&(a=function(d){const f=!!d.before,p=d.values||[];return new Xc(p,f)}(n.startAt));let c=null;return n.endAt&&(c=function(d){const f=!d.before,p=d.values||[];return new Xc(p,f)}(n.endAt)),AN(e,i,o,s,l,"F",a,c)}function pD(t,e){const n=function(i){switch(i){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return Z()}}(e.purpose);return n==null?null:{"goog-listen-tags":n}}function Vw(t){return t.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=$i(n.unaryFilter.field);return Qe.create(r,"==",{doubleValue:NaN});case"IS_NULL":const i=$i(n.unaryFilter.field);return Qe.create(i,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const s=$i(n.unaryFilter.field);return Qe.create(s,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const o=$i(n.unaryFilter.field);return Qe.create(o,"!=",{nullValue:"NULL_VALUE"});default:return Z()}}(t):t.fieldFilter!==void 0?function(n){return Qe.create($i(n.fieldFilter.field),function(i){switch(i){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";default:return Z()}}(n.fieldFilter.op),n.fieldFilter.value)}(t):t.compositeFilter!==void 0?function(n){return qn.create(n.compositeFilter.filters.map(r=>Vw(r)),function(i){switch(i){case"AND":return"and";case"OR":return"or";default:return Z()}}(n.compositeFilter.op))}(t):Z()}function mD(t){return nD[t]}function gD(t){return rD[t]}function yD(t){return iD[t]}function Ui(t){return{fieldPath:t.canonicalString()}}function $i(t){return St.fromServerFormat(t.fieldPath)}function Fw(t){return t instanceof Qe?function(n){if(n.op==="=="){if(h0(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NAN"}};if(d0(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(h0(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NOT_NAN"}};if(d0(n.value))return{unaryFilter:{field:Ui(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Ui(n.field),op:gD(n.op),value:n.value}}}(t):t instanceof qn?function(n){const r=n.getFilters().map(i=>Fw(i));return r.length===1?r[0]:{compositeFilter:{op:yD(n.op),filters:r}}}(t):Z()}function vD(t){const e=[];return t.fields.forEach(n=>e.push(n.canonicalString())),{fieldPaths:e}}function Uw(t){return t.length>=4&&t.get(0)==="projects"&&t.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xr{constructor(e,n,r,i,s=ee.min(),o=ee.min(),l=At.EMPTY_BYTE_STRING,a=null){this.target=e,this.targetId=n,this.purpose=r,this.sequenceNumber=i,this.snapshotVersion=s,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=l,this.expectedCount=a}withSequenceNumber(e){return new xr(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(e,n){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e,null)}withExpectedCount(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,e)}withLastLimboFreeSnapshotVersion(e){return new xr(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class _D{constructor(e){this.lt=e}}function ED(t){const e=fD({parent:t.parent,structuredQuery:t.structuredQuery});return t.limitType==="LAST"?Lf(e,e.limit,"L"):e}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TD{constructor(){this.on=new SD}addToCollectionParentIndex(e,n){return this.on.add(n),D.resolve()}getCollectionParents(e,n){return D.resolve(this.on.getEntries(n))}addFieldIndex(e,n){return D.resolve()}deleteFieldIndex(e,n){return D.resolve()}getDocumentsMatchingTarget(e,n){return D.resolve(null)}getIndexType(e,n){return D.resolve(0)}getFieldIndexes(e,n){return D.resolve([])}getNextCollectionGroupToUpdate(e){return D.resolve(null)}getMinOffset(e,n){return D.resolve(Wr.min())}getMinOffsetFromCollectionGroup(e,n){return D.resolve(Wr.min())}updateCollectionGroup(e,n,r){return D.resolve()}updateIndexEntries(e,n){return D.resolve()}}class SD{constructor(){this.index={}}add(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n]||new Pt(Fe.comparator),s=!i.has(r);return this.index[n]=i.add(r),s}has(e){const n=e.lastSegment(),r=e.popLast(),i=this.index[n];return i&&i.has(r)}getEntries(e){return(this.index[e]||new Pt(Fe.comparator)).toArray()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class As{constructor(e){this.xn=e}next(){return this.xn+=2,this.xn}static On(){return new As(0)}static Nn(){return new As(-1)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wD{constructor(){this.changes=new qs(e=>e.toString(),(e,n)=>e.isEqual(n)),this.changesApplied=!1}addEntry(e){this.assertNotApplied(),this.changes.set(e.key,e)}removeEntry(e,n){this.assertNotApplied(),this.changes.set(e,Tt.newInvalidDocument(e).setReadTime(n))}getEntry(e,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?D.resolve(r):this.getFromCache(e,n)}getEntries(e,n){return this.getAllFromCache(e,n)}apply(e){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(e)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class CD{constructor(e,n){this.overlayedDocument=e,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PD{constructor(e,n,r,i){this.remoteDocumentCache=e,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=i}getDocument(e,n){let r=null;return this.documentOverlayCache.getOverlay(e,n).next(i=>(r=i,this.remoteDocumentCache.getEntry(e,n))).next(i=>(r!==null&&Fo(r.mutation,i,Tn.empty(),Xe.now()),i))}getDocuments(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.getLocalViewOfDocuments(e,r,ae()).next(()=>r))}getLocalViewOfDocuments(e,n,r=ae()){const i=hi();return this.populateOverlays(e,i,n).next(()=>this.computeViews(e,n,i,r).next(s=>{let o=To();return s.forEach((l,a)=>{o=o.insert(l,a.overlayedDocument)}),o}))}getOverlayedDocuments(e,n){const r=hi();return this.populateOverlays(e,r,n).next(()=>this.computeViews(e,n,r,ae()))}populateOverlays(e,n,r){const i=[];return r.forEach(s=>{n.has(s)||i.push(s)}),this.documentOverlayCache.getOverlays(e,i).next(s=>{s.forEach((o,l)=>{n.set(o,l)})})}computeViews(e,n,r,i){let s=pr();const o=Vo(),l=function(){return Vo()}();return n.forEach((a,c)=>{const u=r.get(c.key);i.has(c.key)&&(u===void 0||u.mutation instanceof Di)?s=s.insert(c.key,c):u!==void 0?(o.set(c.key,u.mutation.getFieldMask()),Fo(u.mutation,c,u.mutation.getFieldMask(),Xe.now())):o.set(c.key,Tn.empty())}),this.recalculateAndSaveOverlays(e,s).next(a=>(a.forEach((c,u)=>o.set(c,u)),n.forEach((c,u)=>{var d;return l.set(c,new CD(u,(d=o.get(c))!==null&&d!==void 0?d:null))}),l))}recalculateAndSaveOverlays(e,n){const r=Vo();let i=new je((o,l)=>o-l),s=ae();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(e,n).next(o=>{for(const l of o)l.keys().forEach(a=>{const c=n.get(a);if(c===null)return;let u=r.get(a)||Tn.empty();u=l.applyToLocalView(c,u),r.set(a,u);const d=(i.get(l.batchId)||ae()).add(a);i=i.insert(l.batchId,d)})}).next(()=>{const o=[],l=i.getReverseIterator();for(;l.hasNext();){const a=l.getNext(),c=a.key,u=a.value,d=Sw();u.forEach(f=>{if(!s.has(f)){const p=Aw(n.get(f),r.get(f));p!==null&&d.set(f,p),s=s.add(f)}}),o.push(this.documentOverlayCache.saveOverlays(e,c,d))}return D.waitFor(o)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(e,n){return this.remoteDocumentCache.getEntries(e,n).next(r=>this.recalculateAndSaveOverlays(e,r))}getDocumentsMatchingQuery(e,n,r){return function(s){return W.isDocumentKey(s.path)&&s.collectionGroup===null&&s.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(e,n.path):ON(n)?this.getDocumentsMatchingCollectionGroupQuery(e,n,r):this.getDocumentsMatchingCollectionQuery(e,n,r)}getNextDocuments(e,n,r,i){return this.remoteDocumentCache.getAllFromCollectionGroup(e,n,r,i).next(s=>{const o=i-s.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(e,n,r.largestBatchId,i-s.size):D.resolve(hi());let l=-1,a=s;return o.next(c=>D.forEach(c,(u,d)=>(l<d.largestBatchId&&(l=d.largestBatchId),s.get(u)?D.resolve():this.remoteDocumentCache.getEntry(e,u).next(f=>{a=a.insert(u,f)}))).next(()=>this.populateOverlays(e,c,s)).next(()=>this.computeViews(e,a,c,ae())).next(u=>({batchId:l,changes:Tw(u)})))})}getDocumentsMatchingDocumentQuery(e,n){return this.getDocument(e,new W(n)).next(r=>{let i=To();return r.isFoundDocument()&&(i=i.insert(r.key,r)),i})}getDocumentsMatchingCollectionGroupQuery(e,n,r){const i=n.collectionGroup;let s=To();return this.indexManager.getCollectionParents(e,i).next(o=>D.forEach(o,l=>{const a=function(u,d){return new Bu(d,null,u.explicitOrderBy.slice(),u.filters.slice(),u.limit,u.limitType,u.startAt,u.endAt)}(n,l.child(i));return this.getDocumentsMatchingCollectionQuery(e,a,r).next(c=>{c.forEach((u,d)=>{s=s.insert(u,d)})})}).next(()=>s))}getDocumentsMatchingCollectionQuery(e,n,r){let i;return this.documentOverlayCache.getOverlaysForCollection(e,n.path,r.largestBatchId).next(s=>(i=s,this.remoteDocumentCache.getDocumentsMatchingQuery(e,n,r,i))).next(s=>{i.forEach((l,a)=>{const c=a.getKey();s.get(c)===null&&(s=s.insert(c,Tt.newInvalidDocument(c)))});let o=To();return s.forEach((l,a)=>{const c=i.get(l);c!==void 0&&Fo(c.mutation,a,Tn.empty(),Xe.now()),qu(n,a)&&(o=o.insert(l,a))}),o})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class RD{constructor(e){this.serializer=e,this.ur=new Map,this.cr=new Map}getBundleMetadata(e,n){return D.resolve(this.ur.get(n))}saveBundleMetadata(e,n){return this.ur.set(n.id,function(i){return{id:i.id,version:i.version,createTime:$n(i.createTime)}}(n)),D.resolve()}getNamedQuery(e,n){return D.resolve(this.cr.get(n))}saveNamedQuery(e,n){return this.cr.set(n.name,function(i){return{name:i.name,query:ED(i.bundledQuery),readTime:$n(i.readTime)}}(n)),D.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kD{constructor(){this.overlays=new je(W.comparator),this.lr=new Map}getOverlay(e,n){return D.resolve(this.overlays.get(n))}getOverlays(e,n){const r=hi();return D.forEach(n,i=>this.getOverlay(e,i).next(s=>{s!==null&&r.set(i,s)})).next(()=>r)}saveOverlays(e,n,r){return r.forEach((i,s)=>{this.Pt(e,n,s)}),D.resolve()}removeOverlaysForBatchId(e,n,r){const i=this.lr.get(r);return i!==void 0&&(i.forEach(s=>this.overlays=this.overlays.remove(s)),this.lr.delete(r)),D.resolve()}getOverlaysForCollection(e,n,r){const i=hi(),s=n.length+1,o=new W(n.child("")),l=this.overlays.getIteratorFrom(o);for(;l.hasNext();){const a=l.getNext().value,c=a.getKey();if(!n.isPrefixOf(c.path))break;c.path.length===s&&a.largestBatchId>r&&i.set(a.getKey(),a)}return D.resolve(i)}getOverlaysForCollectionGroup(e,n,r,i){let s=new je((c,u)=>c-u);const o=this.overlays.getIterator();for(;o.hasNext();){const c=o.getNext().value;if(c.getKey().getCollectionGroup()===n&&c.largestBatchId>r){let u=s.get(c.largestBatchId);u===null&&(u=hi(),s=s.insert(c.largestBatchId,u)),u.set(c.getKey(),c)}}const l=hi(),a=s.getIterator();for(;a.hasNext()&&(a.getNext().value.forEach((c,u)=>l.set(c,u)),!(l.size()>=i)););return D.resolve(l)}Pt(e,n,r){const i=this.overlays.get(r.key);if(i!==null){const o=this.lr.get(i.largestBatchId).delete(r.key);this.lr.set(i.largestBatchId,o)}this.overlays=this.overlays.insert(r.key,new QN(n,r));let s=this.lr.get(n);s===void 0&&(s=ae(),this.lr.set(n,s)),this.lr.set(n,s.add(r.key))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qm{constructor(){this.hr=new Pt(et.Pr),this.Ir=new Pt(et.Tr)}isEmpty(){return this.hr.isEmpty()}addReference(e,n){const r=new et(e,n);this.hr=this.hr.add(r),this.Ir=this.Ir.add(r)}Er(e,n){e.forEach(r=>this.addReference(r,n))}removeReference(e,n){this.dr(new et(e,n))}Ar(e,n){e.forEach(r=>this.removeReference(r,n))}Rr(e){const n=new W(new Fe([])),r=new et(n,e),i=new et(n,e+1),s=[];return this.Ir.forEachInRange([r,i],o=>{this.dr(o),s.push(o.key)}),s}Vr(){this.hr.forEach(e=>this.dr(e))}dr(e){this.hr=this.hr.delete(e),this.Ir=this.Ir.delete(e)}mr(e){const n=new W(new Fe([])),r=new et(n,e),i=new et(n,e+1);let s=ae();return this.Ir.forEachInRange([r,i],o=>{s=s.add(o.key)}),s}containsKey(e){const n=new et(e,0),r=this.hr.firstAfterOrEqual(n);return r!==null&&e.isEqual(r.key)}}class et{constructor(e,n){this.key=e,this.gr=n}static Pr(e,n){return W.comparator(e.key,n.key)||ge(e.gr,n.gr)}static Tr(e,n){return ge(e.gr,n.gr)||W.comparator(e.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ID{constructor(e,n){this.indexManager=e,this.referenceDelegate=n,this.mutationQueue=[],this.pr=1,this.yr=new Pt(et.Pr)}checkEmpty(e){return D.resolve(this.mutationQueue.length===0)}addMutationBatch(e,n,r,i){const s=this.pr;this.pr++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const o=new JN(s,n,r,i);this.mutationQueue.push(o);for(const l of i)this.yr=this.yr.add(new et(l.key,s)),this.indexManager.addToCollectionParentIndex(e,l.key.path.popLast());return D.resolve(o)}lookupMutationBatch(e,n){return D.resolve(this.wr(n))}getNextMutationBatchAfterBatchId(e,n){const r=n+1,i=this.Sr(r),s=i<0?0:i;return D.resolve(this.mutationQueue.length>s?this.mutationQueue[s]:null)}getHighestUnacknowledgedBatchId(){return D.resolve(this.mutationQueue.length===0?-1:this.pr-1)}getAllMutationBatches(e){return D.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(e,n){const r=new et(n,0),i=new et(n,Number.POSITIVE_INFINITY),s=[];return this.yr.forEachInRange([r,i],o=>{const l=this.wr(o.gr);s.push(l)}),D.resolve(s)}getAllMutationBatchesAffectingDocumentKeys(e,n){let r=new Pt(ge);return n.forEach(i=>{const s=new et(i,0),o=new et(i,Number.POSITIVE_INFINITY);this.yr.forEachInRange([s,o],l=>{r=r.add(l.gr)})}),D.resolve(this.br(r))}getAllMutationBatchesAffectingQuery(e,n){const r=n.path,i=r.length+1;let s=r;W.isDocumentKey(s)||(s=s.child(""));const o=new et(new W(s),0);let l=new Pt(ge);return this.yr.forEachWhile(a=>{const c=a.key.path;return!!r.isPrefixOf(c)&&(c.length===i&&(l=l.add(a.gr)),!0)},o),D.resolve(this.br(l))}br(e){const n=[];return e.forEach(r=>{const i=this.wr(r);i!==null&&n.push(i)}),n}removeMutationBatch(e,n){Ae(this.Dr(n.batchId,"removed")===0),this.mutationQueue.shift();let r=this.yr;return D.forEach(n.mutations,i=>{const s=new et(i.key,n.batchId);return r=r.delete(s),this.referenceDelegate.markPotentiallyOrphaned(e,i.key)}).next(()=>{this.yr=r})}Fn(e){}containsKey(e,n){const r=new et(n,0),i=this.yr.firstAfterOrEqual(r);return D.resolve(n.isEqual(i&&i.key))}performConsistencyCheck(e){return this.mutationQueue.length,D.resolve()}Dr(e,n){return this.Sr(e)}Sr(e){return this.mutationQueue.length===0?0:e-this.mutationQueue[0].batchId}wr(e){const n=this.Sr(e);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class AD{constructor(e){this.vr=e,this.docs=function(){return new je(W.comparator)}(),this.size=0}setIndexManager(e){this.indexManager=e}addEntry(e,n){const r=n.key,i=this.docs.get(r),s=i?i.size:0,o=this.vr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:o}),this.size+=o-s,this.indexManager.addToCollectionParentIndex(e,r.path.popLast())}removeEntry(e){const n=this.docs.get(e);n&&(this.docs=this.docs.remove(e),this.size-=n.size)}getEntry(e,n){const r=this.docs.get(n);return D.resolve(r?r.document.mutableCopy():Tt.newInvalidDocument(n))}getEntries(e,n){let r=pr();return n.forEach(i=>{const s=this.docs.get(i);r=r.insert(i,s?s.document.mutableCopy():Tt.newInvalidDocument(i))}),D.resolve(r)}getDocumentsMatchingQuery(e,n,r,i){let s=pr();const o=n.path,l=new W(o.child("")),a=this.docs.getIteratorFrom(l);for(;a.hasNext();){const{key:c,value:{document:u}}=a.getNext();if(!o.isPrefixOf(c.path))break;c.path.length>o.length+1||hN(dN(u),r)<=0||(i.has(u.key)||qu(n,u))&&(s=s.insert(u.key,u.mutableCopy()))}return D.resolve(s)}getAllFromCollectionGroup(e,n,r,i){Z()}Cr(e,n){return D.forEach(this.docs,r=>n(r))}newChangeBuffer(e){return new bD(this)}getSize(e){return D.resolve(this.size)}}class bD extends wD{constructor(e){super(),this._r=e}applyChanges(e){const n=[];return this.changes.forEach((r,i)=>{i.isValidDocument()?n.push(this._r.addEntry(e,i)):this._r.removeEntry(r)}),D.waitFor(n)}getFromCache(e,n){return this._r.getEntry(e,n)}getAllFromCache(e,n){return this._r.getEntries(e,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xD{constructor(e){this.persistence=e,this.Fr=new qs(n=>zm(n),qm),this.lastRemoteSnapshotVersion=ee.min(),this.highestTargetId=0,this.Mr=0,this.Or=new Qm,this.targetCount=0,this.Nr=As.On()}forEachTarget(e,n){return this.Fr.forEach((r,i)=>n(i)),D.resolve()}getLastRemoteSnapshotVersion(e){return D.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(e){return D.resolve(this.Mr)}allocateTargetId(e){return this.highestTargetId=this.Nr.next(),D.resolve(this.highestTargetId)}setTargetsMetadata(e,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.Mr&&(this.Mr=n),D.resolve()}kn(e){this.Fr.set(e.target,e);const n=e.targetId;n>this.highestTargetId&&(this.Nr=new As(n),this.highestTargetId=n),e.sequenceNumber>this.Mr&&(this.Mr=e.sequenceNumber)}addTargetData(e,n){return this.kn(n),this.targetCount+=1,D.resolve()}updateTargetData(e,n){return this.kn(n),D.resolve()}removeTargetData(e,n){return this.Fr.delete(n.target),this.Or.Rr(n.targetId),this.targetCount-=1,D.resolve()}removeTargets(e,n,r){let i=0;const s=[];return this.Fr.forEach((o,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.Fr.delete(o),s.push(this.removeMatchingKeysForTargetId(e,l.targetId)),i++)}),D.waitFor(s).next(()=>i)}getTargetCount(e){return D.resolve(this.targetCount)}getTargetData(e,n){const r=this.Fr.get(n)||null;return D.resolve(r)}addMatchingKeys(e,n,r){return this.Or.Er(n,r),D.resolve()}removeMatchingKeys(e,n,r){this.Or.Ar(n,r);const i=this.persistence.referenceDelegate,s=[];return i&&n.forEach(o=>{s.push(i.markPotentiallyOrphaned(e,o))}),D.waitFor(s)}removeMatchingKeysForTargetId(e,n){return this.Or.Rr(n),D.resolve()}getMatchingKeysForTargetId(e,n){const r=this.Or.mr(n);return D.resolve(r)}containsKey(e,n){return D.resolve(this.Or.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class OD{constructor(e,n){this.Br={},this.overlays={},this.Lr=new Fm(0),this.kr=!1,this.kr=!0,this.referenceDelegate=e(this),this.qr=new xD(this),this.indexManager=new TD,this.remoteDocumentCache=function(i){return new AD(i)}(r=>this.referenceDelegate.Qr(r)),this.serializer=new _D(n),this.Kr=new RD(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.kr=!1,Promise.resolve()}get started(){return this.kr}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(e){return this.indexManager}getDocumentOverlayCache(e){let n=this.overlays[e.toKey()];return n||(n=new kD,this.overlays[e.toKey()]=n),n}getMutationQueue(e,n){let r=this.Br[e.toKey()];return r||(r=new ID(n,this.referenceDelegate),this.Br[e.toKey()]=r),r}getTargetCache(){return this.qr}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.Kr}runTransaction(e,n,r){q("MemoryPersistence","Starting transaction:",e);const i=new ND(this.Lr.next());return this.referenceDelegate.$r(),r(i).next(s=>this.referenceDelegate.Ur(i).next(()=>s)).toPromise().then(s=>(i.raiseOnCommittedEvent(),s))}Wr(e,n){return D.or(Object.values(this.Br).map(r=>()=>r.containsKey(e,n)))}}class ND extends pN{constructor(e){super(),this.currentSequenceNumber=e}}class Ym{constructor(e){this.persistence=e,this.Gr=new Qm,this.zr=null}static jr(e){return new Ym(e)}get Hr(){if(this.zr)return this.zr;throw Z()}addReference(e,n,r){return this.Gr.addReference(r,n),this.Hr.delete(r.toString()),D.resolve()}removeReference(e,n,r){return this.Gr.removeReference(r,n),this.Hr.add(r.toString()),D.resolve()}markPotentiallyOrphaned(e,n){return this.Hr.add(n.toString()),D.resolve()}removeTarget(e,n){this.Gr.Rr(n.targetId).forEach(i=>this.Hr.add(i.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(e,n.targetId).next(i=>{i.forEach(s=>this.Hr.add(s.toString()))}).next(()=>r.removeTargetData(e,n))}$r(){this.zr=new Set}Ur(e){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return D.forEach(this.Hr,r=>{const i=W.fromPath(r);return this.Jr(e,i).next(s=>{s||n.removeEntry(i,ee.min())})}).next(()=>(this.zr=null,n.apply(e)))}updateLimboDocument(e,n){return this.Jr(e,n).next(r=>{r?this.Hr.delete(n.toString()):this.Hr.add(n.toString())})}Qr(e){return 0}Jr(e,n){return D.or([()=>D.resolve(this.Gr.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(e,n),()=>this.persistence.Wr(e,n)])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xm{constructor(e,n,r,i){this.targetId=e,this.fromCache=n,this.ki=r,this.qi=i}static Qi(e,n){let r=ae(),i=ae();for(const s of n.docChanges)switch(s.type){case 0:r=r.add(s.doc.key);break;case 1:i=i.add(s.doc.key)}return new Xm(e,n.fromCache,r,i)}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DD{constructor(){this.Ki=!1}initialize(e,n){this.$i=e,this.indexManager=n,this.Ki=!0}getDocumentsMatchingQuery(e,n,r,i){return this.Ui(e,n).next(s=>s||this.Wi(e,n,i,r)).next(s=>s||this.Gi(e,n))}Ui(e,n){if(g0(n))return D.resolve(null);let r=fr(n);return this.indexManager.getIndexType(e,r).next(i=>i===0?null:(n.limit!==null&&i===1&&(n=Lf(n,null,"F"),r=fr(n)),this.indexManager.getDocumentsMatchingTarget(e,r).next(s=>{const o=ae(...s);return this.$i.getDocuments(e,o).next(l=>this.indexManager.getMinOffset(e,r).next(a=>{const c=this.zi(n,l);return this.ji(n,c,o,a.readTime)?this.Ui(e,Lf(n,null,"F")):this.Hi(e,c,n,a)}))})))}Wi(e,n,r,i){return g0(n)||i.isEqual(ee.min())?this.Gi(e,n):this.$i.getDocuments(e,r).next(s=>{const o=this.zi(n,s);return this.ji(n,o,r,i)?this.Gi(e,n):(a0()<=me.DEBUG&&q("QueryEngine","Re-using previous result from %s to execute query: %s",i.toString(),jf(n)),this.Hi(e,o,n,uN(i,-1)))})}zi(e,n){let r=new Pt(_w(e));return n.forEach((i,s)=>{qu(e,s)&&(r=r.add(s))}),r}ji(e,n,r,i){if(e.limit===null)return!1;if(r.size!==n.size)return!0;const s=e.limitType==="F"?n.last():n.first();return!!s&&(s.hasPendingWrites||s.version.compareTo(i)>0)}Gi(e,n){return a0()<=me.DEBUG&&q("QueryEngine","Using full collection scan to execute query:",jf(n)),this.$i.getDocumentsMatchingQuery(e,n,Wr.min())}Hi(e,n,r,i){return this.$i.getDocumentsMatchingQuery(e,r,i).next(s=>(n.forEach(o=>{s=s.insert(o.key,o)}),s))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class MD{constructor(e,n,r,i){this.persistence=e,this.Ji=n,this.serializer=i,this.Yi=new je(ge),this.Zi=new qs(s=>zm(s),qm),this.Xi=new Map,this.es=e.getRemoteDocumentCache(),this.qr=e.getTargetCache(),this.Kr=e.getBundleCache(),this.ts(r)}ts(e){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(e),this.indexManager=this.persistence.getIndexManager(e),this.mutationQueue=this.persistence.getMutationQueue(e,this.indexManager),this.localDocuments=new PD(this.es,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.es.setIndexManager(this.indexManager),this.Ji.initialize(this.localDocuments,this.indexManager)}collectGarbage(e){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>e.collect(n,this.Yi))}}function LD(t,e,n,r){return new MD(t,e,n,r)}async function $w(t,e){const n=ne(t);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let i;return n.mutationQueue.getAllMutationBatches(r).next(s=>(i=s,n.ts(e),n.mutationQueue.getAllMutationBatches(r))).next(s=>{const o=[],l=[];let a=ae();for(const c of i){o.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}for(const c of s){l.push(c.batchId);for(const u of c.mutations)a=a.add(u.key)}return n.localDocuments.getDocuments(r,a).next(c=>({ns:c,removedBatchIds:o,addedBatchIds:l}))})})}function jD(t,e){const n=ne(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",r=>{const i=e.batch.keys(),s=n.es.newChangeBuffer({trackRemovals:!0});return function(l,a,c,u){const d=c.batch,f=d.keys();let p=D.resolve();return f.forEach(y=>{p=p.next(()=>u.getEntry(a,y)).next(v=>{const C=c.docVersions.get(y);Ae(C!==null),v.version.compareTo(C)<0&&(d.applyToRemoteDocument(v,c),v.isValidDocument()&&(v.setReadTime(c.commitVersion),u.addEntry(v)))})}),p.next(()=>l.mutationQueue.removeMutationBatch(a,d))}(n,r,e,s).next(()=>s.apply(r)).next(()=>n.mutationQueue.performConsistencyCheck(r)).next(()=>n.documentOverlayCache.removeOverlaysForBatchId(r,i,e.batch.batchId)).next(()=>n.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(r,function(l){let a=ae();for(let c=0;c<l.mutationResults.length;++c)l.mutationResults[c].transformResults.length>0&&(a=a.add(l.batch.mutations[c].key));return a}(e))).next(()=>n.localDocuments.getDocuments(r,i))})}function Bw(t){const e=ne(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",n=>e.qr.getLastRemoteSnapshotVersion(n))}function VD(t,e){const n=ne(t),r=e.snapshotVersion;let i=n.Yi;return n.persistence.runTransaction("Apply remote event","readwrite-primary",s=>{const o=n.es.newChangeBuffer({trackRemovals:!0});i=n.Yi;const l=[];e.targetChanges.forEach((u,d)=>{const f=i.get(d);if(!f)return;l.push(n.qr.removeMatchingKeys(s,u.removedDocuments,d).next(()=>n.qr.addMatchingKeys(s,u.addedDocuments,d)));let p=f.withSequenceNumber(s.currentSequenceNumber);e.targetMismatches.get(d)!==null?p=p.withResumeToken(At.EMPTY_BYTE_STRING,ee.min()).withLastLimboFreeSnapshotVersion(ee.min()):u.resumeToken.approximateByteSize()>0&&(p=p.withResumeToken(u.resumeToken,r)),i=i.insert(d,p),function(v,C,m){return v.resumeToken.approximateByteSize()===0||C.snapshotVersion.toMicroseconds()-v.snapshotVersion.toMicroseconds()>=3e8?!0:m.addedDocuments.size+m.modifiedDocuments.size+m.removedDocuments.size>0}(f,p,u)&&l.push(n.qr.updateTargetData(s,p))});let a=pr(),c=ae();if(e.documentUpdates.forEach(u=>{e.resolvedLimboDocuments.has(u)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(s,u))}),l.push(FD(s,o,e.documentUpdates).next(u=>{a=u.rs,c=u.ss})),!r.isEqual(ee.min())){const u=n.qr.getLastRemoteSnapshotVersion(s).next(d=>n.qr.setTargetsMetadata(s,s.currentSequenceNumber,r));l.push(u)}return D.waitFor(l).next(()=>o.apply(s)).next(()=>n.localDocuments.getLocalViewOfDocuments(s,a,c)).next(()=>a)}).then(s=>(n.Yi=i,s))}function FD(t,e,n){let r=ae(),i=ae();return n.forEach(s=>r=r.add(s)),e.getEntries(t,r).next(s=>{let o=pr();return n.forEach((l,a)=>{const c=s.get(l);a.isFoundDocument()!==c.isFoundDocument()&&(i=i.add(l)),a.isNoDocument()&&a.version.isEqual(ee.min())?(e.removeEntry(l,a.readTime),o=o.insert(l,a)):!c.isValidDocument()||a.version.compareTo(c.version)>0||a.version.compareTo(c.version)===0&&c.hasPendingWrites?(e.addEntry(a),o=o.insert(l,a)):q("LocalStore","Ignoring outdated watch update for ",l,". Current version:",c.version," Watch version:",a.version)}),{rs:o,ss:i}})}function UD(t,e){const n=ne(t);return n.persistence.runTransaction("Get next mutation batch","readonly",r=>(e===void 0&&(e=-1),n.mutationQueue.getNextMutationBatchAfterBatchId(r,e)))}function $D(t,e){const n=ne(t);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let i;return n.qr.getTargetData(r,e).next(s=>s?(i=s,D.resolve(i)):n.qr.allocateTargetId(r).next(o=>(i=new xr(e,o,"TargetPurposeListen",r.currentSequenceNumber),n.qr.addTargetData(r,i).next(()=>i))))}).then(r=>{const i=n.Yi.get(r.targetId);return(i===null||r.snapshotVersion.compareTo(i.snapshotVersion)>0)&&(n.Yi=n.Yi.insert(r.targetId,r),n.Zi.set(e,r.targetId)),r})}async function Bf(t,e,n){const r=ne(t),i=r.Yi.get(e),s=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",s,o=>r.persistence.referenceDelegate.removeTarget(o,i))}catch(o){if(!Wa(o))throw o;q("LocalStore",`Failed to update sequence numbers for target ${e}: ${o}`)}r.Yi=r.Yi.remove(e),r.Zi.delete(i.target)}function k0(t,e,n){const r=ne(t);let i=ee.min(),s=ae();return r.persistence.runTransaction("Execute query","readonly",o=>function(a,c,u){const d=ne(a),f=d.Zi.get(u);return f!==void 0?D.resolve(d.Yi.get(f)):d.qr.getTargetData(c,u)}(r,o,fr(e)).next(l=>{if(l)return i=l.lastLimboFreeSnapshotVersion,r.qr.getMatchingKeysForTargetId(o,l.targetId).next(a=>{s=a})}).next(()=>r.Ji.getDocumentsMatchingQuery(o,e,n?i:ee.min(),n?s:ae())).next(l=>(BD(r,DN(e),l),{documents:l,os:s})))}function BD(t,e,n){let r=t.Xi.get(e)||ee.min();n.forEach((i,s)=>{s.readTime.compareTo(r)>0&&(r=s.readTime)}),t.Xi.set(e,r)}class I0{constructor(){this.activeTargetIds=UN()}Ps(e){this.activeTargetIds=this.activeTargetIds.add(e)}Is(e){this.activeTargetIds=this.activeTargetIds.delete(e)}hs(){const e={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(e)}}class zD{constructor(){this.Js=new I0,this.Ys={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(e){}updateMutationState(e,n,r){}addLocalQueryTarget(e){return this.Js.Ps(e),this.Ys[e]||"not-current"}updateQueryState(e,n,r){this.Ys[e]=n}removeLocalQueryTarget(e){this.Js.Is(e)}isLocalQueryTarget(e){return this.Js.activeTargetIds.has(e)}clearQueryState(e){delete this.Ys[e]}getAllActiveQueryTargets(){return this.Js.activeTargetIds}isActiveQueryTarget(e){return this.Js.activeTargetIds.has(e)}start(){return this.Js=new I0,Promise.resolve()}handleUserChange(e,n,r){}setOnlineState(e){}shutdown(){}writeSequenceNumber(e){}notifyBundleLoaded(e){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qD{Zs(e){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class A0{constructor(){this.Xs=()=>this.eo(),this.no=()=>this.ro(),this.io=[],this.so()}Zs(e){this.io.push(e)}shutdown(){window.removeEventListener("online",this.Xs),window.removeEventListener("offline",this.no)}so(){window.addEventListener("online",this.Xs),window.addEventListener("offline",this.no)}eo(){q("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(const e of this.io)e(0)}ro(){q("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(const e of this.io)e(1)}static v(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let bl=null;function Xd(){return bl===null?bl=function(){return 268435456+Math.round(2147483648*Math.random())}():bl++,"0x"+bl.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const HD={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WD{constructor(e){this.oo=e.oo,this._o=e._o}ao(e){this.uo=e}co(e){this.lo=e}onMessage(e){this.ho=e}close(){this._o()}send(e){this.oo(e)}Po(){this.uo()}Io(e){this.lo(e)}To(e){this.ho(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vt="WebChannelConnection";class KD extends class{constructor(n){this.databaseInfo=n,this.databaseId=n.databaseId;const r=n.ssl?"https":"http",i=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Eo=r+"://"+n.host,this.Ao=`projects/${i}/databases/${s}`,this.Ro=this.databaseId.database==="(default)"?`project_id=${i}`:`project_id=${i}&database_id=${s}`}get Vo(){return!1}mo(n,r,i,s,o){const l=Xd(),a=this.fo(n,r);q("RestConnection",`Sending RPC '${n}' ${l}:`,a,i);const c={"google-cloud-resource-prefix":this.Ao,"x-goog-request-params":this.Ro};return this.po(c,s,o),this.yo(n,a,c,i).then(u=>(q("RestConnection",`Received RPC '${n}' ${l}: `,u),u),u=>{throw Ps("RestConnection",`RPC '${n}' ${l} failed with error: `,u,"url: ",a,"request:",i),u})}wo(n,r,i,s,o,l){return this.mo(n,r,i,s,o)}po(n,r,i){n["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Bs}(),n["Content-Type"]="text/plain",this.databaseInfo.appId&&(n["X-Firebase-GMPID"]=this.databaseInfo.appId),r&&r.headers.forEach((s,o)=>n[o]=s),i&&i.headers.forEach((s,o)=>n[o]=s)}fo(n,r){const i=HD[n];return`${this.Eo}/v1/${r}:${i}`}}{constructor(e){super(e),this.forceLongPolling=e.forceLongPolling,this.autoDetectLongPolling=e.autoDetectLongPolling,this.useFetchStreams=e.useFetchStreams,this.longPollingOptions=e.longPollingOptions}yo(e,n,r,i){const s=Xd();return new Promise((o,l)=>{const a=new ZO;a.setWithCredentials(!0),a.listenOnce(QO.COMPLETE,()=>{try{switch(a.getLastErrorCode()){case Qd.NO_ERROR:const u=a.getResponseJson();q(vt,`XHR for RPC '${e}' ${s} received:`,JSON.stringify(u)),o(u);break;case Qd.TIMEOUT:q(vt,`RPC '${e}' ${s} timed out`),l(new G(x.DEADLINE_EXCEEDED,"Request time out"));break;case Qd.HTTP_ERROR:const d=a.getStatus();if(q(vt,`RPC '${e}' ${s} failed with status:`,d,"response text:",a.getResponseText()),d>0){let f=a.getResponseJson();Array.isArray(f)&&(f=f[0]);const p=f==null?void 0:f.error;if(p&&p.status&&p.message){const y=function(C){const m=C.toLowerCase().replace(/_/g,"-");return Object.values(x).indexOf(m)>=0?m:x.UNKNOWN}(p.status);l(new G(y,p.message))}else l(new G(x.UNKNOWN,"Server responded with status "+a.getStatus()))}else l(new G(x.UNAVAILABLE,"Connection failed."));break;default:Z()}}finally{q(vt,`RPC '${e}' ${s} completed.`)}});const c=JSON.stringify(i);q(vt,`RPC '${e}' ${s} sending request:`,i),a.send(n,"POST",c,r,15)})}So(e,n,r){const i=Xd(),s=[this.Eo,"/","google.firestore.v1.Firestore","/",e,"/channel"],o=GO(),l=JO(),a={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},c=this.longPollingOptions.timeoutSeconds;c!==void 0&&(a.longPollingTimeout=Math.round(1e3*c)),this.useFetchStreams&&(a.xmlHttpFactory=new XO({})),this.po(a.initMessageHeaders,n,r),a.encodeInitMessageHeaders=!0;const u=s.join("");q(vt,`Creating RPC '${e}' stream ${i}: ${u}`,a);const d=o.createWebChannel(u,a);let f=!1,p=!1;const y=new WD({oo:C=>{p?q(vt,`Not sending because RPC '${e}' stream ${i} is closed:`,C):(f||(q(vt,`Opening RPC '${e}' stream ${i} transport.`),d.open(),f=!0),q(vt,`RPC '${e}' stream ${i} sending:`,C),d.send(C))},_o:()=>d.close()}),v=(C,m,g)=>{C.listen(m,E=>{try{g(E)}catch(T){setTimeout(()=>{throw T},0)}})};return v(d,Rl.EventType.OPEN,()=>{p||q(vt,`RPC '${e}' stream ${i} transport opened.`)}),v(d,Rl.EventType.CLOSE,()=>{p||(p=!0,q(vt,`RPC '${e}' stream ${i} transport closed`),y.Io())}),v(d,Rl.EventType.ERROR,C=>{p||(p=!0,Ps(vt,`RPC '${e}' stream ${i} transport errored:`,C),y.Io(new G(x.UNAVAILABLE,"The operation could not be completed")))}),v(d,Rl.EventType.MESSAGE,C=>{var m;if(!p){const g=C.data[0];Ae(!!g);const E=g,T=E.error||((m=E[0])===null||m===void 0?void 0:m.error);if(T){q(vt,`RPC '${e}' stream ${i} received error:`,T);const _=T.status;let R=function(A){const S=He[A];if(S!==void 0)return Ow(S)}(_),I=T.message;R===void 0&&(R=x.INTERNAL,I="Unknown error status: "+_+" with message "+T.message),p=!0,y.Io(new G(R,I)),d.close()}else q(vt,`RPC '${e}' stream ${i} received:`,g),y.To(g)}}),v(l,YO.STAT_EVENT,C=>{C.stat===s0.PROXY?q(vt,`RPC '${e}' stream ${i} detected buffering proxy`):C.stat===s0.NOPROXY&&q(vt,`RPC '${e}' stream ${i} detected no buffering proxy`)}),setTimeout(()=>{y.Po()},0),y}}function Zd(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Gu(t){return new sD(t,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zw{constructor(e,n,r=1e3,i=1.5,s=6e4){this.si=e,this.timerId=n,this.bo=r,this.Do=i,this.vo=s,this.Co=0,this.Fo=null,this.Mo=Date.now(),this.reset()}reset(){this.Co=0}xo(){this.Co=this.vo}Oo(e){this.cancel();const n=Math.floor(this.Co+this.No()),r=Math.max(0,Date.now()-this.Mo),i=Math.max(0,n-r);i>0&&q("ExponentialBackoff",`Backing off for ${i} ms (base delay: ${this.Co} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.Fo=this.si.enqueueAfterDelay(this.timerId,i,()=>(this.Mo=Date.now(),e())),this.Co*=this.Do,this.Co<this.bo&&(this.Co=this.bo),this.Co>this.vo&&(this.Co=this.vo)}Bo(){this.Fo!==null&&(this.Fo.skipDelay(),this.Fo=null)}cancel(){this.Fo!==null&&(this.Fo.cancel(),this.Fo=null)}No(){return(Math.random()-.5)*this.Co}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qw{constructor(e,n,r,i,s,o,l,a){this.si=e,this.Lo=r,this.ko=i,this.connection=s,this.authCredentialsProvider=o,this.appCheckCredentialsProvider=l,this.listener=a,this.state=0,this.qo=0,this.Qo=null,this.Ko=null,this.stream=null,this.$o=new zw(e,n)}Uo(){return this.state===1||this.state===5||this.Wo()}Wo(){return this.state===2||this.state===3}start(){this.state!==4?this.auth():this.Go()}async stop(){this.Uo()&&await this.close(0)}zo(){this.state=0,this.$o.reset()}jo(){this.Wo()&&this.Qo===null&&(this.Qo=this.si.enqueueAfterDelay(this.Lo,6e4,()=>this.Ho()))}Jo(e){this.Yo(),this.stream.send(e)}async Ho(){if(this.Wo())return this.close(0)}Yo(){this.Qo&&(this.Qo.cancel(),this.Qo=null)}Zo(){this.Ko&&(this.Ko.cancel(),this.Ko=null)}async close(e,n){this.Yo(),this.Zo(),this.$o.cancel(),this.qo++,e!==4?this.$o.reset():n&&n.code===x.RESOURCE_EXHAUSTED?(hr(n.toString()),hr("Using maximum backoff delay to prevent overloading the backend."),this.$o.xo()):n&&n.code===x.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.Xo(),this.stream.close(),this.stream=null),this.state=e,await this.listener.co(n)}Xo(){}auth(){this.state=1;const e=this.e_(this.qo),n=this.qo;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,i])=>{this.qo===n&&this.t_(r,i)},r=>{e(()=>{const i=new G(x.UNKNOWN,"Fetching auth token failed: "+r.message);return this.n_(i)})})}t_(e,n){const r=this.e_(this.qo);this.stream=this.r_(e,n),this.stream.ao(()=>{r(()=>(this.state=2,this.Ko=this.si.enqueueAfterDelay(this.ko,1e4,()=>(this.Wo()&&(this.state=3),Promise.resolve())),this.listener.ao()))}),this.stream.co(i=>{r(()=>this.n_(i))}),this.stream.onMessage(i=>{r(()=>this.onMessage(i))})}Go(){this.state=5,this.$o.Oo(async()=>{this.state=0,this.start()})}n_(e){return q("PersistentStream",`close with error: ${e}`),this.stream=null,this.close(4,e)}e_(e){return n=>{this.si.enqueueAndForget(()=>this.qo===e?n():(q("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class GD extends qw{constructor(e,n,r,i,s,o){super(e,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s}r_(e,n){return this.connection.So("Listen",e,n)}onMessage(e){this.$o.reset();const n=lD(this.serializer,e),r=function(s){if(!("targetChange"in s))return ee.min();const o=s.targetChange;return o.targetIds&&o.targetIds.length?ee.min():o.readTime?$n(o.readTime):ee.min()}(e);return this.listener.i_(n,r)}s_(e){const n={};n.database=$f(this.serializer),n.addTarget=function(s,o){let l;const a=o.target;if(l=Mf(a)?{documents:dD(s,a)}:{query:hD(s,a)},l.targetId=o.targetId,o.resumeToken.approximateByteSize()>0){l.resumeToken=Mw(s,o.resumeToken);const c=Vf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}else if(o.snapshotVersion.compareTo(ee.min())>0){l.readTime=tu(s,o.snapshotVersion.toTimestamp());const c=Vf(s,o.expectedCount);c!==null&&(l.expectedCount=c)}return l}(this.serializer,e);const r=pD(this.serializer,e);r&&(n.labels=r),this.Jo(n)}o_(e){const n={};n.database=$f(this.serializer),n.removeTarget=e,this.Jo(n)}}class JD extends qw{constructor(e,n,r,i,s,o){super(e,"write_stream_connection_backoff","write_stream_idle","health_check_timeout",n,r,i,o),this.serializer=s,this.__=!1}get a_(){return this.__}start(){this.__=!1,this.lastStreamToken=void 0,super.start()}Xo(){this.__&&this.u_([])}r_(e,n){return this.connection.So("Write",e,n)}onMessage(e){if(Ae(!!e.streamToken),this.lastStreamToken=e.streamToken,this.__){this.$o.reset();const n=uD(e.writeResults,e.commitTime),r=$n(e.commitTime);return this.listener.c_(r,n)}return Ae(!e.writeResults||e.writeResults.length===0),this.__=!0,this.listener.l_()}h_(){const e={};e.database=$f(this.serializer),this.Jo(e)}u_(e){const n={streamToken:this.lastStreamToken,writes:e.map(r=>cD(this.serializer,r))};this.Jo(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QD extends class{}{constructor(e,n,r,i){super(),this.authCredentials=e,this.appCheckCredentials=n,this.connection=r,this.serializer=i,this.P_=!1}I_(){if(this.P_)throw new G(x.FAILED_PRECONDITION,"The client has already been terminated.")}mo(e,n,r){return this.I_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,s])=>this.connection.mo(e,n,r,i,s)).catch(i=>{throw i.name==="FirebaseError"?(i.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new G(x.UNKNOWN,i.toString())})}wo(e,n,r,i){return this.I_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([s,o])=>this.connection.wo(e,n,r,s,o,i)).catch(s=>{throw s.name==="FirebaseError"?(s.code===x.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),s):new G(x.UNKNOWN,s.toString())})}terminate(){this.P_=!0}}class YD{constructor(e,n){this.asyncQueue=e,this.onlineStateHandler=n,this.state="Unknown",this.E_=0,this.d_=null,this.A_=!0}R_(){this.E_===0&&(this.V_("Unknown"),this.d_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.d_=null,this.m_("Backend didn't respond within 10 seconds."),this.V_("Offline"),Promise.resolve())))}f_(e){this.state==="Online"?this.V_("Unknown"):(this.E_++,this.E_>=1&&(this.g_(),this.m_(`Connection failed 1 times. Most recent error: ${e.toString()}`),this.V_("Offline")))}set(e){this.g_(),this.E_=0,e==="Online"&&(this.A_=!1),this.V_(e)}V_(e){e!==this.state&&(this.state=e,this.onlineStateHandler(e))}m_(e){const n=`Could not reach Cloud Firestore backend. ${e}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.A_?(hr(n),this.A_=!1):q("OnlineStateTracker",n)}g_(){this.d_!==null&&(this.d_.cancel(),this.d_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class XD{constructor(e,n,r,i,s){this.localStore=e,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.p_=[],this.y_=new Map,this.w_=new Set,this.S_=[],this.b_=s,this.b_.Zs(o=>{r.enqueueAndForget(async()=>{Mi(this)&&(q("RemoteStore","Restarting streams for network reachability change."),await async function(a){const c=ne(a);c.w_.add(4),await Ja(c),c.D_.set("Unknown"),c.w_.delete(4),await Ju(c)}(this))})}),this.D_=new YD(r,i)}}async function Ju(t){if(Mi(t))for(const e of t.S_)await e(!0)}async function Ja(t){for(const e of t.S_)await e(!1)}function Hw(t,e){const n=ne(t);n.y_.has(e.targetId)||(n.y_.set(e.targetId,e),tg(n)?eg(n):Hs(n).Wo()&&Zm(n,e))}function Ww(t,e){const n=ne(t),r=Hs(n);n.y_.delete(e),r.Wo()&&Kw(n,e),n.y_.size===0&&(r.Wo()?r.jo():Mi(n)&&n.D_.set("Unknown"))}function Zm(t,e){if(t.v_.Le(e.targetId),e.resumeToken.approximateByteSize()>0||e.snapshotVersion.compareTo(ee.min())>0){const n=t.remoteSyncer.getRemoteKeysForTarget(e.targetId).size;e=e.withExpectedCount(n)}Hs(t).s_(e)}function Kw(t,e){t.v_.Le(e),Hs(t).o_(e)}function eg(t){t.v_=new tD({getRemoteKeysForTarget:e=>t.remoteSyncer.getRemoteKeysForTarget(e),ct:e=>t.y_.get(e)||null,it:()=>t.datastore.serializer.databaseId}),Hs(t).start(),t.D_.R_()}function tg(t){return Mi(t)&&!Hs(t).Uo()&&t.y_.size>0}function Mi(t){return ne(t).w_.size===0}function Gw(t){t.v_=void 0}async function ZD(t){t.y_.forEach((e,n)=>{Zm(t,e)})}async function eM(t,e){Gw(t),tg(t)?(t.D_.f_(e),eg(t)):t.D_.set("Unknown")}async function tM(t,e,n){if(t.D_.set("Online"),e instanceof Dw&&e.state===2&&e.cause)try{await async function(i,s){const o=s.cause;for(const l of s.targetIds)i.y_.has(l)&&(await i.remoteSyncer.rejectListen(l,o),i.y_.delete(l),i.v_.removeTarget(l))}(t,e)}catch(r){q("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),await nu(t,r)}else if(e instanceof rc?t.v_.Ge(e):e instanceof Nw?t.v_.Xe(e):t.v_.He(e),!n.isEqual(ee.min()))try{const r=await Bw(t.localStore);n.compareTo(r)>=0&&await function(s,o){const l=s.v_.ot(o);return l.targetChanges.forEach((a,c)=>{if(a.resumeToken.approximateByteSize()>0){const u=s.y_.get(c);u&&s.y_.set(c,u.withResumeToken(a.resumeToken,o))}}),l.targetMismatches.forEach((a,c)=>{const u=s.y_.get(a);if(!u)return;s.y_.set(a,u.withResumeToken(At.EMPTY_BYTE_STRING,u.snapshotVersion)),Kw(s,a);const d=new xr(u.target,a,c,u.sequenceNumber);Zm(s,d)}),s.remoteSyncer.applyRemoteEvent(l)}(t,n)}catch(r){q("RemoteStore","Failed to raise snapshot:",r),await nu(t,r)}}async function nu(t,e,n){if(!Wa(e))throw e;t.w_.add(1),await Ja(t),t.D_.set("Offline"),n||(n=()=>Bw(t.localStore)),t.asyncQueue.enqueueRetryable(async()=>{q("RemoteStore","Retrying IndexedDB access"),await n(),t.w_.delete(1),await Ju(t)})}function Jw(t,e){return e().catch(n=>nu(t,n,e))}async function Qu(t){const e=ne(t),n=Gr(e);let r=e.p_.length>0?e.p_[e.p_.length-1].batchId:-1;for(;nM(e);)try{const i=await UD(e.localStore,r);if(i===null){e.p_.length===0&&n.jo();break}r=i.batchId,rM(e,i)}catch(i){await nu(e,i)}Qw(e)&&Yw(e)}function nM(t){return Mi(t)&&t.p_.length<10}function rM(t,e){t.p_.push(e);const n=Gr(t);n.Wo()&&n.a_&&n.u_(e.mutations)}function Qw(t){return Mi(t)&&!Gr(t).Uo()&&t.p_.length>0}function Yw(t){Gr(t).start()}async function iM(t){Gr(t).h_()}async function sM(t){const e=Gr(t);for(const n of t.p_)e.u_(n.mutations)}async function oM(t,e,n){const r=t.p_.shift(),i=Wm.from(r,e,n);await Jw(t,()=>t.remoteSyncer.applySuccessfulWrite(i)),await Qu(t)}async function aM(t,e){e&&Gr(t).a_&&await async function(r,i){if(function(o){return XN(o)&&o!==x.ABORTED}(i.code)){const s=r.p_.shift();Gr(r).zo(),await Jw(r,()=>r.remoteSyncer.rejectFailedWrite(s.batchId,i)),await Qu(r)}}(t,e),Qw(t)&&Yw(t)}async function b0(t,e){const n=ne(t);n.asyncQueue.verifyOperationInProgress(),q("RemoteStore","RemoteStore received new credentials");const r=Mi(n);n.w_.add(3),await Ja(n),r&&n.D_.set("Unknown"),await n.remoteSyncer.handleCredentialChange(e),n.w_.delete(3),await Ju(n)}async function lM(t,e){const n=ne(t);e?(n.w_.delete(2),await Ju(n)):e||(n.w_.add(2),await Ja(n),n.D_.set("Unknown"))}function Hs(t){return t.C_||(t.C_=function(n,r,i){const s=ne(n);return s.I_(),new GD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ao:ZD.bind(null,t),co:eM.bind(null,t),i_:tM.bind(null,t)}),t.S_.push(async e=>{e?(t.C_.zo(),tg(t)?eg(t):t.D_.set("Unknown")):(await t.C_.stop(),Gw(t))})),t.C_}function Gr(t){return t.F_||(t.F_=function(n,r,i){const s=ne(n);return s.I_(),new JD(r,s.connection,s.authCredentials,s.appCheckCredentials,s.serializer,i)}(t.datastore,t.asyncQueue,{ao:iM.bind(null,t),co:aM.bind(null,t),l_:sM.bind(null,t),c_:oM.bind(null,t)}),t.S_.push(async e=>{e?(t.F_.zo(),await Qu(t)):(await t.F_.stop(),t.p_.length>0&&(q("RemoteStore",`Stopping write stream with ${t.p_.length} pending writes`),t.p_=[]))})),t.F_}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ng{constructor(e,n,r,i,s){this.asyncQueue=e,this.timerId=n,this.targetTimeMs=r,this.op=i,this.removalCallback=s,this.deferred=new zr,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(o=>{})}static createAndSchedule(e,n,r,i,s){const o=Date.now()+r,l=new ng(e,n,o,i,s);return l.start(r),l}start(e){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),e)}skipDelay(){return this.handleDelayElapsed()}cancel(e){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new G(x.CANCELLED,"Operation cancelled"+(e?": "+e:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(e=>this.deferred.resolve(e))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function rg(t,e){if(hr("AsyncQueue",`${e}: ${t}`),Wa(t))return new G(x.UNAVAILABLE,`${e}: ${t}`);throw t}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ps{constructor(e){this.comparator=e?(n,r)=>e(n,r)||W.comparator(n.key,r.key):(n,r)=>W.comparator(n.key,r.key),this.keyedMap=To(),this.sortedSet=new je(this.comparator)}static emptySet(e){return new ps(e.comparator)}has(e){return this.keyedMap.get(e)!=null}get(e){return this.keyedMap.get(e)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(e){const n=this.keyedMap.get(e);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(e){this.sortedSet.inorderTraversal((n,r)=>(e(n),!1))}add(e){const n=this.delete(e.key);return n.copy(n.keyedMap.insert(e.key,e),n.sortedSet.insert(e,null))}delete(e){const n=this.get(e);return n?this.copy(this.keyedMap.remove(e),this.sortedSet.remove(n)):this}isEqual(e){if(!(e instanceof ps)||this.size!==e.size)return!1;const n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();for(;n.hasNext();){const i=n.getNext().key,s=r.getNext().key;if(!i.isEqual(s))return!1}return!0}toString(){const e=[];return this.forEach(n=>{e.push(n.toString())}),e.length===0?"DocumentSet ()":`DocumentSet (
  `+e.join(`  
`)+`
)`}copy(e,n){const r=new ps;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class x0{constructor(){this.M_=new je(W.comparator)}track(e){const n=e.doc.key,r=this.M_.get(n);r?e.type!==0&&r.type===3?this.M_=this.M_.insert(n,e):e.type===3&&r.type!==1?this.M_=this.M_.insert(n,{type:r.type,doc:e.doc}):e.type===2&&r.type===2?this.M_=this.M_.insert(n,{type:2,doc:e.doc}):e.type===2&&r.type===0?this.M_=this.M_.insert(n,{type:0,doc:e.doc}):e.type===1&&r.type===0?this.M_=this.M_.remove(n):e.type===1&&r.type===2?this.M_=this.M_.insert(n,{type:1,doc:r.doc}):e.type===0&&r.type===1?this.M_=this.M_.insert(n,{type:2,doc:e.doc}):Z():this.M_=this.M_.insert(n,e)}x_(){const e=[];return this.M_.inorderTraversal((n,r)=>{e.push(r)}),e}}class bs{constructor(e,n,r,i,s,o,l,a,c){this.query=e,this.docs=n,this.oldDocs=r,this.docChanges=i,this.mutatedKeys=s,this.fromCache=o,this.syncStateChanged=l,this.excludesMetadataChanges=a,this.hasCachedResults=c}static fromInitialDocuments(e,n,r,i,s){const o=[];return n.forEach(l=>{o.push({type:0,doc:l})}),new bs(e,n,ps.emptySet(n),o,r,i,!0,!1,s)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(e){if(!(this.fromCache===e.fromCache&&this.hasCachedResults===e.hasCachedResults&&this.syncStateChanged===e.syncStateChanged&&this.mutatedKeys.isEqual(e.mutatedKeys)&&zu(this.query,e.query)&&this.docs.isEqual(e.docs)&&this.oldDocs.isEqual(e.oldDocs)))return!1;const n=this.docChanges,r=e.docChanges;if(n.length!==r.length)return!1;for(let i=0;i<n.length;i++)if(n[i].type!==r[i].type||!n[i].doc.isEqual(r[i].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cM{constructor(){this.O_=void 0,this.listeners=[]}}class uM{constructor(){this.queries=new qs(e=>vw(e),zu),this.onlineState="Unknown",this.N_=new Set}}async function dM(t,e){const n=ne(t),r=e.query;let i=!1,s=n.queries.get(r);if(s||(i=!0,s=new cM),i)try{s.O_=await n.onListen(r)}catch(o){const l=rg(o,`Initialization of query '${jf(e.query)}' failed`);return void e.onError(l)}n.queries.set(r,s),s.listeners.push(e),e.B_(n.onlineState),s.O_&&e.L_(s.O_)&&ig(n)}async function hM(t,e){const n=ne(t),r=e.query;let i=!1;const s=n.queries.get(r);if(s){const o=s.listeners.indexOf(e);o>=0&&(s.listeners.splice(o,1),i=s.listeners.length===0)}if(i)return n.queries.delete(r),n.onUnlisten(r)}function fM(t,e){const n=ne(t);let r=!1;for(const i of e){const s=i.query,o=n.queries.get(s);if(o){for(const l of o.listeners)l.L_(i)&&(r=!0);o.O_=i}}r&&ig(n)}function pM(t,e,n){const r=ne(t),i=r.queries.get(e);if(i)for(const s of i.listeners)s.onError(n);r.queries.delete(e)}function ig(t){t.N_.forEach(e=>{e.next()})}class mM{constructor(e,n,r){this.query=e,this.k_=n,this.q_=!1,this.Q_=null,this.onlineState="Unknown",this.options=r||{}}L_(e){if(!this.options.includeMetadataChanges){const r=[];for(const i of e.docChanges)i.type!==3&&r.push(i);e=new bs(e.query,e.docs,e.oldDocs,r,e.mutatedKeys,e.fromCache,e.syncStateChanged,!0,e.hasCachedResults)}let n=!1;return this.q_?this.K_(e)&&(this.k_.next(e),n=!0):this.U_(e,this.onlineState)&&(this.W_(e),n=!0),this.Q_=e,n}onError(e){this.k_.error(e)}B_(e){this.onlineState=e;let n=!1;return this.Q_&&!this.q_&&this.U_(this.Q_,e)&&(this.W_(this.Q_),n=!0),n}U_(e,n){if(!e.fromCache)return!0;const r=n!=="Offline";return(!this.options.G_||!r)&&(!e.docs.isEmpty()||e.hasCachedResults||n==="Offline")}K_(e){if(e.docChanges.length>0)return!0;const n=this.Q_&&this.Q_.hasPendingWrites!==e.hasPendingWrites;return!(!e.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}W_(e){e=bs.fromInitialDocuments(e.query,e.docs,e.mutatedKeys,e.fromCache,e.hasCachedResults),this.q_=!0,this.k_.next(e)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Xw{constructor(e){this.key=e}}class Zw{constructor(e){this.key=e}}class gM{constructor(e,n){this.query=e,this.ea=n,this.ta=null,this.hasCachedResults=!1,this.current=!1,this.na=ae(),this.mutatedKeys=ae(),this.ra=_w(e),this.ia=new ps(this.ra)}get sa(){return this.ea}oa(e,n){const r=n?n._a:new x0,i=n?n.ia:this.ia;let s=n?n.mutatedKeys:this.mutatedKeys,o=i,l=!1;const a=this.query.limitType==="F"&&i.size===this.query.limit?i.last():null,c=this.query.limitType==="L"&&i.size===this.query.limit?i.first():null;if(e.inorderTraversal((u,d)=>{const f=i.get(u),p=qu(this.query,d)?d:null,y=!!f&&this.mutatedKeys.has(f.key),v=!!p&&(p.hasLocalMutations||this.mutatedKeys.has(p.key)&&p.hasCommittedMutations);let C=!1;f&&p?f.data.isEqual(p.data)?y!==v&&(r.track({type:3,doc:p}),C=!0):this.aa(f,p)||(r.track({type:2,doc:p}),C=!0,(a&&this.ra(p,a)>0||c&&this.ra(p,c)<0)&&(l=!0)):!f&&p?(r.track({type:0,doc:p}),C=!0):f&&!p&&(r.track({type:1,doc:f}),C=!0,(a||c)&&(l=!0)),C&&(p?(o=o.add(p),s=v?s.add(u):s.delete(u)):(o=o.delete(u),s=s.delete(u)))}),this.query.limit!==null)for(;o.size>this.query.limit;){const u=this.query.limitType==="F"?o.last():o.first();o=o.delete(u.key),s=s.delete(u.key),r.track({type:1,doc:u})}return{ia:o,_a:r,ji:l,mutatedKeys:s}}aa(e,n){return e.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(e,n,r){const i=this.ia;this.ia=e.ia,this.mutatedKeys=e.mutatedKeys;const s=e._a.x_();s.sort((c,u)=>function(f,p){const y=v=>{switch(v){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Z()}};return y(f)-y(p)}(c.type,u.type)||this.ra(c.doc,u.doc)),this.ua(r);const o=n?this.ca():[],l=this.na.size===0&&this.current?1:0,a=l!==this.ta;return this.ta=l,s.length!==0||a?{snapshot:new bs(this.query,e.ia,i,s,e.mutatedKeys,l===0,a,!1,!!r&&r.resumeToken.approximateByteSize()>0),la:o}:{la:o}}B_(e){return this.current&&e==="Offline"?(this.current=!1,this.applyChanges({ia:this.ia,_a:new x0,mutatedKeys:this.mutatedKeys,ji:!1},!1)):{la:[]}}ha(e){return!this.ea.has(e)&&!!this.ia.has(e)&&!this.ia.get(e).hasLocalMutations}ua(e){e&&(e.addedDocuments.forEach(n=>this.ea=this.ea.add(n)),e.modifiedDocuments.forEach(n=>{}),e.removedDocuments.forEach(n=>this.ea=this.ea.delete(n)),this.current=e.current)}ca(){if(!this.current)return[];const e=this.na;this.na=ae(),this.ia.forEach(r=>{this.ha(r.key)&&(this.na=this.na.add(r.key))});const n=[];return e.forEach(r=>{this.na.has(r)||n.push(new Zw(r))}),this.na.forEach(r=>{e.has(r)||n.push(new Xw(r))}),n}Pa(e){this.ea=e.os,this.na=ae();const n=this.oa(e.documents);return this.applyChanges(n,!0)}Ia(){return bs.fromInitialDocuments(this.query,this.ia,this.mutatedKeys,this.ta===0,this.hasCachedResults)}}class yM{constructor(e,n,r){this.query=e,this.targetId=n,this.view=r}}class vM{constructor(e){this.key=e,this.Ta=!1}}class _M{constructor(e,n,r,i,s,o){this.localStore=e,this.remoteStore=n,this.eventManager=r,this.sharedClientState=i,this.currentUser=s,this.maxConcurrentLimboResolutions=o,this.Ea={},this.da=new qs(l=>vw(l),zu),this.Aa=new Map,this.Ra=new Set,this.Va=new je(W.comparator),this.ma=new Map,this.fa=new Qm,this.ga={},this.pa=new Map,this.ya=As.Nn(),this.onlineState="Unknown",this.wa=void 0}get isPrimaryClient(){return this.wa===!0}}async function EM(t,e){const n=bM(t);let r,i;const s=n.da.get(e);if(s)r=s.targetId,n.sharedClientState.addLocalQueryTarget(r),i=s.view.Ia();else{const o=await $D(n.localStore,fr(e)),l=n.sharedClientState.addLocalQueryTarget(o.targetId);r=o.targetId,i=await TM(n,e,r,l==="current",o.resumeToken),n.isPrimaryClient&&Hw(n.remoteStore,o)}return i}async function TM(t,e,n,r,i){t.Sa=(d,f,p)=>async function(v,C,m,g){let E=C.view.oa(m);E.ji&&(E=await k0(v.localStore,C.query,!1).then(({documents:R})=>C.view.oa(R,E)));const T=g&&g.targetChanges.get(C.targetId),_=C.view.applyChanges(E,v.isPrimaryClient,T);return N0(v,C.targetId,_.la),_.snapshot}(t,d,f,p);const s=await k0(t.localStore,e,!0),o=new gM(e,s.os),l=o.oa(s.documents),a=Ga.createSynthesizedTargetChangeForCurrentChange(n,r&&t.onlineState!=="Offline",i),c=o.applyChanges(l,t.isPrimaryClient,a);N0(t,n,c.la);const u=new yM(e,n,o);return t.da.set(e,u),t.Aa.has(n)?t.Aa.get(n).push(e):t.Aa.set(n,[e]),c.snapshot}async function SM(t,e){const n=ne(t),r=n.da.get(e),i=n.Aa.get(r.targetId);if(i.length>1)return n.Aa.set(r.targetId,i.filter(s=>!zu(s,e))),void n.da.delete(e);n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)||await Bf(n.localStore,r.targetId,!1).then(()=>{n.sharedClientState.clearQueryState(r.targetId),Ww(n.remoteStore,r.targetId),zf(n,r.targetId)}).catch(Ha)):(zf(n,r.targetId),await Bf(n.localStore,r.targetId,!0))}async function wM(t,e,n){const r=xM(t);try{const i=await function(o,l){const a=ne(o),c=Xe.now(),u=l.reduce((p,y)=>p.add(y.key),ae());let d,f;return a.persistence.runTransaction("Locally write mutations","readwrite",p=>{let y=pr(),v=ae();return a.es.getEntries(p,u).next(C=>{y=C,y.forEach((m,g)=>{g.isValidDocument()||(v=v.add(m))})}).next(()=>a.localDocuments.getOverlayedDocuments(p,y)).next(C=>{d=C;const m=[];for(const g of l){const E=KN(g,d.get(g.key).overlayedDocument);E!=null&&m.push(new Di(g.key,E,dw(E.value.mapValue),ir.exists(!0)))}return a.mutationQueue.addMutationBatch(p,c,m,l)}).next(C=>{f=C;const m=C.applyToLocalDocumentSet(d,v);return a.documentOverlayCache.saveOverlays(p,C.batchId,m)})}).then(()=>({batchId:f.batchId,changes:Tw(d)}))}(r.localStore,e);r.sharedClientState.addPendingMutation(i.batchId),function(o,l,a){let c=o.ga[o.currentUser.toKey()];c||(c=new je(ge)),c=c.insert(l,a),o.ga[o.currentUser.toKey()]=c}(r,i.batchId,n),await Qa(r,i.changes),await Qu(r.remoteStore)}catch(i){const s=rg(i,"Failed to persist write");n.reject(s)}}async function eC(t,e){const n=ne(t);try{const r=await VD(n.localStore,e);e.targetChanges.forEach((i,s)=>{const o=n.ma.get(s);o&&(Ae(i.addedDocuments.size+i.modifiedDocuments.size+i.removedDocuments.size<=1),i.addedDocuments.size>0?o.Ta=!0:i.modifiedDocuments.size>0?Ae(o.Ta):i.removedDocuments.size>0&&(Ae(o.Ta),o.Ta=!1))}),await Qa(n,r,e)}catch(r){await Ha(r)}}function O0(t,e,n){const r=ne(t);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const i=[];r.da.forEach((s,o)=>{const l=o.view.B_(e);l.snapshot&&i.push(l.snapshot)}),function(o,l){const a=ne(o);a.onlineState=l;let c=!1;a.queries.forEach((u,d)=>{for(const f of d.listeners)f.B_(l)&&(c=!0)}),c&&ig(a)}(r.eventManager,e),i.length&&r.Ea.i_(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}async function CM(t,e,n){const r=ne(t);r.sharedClientState.updateQueryState(e,"rejected",n);const i=r.ma.get(e),s=i&&i.key;if(s){let o=new je(W.comparator);o=o.insert(s,Tt.newNoDocument(s,ee.min()));const l=ae().add(s),a=new Ku(ee.min(),new Map,new je(ge),o,l);await eC(r,a),r.Va=r.Va.remove(s),r.ma.delete(e),sg(r)}else await Bf(r.localStore,e,!1).then(()=>zf(r,e,n)).catch(Ha)}async function PM(t,e){const n=ne(t),r=e.batch.batchId;try{const i=await jD(n.localStore,e);nC(n,r,null),tC(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),await Qa(n,i)}catch(i){await Ha(i)}}async function RM(t,e,n){const r=ne(t);try{const i=await function(o,l){const a=ne(o);return a.persistence.runTransaction("Reject batch","readwrite-primary",c=>{let u;return a.mutationQueue.lookupMutationBatch(c,l).next(d=>(Ae(d!==null),u=d.keys(),a.mutationQueue.removeMutationBatch(c,d))).next(()=>a.mutationQueue.performConsistencyCheck(c)).next(()=>a.documentOverlayCache.removeOverlaysForBatchId(c,u,l)).next(()=>a.localDocuments.recalculateAndSaveOverlaysForDocumentKeys(c,u)).next(()=>a.localDocuments.getDocuments(c,u))})}(r.localStore,e);nC(r,e,n),tC(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),await Qa(r,i)}catch(i){await Ha(i)}}function tC(t,e){(t.pa.get(e)||[]).forEach(n=>{n.resolve()}),t.pa.delete(e)}function nC(t,e,n){const r=ne(t);let i=r.ga[r.currentUser.toKey()];if(i){const s=i.get(e);s&&(n?s.reject(n):s.resolve(),i=i.remove(e)),r.ga[r.currentUser.toKey()]=i}}function zf(t,e,n=null){t.sharedClientState.removeLocalQueryTarget(e);for(const r of t.Aa.get(e))t.da.delete(r),n&&t.Ea.ba(r,n);t.Aa.delete(e),t.isPrimaryClient&&t.fa.Rr(e).forEach(r=>{t.fa.containsKey(r)||rC(t,r)})}function rC(t,e){t.Ra.delete(e.path.canonicalString());const n=t.Va.get(e);n!==null&&(Ww(t.remoteStore,n),t.Va=t.Va.remove(e),t.ma.delete(n),sg(t))}function N0(t,e,n){for(const r of n)r instanceof Xw?(t.fa.addReference(r.key,e),kM(t,r)):r instanceof Zw?(q("SyncEngine","Document no longer in limbo: "+r.key),t.fa.removeReference(r.key,e),t.fa.containsKey(r.key)||rC(t,r.key)):Z()}function kM(t,e){const n=e.key,r=n.path.canonicalString();t.Va.get(n)||t.Ra.has(r)||(q("SyncEngine","New document in limbo: "+n),t.Ra.add(r),sg(t))}function sg(t){for(;t.Ra.size>0&&t.Va.size<t.maxConcurrentLimboResolutions;){const e=t.Ra.values().next().value;t.Ra.delete(e);const n=new W(Fe.fromString(e)),r=t.ya.next();t.ma.set(r,new vM(n)),t.Va=t.Va.insert(n,r),Hw(t.remoteStore,new xr(fr(Hm(n.path)),r,"TargetPurposeLimboResolution",Fm.ae))}}async function Qa(t,e,n){const r=ne(t),i=[],s=[],o=[];r.da.isEmpty()||(r.da.forEach((l,a)=>{o.push(r.Sa(a,e,n).then(c=>{if((c||n)&&r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,c!=null&&c.fromCache?"not-current":"current"),c){i.push(c);const u=Xm.Qi(a.targetId,c);s.push(u)}}))}),await Promise.all(o),r.Ea.i_(i),await async function(a,c){const u=ne(a);try{await u.persistence.runTransaction("notifyLocalViewChanges","readwrite",d=>D.forEach(c,f=>D.forEach(f.ki,p=>u.persistence.referenceDelegate.addReference(d,f.targetId,p)).next(()=>D.forEach(f.qi,p=>u.persistence.referenceDelegate.removeReference(d,f.targetId,p)))))}catch(d){if(!Wa(d))throw d;q("LocalStore","Failed to update sequence numbers: "+d)}for(const d of c){const f=d.targetId;if(!d.fromCache){const p=u.Yi.get(f),y=p.snapshotVersion,v=p.withLastLimboFreeSnapshotVersion(y);u.Yi=u.Yi.insert(f,v)}}}(r.localStore,s))}async function IM(t,e){const n=ne(t);if(!n.currentUser.isEqual(e)){q("SyncEngine","User change. New user:",e.toKey());const r=await $w(n.localStore,e);n.currentUser=e,function(s,o){s.pa.forEach(l=>{l.forEach(a=>{a.reject(new G(x.CANCELLED,o))})}),s.pa.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),await Qa(n,r.ns)}}function AM(t,e){const n=ne(t),r=n.ma.get(e);if(r&&r.Ta)return ae().add(r.key);{let i=ae();const s=n.Aa.get(e);if(!s)return i;for(const o of s){const l=n.da.get(o);i=i.unionWith(l.view.sa)}return i}}function bM(t){const e=ne(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=eC.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=AM.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=CM.bind(null,e),e.Ea.i_=fM.bind(null,e.eventManager),e.Ea.ba=pM.bind(null,e.eventManager),e}function xM(t){const e=ne(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=PM.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=RM.bind(null,e),e}class D0{constructor(){this.synchronizeTabs=!1}async initialize(e){this.serializer=Gu(e.databaseInfo.databaseId),this.sharedClientState=this.createSharedClientState(e),this.persistence=this.createPersistence(e),await this.persistence.start(),this.localStore=this.createLocalStore(e),this.gcScheduler=this.createGarbageCollectionScheduler(e,this.localStore),this.indexBackfillerScheduler=this.createIndexBackfillerScheduler(e,this.localStore)}createGarbageCollectionScheduler(e,n){return null}createIndexBackfillerScheduler(e,n){return null}createLocalStore(e){return LD(this.persistence,new DD,e.initialUser,this.serializer)}createPersistence(e){return new OD(Ym.jr,this.serializer)}createSharedClientState(e){return new zD}async terminate(){this.gcScheduler&&this.gcScheduler.stop(),await this.sharedClientState.shutdown(),await this.persistence.shutdown()}}class OM{async initialize(e,n){this.localStore||(this.localStore=e.localStore,this.sharedClientState=e.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!e.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>O0(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=IM.bind(null,this.syncEngine),await lM(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(e){return function(){return new uM}()}createDatastore(e){const n=Gu(e.databaseInfo.databaseId),r=function(s){return new KD(s)}(e.databaseInfo);return function(s,o,l,a){return new QD(s,o,l,a)}(e.authCredentials,e.appCheckCredentials,r,n)}createRemoteStore(e){return function(r,i,s,o,l){return new XD(r,i,s,o,l)}(this.localStore,this.datastore,e.asyncQueue,n=>O0(this.syncEngine,n,0),function(){return A0.v()?new A0:new qD}())}createSyncEngine(e,n){return function(i,s,o,l,a,c,u){const d=new _M(i,s,o,l,a,c);return u&&(d.wa=!0),d}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,e.initialUser,e.maxConcurrentLimboResolutions,n)}terminate(){return async function(n){const r=ne(n);q("RemoteStore","RemoteStore shutting down."),r.w_.add(5),await Ja(r),r.b_.shutdown(),r.D_.set("Unknown")}(this.remoteStore)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class NM{constructor(e){this.observer=e,this.muted=!1}next(e){this.observer.next&&this.Ca(this.observer.next,e)}error(e){this.observer.error?this.Ca(this.observer.error,e):hr("Uncaught Error in snapshot listener:",e.toString())}Fa(){this.muted=!0}Ca(e,n){this.muted||setTimeout(()=>{this.muted||e(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DM{constructor(e,n,r,i){this.authCredentials=e,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=i,this.user=_t.UNAUTHENTICATED,this.clientId=lw.V(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this.authCredentials.start(r,async s=>{q("FirestoreClient","Received user=",s.uid),await this.authCredentialListener(s),this.user=s}),this.appCheckCredentials.start(r,s=>(q("FirestoreClient","Received new app check token=",s),this.appCheckCredentialListener(s,this.user)))}async getConfiguration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(e){this.authCredentialListener=e}setAppCheckTokenChangeListener(e){this.appCheckCredentialListener=e}verifyNotTerminated(){if(this.asyncQueue.isShuttingDown)throw new G(x.FAILED_PRECONDITION,"The client has already been terminated.")}terminate(){this.asyncQueue.enterRestrictedMode();const e=new zr;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),e.resolve()}catch(n){const r=rg(n,"Failed to shutdown persistence");e.reject(r)}}),e.promise}}async function eh(t,e){t.asyncQueue.verifyOperationInProgress(),q("FirestoreClient","Initializing OfflineComponentProvider");const n=await t.getConfiguration();await e.initialize(n);let r=n.initialUser;t.setCredentialChangeListener(async i=>{r.isEqual(i)||(await $w(e.localStore,i),r=i)}),e.persistence.setDatabaseDeletedListener(()=>t.terminate()),t._offlineComponents=e}async function M0(t,e){t.asyncQueue.verifyOperationInProgress();const n=await LM(t);q("FirestoreClient","Initializing OnlineComponentProvider");const r=await t.getConfiguration();await e.initialize(n,r),t.setCredentialChangeListener(i=>b0(e.remoteStore,i)),t.setAppCheckTokenChangeListener((i,s)=>b0(e.remoteStore,s)),t._onlineComponents=e}function MM(t){return t.name==="FirebaseError"?t.code===x.FAILED_PRECONDITION||t.code===x.UNIMPLEMENTED:!(typeof DOMException<"u"&&t instanceof DOMException)||t.code===22||t.code===20||t.code===11}async function LM(t){if(!t._offlineComponents)if(t._uninitializedComponentsProvider){q("FirestoreClient","Using user provided OfflineComponentProvider");try{await eh(t,t._uninitializedComponentsProvider._offline)}catch(e){const n=e;if(!MM(n))throw n;Ps("Error using user provided cache. Falling back to memory cache: "+n),await eh(t,new D0)}}else q("FirestoreClient","Using default OfflineComponentProvider"),await eh(t,new D0);return t._offlineComponents}async function iC(t){return t._onlineComponents||(t._uninitializedComponentsProvider?(q("FirestoreClient","Using user provided OnlineComponentProvider"),await M0(t,t._uninitializedComponentsProvider._online)):(q("FirestoreClient","Using default OnlineComponentProvider"),await M0(t,new OM))),t._onlineComponents}function jM(t){return iC(t).then(e=>e.syncEngine)}async function VM(t){const e=await iC(t),n=e.eventManager;return n.onListen=EM.bind(null,e.syncEngine),n.onUnlisten=SM.bind(null,e.syncEngine),n}function FM(t,e,n={}){const r=new zr;return t.asyncQueue.enqueueAndForget(async()=>function(s,o,l,a,c){const u=new NM({next:f=>{o.enqueueAndForget(()=>hM(s,d));const p=f.docs.has(l);!p&&f.fromCache?c.reject(new G(x.UNAVAILABLE,"Failed to get document because the client is offline.")):p&&f.fromCache&&a&&a.source==="server"?c.reject(new G(x.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):c.resolve(f)},error:f=>c.reject(f)}),d=new mM(Hm(l.path),u,{includeMetadataChanges:!0,G_:!0});return dM(s,d)}(await VM(t),t.asyncQueue,e,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function sC(t){const e={};return t.timeoutSeconds!==void 0&&(e.timeoutSeconds=t.timeoutSeconds),e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const L0=new Map;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function UM(t,e,n){if(!n)throw new G(x.INVALID_ARGUMENT,`Function ${t}() cannot be called with an empty ${e}.`)}function $M(t,e,n,r){if(e===!0&&r===!0)throw new G(x.INVALID_ARGUMENT,`${t} and ${n} cannot be used together.`)}function j0(t){if(!W.isDocumentKey(t))throw new G(x.INVALID_ARGUMENT,`Invalid document reference. Document references must have an even number of segments, but ${t} has ${t.length}.`)}function og(t){if(t===void 0)return"undefined";if(t===null)return"null";if(typeof t=="string")return t.length>20&&(t=`${t.substring(0,20)}...`),JSON.stringify(t);if(typeof t=="number"||typeof t=="boolean")return""+t;if(typeof t=="object"){if(t instanceof Array)return"an array";{const e=function(r){return r.constructor?r.constructor.name:null}(t);return e?`a custom ${e} object`:"an object"}}return typeof t=="function"?"a function":Z()}function Ta(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new G(x.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=og(t);throw new G(x.INVALID_ARGUMENT,`Expected type '${e.name}', but it was: ${n}`)}}return t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class V0{constructor(e){var n,r;if(e.host===void 0){if(e.ssl!==void 0)throw new G(x.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=e.host,this.ssl=(n=e.ssl)===null||n===void 0||n;if(this.credentials=e.credentials,this.ignoreUndefinedProperties=!!e.ignoreUndefinedProperties,this.localCache=e.localCache,e.cacheSizeBytes===void 0)this.cacheSizeBytes=41943040;else{if(e.cacheSizeBytes!==-1&&e.cacheSizeBytes<1048576)throw new G(x.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=e.cacheSizeBytes}$M("experimentalForceLongPolling",e.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",e.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!e.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:e.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!e.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=sC((r=e.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(s){if(s.timeoutSeconds!==void 0){if(isNaN(s.timeoutSeconds))throw new G(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (must not be NaN)`);if(s.timeoutSeconds<5)throw new G(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (minimum allowed value is 5)`);if(s.timeoutSeconds>30)throw new G(x.INVALID_ARGUMENT,`invalid long polling timeout: ${s.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!e.useFetchStreams}isEqual(e){return this.host===e.host&&this.ssl===e.ssl&&this.credentials===e.credentials&&this.cacheSizeBytes===e.cacheSizeBytes&&this.experimentalForceLongPolling===e.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===e.experimentalAutoDetectLongPolling&&function(r,i){return r.timeoutSeconds===i.timeoutSeconds}(this.experimentalLongPollingOptions,e.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===e.ignoreUndefinedProperties&&this.useFetchStreams===e.useFetchStreams}}class ag{constructor(e,n,r,i){this._authCredentials=e,this._appCheckCredentials=n,this._databaseId=r,this._app=i,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new V0({}),this._settingsFrozen=!1}get app(){if(!this._app)throw new G(x.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!==void 0}_setSettings(e){if(this._settingsFrozen)throw new G(x.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new V0(e),e.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new tN;switch(r.type){case"firstParty":return new sN(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new G(x.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(e.credentials))}_getSettings(){return this._settings}_freezeSettings(){return this._settingsFrozen=!0,this._settings}_delete(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=L0.get(n);r&&(q("ComponentProvider","Removing Datastore"),L0.delete(n),r.terminate())}(this),Promise.resolve()}}function BM(t,e,n,r={}){var i;const s=(t=Ta(t,ag))._getSettings(),o=`${e}:${n}`;if(s.host!=="firestore.googleapis.com"&&s.host!==o&&Ps("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used."),t._setSettings(Object.assign(Object.assign({},s),{host:o,ssl:!1})),r.mockUserToken){let l,a;if(typeof r.mockUserToken=="string")l=r.mockUserToken,a=_t.MOCK_USER;else{l=gA(r.mockUserToken,(i=t._app)===null||i===void 0?void 0:i.options.projectId);const c=r.mockUserToken.sub||r.mockUserToken.user_id;if(!c)throw new G(x.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");a=new _t(c)}t._authCredentials=new nN(new aw(l,a))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lg{constructor(e,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=e}withConverter(e){return new lg(this.firestore,e,this._query)}}class on{constructor(e,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=e}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new Sa(this.firestore,this.converter,this._key.path.popLast())}withConverter(e){return new on(this.firestore,e,this._key)}}class Sa extends lg{constructor(e,n,r){super(e,n,Hm(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const e=this._path.popLast();return e.isEmpty()?null:new on(this.firestore,null,new W(e))}withConverter(e){return new Sa(this.firestore,e,this._path)}}function qf(t,e,...n){if(t=un(t),arguments.length===1&&(e=lw.V()),UM("doc","path",e),t instanceof ag){const r=Fe.fromString(e,...n);return j0(r),new on(t,null,new W(r))}{if(!(t instanceof on||t instanceof Sa))throw new G(x.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=t._path.child(Fe.fromString(e,...n));return j0(r),new on(t.firestore,t instanceof Sa?t.converter:null,new W(r))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zM{constructor(){this.Ga=Promise.resolve(),this.za=[],this.ja=!1,this.Ha=[],this.Ja=null,this.Ya=!1,this.Za=!1,this.Xa=[],this.$o=new zw(this,"async_queue_retry"),this.eu=()=>{const n=Zd();n&&q("AsyncQueue","Visibility state changed to "+n.visibilityState),this.$o.Bo()};const e=Zd();e&&typeof e.addEventListener=="function"&&e.addEventListener("visibilitychange",this.eu)}get isShuttingDown(){return this.ja}enqueueAndForget(e){this.enqueue(e)}enqueueAndForgetEvenWhileRestricted(e){this.tu(),this.nu(e)}enterRestrictedMode(e){if(!this.ja){this.ja=!0,this.Za=e||!1;const n=Zd();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.eu)}}enqueue(e){if(this.tu(),this.ja)return new Promise(()=>{});const n=new zr;return this.nu(()=>this.ja&&this.Za?Promise.resolve():(e().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(e){this.enqueueAndForget(()=>(this.za.push(e),this.ru()))}async ru(){if(this.za.length!==0){try{await this.za[0](),this.za.shift(),this.$o.reset()}catch(e){if(!Wa(e))throw e;q("AsyncQueue","Operation failed with retryable error: "+e)}this.za.length>0&&this.$o.Oo(()=>this.ru())}}nu(e){const n=this.Ga.then(()=>(this.Ya=!0,e().catch(r=>{this.Ja=r,this.Ya=!1;const i=function(o){let l=o.message||"";return o.stack&&(l=o.stack.includes(o.message)?o.stack:o.message+`
`+o.stack),l}(r);throw hr("INTERNAL UNHANDLED ERROR: ",i),r}).then(r=>(this.Ya=!1,r))));return this.Ga=n,n}enqueueAfterDelay(e,n,r){this.tu(),this.Xa.indexOf(e)>-1&&(n=0);const i=ng.createAndSchedule(this,e,n,r,s=>this.iu(s));return this.Ha.push(i),i}tu(){this.Ja&&Z()}verifyOperationInProgress(){}async su(){let e;do e=this.Ga,await e;while(e!==this.Ga)}ou(e){for(const n of this.Ha)if(n.timerId===e)return!0;return!1}_u(e){return this.su().then(()=>{this.Ha.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Ha)if(n.skipDelay(),e!=="all"&&n.timerId===e)break;return this.su()})}au(e){this.Xa.push(e)}iu(e){const n=this.Ha.indexOf(e);this.Ha.splice(n,1)}}class cg extends ag{constructor(e,n,r,i){super(e,n,r,i),this.type="firestore",this._queue=function(){return new zM}(),this._persistenceKey=(i==null?void 0:i.name)||"[DEFAULT]"}_terminate(){return this._firestoreClient||aC(this),this._firestoreClient.terminate()}}function Hf(t,e){const n=typeof t=="object"?t:PT(),r=typeof t=="string"?t:e||"(default)",i=om(n,"firestore").getImmediate({identifier:r});if(!i._initialized){const s=pA("firestore");s&&BM(i,...s)}return i}function oC(t){return t._firestoreClient||aC(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function aC(t){var e,n,r;const i=t._freezeSettings(),s=function(l,a,c,u){return new yN(l,a,c,u.host,u.ssl,u.experimentalForceLongPolling,u.experimentalAutoDetectLongPolling,sC(u.experimentalLongPollingOptions),u.useFetchStreams)}(t._databaseId,((e=t._app)===null||e===void 0?void 0:e.options.appId)||"",t._persistenceKey,i);t._firestoreClient=new DM(t._authCredentials,t._appCheckCredentials,t._queue,s),!((n=i.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=i.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(t._firestoreClient._uninitializedComponentsProvider={_offlineKind:i.localCache.kind,_offline:i.localCache._offlineComponentProvider,_online:i.localCache._onlineComponentProvider})}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class xs{constructor(e){this._byteString=e}static fromBase64String(e){try{return new xs(At.fromBase64String(e))}catch(n){throw new G(x.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(e){return new xs(At.fromUint8Array(e))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(e){return this._byteString.isEqual(e._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ug{constructor(...e){for(let n=0;n<e.length;++n)if(e[n].length===0)throw new G(x.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new St(e)}isEqual(e){return this._internalPath.isEqual(e._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lC{constructor(e){this._methodName=e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dg{constructor(e,n){if(!isFinite(e)||e<-90||e>90)throw new G(x.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+e);if(!isFinite(n)||n<-180||n>180)throw new G(x.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=e,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(e){return this._lat===e._lat&&this._long===e._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(e){return ge(this._lat,e._lat)||ge(this._long,e._long)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const qM=/^__.*__$/;class HM{constructor(e,n,r){this.data=e,this.fieldMask=n,this.fieldTransforms=r}toMutation(e,n){return this.fieldMask!==null?new Di(e,this.data,this.fieldMask,n,this.fieldTransforms):new Ka(e,this.data,n,this.fieldTransforms)}}function cC(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Z()}}class hg{constructor(e,n,r,i,s,o){this.settings=e,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=i,s===void 0&&this.uu(),this.fieldTransforms=s||[],this.fieldMask=o||[]}get path(){return this.settings.path}get cu(){return this.settings.cu}lu(e){return new hg(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}hu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.lu({path:r,Pu:!1});return i.Iu(e),i}Tu(e){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(e),i=this.lu({path:r,Pu:!1});return i.uu(),i}Eu(e){return this.lu({path:void 0,Pu:!0})}du(e){return ru(e,this.settings.methodName,this.settings.Au||!1,this.path,this.settings.Ru)}contains(e){return this.fieldMask.find(n=>e.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>e.isPrefixOf(n.field))!==void 0}uu(){if(this.path)for(let e=0;e<this.path.length;e++)this.Iu(this.path.get(e))}Iu(e){if(e.length===0)throw this.du("Document fields must not be empty");if(cC(this.cu)&&qM.test(e))throw this.du('Document fields cannot begin and end with "__"')}}class WM{constructor(e,n,r){this.databaseId=e,this.ignoreUndefinedProperties=n,this.serializer=r||Gu(e)}Vu(e,n,r,i=!1){return new hg({cu:e,methodName:n,Ru:r,path:St.emptyPath(),Pu:!1,Au:i},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function KM(t){const e=t._freezeSettings(),n=Gu(t._databaseId);return new WM(t._databaseId,!!e.ignoreUndefinedProperties,n)}function GM(t,e,n,r,i,s={}){const o=t.Vu(s.merge||s.mergeFields?2:0,e,n,i);fC("Data must be an object, but it was:",o,r);const l=dC(r,o);let a,c;if(s.merge)a=new Tn(o.fieldMask),c=o.fieldTransforms;else if(s.mergeFields){const u=[];for(const d of s.mergeFields){const f=JM(e,d,n);if(!o.contains(f))throw new G(x.INVALID_ARGUMENT,`Field '${f}' is specified in your field mask but missing from your input data.`);YM(u,f)||u.push(f)}a=new Tn(u),c=o.fieldTransforms.filter(d=>a.covers(d.field))}else a=null,c=o.fieldTransforms;return new HM(new nn(l),a,c)}function uC(t,e){if(hC(t=un(t)))return fC("Unsupported field value:",e,t),dC(t,e);if(t instanceof lC)return function(r,i){if(!cC(i.cu))throw i.du(`${r._methodName}() can only be used with update() and set()`);if(!i.path)throw i.du(`${r._methodName}() is not currently supported inside arrays`);const s=r._toFieldTransform(i);s&&i.fieldTransforms.push(s)}(t,e),null;if(t===void 0&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Pu&&e.cu!==4)throw e.du("Nested arrays are not supported");return function(r,i){const s=[];let o=0;for(const l of r){let a=uC(l,i.Eu(o));a==null&&(a={nullValue:"NULL_VALUE"}),s.push(a),o++}return{arrayValue:{values:s}}}(t,e)}return function(r,i){if((r=un(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return $N(i.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const s=Xe.fromDate(r);return{timestampValue:tu(i.serializer,s)}}if(r instanceof Xe){const s=new Xe(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:tu(i.serializer,s)}}if(r instanceof dg)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof xs)return{bytesValue:Mw(i.serializer,r._byteString)};if(r instanceof on){const s=i.databaseId,o=r.firestore._databaseId;if(!o.isEqual(s))throw i.du(`Document reference is for database ${o.projectId}/${o.database} but should be for database ${s.projectId}/${s.database}`);return{referenceValue:Jm(r.firestore._databaseId||i.databaseId,r._key.path)}}throw i.du(`Unsupported field value: ${og(r)}`)}(t,e)}function dC(t,e){const n={};return cw(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):zs(t,(r,i)=>{const s=uC(i,e.hu(r));s!=null&&(n[r]=s)}),{mapValue:{fields:n}}}function hC(t){return!(typeof t!="object"||t===null||t instanceof Array||t instanceof Date||t instanceof Xe||t instanceof dg||t instanceof xs||t instanceof on||t instanceof lC)}function fC(t,e,n){if(!hC(n)||!function(i){return typeof i=="object"&&i!==null&&(Object.getPrototypeOf(i)===Object.prototype||Object.getPrototypeOf(i)===null)}(n)){const r=og(n);throw r==="an object"?e.du(t+" a custom object"):e.du(t+" "+r)}}function JM(t,e,n){if((e=un(e))instanceof ug)return e._internalPath;if(typeof e=="string")return pC(t,e);throw ru("Field path arguments must be of type string or ",t,!1,void 0,n)}const QM=new RegExp("[~\\*/\\[\\]]");function pC(t,e,n){if(e.search(QM)>=0)throw ru(`Invalid field path (${e}). Paths must not contain '~', '*', '/', '[', or ']'`,t,!1,void 0,n);try{return new ug(...e.split("."))._internalPath}catch{throw ru(`Invalid field path (${e}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,t,!1,void 0,n)}}function ru(t,e,n,r,i){const s=r&&!r.isEmpty(),o=i!==void 0;let l=`Function ${e}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let a="";return(s||o)&&(a+=" (found",s&&(a+=` in field ${r}`),o&&(a+=` in document ${i}`),a+=")"),new G(x.INVALID_ARGUMENT,l+t+a)}function YM(t,e){return t.some(n=>n.isEqual(e))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mC{constructor(e,n,r,i,s){this._firestore=e,this._userDataWriter=n,this._key=r,this._document=i,this._converter=s}get id(){return this._key.path.lastSegment()}get ref(){return new on(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const e=new XM(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(e)}return this._userDataWriter.convertValue(this._document.data.value)}}get(e){if(this._document){const n=this._document.data.field(gC("DocumentSnapshot.get",e));if(n!==null)return this._userDataWriter.convertValue(n)}}}class XM extends mC{data(){return super.data()}}function gC(t,e){return typeof e=="string"?pC(t,e):e instanceof ug?e._internalPath:e._delegate._internalPath}class ZM{convertValue(e,n="none"){switch(Ii(e)){case 0:return null;case 1:return e.booleanValue;case 2:return We(e.integerValue||e.doubleValue);case 3:return this.convertTimestamp(e.timestampValue);case 4:return this.convertServerTimestamp(e,n);case 5:return e.stringValue;case 6:return this.convertBytes(ki(e.bytesValue));case 7:return this.convertReference(e.referenceValue);case 8:return this.convertGeoPoint(e.geoPointValue);case 9:return this.convertArray(e.arrayValue,n);case 10:return this.convertObject(e.mapValue,n);default:throw Z()}}convertObject(e,n){return this.convertObjectMap(e.fields,n)}convertObjectMap(e,n="none"){const r={};return zs(e,(i,s)=>{r[i]=this.convertValue(s,n)}),r}convertGeoPoint(e){return new dg(We(e.latitude),We(e.longitude))}convertArray(e,n){return(e.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(e,n){switch(n){case"previous":const r=$m(e);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(ga(e));default:return null}}convertTimestamp(e){const n=Kr(e);return new Xe(n.seconds,n.nanos)}convertDocumentKey(e,n){const r=Fe.fromString(e);Ae(Uw(r));const i=new ya(r.get(1),r.get(3)),s=new W(r.popFirst(5));return i.isEqual(n)||hr(`Document ${s} contains a document reference within a different database (${i.projectId}/${i.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),s}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function eL(t,e,n){let r;return r=t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e,r}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tL{constructor(e,n){this.hasPendingWrites=e,this.fromCache=n}isEqual(e){return this.hasPendingWrites===e.hasPendingWrites&&this.fromCache===e.fromCache}}class yC extends mC{constructor(e,n,r,i,s,o){super(e,n,r,i,o),this._firestore=e,this._firestoreImpl=e,this.metadata=s}exists(){return super.exists()}data(e={}){if(this._document){if(this._converter){const n=new nL(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,e)}return this._userDataWriter.convertValue(this._document.data.value,e.serverTimestamps)}}get(e,n={}){if(this._document){const r=this._document.data.field(gC("DocumentSnapshot.get",e));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class nL extends yC{data(e={}){return super.data(e)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function vC(t){t=Ta(t,on);const e=Ta(t.firestore,cg);return FM(oC(e),t._key).then(n=>oL(e,t,n))}class rL extends ZM{constructor(e){super(),this.firestore=e}convertBytes(e){return new xs(e)}convertReference(e){const n=this.convertDocumentKey(e,this.firestore._databaseId);return new on(this.firestore,null,n)}}function iL(t,e,n){t=Ta(t,on);const r=Ta(t.firestore,cg),i=eL(t.converter,e,n);return sL(r,[GM(KM(r),"setDoc",t._key,i,t.converter!==null,n).toMutation(t._key,ir.none())])}function sL(t,e){return function(r,i){const s=new zr;return r.asyncQueue.enqueueAndForget(async()=>wM(await jM(r),i,s)),s.promise}(oC(t),e)}function oL(t,e,n){const r=n.docs.get(e._key),i=new rL(t);return new yC(t,i,e._key,r,new tL(n.hasPendingWrites,n.fromCache),e.converter)}(function(e,n=!0){(function(i){Bs=i})(Vs),Ss(new Si("firestore",(r,{instanceIdentifier:i,options:s})=>{const o=r.getProvider("app").getImmediate(),l=new cg(new rN(r.getProvider("auth-internal")),new aN(r.getProvider("app-check-internal")),function(c,u){if(!Object.prototype.hasOwnProperty.apply(c.options,["projectId"]))throw new G(x.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new ya(c.options.projectId,u)}(o,i),o);return s=Object.assign({useFetchStreams:n},s),l._setSettings(s),l},"PUBLIC").setMultipleInstances(!0)),Br(o0,"4.1.1",e),Br(o0,"4.1.1","esm2017")})();function aL(t){const[e,n]=M.useState(!1);return h.jsx(h.Fragment,{children:t.currentUser===void 0?h.jsxs(h.Fragment,{children:[h.jsxs("nav",{className:"login",children:[h.jsx("button",{"data-selected":e===!1,onClick:()=>{n(!1)},children:"LOGIN"}),h.jsx("button",{"data-selected":e===!0,onClick:()=>{n(!0)},children:"REGISTER"})]}),h.jsx("br",{}),h.jsxs("main",{className:"login",children:[e?h.jsx("input",{id:"login-name",type:"text",placeholder:"name"}):h.jsx(h.Fragment,{}),h.jsx("input",{type:"text",id:"login-email",placeholder:"email"}),h.jsx("input",{type:"password",id:"login-password",placeholder:"password"}),h.jsxs("p",{children:["remember this account",h.jsx("input",{type:"checkbox",style:{display:"inline-block"},placeholder:"password",id:"rememberacc"})]})]}),h.jsxs("center",{children:[" ",h.jsx("button",{onClick:()=>{if(t.admin===void 0){alert("firebase couldnot connect");return}const r=K2(t.admin),i=document.getElementById("login-email").value,s=document.getElementById("login-password").value;if(e){const o=document.getElementById("login-name").value;bx(r,i,s).then(l=>{Nx(l.user,{displayName:o});const a=l.user.uid;if(document.userid=a,t.admin===void 0){alert("firebase couldnot connect");return}const c=Hf(t.admin),u={email:i,name:o,score:0,id:a};iL(qf(c,`Users/${a}`),u),u.id=a,t.onLogin(u,document.getElementById("rememberacc").checked??!1)}).catch(l=>{alert(l)})}else xx(r,i,s).then(o=>{const l=o.user.uid;document.userid=l,t.admin!==void 0?vC(qf(Hf(t.admin),`Users/${l}`)).then(a=>{const c=a.data();c.id=l,t.onLogin(c,document.getElementById("rememberacc").checked??!1)}).catch(a=>{alert(a)}):alert("couldnt connect to firebase")}).catch(o=>{alert(o)})},children:e?"register":"login"})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("div",{className:"user-credentials",children:[h.jsxs("p",{children:[t.currentUser.name," ",h.jsxs("p",{style:{opacity:.5},children:["[",h.jsx("p",{style:{fontStyle:"italic"},children:t.currentUser.email}),"]"]})]}),h.jsx("button",{onClick:()=>{document.userid=void 0,t.onLogout()},children:"loggout"})]}),h.jsx("h2",{children:"User Statistics"}),h.jsx("table",{children:h.jsxs("tr",{children:[h.jsx("td",{children:"score"}),h.jsx("td",{children:t.currentUser.score})]})})]})})}function lL(t){const[e,n]=M.useState(0),[r,i]=M.useState(0),[s,o]=M.useState(0);return h.jsxs(h.Fragment,{children:[h.jsxs("nav",{className:"join",children:[h.jsx("button",{"data-tooltip-hover":"online","data-select":e===0,onClick:()=>{n(0)},children:h.jsx("img",{src:"online.png",alt:""})}),h.jsx("button",{"data-tooltip-hover":"computer","data-select":e===1,onClick:()=>{n(1)},children:h.jsx("img",{src:"bot.png",alt:""})})]}),h.jsx("br",{}),e===1?h.jsxs(h.Fragment,{children:[h.jsx("p",{children:"please enter bots count:"}),h.jsx(Cr,{step:1,min:1,max:10,defaultValue:1,onChange:l=>{i(parseInt(l.currentTarget.value))}}),h.jsx("p",{children:"please enter bots difficulty:"}),h.jsx(Cr,{step:1,min:1,max:10,onChange:l=>{o(parseInt(l.currentTarget.value))},defaultValue:5}),h.jsx("p",{children:"please enter name:"}),t.fbUser===void 0?h.jsx("input",{type:"text",id:"name",onChange:l=>{t.SetName(l.currentTarget.value)},defaultValue:t.name,placeholder:"enter name"}):h.jsx("input",{type:"text",id:"name",disabled:!0,value:t.fbUser.name,placeholder:"enter name"}),h.jsx("center",{children:h.jsx("button",{onClick:()=>{t.joinBots(r,s)},disabled:t.disabled,children:"join"})})]}):h.jsxs(h.Fragment,{children:[h.jsx("p",{children:"please enter your code:"}),h.jsx("input",{type:"text",id:"name",onChange:l=>t.SetAddress(l.currentTarget.value),defaultValue:t.addr,placeholder:"enter code"}),h.jsx("p",{children:"please enter your name:"}),t.fbUser===void 0?h.jsx("input",{type:"text",id:"name",onChange:l=>{t.SetName(l.currentTarget.value)},defaultValue:t.name,placeholder:"enter name"}):h.jsx("input",{type:"text",id:"name",disabled:!0,value:t.name,placeholder:"enter name"}),h.jsx("center",{children:h.jsx("button",{onClick:()=>{t.joinViaCode()},disabled:t.disabled,children:"join"})})]})]})}const cL={apiKey:"AIzaSyAWWAOKvGp2rJg2LhVincjI2oPtC9uscds",authDomain:"monopoly-react.firebaseapp.com",projectId:"monopoly-react",storageBucket:"monopoly-react.appspot.com",messagingSenderId:"530562047914",appId:"1:530562047914:web:7c8a437bbff0abd89f55d3",measurementId:"G-PPJLPZZLZ0"},uL={url:"https://api.jsonbin.io/v3/b/64dff3e3b89b1e2299d2cfcf",masterKey:"$2b$10$Wolgp1Pl5jFGDnkTsivU/.pRmpFnK7gC00691IZleh4TplMzzo6bG",accessKey:"$2b$10$j9L0hVDvDISi4oZqAB.hwOhZpH9MdF6xD0d/X5gjLt/nYanpSzbbi"},xn={firebase:cL,JSONBin:uL};var dL="firebase",hL="10.2.0";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */Br(dL,hL,"app");function _C(t,e){return function(){return t.apply(e,arguments)}}const{toString:fL}=Object.prototype,{getPrototypeOf:fg}=Object,Yu=(t=>e=>{const n=fL.call(e);return t[n]||(t[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Wn=t=>(t=t.toLowerCase(),e=>Yu(e)===t),Xu=t=>e=>typeof e===t,{isArray:Ws}=Array,wa=Xu("undefined");function pL(t){return t!==null&&!wa(t)&&t.constructor!==null&&!wa(t.constructor)&&an(t.constructor.isBuffer)&&t.constructor.isBuffer(t)}const EC=Wn("ArrayBuffer");function mL(t){let e;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?e=ArrayBuffer.isView(t):e=t&&t.buffer&&EC(t.buffer),e}const gL=Xu("string"),an=Xu("function"),TC=Xu("number"),Zu=t=>t!==null&&typeof t=="object",yL=t=>t===!0||t===!1,ic=t=>{if(Yu(t)!=="object")return!1;const e=fg(t);return(e===null||e===Object.prototype||Object.getPrototypeOf(e)===null)&&!(Symbol.toStringTag in t)&&!(Symbol.iterator in t)},vL=Wn("Date"),_L=Wn("File"),EL=Wn("Blob"),TL=Wn("FileList"),SL=t=>Zu(t)&&an(t.pipe),wL=t=>{let e;return t&&(typeof FormData=="function"&&t instanceof FormData||an(t.append)&&((e=Yu(t))==="formdata"||e==="object"&&an(t.toString)&&t.toString()==="[object FormData]"))},CL=Wn("URLSearchParams"),PL=t=>t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function Ya(t,e,{allOwnKeys:n=!1}={}){if(t===null||typeof t>"u")return;let r,i;if(typeof t!="object"&&(t=[t]),Ws(t))for(r=0,i=t.length;r<i;r++)e.call(null,t[r],r,t);else{const s=n?Object.getOwnPropertyNames(t):Object.keys(t),o=s.length;let l;for(r=0;r<o;r++)l=s[r],e.call(null,t[l],l,t)}}function SC(t,e){e=e.toLowerCase();const n=Object.keys(t);let r=n.length,i;for(;r-- >0;)if(i=n[r],e===i.toLowerCase())return i;return null}const wC=(()=>typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global)(),CC=t=>!wa(t)&&t!==wC;function Wf(){const{caseless:t}=CC(this)&&this||{},e={},n=(r,i)=>{const s=t&&SC(e,i)||i;ic(e[s])&&ic(r)?e[s]=Wf(e[s],r):ic(r)?e[s]=Wf({},r):Ws(r)?e[s]=r.slice():e[s]=r};for(let r=0,i=arguments.length;r<i;r++)arguments[r]&&Ya(arguments[r],n);return e}const RL=(t,e,n,{allOwnKeys:r}={})=>(Ya(e,(i,s)=>{n&&an(i)?t[s]=_C(i,n):t[s]=i},{allOwnKeys:r}),t),kL=t=>(t.charCodeAt(0)===65279&&(t=t.slice(1)),t),IL=(t,e,n,r)=>{t.prototype=Object.create(e.prototype,r),t.prototype.constructor=t,Object.defineProperty(t,"super",{value:e.prototype}),n&&Object.assign(t.prototype,n)},AL=(t,e,n,r)=>{let i,s,o;const l={};if(e=e||{},t==null)return e;do{for(i=Object.getOwnPropertyNames(t),s=i.length;s-- >0;)o=i[s],(!r||r(o,t,e))&&!l[o]&&(e[o]=t[o],l[o]=!0);t=n!==!1&&fg(t)}while(t&&(!n||n(t,e))&&t!==Object.prototype);return e},bL=(t,e,n)=>{t=String(t),(n===void 0||n>t.length)&&(n=t.length),n-=e.length;const r=t.indexOf(e,n);return r!==-1&&r===n},xL=t=>{if(!t)return null;if(Ws(t))return t;let e=t.length;if(!TC(e))return null;const n=new Array(e);for(;e-- >0;)n[e]=t[e];return n},OL=(t=>e=>t&&e instanceof t)(typeof Uint8Array<"u"&&fg(Uint8Array)),NL=(t,e)=>{const r=(t&&t[Symbol.iterator]).call(t);let i;for(;(i=r.next())&&!i.done;){const s=i.value;e.call(t,s[0],s[1])}},DL=(t,e)=>{let n;const r=[];for(;(n=t.exec(e))!==null;)r.push(n);return r},ML=Wn("HTMLFormElement"),LL=t=>t.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,r,i){return r.toUpperCase()+i}),F0=(({hasOwnProperty:t})=>(e,n)=>t.call(e,n))(Object.prototype),jL=Wn("RegExp"),PC=(t,e)=>{const n=Object.getOwnPropertyDescriptors(t),r={};Ya(n,(i,s)=>{e(i,s,t)!==!1&&(r[s]=i)}),Object.defineProperties(t,r)},VL=t=>{PC(t,(e,n)=>{if(an(t)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=t[n];if(an(r)){if(e.enumerable=!1,"writable"in e){e.writable=!1;return}e.set||(e.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},FL=(t,e)=>{const n={},r=i=>{i.forEach(s=>{n[s]=!0})};return Ws(t)?r(t):r(String(t).split(e)),n},UL=()=>{},$L=(t,e)=>(t=+t,Number.isFinite(t)?t:e),th="abcdefghijklmnopqrstuvwxyz",U0="0123456789",RC={DIGIT:U0,ALPHA:th,ALPHA_DIGIT:th+th.toUpperCase()+U0},BL=(t=16,e=RC.ALPHA_DIGIT)=>{let n="";const{length:r}=e;for(;t--;)n+=e[Math.random()*r|0];return n};function zL(t){return!!(t&&an(t.append)&&t[Symbol.toStringTag]==="FormData"&&t[Symbol.iterator])}const qL=t=>{const e=new Array(10),n=(r,i)=>{if(Zu(r)){if(e.indexOf(r)>=0)return;if(!("toJSON"in r)){e[i]=r;const s=Ws(r)?[]:{};return Ya(r,(o,l)=>{const a=n(o,i+1);!wa(a)&&(s[l]=a)}),e[i]=void 0,s}}return r};return n(t,0)},HL=Wn("AsyncFunction"),WL=t=>t&&(Zu(t)||an(t))&&an(t.then)&&an(t.catch),P={isArray:Ws,isArrayBuffer:EC,isBuffer:pL,isFormData:wL,isArrayBufferView:mL,isString:gL,isNumber:TC,isBoolean:yL,isObject:Zu,isPlainObject:ic,isUndefined:wa,isDate:vL,isFile:_L,isBlob:EL,isRegExp:jL,isFunction:an,isStream:SL,isURLSearchParams:CL,isTypedArray:OL,isFileList:TL,forEach:Ya,merge:Wf,extend:RL,trim:PL,stripBOM:kL,inherits:IL,toFlatObject:AL,kindOf:Yu,kindOfTest:Wn,endsWith:bL,toArray:xL,forEachEntry:NL,matchAll:DL,isHTMLForm:ML,hasOwnProperty:F0,hasOwnProp:F0,reduceDescriptors:PC,freezeMethods:VL,toObjectSet:FL,toCamelCase:LL,noop:UL,toFiniteNumber:$L,findKey:SC,global:wC,isContextDefined:CC,ALPHABET:RC,generateString:BL,isSpecCompliantForm:zL,toJSONObject:qL,isAsyncFn:HL,isThenable:WL};function he(t,e,n,r,i){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=t,this.name="AxiosError",e&&(this.code=e),n&&(this.config=n),r&&(this.request=r),i&&(this.response=i)}P.inherits(he,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:P.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const kC=he.prototype,IC={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(t=>{IC[t]={value:t}});Object.defineProperties(he,IC);Object.defineProperty(kC,"isAxiosError",{value:!0});he.from=(t,e,n,r,i,s)=>{const o=Object.create(kC);return P.toFlatObject(t,o,function(a){return a!==Error.prototype},l=>l!=="isAxiosError"),he.call(o,t.message,e,n,r,i),o.cause=t,o.name=t.name,s&&Object.assign(o,s),o};const KL=null;function Kf(t){return P.isPlainObject(t)||P.isArray(t)}function AC(t){return P.endsWith(t,"[]")?t.slice(0,-2):t}function $0(t,e,n){return t?t.concat(e).map(function(i,s){return i=AC(i),!n&&s?"["+i+"]":i}).join(n?".":""):e}function GL(t){return P.isArray(t)&&!t.some(Kf)}const JL=P.toFlatObject(P,{},null,function(e){return/^is[A-Z]/.test(e)});function ed(t,e,n){if(!P.isObject(t))throw new TypeError("target must be an object");e=e||new FormData,n=P.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(v,C){return!P.isUndefined(C[v])});const r=n.metaTokens,i=n.visitor||u,s=n.dots,o=n.indexes,a=(n.Blob||typeof Blob<"u"&&Blob)&&P.isSpecCompliantForm(e);if(!P.isFunction(i))throw new TypeError("visitor must be a function");function c(y){if(y===null)return"";if(P.isDate(y))return y.toISOString();if(!a&&P.isBlob(y))throw new he("Blob is not supported. Use a Buffer instead.");return P.isArrayBuffer(y)||P.isTypedArray(y)?a&&typeof Blob=="function"?new Blob([y]):Buffer.from(y):y}function u(y,v,C){let m=y;if(y&&!C&&typeof y=="object"){if(P.endsWith(v,"{}"))v=r?v:v.slice(0,-2),y=JSON.stringify(y);else if(P.isArray(y)&&GL(y)||(P.isFileList(y)||P.endsWith(v,"[]"))&&(m=P.toArray(y)))return v=AC(v),m.forEach(function(E,T){!(P.isUndefined(E)||E===null)&&e.append(o===!0?$0([v],T,s):o===null?v:v+"[]",c(E))}),!1}return Kf(y)?!0:(e.append($0(C,v,s),c(y)),!1)}const d=[],f=Object.assign(JL,{defaultVisitor:u,convertValue:c,isVisitable:Kf});function p(y,v){if(!P.isUndefined(y)){if(d.indexOf(y)!==-1)throw Error("Circular reference detected in "+v.join("."));d.push(y),P.forEach(y,function(m,g){(!(P.isUndefined(m)||m===null)&&i.call(e,m,P.isString(g)?g.trim():g,v,f))===!0&&p(m,v?v.concat(g):[g])}),d.pop()}}if(!P.isObject(t))throw new TypeError("data must be an object");return p(t),e}function B0(t){const e={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(t).replace(/[!'()~]|%20|%00/g,function(r){return e[r]})}function pg(t,e){this._pairs=[],t&&ed(t,this,e)}const bC=pg.prototype;bC.append=function(e,n){this._pairs.push([e,n])};bC.toString=function(e){const n=e?function(r){return e.call(this,r,B0)}:B0;return this._pairs.map(function(i){return n(i[0])+"="+n(i[1])},"").join("&")};function QL(t){return encodeURIComponent(t).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function xC(t,e,n){if(!e)return t;const r=n&&n.encode||QL,i=n&&n.serialize;let s;if(i?s=i(e,n):s=P.isURLSearchParams(e)?e.toString():new pg(e,n).toString(r),s){const o=t.indexOf("#");o!==-1&&(t=t.slice(0,o)),t+=(t.indexOf("?")===-1?"?":"&")+s}return t}class YL{constructor(){this.handlers=[]}use(e,n,r){return this.handlers.push({fulfilled:e,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(e){this.handlers[e]&&(this.handlers[e]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(e){P.forEach(this.handlers,function(r){r!==null&&e(r)})}}const z0=YL,OC={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},XL=typeof URLSearchParams<"u"?URLSearchParams:pg,ZL=typeof FormData<"u"?FormData:null,e5=typeof Blob<"u"?Blob:null,t5=(()=>{let t;return typeof navigator<"u"&&((t=navigator.product)==="ReactNative"||t==="NativeScript"||t==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),n5=(()=>typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function")(),Ln={isBrowser:!0,classes:{URLSearchParams:XL,FormData:ZL,Blob:e5},isStandardBrowserEnv:t5,isStandardBrowserWebWorkerEnv:n5,protocols:["http","https","file","blob","url","data"]};function r5(t,e){return ed(t,new Ln.classes.URLSearchParams,Object.assign({visitor:function(n,r,i,s){return Ln.isNode&&P.isBuffer(n)?(this.append(r,n.toString("base64")),!1):s.defaultVisitor.apply(this,arguments)}},e))}function i5(t){return P.matchAll(/\w+|\[(\w*)]/g,t).map(e=>e[0]==="[]"?"":e[1]||e[0])}function s5(t){const e={},n=Object.keys(t);let r;const i=n.length;let s;for(r=0;r<i;r++)s=n[r],e[s]=t[s];return e}function NC(t){function e(n,r,i,s){let o=n[s++];const l=Number.isFinite(+o),a=s>=n.length;return o=!o&&P.isArray(i)?i.length:o,a?(P.hasOwnProp(i,o)?i[o]=[i[o],r]:i[o]=r,!l):((!i[o]||!P.isObject(i[o]))&&(i[o]=[]),e(n,r,i[o],s)&&P.isArray(i[o])&&(i[o]=s5(i[o])),!l)}if(P.isFormData(t)&&P.isFunction(t.entries)){const n={};return P.forEachEntry(t,(r,i)=>{e(i5(r),i,n,0)}),n}return null}const o5={"Content-Type":void 0};function a5(t,e,n){if(P.isString(t))try{return(e||JSON.parse)(t),P.trim(t)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(t)}const td={transitional:OC,adapter:["xhr","http"],transformRequest:[function(e,n){const r=n.getContentType()||"",i=r.indexOf("application/json")>-1,s=P.isObject(e);if(s&&P.isHTMLForm(e)&&(e=new FormData(e)),P.isFormData(e))return i&&i?JSON.stringify(NC(e)):e;if(P.isArrayBuffer(e)||P.isBuffer(e)||P.isStream(e)||P.isFile(e)||P.isBlob(e))return e;if(P.isArrayBufferView(e))return e.buffer;if(P.isURLSearchParams(e))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let l;if(s){if(r.indexOf("application/x-www-form-urlencoded")>-1)return r5(e,this.formSerializer).toString();if((l=P.isFileList(e))||r.indexOf("multipart/form-data")>-1){const a=this.env&&this.env.FormData;return ed(l?{"files[]":e}:e,a&&new a,this.formSerializer)}}return s||i?(n.setContentType("application/json",!1),a5(e)):e}],transformResponse:[function(e){const n=this.transitional||td.transitional,r=n&&n.forcedJSONParsing,i=this.responseType==="json";if(e&&P.isString(e)&&(r&&!this.responseType||i)){const o=!(n&&n.silentJSONParsing)&&i;try{return JSON.parse(e)}catch(l){if(o)throw l.name==="SyntaxError"?he.from(l,he.ERR_BAD_RESPONSE,this,null,this.response):l}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Ln.classes.FormData,Blob:Ln.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};P.forEach(["delete","get","head"],function(e){td.headers[e]={}});P.forEach(["post","put","patch"],function(e){td.headers[e]=P.merge(o5)});const mg=td,l5=P.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),c5=t=>{const e={};let n,r,i;return t&&t.split(`
`).forEach(function(o){i=o.indexOf(":"),n=o.substring(0,i).trim().toLowerCase(),r=o.substring(i+1).trim(),!(!n||e[n]&&l5[n])&&(n==="set-cookie"?e[n]?e[n].push(r):e[n]=[r]:e[n]=e[n]?e[n]+", "+r:r)}),e},q0=Symbol("internals");function ao(t){return t&&String(t).trim().toLowerCase()}function sc(t){return t===!1||t==null?t:P.isArray(t)?t.map(sc):String(t)}function u5(t){const e=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(t);)e[r[1]]=r[2];return e}const d5=t=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(t.trim());function nh(t,e,n,r,i){if(P.isFunction(r))return r.call(this,e,n);if(i&&(e=n),!!P.isString(e)){if(P.isString(r))return e.indexOf(r)!==-1;if(P.isRegExp(r))return r.test(e)}}function h5(t){return t.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(e,n,r)=>n.toUpperCase()+r)}function f5(t,e){const n=P.toCamelCase(" "+e);["get","set","has"].forEach(r=>{Object.defineProperty(t,r+n,{value:function(i,s,o){return this[r].call(this,e,i,s,o)},configurable:!0})})}class nd{constructor(e){e&&this.set(e)}set(e,n,r){const i=this;function s(l,a,c){const u=ao(a);if(!u)throw new Error("header name must be a non-empty string");const d=P.findKey(i,u);(!d||i[d]===void 0||c===!0||c===void 0&&i[d]!==!1)&&(i[d||a]=sc(l))}const o=(l,a)=>P.forEach(l,(c,u)=>s(c,u,a));return P.isPlainObject(e)||e instanceof this.constructor?o(e,n):P.isString(e)&&(e=e.trim())&&!d5(e)?o(c5(e),n):e!=null&&s(n,e,r),this}get(e,n){if(e=ao(e),e){const r=P.findKey(this,e);if(r){const i=this[r];if(!n)return i;if(n===!0)return u5(i);if(P.isFunction(n))return n.call(this,i,r);if(P.isRegExp(n))return n.exec(i);throw new TypeError("parser must be boolean|regexp|function")}}}has(e,n){if(e=ao(e),e){const r=P.findKey(this,e);return!!(r&&this[r]!==void 0&&(!n||nh(this,this[r],r,n)))}return!1}delete(e,n){const r=this;let i=!1;function s(o){if(o=ao(o),o){const l=P.findKey(r,o);l&&(!n||nh(r,r[l],l,n))&&(delete r[l],i=!0)}}return P.isArray(e)?e.forEach(s):s(e),i}clear(e){const n=Object.keys(this);let r=n.length,i=!1;for(;r--;){const s=n[r];(!e||nh(this,this[s],s,e,!0))&&(delete this[s],i=!0)}return i}normalize(e){const n=this,r={};return P.forEach(this,(i,s)=>{const o=P.findKey(r,s);if(o){n[o]=sc(i),delete n[s];return}const l=e?h5(s):String(s).trim();l!==s&&delete n[s],n[l]=sc(i),r[l]=!0}),this}concat(...e){return this.constructor.concat(this,...e)}toJSON(e){const n=Object.create(null);return P.forEach(this,(r,i)=>{r!=null&&r!==!1&&(n[i]=e&&P.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([e,n])=>e+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(e){return e instanceof this?e:new this(e)}static concat(e,...n){const r=new this(e);return n.forEach(i=>r.set(i)),r}static accessor(e){const r=(this[q0]=this[q0]={accessors:{}}).accessors,i=this.prototype;function s(o){const l=ao(o);r[l]||(f5(i,o),r[l]=!0)}return P.isArray(e)?e.forEach(s):s(e),this}}nd.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);P.freezeMethods(nd.prototype);P.freezeMethods(nd);const sr=nd;function rh(t,e){const n=this||mg,r=e||n,i=sr.from(r.headers);let s=r.data;return P.forEach(t,function(l){s=l.call(n,s,i.normalize(),e?e.status:void 0)}),i.normalize(),s}function DC(t){return!!(t&&t.__CANCEL__)}function Xa(t,e,n){he.call(this,t??"canceled",he.ERR_CANCELED,e,n),this.name="CanceledError"}P.inherits(Xa,he,{__CANCEL__:!0});function p5(t,e,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?t(n):e(new he("Request failed with status code "+n.status,[he.ERR_BAD_REQUEST,he.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const m5=Ln.isStandardBrowserEnv?function(){return{write:function(n,r,i,s,o,l){const a=[];a.push(n+"="+encodeURIComponent(r)),P.isNumber(i)&&a.push("expires="+new Date(i).toGMTString()),P.isString(s)&&a.push("path="+s),P.isString(o)&&a.push("domain="+o),l===!0&&a.push("secure"),document.cookie=a.join("; ")},read:function(n){const r=document.cookie.match(new RegExp("(^|;\\s*)("+n+")=([^;]*)"));return r?decodeURIComponent(r[3]):null},remove:function(n){this.write(n,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function g5(t){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(t)}function y5(t,e){return e?t.replace(/\/+$/,"")+"/"+e.replace(/^\/+/,""):t}function MC(t,e){return t&&!g5(e)?y5(t,e):e}const v5=Ln.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),n=document.createElement("a");let r;function i(s){let o=s;return e&&(n.setAttribute("href",o),o=n.href),n.setAttribute("href",o),{href:n.href,protocol:n.protocol?n.protocol.replace(/:$/,""):"",host:n.host,search:n.search?n.search.replace(/^\?/,""):"",hash:n.hash?n.hash.replace(/^#/,""):"",hostname:n.hostname,port:n.port,pathname:n.pathname.charAt(0)==="/"?n.pathname:"/"+n.pathname}}return r=i(window.location.href),function(o){const l=P.isString(o)?i(o):o;return l.protocol===r.protocol&&l.host===r.host}}():function(){return function(){return!0}}();function _5(t){const e=/^([-+\w]{1,25})(:?\/\/|:)/.exec(t);return e&&e[1]||""}function E5(t,e){t=t||10;const n=new Array(t),r=new Array(t);let i=0,s=0,o;return e=e!==void 0?e:1e3,function(a){const c=Date.now(),u=r[s];o||(o=c),n[i]=a,r[i]=c;let d=s,f=0;for(;d!==i;)f+=n[d++],d=d%t;if(i=(i+1)%t,i===s&&(s=(s+1)%t),c-o<e)return;const p=u&&c-u;return p?Math.round(f*1e3/p):void 0}}function H0(t,e){let n=0;const r=E5(50,250);return i=>{const s=i.loaded,o=i.lengthComputable?i.total:void 0,l=s-n,a=r(l),c=s<=o;n=s;const u={loaded:s,total:o,progress:o?s/o:void 0,bytes:l,rate:a||void 0,estimated:a&&o&&c?(o-s)/a:void 0,event:i};u[e?"download":"upload"]=!0,t(u)}}const T5=typeof XMLHttpRequest<"u",S5=T5&&function(t){return new Promise(function(n,r){let i=t.data;const s=sr.from(t.headers).normalize(),o=t.responseType;let l;function a(){t.cancelToken&&t.cancelToken.unsubscribe(l),t.signal&&t.signal.removeEventListener("abort",l)}P.isFormData(i)&&(Ln.isStandardBrowserEnv||Ln.isStandardBrowserWebWorkerEnv?s.setContentType(!1):s.setContentType("multipart/form-data;",!1));let c=new XMLHttpRequest;if(t.auth){const p=t.auth.username||"",y=t.auth.password?unescape(encodeURIComponent(t.auth.password)):"";s.set("Authorization","Basic "+btoa(p+":"+y))}const u=MC(t.baseURL,t.url);c.open(t.method.toUpperCase(),xC(u,t.params,t.paramsSerializer),!0),c.timeout=t.timeout;function d(){if(!c)return;const p=sr.from("getAllResponseHeaders"in c&&c.getAllResponseHeaders()),v={data:!o||o==="text"||o==="json"?c.responseText:c.response,status:c.status,statusText:c.statusText,headers:p,config:t,request:c};p5(function(m){n(m),a()},function(m){r(m),a()},v),c=null}if("onloadend"in c?c.onloadend=d:c.onreadystatechange=function(){!c||c.readyState!==4||c.status===0&&!(c.responseURL&&c.responseURL.indexOf("file:")===0)||setTimeout(d)},c.onabort=function(){c&&(r(new he("Request aborted",he.ECONNABORTED,t,c)),c=null)},c.onerror=function(){r(new he("Network Error",he.ERR_NETWORK,t,c)),c=null},c.ontimeout=function(){let y=t.timeout?"timeout of "+t.timeout+"ms exceeded":"timeout exceeded";const v=t.transitional||OC;t.timeoutErrorMessage&&(y=t.timeoutErrorMessage),r(new he(y,v.clarifyTimeoutError?he.ETIMEDOUT:he.ECONNABORTED,t,c)),c=null},Ln.isStandardBrowserEnv){const p=(t.withCredentials||v5(u))&&t.xsrfCookieName&&m5.read(t.xsrfCookieName);p&&s.set(t.xsrfHeaderName,p)}i===void 0&&s.setContentType(null),"setRequestHeader"in c&&P.forEach(s.toJSON(),function(y,v){c.setRequestHeader(v,y)}),P.isUndefined(t.withCredentials)||(c.withCredentials=!!t.withCredentials),o&&o!=="json"&&(c.responseType=t.responseType),typeof t.onDownloadProgress=="function"&&c.addEventListener("progress",H0(t.onDownloadProgress,!0)),typeof t.onUploadProgress=="function"&&c.upload&&c.upload.addEventListener("progress",H0(t.onUploadProgress)),(t.cancelToken||t.signal)&&(l=p=>{c&&(r(!p||p.type?new Xa(null,t,c):p),c.abort(),c=null)},t.cancelToken&&t.cancelToken.subscribe(l),t.signal&&(t.signal.aborted?l():t.signal.addEventListener("abort",l)));const f=_5(u);if(f&&Ln.protocols.indexOf(f)===-1){r(new he("Unsupported protocol "+f+":",he.ERR_BAD_REQUEST,t));return}c.send(i||null)})},oc={http:KL,xhr:S5};P.forEach(oc,(t,e)=>{if(t){try{Object.defineProperty(t,"name",{value:e})}catch{}Object.defineProperty(t,"adapterName",{value:e})}});const w5={getAdapter:t=>{t=P.isArray(t)?t:[t];const{length:e}=t;let n,r;for(let i=0;i<e&&(n=t[i],!(r=P.isString(n)?oc[n.toLowerCase()]:n));i++);if(!r)throw r===!1?new he(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(P.hasOwnProp(oc,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!P.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:oc};function ih(t){if(t.cancelToken&&t.cancelToken.throwIfRequested(),t.signal&&t.signal.aborted)throw new Xa(null,t)}function W0(t){return ih(t),t.headers=sr.from(t.headers),t.data=rh.call(t,t.transformRequest),["post","put","patch"].indexOf(t.method)!==-1&&t.headers.setContentType("application/x-www-form-urlencoded",!1),w5.getAdapter(t.adapter||mg.adapter)(t).then(function(r){return ih(t),r.data=rh.call(t,t.transformResponse,r),r.headers=sr.from(r.headers),r},function(r){return DC(r)||(ih(t),r&&r.response&&(r.response.data=rh.call(t,t.transformResponse,r.response),r.response.headers=sr.from(r.response.headers))),Promise.reject(r)})}const K0=t=>t instanceof sr?t.toJSON():t;function Os(t,e){e=e||{};const n={};function r(c,u,d){return P.isPlainObject(c)&&P.isPlainObject(u)?P.merge.call({caseless:d},c,u):P.isPlainObject(u)?P.merge({},u):P.isArray(u)?u.slice():u}function i(c,u,d){if(P.isUndefined(u)){if(!P.isUndefined(c))return r(void 0,c,d)}else return r(c,u,d)}function s(c,u){if(!P.isUndefined(u))return r(void 0,u)}function o(c,u){if(P.isUndefined(u)){if(!P.isUndefined(c))return r(void 0,c)}else return r(void 0,u)}function l(c,u,d){if(d in e)return r(c,u);if(d in t)return r(void 0,c)}const a={url:s,method:s,data:s,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(c,u)=>i(K0(c),K0(u),!0)};return P.forEach(Object.keys(Object.assign({},t,e)),function(u){const d=a[u]||i,f=d(t[u],e[u],u);P.isUndefined(f)&&d!==l||(n[u]=f)}),n}const LC="1.4.0",gg={};["object","boolean","number","function","string","symbol"].forEach((t,e)=>{gg[t]=function(r){return typeof r===t||"a"+(e<1?"n ":" ")+t}});const G0={};gg.transitional=function(e,n,r){function i(s,o){return"[Axios v"+LC+"] Transitional option '"+s+"'"+o+(r?". "+r:"")}return(s,o,l)=>{if(e===!1)throw new he(i(o," has been removed"+(n?" in "+n:"")),he.ERR_DEPRECATED);return n&&!G0[o]&&(G0[o]=!0,console.warn(i(o," has been deprecated since v"+n+" and will be removed in the near future"))),e?e(s,o,l):!0}};function C5(t,e,n){if(typeof t!="object")throw new he("options must be an object",he.ERR_BAD_OPTION_VALUE);const r=Object.keys(t);let i=r.length;for(;i-- >0;){const s=r[i],o=e[s];if(o){const l=t[s],a=l===void 0||o(l,s,t);if(a!==!0)throw new he("option "+s+" must be "+a,he.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new he("Unknown option "+s,he.ERR_BAD_OPTION)}}const Gf={assertOptions:C5,validators:gg},_r=Gf.validators;class iu{constructor(e){this.defaults=e,this.interceptors={request:new z0,response:new z0}}request(e,n){typeof e=="string"?(n=n||{},n.url=e):n=e||{},n=Os(this.defaults,n);const{transitional:r,paramsSerializer:i,headers:s}=n;r!==void 0&&Gf.assertOptions(r,{silentJSONParsing:_r.transitional(_r.boolean),forcedJSONParsing:_r.transitional(_r.boolean),clarifyTimeoutError:_r.transitional(_r.boolean)},!1),i!=null&&(P.isFunction(i)?n.paramsSerializer={serialize:i}:Gf.assertOptions(i,{encode:_r.function,serialize:_r.function},!0)),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o;o=s&&P.merge(s.common,s[n.method]),o&&P.forEach(["delete","get","head","post","put","patch","common"],y=>{delete s[y]}),n.headers=sr.concat(o,s);const l=[];let a=!0;this.interceptors.request.forEach(function(v){typeof v.runWhen=="function"&&v.runWhen(n)===!1||(a=a&&v.synchronous,l.unshift(v.fulfilled,v.rejected))});const c=[];this.interceptors.response.forEach(function(v){c.push(v.fulfilled,v.rejected)});let u,d=0,f;if(!a){const y=[W0.bind(this),void 0];for(y.unshift.apply(y,l),y.push.apply(y,c),f=y.length,u=Promise.resolve(n);d<f;)u=u.then(y[d++],y[d++]);return u}f=l.length;let p=n;for(d=0;d<f;){const y=l[d++],v=l[d++];try{p=y(p)}catch(C){v.call(this,C);break}}try{u=W0.call(this,p)}catch(y){return Promise.reject(y)}for(d=0,f=c.length;d<f;)u=u.then(c[d++],c[d++]);return u}getUri(e){e=Os(this.defaults,e);const n=MC(e.baseURL,e.url);return xC(n,e.params,e.paramsSerializer)}}P.forEach(["delete","get","head","options"],function(e){iu.prototype[e]=function(n,r){return this.request(Os(r||{},{method:e,url:n,data:(r||{}).data}))}});P.forEach(["post","put","patch"],function(e){function n(r){return function(s,o,l){return this.request(Os(l||{},{method:e,headers:r?{"Content-Type":"multipart/form-data"}:{},url:s,data:o}))}}iu.prototype[e]=n(),iu.prototype[e+"Form"]=n(!0)});const ac=iu;class yg{constructor(e){if(typeof e!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(i=>{if(!r._listeners)return;let s=r._listeners.length;for(;s-- >0;)r._listeners[s](i);r._listeners=null}),this.promise.then=i=>{let s;const o=new Promise(l=>{r.subscribe(l),s=l}).then(i);return o.cancel=function(){r.unsubscribe(s)},o},e(function(s,o,l){r.reason||(r.reason=new Xa(s,o,l),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(e){if(this.reason){e(this.reason);return}this._listeners?this._listeners.push(e):this._listeners=[e]}unsubscribe(e){if(!this._listeners)return;const n=this._listeners.indexOf(e);n!==-1&&this._listeners.splice(n,1)}static source(){let e;return{token:new yg(function(i){e=i}),cancel:e}}}const P5=yg;function R5(t){return function(n){return t.apply(null,n)}}function k5(t){return P.isObject(t)&&t.isAxiosError===!0}const Jf={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(Jf).forEach(([t,e])=>{Jf[e]=t});const I5=Jf;function jC(t){const e=new ac(t),n=_C(ac.prototype.request,e);return P.extend(n,ac.prototype,e,{allOwnKeys:!0}),P.extend(n,e,null,{allOwnKeys:!0}),n.create=function(i){return jC(Os(t,i))},n}const Ze=jC(mg);Ze.Axios=ac;Ze.CanceledError=Xa;Ze.CancelToken=P5;Ze.isCancel=DC;Ze.VERSION=LC;Ze.toFormData=ed;Ze.AxiosError=he;Ze.Cancel=Ze.CanceledError;Ze.all=function(e){return Promise.all(e)};Ze.spread=R5;Ze.isAxiosError=k5;Ze.mergeConfig=Os;Ze.AxiosHeaders=sr;Ze.formToJSON=t=>NC(P.isHTMLForm(t)?new FormData(t):t);Ze.HttpStatusCode=I5;Ze.default=Ze;const J0=Ze;class A5{constructor(e,n,r){we(this,"id");we(this,"username");we(this,"icon");we(this,"position");we(this,"balance");we(this,"properties");we(this,"isInJail");we(this,"jailTurnsRemaining");we(this,"getoutCards");this.id=e,this.username=n,this.icon=r,this.position=0,this.balance=1500,this.properties=[],this.isInJail=!1,this.jailTurnsRemaining=0,this.getoutCards=0}to_json(){return{id:this.id,username:this.username,icon:this.icon,position:this.position,balance:this.balance,properties:this.properties,isInJail:this.isInJail,jailTurnsRemaining:this.jailTurnsRemaining,getoutCards:this.getoutCards}}from_json(e){this.id==e.id&&(this.position=e.position,this.balance=e.balance,this.properties=e.properties,this.isInJail=e.isInJail,this.jailTurnsRemaining=e.jailTurnsRemaining,this.getoutCards=e.getoutCards)}}async function b5(t,e){const n=()=>{async function f(){try{return(await J0.get(`${xn.JSONBin.url}/latest`,{headers:{"X-Master-Key":xn.JSONBin.masterKey,"X-Access-Key":xn.JSONBin.accessKey}})).data.record}catch(m){console.error("Error reading data:",m)}}async function p(m){try{await J0.put(`${xn.JSONBin.url}`,m,{headers:{"Content-Type":"application/json","X-Master-Key":xn.JSONBin.masterKey,"X-Access-Key":xn.JSONBin.accessKey}})}catch(g){console.error("Error writing data:",g)}}async function y(m){const g=await f();Object.keys(g).includes(m)&&delete g[m],await p(g)}async function v(){await p({clear:new Date().toISOString()})}async function C(m){function g(I){const w="ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";let A="";for(let S=0;S<I;S++){const Q=Math.floor(Math.random()*w.length);A+=w[Q]}return A}var E=g(6);const T=await f();for(;Object.keys(T).includes(E);)E=g(6);const R={host:m,mode:"p2p"};if(Object.values(T).includes(R))for(const I of Object.entries(T))I[1]===R&&delete T[I[0]];return T[E]=R,await p(T),E}return{Write:p,Read:f,Delete:y,Generate:C,Clear:v}},r=t>0?Math.min(t,6):6;console.log(`Max Players is ${r}...
`);const i=new Map,s=[];let o="",l=!1,a=0;function c(){const f=new Date,p=String(f.getHours()).padStart(2,"0"),y=String(f.getMinutes()).padStart(2,"0");return`${p}:${y}`}function u(f,p){for(const y of Array.from(i.values()))y.socket.emit(f,p)}function d(f,p,y){for(const v of Array.from(i.entries()))v[0]!=f&&v[1].socket.emit(p,y)}new oA(async f=>{var p=await n().Generate(f);window.addEventListener("beforeunload",async()=>{await n().Delete(p)}),e==null||e(p)},f=>{const p=l?1:i.size>=r?2:0;console.log("emitiing state"),f.emit("state",p),p===0?(f.on("name",y=>{try{const v=new A5(f.id,y,Array.from(i.keys()).length);(o===""||!Array.from(i.keys()).includes(o))&&(o=f.id),i.set(f.id,{player:v,socket:f,ready:!1,positions:{x:0,y:0}}),console.log(`{${c()}} [${f.id}] Player "${v.username}" has connected.`),s.push(`{${c()}} [${f.id}] Player "${v.username}" has connected.`);const C=[];for(const m of Array.from(i.values()))C.push(m.player.to_json());f.emit("initials",{turn_id:o,other_players:C}),d(f.id,"new-player",v.to_json()),f.on("unjail",m=>{try{u("unjail",{to:v.id,option:m})}catch(g){console.log(g)}}),f.on("roll_dice",()=>{try{const g=Math.floor(Math.random()*6)+1,E=Math.floor(Math.random()*6)+1,T=`{${c()}} [${f.id}] Player "${v.username}" rolled a [${g},${E}].`;s.push(T),console.log(T);const _=g+E;var m=(v.position+_)%40;u("dice_roll_result",{listOfNums:[g,E,m],turnId:o})}catch(g){console.log(g)}}),f.on("chorch_roll",m=>{try{const g=m?rr.chance:rr.communitychest,E=g[Math.floor(Math.random()*g.length)];u("chorch_result",{element:E,is_chance:m,turnId:o})}catch(g){console.log(g)}}),f.on("finish-turn",m=>{try{if(v.from_json(m),o!=f.id)return;const E=Array.from(i.values()).filter(T=>T.player.balance>0).map(T=>T.player.id);var g=E.indexOf(f.id);g=(g+1)%E.length,o=E[g],u("turn-finished",{from:f.id,turnId:o,pJson:v.to_json()})}catch(E){console.log(E)}}),f.on("message",m=>{var g;try{console.log(`{${c()}} [${f.id}] Player "${(g=i.get(f.id))==null?void 0:g.player.username}" has messaged "${m}".`),u("message",{from:v.username,message:m})}catch(E){console.log(E)}}),f.on("pay",m=>{var g,E;try{const T=(g=i.get(m.to))==null?void 0:g.player,_=(E=i.get(m.from))==null?void 0:E.player;if(T===void 0||(T.balance+=m.balance,_===void 0))return;_.balance-=m.balance,u("member_updating",{playerId:m.to,animation:"recieveMoney",additional_props:[m.from],pJson:[T.to_json(),_.to_json()]})}catch(T){console.log(T)}}),f.on("mouse",m=>{const g=i.get(f.id);g!==void 0&&(g.positions=m,i.set(f.id,g),d(f.id,"mouse",{id:f.id,x:m.x,y:m.y}))})}catch(v){console.log(v)}}),f.on("ready",y=>{try{const v=i.get(f.id);if(v===void 0)return;y.ready!==void 0&&(v.ready=y.ready),y.mode!==void 0&&(a=y.mode),i.set(f.id,v);const C=Array.from(i.values()).map(m=>m.ready);u("ready",{id:f.id,state:v.ready,selectedMode:a}),C.includes(!1)||(console.log("Game has Started, No more Players can join the Server",Array.from(i.keys())),l=!0,u("start-game",{}))}catch(v){console.log(v)}})):f.disconnect(),f.on("disconnect",()=>{var v,C;try{if(i.has(f.id)&&(console.log(`{${c()}} [${f.id}] Player "${(v=i.get(f.id))==null?void 0:v.player.username}" has disconnected.`),s.push(`{${c()}} [${f.id}] Player "${(C=i.get(f.id))==null?void 0:C.player.username}" has disconnected.`)),i.delete(f.id),o===f.id){const m=Array.from(i.values()).filter(g=>g.player.balance>0).map(g=>g.player.id);var y=m.indexOf(f.id);y=(y+1)%m.length,o=m[y]}u("disconnected-player",{id:f.id,turn:o}),Array.from(i.keys()).length===0&&(l&&console.log("Game has Ended. Server is currently Open to new Players"),l=!1)}catch(m){console.log(m)}})})}function x5(){var t;try{t=JSON.parse(document.cookie)}catch{t={login:{remember:!1,id:""}},document.cookie=JSON.stringify(t)}const e=M.useRef(null),[n,r]=M.useState(),[i,s]=M.useState(""),[o,l]=M.useState(""),[a,c]=M.useState(),[u,d]=M.useState(t.login.remember),[f,p]=M.useState(),[y,v]=M.useState(!1),[C,m]=M.useState(!1),[g,E]=M.useState(0),[T,_]=M.useState(!1),[R,I]=M.useState(6);M.useEffect(()=>{const A=CT(xn.firebase);c(A);var S;try{if(S=JSON.parse(document.cookie),S.login.remember&&S.login.id.length>0){const re=Hf(A);vC(qf(re,`Users/${S.login.id}`)).then(ye=>{const ce=ye.data();p(ce),s(ce.name)})}}catch{}},[]),M.useEffect(()=>{},[]);const w=async()=>{var ye,ce;async function A(){return(await(await fetch(`${xn.JSONBin.url}/latest`,{method:"GET",headers:{"X-Master-Key":xn.JSONBin.masterKey,"X-Access-Key":xn.JSONBin.accessKey}})).json()).record}if(i.replace(" ","").length===0){(ye=e.current)==null||ye.message("please add your name before joining","info",2);return}try{const K=JSON.parse(document.cookie);if(f===void 0)throw Error("undefined");console.log(JSON.stringify(f)),K.login={id:f.id,remember:u},document.cookie=JSON.stringify(K)}catch{const K={login:{id:"",remember:!1}};document.cookie=JSON.stringify(K)}v(!0);const S=await A();if(!Object.keys(S).includes(o)){(ce=e.current)==null||ce.message("code isnt available on systems","info",2);return}const Q=S[o];console.log(Q);var re;Q.mode==="io"?re=Wl("https://"+Q.host,{rejectUnauthorized:!1}):re=await sA(Q.host),re.on("state",K=>{var Te,Pe,b;switch(K){case 0:r(re),m(!0),v(!1);break;case 1:(Te=e.current)==null||Te.message("the game has already begun","error",2,()=>{v(!1)}),re.disconnect();break;case 2:(Pe=e.current)==null||Pe.message("too many players on the server","error",2,()=>{v(!1)}),re.disconnect();break;default:(b=e.current)==null||b.message("unkown error","error",2),re.disconnect(),v(!1);break}}),re.on("connect_error",()=>{var K;(K=e.current)==null||K.message("the server does not exist or is unreachable","error",2,()=>{v(!1)}),re.disconnect()}),re.on("connect_timeout",()=>{var K;(K=e.current)==null||K.message("the server took too long to respond","error",2,()=>{v(!1)}),re.disconnect()})};return M.useEffect(()=>{const A=new URLSearchParams(document.location.search);A.has("ip")&&l(A.get("ip")??"")},[]),n!==void 0&&C===!0?h.jsx(Dk,{socket:n,name:i}):h.jsxs(h.Fragment,{children:[h.jsx(u1,{ref:e}),h.jsxs("div",{className:"entry",children:[h.jsxs("nav",{children:[h.jsx("button",{"data-select":g===0,onClick:()=>{E(0)},"data-tooltip-hover":"play",children:h.jsx("img",{src:"./icon.png",alt:""})}),h.jsx("button",{"data-select":g===1,onClick:()=>{E(1)},"data-tooltip-hover":"server",children:h.jsx("img",{src:"./server.png",alt:""})}),h.jsx("button",{"data-select":g===2,onClick:()=>{E(2)},"data-tooltip-hover":"account",children:h.jsx("img",{src:"./human.png",alt:""})}),h.jsx("br",{}),h.jsx("button",{"data-select":g===3,onClick:()=>{E(3)},"data-tooltip-hover":"credits",children:h.jsx("img",{src:"./credits.png",alt:""})}),h.jsx("button",{"data-select":g===4,onClick:()=>{E(4)},"data-tooltip-hover":"settings",children:h.jsx("img",{src:"./settings.png",alt:""})})]}),h.jsx("main",{children:g===4?h.jsx(c1,{}):g===3?h.jsxs(h.Fragment,{children:[h.jsx("p",{children:"This Project was made by Itay Layzerovich"}),h.jsxs("div",{style:{color:"white"},children:[h.jsxs("p",{children:[" ","As the developer of this Monopoly game project, it is essential to clarify the following legal aspects:"," "]}),h.jsxs("ol",{children:[h.jsxs("li",{children:[h.jsx("i",{children:"Game Mechanics and Rules:"})," The game mechanics and rules of Monopoly have been widely known and played for many years. This project aims to offer a digital rendition of the classic Monopoly experience, utilizing original concepts that have become common knowledge."]}),h.jsxs("li",{children:[" ",h.jsx("i",{children:"Original Monopoly Intellectual Property:"}),"The Monopoly board game is a registered trademark and copyrighted property of Hasbro Inc. and its respective licensors. This project is not an official representation or product of Hasbro Inc., and no direct affiliation or endorsement is implied."]}),h.jsxs("li",{children:[h.jsx("i",{children:"License and Usage:"})," This Monopoly game project is developed with the intent of being an educational and personal project. It is offered as a free-to-use, open-source initiative for learning purposes, and no commercial use or distribution is intended."]}),h.jsxs("li",{children:[h.jsx("i",{children:"Fair Use and Transformative Work:"}),'This project may fall under the category of "fair use" as it is a transformative work that provides a unique digital experience based on the original Monopoly game. It is not intended to compete with or harm the commercial interests of the original trademark owner.']}),h.jsxs("li",{children:[h.jsx("i",{children:"No Warranty or Liability:"})," While efforts have been made to create an enjoyable and bug-free experience, this project is provided as-is without any warranty. The developer shall not be liable for any issues or damages arising from the use of this software."]}),h.jsxs("li",{children:[h.jsx("i",{children:"Attribution:"})," This project may include third-party libraries or assets that are appropriately credited and licensed under their respective terms. Any attributions and licenses should be preserved as required by the respective authors."]}),h.jsxs("li",{children:[h.jsx("i",{children:"Personal Responsibility:"})," As the developer, you are responsible for complying with all applicable laws, including intellectual property laws, and ensuring that your usage of this project is within legal boundaries."]})]})]})]}):g===2?h.jsxs(h.Fragment,{children:[h.jsxs("header",{children:[h.jsx("p",{style:{fontSize:12,marginBottom:0},children:"Account"}),h.jsx("h3",{children:"Login"})]}),h.jsx(aL,{admin:a,currentUser:f,onLogout:()=>{d(!1),p(void 0),s("")},onLogin:(A,S)=>{if(E(0),d(S),p(A),s(A.name),!!S)try{var Q=JSON.parse(document.cookie);Q.login={remember:!0,id:A.id},document.cookie=JSON.stringify(Q)}catch{var Q={login:{remember:!0,id:A.id}};document.cookie=JSON.stringify(Q)}}})]}):g===1?h.jsxs(h.Fragment,{children:[h.jsxs("header",{children:[h.jsx("p",{style:{fontSize:12,marginBottom:0},children:"[peer 2 peer] hosting"}),h.jsx("h3",{children:"Run A Server"})]}),T?h.jsx(h.Fragment,{children:h.jsxs("p",{children:["server is already running, check the console.",h.jsxs("center",{children:[" ",h.jsx("button",{style:{backgroundColor:"red"},onClick:()=>{document.location.reload()},children:"Kill Server"})]})]})}):h.jsxs(h.Fragment,{children:[h.jsx("p",{children:"all the servers logs will can be seen in the console"}),h.jsx("table",{children:h.jsxs("tr",{children:[h.jsx("td",{children:"PlayersCount"}),h.jsx("td",{children:h.jsx(Cr,{onChange:A=>{I(parseInt(A.currentTarget.value))},max:6,min:1,defaultValue:R,step:1})})]})}),h.jsxs("center",{children:[" ",h.jsx("button",{onClick:A=>{A.currentTarget.disabled=!0,A.currentTarget.innerHTML="Starting Server",b5(R,S=>{E(0),l(S),_(!0)})},children:"Run Server"})]})]})]}):h.jsxs(h.Fragment,{children:[h.jsxs("header",{children:[h.jsx("p",{style:{fontSize:9},children:"22.8.23 - Serverless"}),"Welcome to the ",h.jsx("h3",{children:"MONOPOLY"})," Game"]}),h.jsx(lL,{disabled:y,fbUser:f,joinBots:()=>{},joinViaCode:()=>{w()},SetAddress:l,SetName:s,addr:o,name:i})]})})]})]})}document.title="Monopoly";sh.createRoot(document.getElementById("root")).render(h.jsx(x5,{}));
